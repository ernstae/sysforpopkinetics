SUFFIXES = .dox
.html.dox : 
	doxygen $<

SOURCE = ../libspkcompiler/client.h \
         ../libspkcompiler/ClientTranslator.h \
         ../driver/compiler.cpp \
         ../libspkcompiler/emit_IndData.h \
         ../libspkcompiler/ExpNodeCarrier.h \
         ../libspkcompiler/ExpTreeGenerator.h \
         ../libspkcompiler/read_content.h \
         ../libspkcompiler/nonmem/explang.cpp \
         ../libspkcompiler/nonmem/lex_explang.c \
         ../libspkcompiler/nonmem/nonmem.h \
         ../libspkcompiler/nonmem/explang.ypp \
         ../libspkcompiler/nonmem/lex_explang.l \
         ../libspkcompiler/nonmem/NonmemTranslator.h \
         ../libspkcompiler/nonmem/read_nonmem_data.h \
         ../libspkcompiler/nonmem/read_nonmem_driver.h \
         ../libspkcompiler/nonmem/read_nonmem_model.h \
         ../libspkcompiler/nonmem/emit_nonmem_driver.h \
         ../libspkcompiler/nonmem/emit_nonmem_model.h \
         ../libspkcompiler/SpkCompilerUtil.h \
         ../libspkcompiler/SpkMLToCpp.h \
         ../libspkcompiler/SpkParameters.h \
         ../libspkcompiler/Symbol.h \
         ../libspkcompiler/SymbolTable.h 

html : compiler_html spksourceml_html spkreportml_html

compiler_html : SpkCompiler.dox $(SOURCE) 
	doxygen SpkCompiler.dox

spksourceml_html : SpkSourceML.dtd
	javac -classpath ./tools/dtddoc/java/dtdparser119.jar:./tools/dtddoc/java/jakarta-oro-2.0.6.jar ./tools/dtddoc/java/DTDDoc.java
	java -classpath ./tools/dtddoc/java/dtdparser119.jar:./tools/dtddoc/java/jakarta-oro-2.0.6.jar:.:./tools/dtddoc/java DTDDoc SpkSourceML.dtd SpkSourceML_html

spkreportml_html : SpkReportML.dtd
	javac -classpath ./tools/dtddoc/java/dtdparser119.jar:./tools/dtddoc/java/jakarta-oro-2.0.6.jar ./tools/dtddoc/java/DTDDoc.java
	java -classpath ./tools/dtddoc/java/dtdparser119.jar:./tools/dtddoc/java/jakarta-oro-2.0.6.jar:.:./tools/dtddoc/java DTDDoc SpkReportML.dtd SpkReportML_html
clean : 
	rm -r html
	rm -r latex
	rm -r SpkML_html
	rm -r SpkSourceML_html
	rm -r SpkReportML_html

all  : SpkCompiler.dox
	rm -r html
	rm -r latex
	rm -r SpkML_html
	doxygen SpkCompiler.dox
	javac -classpath ./tools/dtddoc/java/dtdparser119.jar:./tools/dtddoc/java/jakarta-oro-2.0.6.jar ./tools/dtddoc/java/DTDDoc.java
	java -classpath ./tools/dtddoc/java/dtdparser119.jar:./tools/dtddoc/java/jakarta-oro-2.0.6.jar:.:./tools/dtddoc/java DTDDoc SpkSourceML.dtd SpkSourceML_html
	java -classpath ./tools/dtddoc/java/dtdparser119.jar:./tools/dtddoc/java/jakarta-oro-2.0.6.jar:.:./tools/dtddoc/java DTDDoc SpkReportML.dtd SpkReportML_html
