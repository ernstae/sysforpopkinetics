<HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created on April 2, 2002 by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HEAD>
<TITLE>GNU Emacs Manual: Major Modes</TITLE>

<META NAME="description" CONTENT="GNU Emacs Manual: Major Modes">
<META NAME="keywords" CONTENT="GNU Emacs Manual: Major Modes">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY LANG="EN" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC227"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_20.html#SEC226"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_21.html#SEC228"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_20.html#SEC213"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_22.html#SEC229"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> R. Major Modes </H1>
<!--docid::SEC227::-->
<P>

  Emacs provides many alternative <EM>major modes</EM>, each of which
customizes Emacs for editing text of a particular sort.  The major modes
are mutually exclusive, and each buffer has one major mode at any time.
The mode line normally shows the name of the current major mode, in
parentheses (see section <A HREF="emacs_5.html#SEC11">B.3 The Mode Line</A>).
</P><P>

  The least specialized major mode is called <EM>Fundamental mode</EM>.
This mode has no mode-specific redefinitions or variable settings, so
that each Emacs command behaves in its most general manner, and each
option is in its default state.  For editing text of a specific type
that Emacs knows about, such as Lisp code or English text, you should
switch to the appropriate major mode, such as Lisp mode or Text mode.
</P><P>

  Selecting a major mode changes the meanings of a few keys to become
more specifically adapted to the language being edited.  The ones that
are changed frequently are <KBD>TAB</KBD>, <KBD>DEL</KBD>, and <KBD>C-j</KBD>.  The
prefix key <KBD>C-c</KBD> normally contains mode-specific commands.  In
addition, the commands which handle comments use the mode to determine
how comments are to be delimited.  Many major modes redefine the
syntactical properties of characters appearing in the buffer.
See section <A HREF="emacs_33.html#SEC504">AD.6 The Syntax Table</A>.
</P><P>

  The major modes fall into three major groups.  The first group
contains modes for normal text, either plain or with mark-up.  It
includes Text mode, HTML mode, SGML mode, TeX mode and Outline
mode.  The second group contains modes for specific programming
languages.  These include Lisp mode (which has several variants), C
mode, Fortran mode, and others.  The remaining major modes are not
intended for use on users' files; they are used in buffers created for
specific purposes by Emacs, such as Dired mode for buffers made by
Dired (see section <A HREF="emacs_31.html#SEC396">AB. Dired, the Directory Editor</A>), Mail mode for buffers made by <KBD>C-x m</KBD>
(see section <A HREF="emacs_29.html#SEC363">Z. Sending Mail</A>), and Shell mode for buffers used for
communicating with an inferior shell process (see section <A HREF="emacs_32.html#SEC444">AC.15.2 Interactive Inferior Shell</A>).
</P><P>

  Most programming-language major modes specify that only blank lines
separate paragraphs.  This is to make the paragraph commands useful.
(See section <A HREF="emacs_23.html#SEC236">T.3 Paragraphs</A>.)  They also cause Auto Fill mode to use the
definition of <KBD>TAB</KBD> to indent the new lines it creates.  This is
because most lines in a program are usually indented
(see section <A HREF="emacs_22.html#SEC229">S. Indentation</A>).
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_21.html#SEC228">R.1 How Major Modes are Chosen</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How major modes are specified or chosen.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Choosing Modes"></A>
<HR SIZE="6">
<A NAME="SEC228"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_21.html#SEC227"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_22.html#SEC229"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_21.html#SEC227"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_21.html#SEC227"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_22.html#SEC229"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> R.1 How Major Modes are Chosen </H2>
<!--docid::SEC228::-->
<P>

<A NAME="IDX1068"></A>
  You can select a major mode explicitly for the current buffer, but
most of the time Emacs determines which mode to use based on the file
name or on special text in the file.
</P><P>

  Explicit selection of a new major mode is done with a <KBD>M-x</KBD> command.
From the name of a major mode, add <CODE>-mode</CODE> to get the name of a
command to select that mode.  Thus, you can enter Lisp mode by executing
<KBD>M-x lisp-mode</KBD>.
</P><P>

<A NAME="IDX1069"></A>
  When you visit a file, Emacs usually chooses the right major mode based
on the file's name.  For example, files whose names end in <SAMP>`.c'</SAMP> are
edited in C mode.  The correspondence between file names and major modes is
controlled by the variable <CODE>auto-mode-alist</CODE>.  Its value is a list in
which each element has this form,
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(<VAR>regexp</VAR> . <VAR>mode-function</VAR>)
</pre></td></tr></table></P><P>

or this form,
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(<VAR>regexp</VAR> <VAR>mode-function</VAR> <VAR>flag</VAR>)
</pre></td></tr></table></P><P>

For example, one element normally found in the list has the form
<CODE>(<TT>"\\.c\\'"</TT> . c-mode)</CODE>, and it is responsible for selecting C
mode for files whose names end in <TT>`.c'</TT>.  (Note that <SAMP>`\\'</SAMP> is
needed in Lisp syntax to include a <SAMP>`\'</SAMP> in the string, which must
be used to suppress the special meaning of <SAMP>`.'</SAMP> in regexps.)  If the
element has the form <CODE>(<VAR>regexp</VAR> <VAR>mode-function</VAR>
<VAR>flag</VAR>)</CODE> and <VAR>flag</VAR> is non-<CODE>nil</CODE>, then after calling
<VAR>mode-function</VAR>, the suffix that matched <VAR>regexp</VAR> is discarded
and the list is searched again for another match.
</P><P>

  You can specify which major mode should be used for editing a certain
file by a special sort of text in the first nonblank line of the file.  The
mode name should appear in this line both preceded and followed by
<SAMP>`-*-'</SAMP>.  Other text may appear on the line as well.  For example,
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>;-*-Lisp-*-
</pre></td></tr></table></P><P>

tells Emacs to use Lisp mode.  Such an explicit specification overrides
any defaults based on the file name.  Note how the semicolon is used
to make Lisp treat this line as a comment.
</P><P>

  Another format of mode specification is
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>-*- mode: <VAR>modename</VAR>;-*-
</pre></td></tr></table></P><P>

which allows you to specify local variables as well, like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>-*- mode: <VAR>modename</VAR>; <VAR>var</VAR>: <VAR>value</VAR>; <small>...</small> -*-
</pre></td></tr></table></P><P>

See section <A HREF="emacs_33.html#SEC486">AD.2.5 Local Variables in Files</A>, for more information about this.
</P><P>

<A NAME="IDX1070"></A>
  When a file's contents begin with <SAMP>`#!'</SAMP>, it can serve as an
executable shell command, which works by running an interpreter named on
the file's first line.  The rest of the file is used as input to the
interpreter.
</P><P>

  When you visit such a file in Emacs, if the file's name does not
specify a major mode, Emacs uses the interpreter name on the first line
to choose a mode.  If the first line is the name of a recognized
interpreter program, such as <SAMP>`perl'</SAMP> or <SAMP>`tcl'</SAMP>, Emacs uses a
mode appropriate for programs for that interpreter.  The variable
<CODE>interpreter-mode-alist</CODE> specifies the correspondence between
interpreter program names and major modes.
</P><P>

  When the first line starts with <SAMP>`#!'</SAMP>, you cannot (on many
systems) use the <SAMP>`-*-'</SAMP> feature on the first line, because the
system would get confused when running the interpreter.  So Emacs looks
for <SAMP>`-*-'</SAMP> on the second line in such files as well as on the
first line.
</P><P>

<A NAME="IDX1071"></A>
  When you visit a file that does not specify a major mode to use, or
when you create a new buffer with <KBD>C-x b</KBD>, the variable
<CODE>default-major-mode</CODE> specifies which major mode to use.  Normally
its value is the symbol <CODE>fundamental-mode</CODE>, which specifies
Fundamental mode.  If <CODE>default-major-mode</CODE> is <CODE>nil</CODE>, the major
mode is taken from the previously current buffer.
</P><P>

<A NAME="IDX1072"></A>
  If you change the major mode of a buffer, you can go back to the major
mode Emacs would choose automatically: use the command <KBD>M-x
normal-mode</KBD> to do this.  This is the same function that
<CODE>find-file</CODE> calls to choose the major mode.  It also processes
the file's local variables list (if any).
</P><P>

<A NAME="IDX1073"></A>
  The commands <KBD>C-x C-w</KBD> and <CODE>set-visited-file-name</CODE> change to
a new major mode if the new file name implies a mode (see section <A HREF="emacs_16.html#SEC113">M.3 Saving Files</A>).
However, this does not happen if the buffer contents specify a major
mode, and certain "special" major modes do not allow the mode to
change.  You can turn off this mode-changing feature by setting
<CODE>change-major-mode-with-file-name</CODE> to <CODE>nil</CODE>.
<A NAME="Indentation"></A>
<HR SIZE="6">
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_21.html#SEC227"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_22.html#SEC229"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated
on <I>April 2, 2002</I>
using <A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

</BODY>
</HTML>
