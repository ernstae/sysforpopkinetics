<HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created on April 2, 2002 by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HEAD>
<TITLE>GNU Emacs Manual: Files</TITLE>

<META NAME="description" CONTENT="GNU Emacs Manual: Files">
<META NAME="keywords" CONTENT="GNU Emacs Manual: Files">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY LANG="EN" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC110"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_15.html#SEC109"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC111"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_15.html#SEC105"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_17.html#SEC172"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> M. File Handling </H1>
<!--docid::SEC110::-->
<P>

  The operating system stores data permanently in named <EM>files</EM>, so
most of the text you edit with Emacs comes from a file and is ultimately
stored in a file.
</P><P>

  To edit a file, you must tell Emacs to read the file and prepare a
buffer containing a copy of the file's text.  This is called
<EM>visiting</EM> the file.  Editing commands apply directly to text in the
buffer; that is, to the copy inside Emacs.  Your changes appear in the
file itself only when you <EM>save</EM> the buffer back into the file.
</P><P>

  In addition to visiting and saving files, Emacs can delete, copy,
rename, and append to files, keep multiple versions of them, and operate
on file directories.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC111">M.1 File Names</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to type and edit file-name arguments.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC112">M.2 Visiting Files</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Visiting a file prepares Emacs to edit the file.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC113">M.3 Saving Files</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Saving makes your changes permanent.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC121">M.4 Reverting a Buffer</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Reverting cancels all the changes not saved.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC122">M.5 Auto-Saving: Protection Against Disasters</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Auto Save periodically protects against loss of data.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC126">M.6 File Name Aliases</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Handling multiple names for one file.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC127">M.7 Version Control</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Version control systems (RCS, CVS and SCCS).</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC163">M.8 File Directories</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Creating, deleting, and listing file directories.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC164">M.9 Comparing Files</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Finding where two files differ.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC165">M.10 Miscellaneous File Operations</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Other things you can do on files.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC166">M.11 Accessing Compressed Files</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Accessing compressed files.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC167">M.12 File Archives</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Operating on tar, zip, jar etc. archive files.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC168">M.13 Remote Files</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Accessing files on other sites.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC169">M.14 Quoted File Names</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Quoting special characters in file names.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC170">M.15 File Name Cache</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Completion against a list of files you often use.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC171">M.16 Convenience Features for Finding Files</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="File Names"></A>
<HR SIZE="6">
<A NAME="SEC111"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC110"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC112"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC110"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC110"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_17.html#SEC172"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> M.1 File Names </H2>
<!--docid::SEC111::-->
<P>

  Most Emacs commands that operate on a file require you to specify the
file name.  (Saving and reverting are exceptions; the buffer knows which
file name to use for them.)  You enter the file name using the
minibuffer (see section <A HREF="emacs_8.html#SEC31">E. The Minibuffer</A>).  <EM>Completion</EM> is available
(see section <A HREF="emacs_8.html#SEC34">E.3 Completion</A>) to make it easier to specify long file names.  When
completing file names, Emacs ignores those whose file-name extensions
appear in the variable <CODE>completion-ignored-extensions</CODE>; see
<A HREF="emacs_8.html#SEC38">E.3.4 Completion Options</A>.
</P><P>

  For most operations, there is a <EM>default file name</EM> which is used
if you type just <KBD>RET</KBD> to enter an empty argument.  Normally the
default file name is the name of the file visited in the current buffer;
this makes it easy to operate on that file with any of the Emacs file
commands.
</P><P>

<A NAME="IDX503"></A>
  Each buffer has a default directory which is normally the same as the
directory of the file visited in that buffer.  When you enter a file
name without a directory, the default directory is used.  If you specify
a directory in a relative fashion, with a name that does not start with
a slash, it is interpreted with respect to the default directory.  The
default directory is kept in the variable <CODE>default-directory</CODE>,
which has a separate value in every buffer.
</P><P>

  For example, if the default file name is <TT>`/u/rms/gnu/gnu.tasks'</TT> then
the default directory is <TT>`/u/rms/gnu/'</TT>.  If you type just <SAMP>`foo'</SAMP>,
which does not specify a directory, it is short for <TT>`/u/rms/gnu/foo'</TT>.
<SAMP>`../.login'</SAMP> would stand for <TT>`/u/rms/.login'</TT>.  <SAMP>`new/foo'</SAMP>
would stand for the file name <TT>`/u/rms/gnu/new/foo'</TT>.
</P><P>

<A NAME="IDX504"></A>
<A NAME="IDX505"></A>
  The command <KBD>M-x pwd</KBD> displays the current buffer's default
directory, and the command <KBD>M-x cd</KBD> sets it (to a value read using
the minibuffer).  A buffer's default directory changes only when the
<CODE>cd</CODE> command is used.  A file-visiting buffer's default directory
is initialized to the directory of the file that is visited in that buffer.  If
you create a buffer with <KBD>C-x b</KBD>, its default directory is copied
from that of the buffer that was current at the time.
</P><P>

<A NAME="IDX506"></A>
  The default directory actually appears in the minibuffer when the
minibuffer becomes active to read a file name.  This serves two
purposes: it <EM>shows</EM> you what the default is, so that you can type
a relative file name and know with certainty what it will mean, and it
allows you to <EM>edit</EM> the default to specify a different directory.
This insertion of the default directory is inhibited if the variable
<CODE>insert-default-directory</CODE> is set to <CODE>nil</CODE>.
</P><P>

  Note that it is legitimate to type an absolute file name after you
enter the minibuffer, ignoring the presence of the default directory
name as part of the text.  The final minibuffer contents may look
invalid, but that is not so.  For example, if the minibuffer starts out
with <SAMP>`/usr/tmp/'</SAMP> and you add <SAMP>`/x1/rms/foo'</SAMP>, you get
<SAMP>`/usr/tmp//x1/rms/foo'</SAMP>; but Emacs ignores everything through the
first slash in the double slash; the result is <SAMP>`/x1/rms/foo'</SAMP>.
See section <A HREF="emacs_8.html#SEC32">E.1 Minibuffers for File Names</A>.
</P><P>

<A NAME="IDX507"></A>
<A NAME="IDX508"></A>
  <SAMP>`$'</SAMP> in a file name is used to substitute environment variables.
For example, if you have used the shell command <CODE>export
FOO=rms/hacks</CODE> to set up an environment variable named <CODE>FOO</CODE>, then
you can use <TT>`/u/$FOO/test.c'</TT> or <TT>`/u/${FOO}/test.c'</TT> as an
abbreviation for <TT>`/u/rms/hacks/test.c'</TT>.  The environment variable
name consists of all the alphanumeric characters after the <SAMP>`$'</SAMP>;
alternatively, it may be enclosed in braces after the <SAMP>`$'</SAMP>.  Note
that shell commands to set environment variables affect Emacs only if
done before Emacs is started.
</P><P>

<A NAME="IDX509"></A>
  You can use the <TT>`~/'</TT> in a file name to mean your home directory,
or <TT>`~<VAR>user-id</VAR>/'</TT> to mean the home directory of a user whose
login name is <CODE>user-id</CODE>.  (On DOS and Windows systems, where a user
doesn't have a home directory, Emacs substitutes <TT>`~/'</TT> with the
value of the environment variable <CODE>HOME</CODE>; see <A HREF="emacs_34.html#SEC534">AE.5.1 General Variables</A>.)
</P><P>

  To access a file with <SAMP>`$'</SAMP> in its name, type <SAMP>`$$'</SAMP>.  This pair
is converted to a single <SAMP>`$'</SAMP> at the same time as variable
substitution is performed for a single <SAMP>`$'</SAMP>.  Alternatively, quote the
whole file name with <SAMP>`/:'</SAMP> (see section <A HREF="emacs_16.html#SEC169">M.14 Quoted File Names</A>).  File names
which begin with a literal <SAMP>`~'</SAMP> should also be quoted with <SAMP>`/:'</SAMP>.
</P><P>

<A NAME="IDX510"></A>
  The Lisp function that performs the substitution is called
<CODE>substitute-in-file-name</CODE>.  The substitution is performed only on
file names read as such using the minibuffer.
</P><P>

  You can include non-ASCII characters in file names if you set the
variable <CODE>file-name-coding-system</CODE> to a non-<CODE>nil</CODE> value.
See section <A HREF="emacs_20.html#SEC222">Q.9 Specifying a Coding System</A>.
</P><P>

<A NAME="Visiting"></A>
<HR SIZE="6">
<A NAME="SEC112"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC111"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC113"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC113"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC110"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_17.html#SEC172"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> M.2 Visiting Files </H2>
<!--docid::SEC112::-->
<P>

<DL COMPACT>
<DT><KBD>C-x C-f</KBD>
<DD>Visit a file (<CODE>find-file</CODE>).
<DT><KBD>C-x C-r</KBD>
<DD>Visit a file for viewing, without allowing changes to it
(<CODE>find-file-read-only</CODE>).
<DT><KBD>C-x C-v</KBD>
<DD>Visit a different file instead of the one visited last
(<CODE>find-alternate-file</CODE>).
<DT><KBD>C-x 4 f</KBD>
<DD>Visit a file, in another window (<CODE>find-file-other-window</CODE>).  Don't
alter what is displayed in the selected window.
<DT><KBD>C-x 5 f</KBD>
<DD>Visit a file, in a new frame (<CODE>find-file-other-frame</CODE>).  Don't
alter what is displayed in the selected frame.
<DT><KBD>M-x find-file-literally</KBD>
<DD>Visit a file with no conversion of the contents.
</DL>
<P>

<A NAME="IDX511"></A>
<A NAME="IDX512"></A>
  <EM>Visiting</EM> a file means copying its contents into an Emacs
buffer so you can edit them.  Emacs makes a new buffer for each file
that you visit.  We often say that this buffer "is visiting" that
file, or that the buffer's "visited file" is that file.  Emacs
constructs the buffer name from the file name by throwing away the
directory, keeping just the name proper.  For example, a file named
<TT>`/usr/rms/emacs.tex'</TT> would get a buffer named <SAMP>`emacs.tex'</SAMP>.
If there is already a buffer with that name, Emacs constructs a unique
name--the normal method is to append <SAMP>`&#60;2&#62;'</SAMP>, <SAMP>`&#60;3&#62;'</SAMP>, and so
on, but you can select other methods (see section <A HREF="emacs_17.html#SEC180">N.7.1 Making Buffer Names Unique</A>).
</P><P>

  Each window's mode line shows the name of the buffer that is being displayed
in that window, so you can always tell what buffer you are editing.
</P><P>

  The changes you make with editing commands are made in the Emacs
buffer.  They do not take effect in the file that you visited, or any
place permanent, until you <EM>save</EM> the buffer.  Saving the buffer
means that Emacs writes the current contents of the buffer into its
visited file.  See section <A HREF="emacs_16.html#SEC113">M.3 Saving Files</A>.
</P><P>

<A NAME="IDX513"></A>
  If a buffer contains changes that have not been saved, we say the
buffer is <EM>modified</EM>.  This is important because it implies that
some changes will be lost if the buffer is not saved.  The mode line
displays two stars near the left margin to indicate that the buffer is
modified.
</P><P>

<A NAME="IDX514"></A>
<A NAME="IDX515"></A>
  To visit a file, use the command <KBD>C-x C-f</KBD> (<CODE>find-file</CODE>).  Follow
the command with the name of the file you wish to visit, terminated by a
<KBD>RET</KBD>.
</P><P>

  The file name is read using the minibuffer (see section <A HREF="emacs_8.html#SEC31">E. The Minibuffer</A>), with
defaulting and completion in the standard manner (see section <A HREF="emacs_16.html#SEC111">M.1 File Names</A>).
While in the minibuffer, you can abort <KBD>C-x C-f</KBD> by typing
<KBD>C-g</KBD>.  File-name completion ignores certain filenames; for more
about this, see <A HREF="emacs_8.html#SEC38">E.3.4 Completion Options</A>.
</P><P>

<A NAME="IDX516"></A>
  When Emacs is built with a suitable GUI toolkit, it pops up the
standard File Selection dialog of that toolkit instead of prompting for
the file name in the minibuffer.  On Unix and GNU/Linux platforms, Emacs
does that when built with LessTif and Motif toolkits; on MS-Windows, the
GUI version does that by default.
</P><P>

  Your confirmation that <KBD>C-x C-f</KBD> has completed successfully is the
appearance of new text on the screen and a new buffer name in the mode
line.  If the specified file does not exist and could not be created, or
cannot be read, then you get an error, with an error message displayed
in the echo area.
</P><P>

  If you visit a file that is already in Emacs, <KBD>C-x C-f</KBD> does not make
another copy.  It selects the existing buffer containing that file.
However, before doing so, it checks that the file itself has not changed
since you visited or saved it last.  If the file has changed, a warning
message is shown.  See section <A HREF="emacs_16.html#SEC118">Simultaneous Editing</A>.
</P><P>

<A NAME="IDX517"></A>
  Since Emacs reads the visited file in its entirety, files whose size
is larger than the maximum Emacs buffer size (see section <A HREF="emacs_17.html#SEC172">N. Using Multiple Buffers</A>) cannot be
visited; if you try, Emacs will display an error message saying that the
maximum buffer size has been exceeded.
</P><P>

<A NAME="IDX518"></A>
  What if you want to create a new file?  Just visit it.  Emacs displays
<SAMP>`(New file)'</SAMP> in the echo area, but in other respects behaves as if
you had visited an existing empty file.  If you make any changes and
save them, the file is created.
</P><P>

  Emacs recognizes from the contents of a file which convention it uses
to separate lines--newline (used on GNU/Linux and on Unix),
carriage-return linefeed (used on Microsoft systems), or just
carriage-return (used on the Macintosh)---and automatically converts the
contents to the normal Emacs convention, which is that the newline
character separates lines.  This is a part of the general feature of
coding system conversion (see section <A HREF="emacs_20.html#SEC220">Q.7 Coding Systems</A>), and makes it possible
to edit files imported from different operating systems with
equal convenience.  If you change the text and save the file, Emacs
performs the inverse conversion, changing newlines back into
carriage-return linefeed or just carriage-return if appropriate.
</P><P>

<A NAME="IDX519"></A>
  If the file you specify is actually a directory, <KBD>C-x C-f</KBD> invokes
Dired, the Emacs directory browser, so that you can "edit" the contents
of the directory (see section <A HREF="emacs_31.html#SEC396">AB. Dired, the Directory Editor</A>).  Dired is a convenient way to delete,
look at, or operate on the files in the directory.  However, if the
variable <CODE>find-file-run-dired</CODE> is <CODE>nil</CODE>, then it is an error
to try to visit a directory.
</P><P>

  Files which are actually collections of other files, or <EM>file
archives</EM>, are visited in special modes which invoke a Dired-like
environment to allow operations on archive members.  See section <A HREF="emacs_16.html#SEC167">M.12 File Archives</A>, for more about these features.
</P><P>

<A NAME="IDX520"></A>
<A NAME="IDX521"></A>
  If the file name you specify contains shell-style wildcard characters,
Emacs visits all the files that match it.  Wildcards include <SAMP>`?'</SAMP>,
<SAMP>`*'</SAMP>, and <SAMP>`[<small>...</small>]'</SAMP> sequences.  See section <A HREF="emacs_16.html#SEC169">M.14 Quoted File Names</A>, for
information on how to visit a file whose name actually contains wildcard
characters.  You can disable the wildcard feature by customizing
<CODE>find-file-wildcards</CODE>.
</P><P>

  If you visit a file that the operating system won't let you modify,
Emacs makes the buffer read-only, so that you won't go ahead and make
changes that you'll have trouble saving afterward.  You can make the
buffer writable with <KBD>C-x C-q</KBD> (<CODE>vc-toggle-read-only</CODE>).
See section <A HREF="emacs_17.html#SEC175">N.3 Miscellaneous Buffer Operations</A>.
</P><P>

<A NAME="IDX522"></A>
<A NAME="IDX523"></A>
  Occasionally you might want to visit a file as read-only in order to
protect yourself from entering changes accidentally; do so by visiting
the file with the command <KBD>C-x C-r</KBD> (<CODE>find-file-read-only</CODE>).
</P><P>

<A NAME="IDX524"></A>
<A NAME="IDX525"></A>
  If you visit a nonexistent file unintentionally (because you typed the
wrong file name), use the <KBD>C-x C-v</KBD> command
(<CODE>find-alternate-file</CODE>) to visit the file you really wanted.
<KBD>C-x C-v</KBD> is similar to <KBD>C-x C-f</KBD>, but it kills the current
buffer (after first offering to save it if it is modified).  When
<KBD>C-x C-v</KBD> reads the file name to visit, it inserts the entire
default file name in the buffer, with point just after the directory
part; this is convenient if you made a slight error in typing the name.
</P><P>

  If you find a file which exists but cannot be read, <KBD>C-x C-f</KBD>
signals an error.
</P><P>

<A NAME="IDX526"></A>
<A NAME="IDX527"></A>
  <KBD>C-x 4 f</KBD> (<CODE>find-file-other-window</CODE>) is like <KBD>C-x C-f</KBD>
except that the buffer containing the specified file is selected in another
window.  The window that was selected before <KBD>C-x 4 f</KBD> continues to
show the same buffer it was already showing.  If this command is used when
only one window is being displayed, that window is split in two, with one
window showing the same buffer as before, and the other one showing the
newly requested file.  See section <A HREF="emacs_18.html#SEC183">O. Multiple Windows</A>.
</P><P>

<A NAME="IDX528"></A>
<A NAME="IDX529"></A>
  <KBD>C-x 5 f</KBD> (<CODE>find-file-other-frame</CODE>) is similar, but opens a
new frame, or makes visible any existing frame showing the file you
seek.  This feature is available only when you are using a window
system.  See section <A HREF="emacs_19.html#SEC191">P. Frames and X Windows</A>.
</P><P>

<A NAME="IDX530"></A>
  If you wish to edit a file as a sequence of ASCII characters with no special
encoding or conversion, use the <KBD>M-x find-file-literally</KBD> command.
It visits a file, like <KBD>C-x C-f</KBD>, but does not do format conversion
(see section <A HREF="emacs_23.html#SEC258">T.11 Editing Formatted Text</A>), character code conversion (see section <A HREF="emacs_20.html#SEC220">Q.7 Coding Systems</A>), or automatic uncompression (see section <A HREF="emacs_16.html#SEC166">M.11 Accessing Compressed Files</A>), and
does not add a final newline because of <CODE>require-final-newline</CODE>.
If you already have visited the same file in the usual (non-literal)
manner, this command asks you whether to visit it literally instead.
</P><P>

<A NAME="IDX531"></A>
<A NAME="IDX532"></A>
  Two special hook variables allow extensions to modify the operation of
visiting files.  Visiting a file that does not exist runs the functions
in the list <CODE>find-file-not-found-hooks</CODE>; this variable holds a list
of functions, and the functions are called one by one (with no
arguments) until one of them returns non-<CODE>nil</CODE>.  This is not a
normal hook, and the name ends in <SAMP>`-hooks'</SAMP> rather than <SAMP>`-hook'</SAMP>
to indicate that fact.
</P><P>

  Successful visiting of any file, whether existing or not, calls the
functions in the list <CODE>find-file-hooks</CODE>, with no arguments.
This variable is really a normal hook, but it has an abnormal name for
historical compatibility.  In the case of a nonexistent file, the
<CODE>find-file-not-found-hooks</CODE> are run first.  See section <A HREF="emacs_33.html#SEC484">AD.2.3 Hooks</A>.
</P><P>

  There are several ways to specify automatically the major mode for
editing the file (see section <A HREF="emacs_21.html#SEC228">R.1 How Major Modes are Chosen</A>), and to specify local
variables defined for that file (see section <A HREF="emacs_33.html#SEC486">AD.2.5 Local Variables in Files</A>).
</P><P>

<A NAME="Saving"></A>
<HR SIZE="6">
<A NAME="SEC113"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC112"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC114"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC121"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC110"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC121"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> M.3 Saving Files </H2>
<!--docid::SEC113::-->
<P>

  <EM>Saving</EM> a buffer in Emacs means writing its contents back into the file
that was visited in the buffer.
</P><P>

<DL COMPACT>
<DT><KBD>C-x C-s</KBD>
<DD>Save the current buffer in its visited file on disk (<CODE>save-buffer</CODE>).
<DT><KBD>C-x s</KBD>
<DD>Save any or all buffers in their visited files (<CODE>save-some-buffers</CODE>).
<DT><KBD>M-~</KBD>
<DD>Forget that the current buffer has been changed (<CODE>not-modified</CODE>).
With prefix argument (<KBD>C-u</KBD>), mark the current buffer as changed.
<DT><KBD>C-x C-w</KBD>
<DD>Save the current buffer as a specified file name (<CODE>write-file</CODE>).
<DT><KBD>M-x set-visited-file-name</KBD>
<DD>Change the file name under which the current buffer will be saved.
</DL>
<P>

<A NAME="IDX533"></A>
<A NAME="IDX534"></A>
  When you wish to save the file and make your changes permanent, type
<KBD>C-x C-s</KBD> (<CODE>save-buffer</CODE>).  After saving is finished, <KBD>C-x C-s</KBD>
displays a message like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>Wrote /u/rms/gnu/gnu.tasks
</pre></td></tr></table></P><P>

If the selected buffer is not modified (no changes have been made in it
since the buffer was created or last saved), saving is not really done,
because it would have no effect.  Instead, <KBD>C-x C-s</KBD> displays a message
like this in the echo area:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(No changes need to be saved)
</pre></td></tr></table></P><P>

<A NAME="IDX535"></A>
<A NAME="IDX536"></A>
  The command <KBD>C-x s</KBD> (<CODE>save-some-buffers</CODE>) offers to save any
or all modified buffers.  It asks you what to do with each buffer.  The
possible responses are analogous to those of <CODE>query-replace</CODE>:
</P><P>

<DL COMPACT>
<DT><KBD>y</KBD>
<DD>Save this buffer and ask about the rest of the buffers.
<DT><KBD>n</KBD>
<DD>Don't save this buffer, but ask about the rest of the buffers.
<DT><KBD>!</KBD>
<DD>Save this buffer and all the rest with no more questions.
<DT><KBD><KBD>RET</KBD></KBD>
<DD>Terminate <CODE>save-some-buffers</CODE> without any more saving.
<DT><KBD>.</KBD>
<DD>Save this buffer, then exit <CODE>save-some-buffers</CODE> without even asking
about other buffers.
<DT><KBD>C-r</KBD>
<DD>View the buffer that you are currently being asked about.  When you exit
View mode, you get back to <CODE>save-some-buffers</CODE>, which asks the
question again.
<DT><KBD>C-h</KBD>
<DD>Display a help message about these options.
</DL>
<P>

  <KBD>C-x C-c</KBD>, the key sequence to exit Emacs, invokes
<CODE>save-some-buffers</CODE> and therefore asks the same questions.
</P><P>

<A NAME="IDX537"></A>
<A NAME="IDX538"></A>
  If you have changed a buffer but you do not want to save the changes,
you should take some action to prevent it.  Otherwise, each time you use
<KBD>C-x s</KBD> or <KBD>C-x C-c</KBD>, you are liable to save this buffer by
mistake.  One thing you can do is type <KBD>M-~</KBD> (<CODE>not-modified</CODE>),
which clears out the indication that the buffer is modified.  If you do
this, none of the save commands will believe that the buffer needs to be
saved.  (<SAMP>`~'</SAMP> is often used as a mathematical symbol for `not'; thus
<KBD>M-~</KBD> is `not', metafied.)  You could also use
<CODE>set-visited-file-name</CODE> (see below) to mark the buffer as visiting
a different file name, one which is not in use for anything important.
Alternatively, you can cancel all the changes made since the file was
visited or saved, by reading the text from the file again.  This is
called <EM>reverting</EM>.  See section <A HREF="emacs_16.html#SEC121">M.4 Reverting a Buffer</A>.  You could also undo all the
changes by repeating the undo command <KBD>C-x u</KBD> until you have undone
all the changes; but reverting is easier.
</P><P>

<A NAME="IDX539"></A>
  <KBD>M-x set-visited-file-name</KBD> alters the name of the file that the
current buffer is visiting.  It reads the new file name using the
minibuffer.  Then it marks the buffer as visiting that file name, and
changes the buffer name correspondingly.  <CODE>set-visited-file-name</CODE>
does not save the buffer in the newly visited file; it just alters the
records inside Emacs in case you do save later.  It also marks the
buffer as "modified" so that <KBD>C-x C-s</KBD> in that buffer
<EM>will</EM> save.
</P><P>

<A NAME="IDX540"></A>
<A NAME="IDX541"></A>
  If you wish to mark the buffer as visiting a different file and save it
right away, use <KBD>C-x C-w</KBD> (<CODE>write-file</CODE>).  It is precisely
equivalent to <CODE>set-visited-file-name</CODE> followed by <KBD>C-x C-s</KBD>.
<KBD>C-x C-s</KBD> used on a buffer that is not visiting a file has the
same effect as <KBD>C-x C-w</KBD>; that is, it reads a file name, marks the
buffer as visiting that file, and saves it there.  The default file name in
a buffer that is not visiting a file is made by combining the buffer name
with the buffer's default directory (see section <A HREF="emacs_16.html#SEC111">M.1 File Names</A>).
</P><P>

  If the new file name implies a major mode, then <KBD>C-x C-w</KBD> switches
to that major mode, in most cases.  The command
<CODE>set-visited-file-name</CODE> also does this.  See section <A HREF="emacs_21.html#SEC228">R.1 How Major Modes are Chosen</A>.
</P><P>

  If Emacs is about to save a file and sees that the date of the latest
version on disk does not match what Emacs last read or wrote, Emacs
notifies you of this fact, because it probably indicates a problem caused
by simultaneous editing and requires your immediate attention.
See section <A HREF="emacs_16.html#SEC118">Simultaneous Editing</A>.
</P><P>

<A NAME="IDX542"></A>
  If the value of the variable <CODE>require-final-newline</CODE> is <CODE>t</CODE>,
Emacs silently puts a newline at the end of any file that doesn't
already end in one, every time a file is saved or written.  If the value
is <CODE>nil</CODE>, Emacs leaves the end of the file unchanged; if it's
neither <CODE>nil</CODE> nor <CODE>t</CODE>, Emacs asks you whether to add a
newline.  The default is <CODE>nil</CODE>.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC114">M.3.1 Backup Files</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How Emacs saves the old version of your file.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC118">M.3.2 Protection against Simultaneous Editing</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How Emacs protects against simultaneous editing
                          of one file by two users.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC119">M.3.3 Shadowing Files</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Copying files to "shadows" automatically.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC120">M.3.4 Updating Time Stamps Automatically</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Emacs can update time stamps on saved files.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Backup"></A>
<HR SIZE="6">
<A NAME="SEC114"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC113"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC115"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC121"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC113"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC118"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> M.3.1 Backup Files </H3>
<!--docid::SEC114::-->
<P>

  On most operating systems, rewriting a file automatically destroys all
record of what the file used to contain.  Thus, saving a file from Emacs
throws away the old contents of the file--or it would, except that
Emacs carefully copies the old contents to another file, called the
<EM>backup</EM> file, before actually saving.
</P><P>

  For most files, the variable <CODE>make-backup-files</CODE> determines
whether to make backup files.  On most operating systems, its default
value is <CODE>t</CODE>, so that Emacs does write backup files.
</P><P>

  For files managed by a version control system (see section <A HREF="emacs_16.html#SEC127">M.7 Version Control</A>), the variable <CODE>vc-make-backup-files</CODE> determines whether
to make backup files.  By default it is <CODE>nil</CODE>, since backup files
are redundant when you store all the previous versions in a version
control system.  See section <A HREF="emacs_16.html#SEC160">M.7.10.1 General Options</A>.
</P><P>

<A NAME="IDX543"></A>
<A NAME="IDX544"></A>
<A NAME="IDX545"></A>
  The default value of the <CODE>backup-enable-predicate</CODE> variable
prevents backup files being written for files in the directories used
for temporary files, specified by <CODE>temporary-file-directory</CODE> or
<CODE>small-temporary-file-directory</CODE>.
</P><P>

  At your option, Emacs can keep either a single backup file or a series of
numbered backup files for each file that you edit.
</P><P>

  Emacs makes a backup for a file only the first time the file is saved
from one buffer.  No matter how many times you save a file, its backup file
continues to contain the contents from before the file was visited.
Normally this means that the backup file contains the contents from before
the current editing session; however, if you kill the buffer and then visit
the file again, a new backup file will be made by the next save.
</P><P>

  You can also explicitly request making another backup file from a
buffer even though it has already been saved at least once.  If you save
the buffer with <KBD>C-u C-x C-s</KBD>, the version thus saved will be made
into a backup file if you save the buffer again.  <KBD>C-u C-u C-x C-s</KBD>
saves the buffer, but first makes the previous file contents into a new
backup file.  <KBD>C-u C-u C-u C-x C-s</KBD> does both things: it makes a
backup from the previous contents, and arranges to make another from the
newly saved contents if you save again.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC115">M.3.1.1 Single or Numbered Backups</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How backup files are named;
				  choosing single or numbered backup files.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC116">M.3.1.2 Automatic Deletion of Backups</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Emacs deletes excess numbered backups.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC117">M.3.1.3 Copying vs. Renaming</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Backups can be made by copying or renaming.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Backup Names"></A>
<HR SIZE="6">
<A NAME="SEC115"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC114"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC116"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC121"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC114"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC118"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.3.1.1 Single or Numbered Backups </H4>
<!--docid::SEC115::-->
<P>

  If you choose to have a single backup file (this is the default),
the backup file's name is normally constructed by appending <SAMP>`~'</SAMP> to the
file name being edited; thus, the backup file for <TT>`eval.c'</TT> would
be <TT>`eval.c~'</TT>.
</P><P>

<A NAME="IDX546"></A>
<A NAME="IDX547"></A>
  You can change this behavior by defining the variable
<CODE>make-backup-file-name-function</CODE> to a suitable function.
Alternatively you can customize the variable
<CODE>backup-directory-alist</CODE> to specify that files matching certain
patterns should be backed up in specific directories.
</P><P>

  A typical use is to add an element <CODE>("." . <VAR>dir</VAR>)</CODE> to make
all backups in the directory with absolute name <VAR>dir</VAR>; Emacs
modifies the backup file names to avoid clashes between files with the
same names originating in different directories.  Alternatively,
adding, say, <CODE>("." . ".~")</CODE> would make backups in the invisible
subdirectory <TT>`.~'</TT> of the original file's directory.  Emacs
creates the directory, if necessary, to make the backup.
</P><P>

  If access control stops Emacs from writing backup files under the usual
names, it writes the backup file as <TT>`%backup%~'</TT> in your home
directory.  Only one such file can exist, so only the most recently
made such backup is available.
</P><P>

  If you choose to have a series of numbered backup files, backup file
names contain <SAMP>`.~'</SAMP>, the number, and another <SAMP>`~'</SAMP> after the
original file name.  Thus, the backup files of <TT>`eval.c'</TT> would be
called <TT>`eval.c.~1~'</TT>, <TT>`eval.c.~2~'</TT>, and so on, all the way
through names like <TT>`eval.c.~259~'</TT> and beyond.  The variable
<CODE>backup-directory-alist</CODE> applies to numbered backups just as
usual.
</P><P>

<A NAME="IDX548"></A>
  The choice of single backup or numbered backups is controlled by the
variable <CODE>version-control</CODE>.  Its possible values are
</P><P>

<DL COMPACT>
<DT><CODE>t</CODE>
<DD>Make numbered backups.
<DT><CODE>nil</CODE>
<DD>Make numbered backups for files that have numbered backups already.
Otherwise, make single backups.
<DT><CODE>never</CODE>
<DD>Never make numbered backups; always make single backups.
</DL>
<P>

You can set <CODE>version-control</CODE> locally in an individual buffer to
control the making of backups for that buffer's file.  For example,
Rmail mode locally sets <CODE>version-control</CODE> to <CODE>never</CODE> to make sure
that there is only one backup for an Rmail file.  See section <A HREF="emacs_33.html#SEC485">AD.2.4 Local Variables</A>.
</P><P>

<A NAME="IDX549"></A>
  If you set the environment variable <CODE>VERSION_CONTROL</CODE>, to tell
various GNU utilities what to do with backup files, Emacs also obeys the
environment variable by setting the Lisp variable <CODE>version-control</CODE>
accordingly at startup.  If the environment variable's value is <SAMP>`t'</SAMP>
or <SAMP>`numbered'</SAMP>, then <CODE>version-control</CODE> becomes <CODE>t</CODE>; if the
value is <SAMP>`nil'</SAMP> or <SAMP>`existing'</SAMP>, then <CODE>version-control</CODE>
becomes <CODE>nil</CODE>; if it is <SAMP>`never'</SAMP> or <SAMP>`simple'</SAMP>, then
<CODE>version-control</CODE> becomes <CODE>never</CODE>.
</P><P>

<A NAME="Backup Deletion"></A>
<HR SIZE="6">
<A NAME="SEC116"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC115"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC117"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC117"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC114"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC118"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.3.1.2 Automatic Deletion of Backups </H4>
<!--docid::SEC116::-->
<P>

  To prevent excessive consumption of disk space, Emacs can delete numbered
backup versions automatically.  Generally Emacs keeps the first few backups
and the latest few backups, deleting any in between.  This happens every
time a new backup is made.
</P><P>

<A NAME="IDX550"></A>
<A NAME="IDX551"></A>
  The two variables <CODE>kept-old-versions</CODE> and
<CODE>kept-new-versions</CODE> control this deletion.  Their values are,
respectively, the number of oldest (lowest-numbered) backups to keep
and the number of newest (highest-numbered) ones to keep, each time a
new backup is made.  The backups in the middle (excluding those oldest
and newest) are the excess middle versions--those backups are
deleted.  These variables' values are used when it is time to delete
excess versions, just after a new backup version is made; the newly
made backup is included in the count in <CODE>kept-new-versions</CODE>.  By
default, both variables are 2.
</P><P>

<A NAME="IDX552"></A>
  If <CODE>delete-old-versions</CODE> is non-<CODE>nil</CODE>, Emacs deletes the
excess backup files silently.  If it is <CODE>nil</CODE>, the default, Emacs
asks you whether it should delete the excess backup versions.
</P><P>

  Dired's <KBD>.</KBD> (Period) command can also be used to delete old versions.
See section <A HREF="emacs_31.html#SEC399">AB.3 Deleting Files with Dired</A>.
</P><P>

<A NAME="Backup Copying"></A>
<HR SIZE="6">
<A NAME="SEC117"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC116"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC118"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC121"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC114"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC118"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.3.1.3 Copying vs. Renaming </H4>
<!--docid::SEC117::-->
<P>

  Backup files can be made by copying the old file or by renaming it.
This makes a difference when the old file has multiple names (hard
links).  If the old file is renamed into the backup file, then the
alternate names become names for the backup file.  If the old file is
copied instead, then the alternate names remain names for the file
that you are editing, and the contents accessed by those names will be
the new contents.
</P><P>

  The method of making a backup file may also affect the file's owner
and group.  If copying is used, these do not change.  If renaming is used,
you become the file's owner, and the file's group becomes the default
(different operating systems have different defaults for the group).
</P><P>

  Having the owner change is usually a good idea, because then the owner
always shows who last edited the file.  Also, the owners of the backups
show who produced those versions.  Occasionally there is a file whose
owner should not change; it is a good idea for such files to contain
local variable lists to set <CODE>backup-by-copying-when-mismatch</CODE>
locally (see section <A HREF="emacs_33.html#SEC486">AD.2.5 Local Variables in Files</A>).
</P><P>

<A NAME="IDX553"></A>
<A NAME="IDX554"></A>
<A NAME="IDX555"></A>
<A NAME="IDX556"></A>
<A NAME="IDX557"></A>
<A NAME="IDX558"></A>
  The choice of renaming or copying is controlled by four variables.
Renaming is the default choice.  If the variable
<CODE>backup-by-copying</CODE> is non-<CODE>nil</CODE>, copying is used.  Otherwise,
if the variable <CODE>backup-by-copying-when-linked</CODE> is non-<CODE>nil</CODE>,
then copying is used for files that have multiple names, but renaming
may still be used when the file being edited has only one name.  If the
variable <CODE>backup-by-copying-when-mismatch</CODE> is non-<CODE>nil</CODE>, then
copying is used if renaming would cause the file's owner or group to
change.  <CODE>backup-by-copying-when-mismatch</CODE> is <CODE>t</CODE> by default
if you start Emacs as the superuser.  The fourth variable,
<CODE>backup-by-copying-when-privileged-mismatch</CODE>, gives the highest
numeric user-id for which <CODE>backup-by-copying-when-mismatch</CODE> will be
forced on.  This is useful when low-numbered user-ids are assigned to
special system users, such as <CODE>root</CODE>, <CODE>bin</CODE>, <CODE>daemon</CODE>,
etc., which must maintain ownership of files.
</P><P>

  When a file is managed with a version control system (see section <A HREF="emacs_16.html#SEC127">M.7 Version Control</A>), Emacs does not normally make backups in the usual way for
that file.  But check-in and check-out are similar in some ways to
making backups.  One unfortunate similarity is that these operations
typically break hard links, disconnecting the file name you visited from
any alternate names for the same file.  This has nothing to do with
Emacs--the version control system does it.
</P><P>

<A NAME="Interlocking"></A>
<HR SIZE="6">
<A NAME="SEC118"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC117"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC119"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC119"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC113"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC121"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> M.3.2 Protection against Simultaneous Editing </H3>
<!--docid::SEC118::-->
<P>

<A NAME="IDX559"></A>
<A NAME="IDX560"></A>
  Simultaneous editing occurs when two users visit the same file, both
make changes, and then both save them.  If nobody were informed that
this was happening, whichever user saved first would later find that his
changes were lost.
</P><P>

  On some systems, Emacs notices immediately when the second user starts
to change the file, and issues an immediate warning.  On all systems,
Emacs checks when you save the file, and warns if you are about to
overwrite another user's changes.  You can prevent loss of the other
user's work by taking the proper corrective action instead of saving the
file.
</P><P>

<A NAME="IDX561"></A>
<A NAME="IDX562"></A>
  When you make the first modification in an Emacs buffer that is
visiting a file, Emacs records that the file is <EM>locked</EM> by you.
(It does this by creating a symbolic link in the same directory with a
different name.)  Emacs removes the lock when you save the changes.  The
idea is that the file is locked whenever an Emacs buffer visiting it has
unsaved changes.
</P><P>

<A NAME="IDX563"></A>
  If you begin to modify the buffer while the visited file is locked by
someone else, this constitutes a <EM>collision</EM>.  When Emacs detects a
collision, it asks you what to do, by calling the Lisp function
<CODE>ask-user-about-lock</CODE>.  You can redefine this function for the sake
of customization.  The standard definition of this function asks you a
question and accepts three possible answers:
</P><P>

<DL COMPACT>
<DT><KBD>s</KBD>
<DD>Steal the lock.  Whoever was already changing the file loses the lock,
and you gain the lock.
<DT><KBD>p</KBD>
<DD>Proceed.  Go ahead and edit the file despite its being locked by someone else.
<DT><KBD>q</KBD>
<DD>Quit.  This causes an error (<CODE>file-locked</CODE>), and the buffer
contents remain unchanged--the modification you were trying to make
does not actually take place.
</DL>
<P>

  Note that locking works on the basis of a file name; if a file has
multiple names, Emacs does not realize that the two names are the same file
and cannot prevent two users from editing it simultaneously under different
names.  However, basing locking on names means that Emacs can interlock the
editing of new files that will not really exist until they are saved.
</P><P>

  Some systems are not configured to allow Emacs to make locks, and
there are cases where lock files cannot be written.  In these cases,
Emacs cannot detect trouble in advance, but it still can detect the
collision when you try to save a file and overwrite someone else's
changes.
</P><P>

  If Emacs or the operating system crashes, this may leave behind lock
files which are stale, so you may occasionally get warnings about
spurious collisions.  When you determine that the collision is spurious,
just use <KBD>p</KBD> to tell Emacs to go ahead anyway.
</P><P>

  Every time Emacs saves a buffer, it first checks the last-modification
date of the existing file on disk to verify that it has not changed since the
file was last visited or saved.  If the date does not match, it implies
that changes were made in the file in some other way, and these changes are
about to be lost if Emacs actually does save.  To prevent this, Emacs
displays a warning message and asks for confirmation before saving.
Occasionally you will know why the file was changed and know that it does
not matter; then you can answer <KBD>yes</KBD> and proceed.  Otherwise, you should
cancel the save with <KBD>C-g</KBD> and investigate the situation.
</P><P>

  The first thing you should do when notified that simultaneous editing
has already taken place is to list the directory with <KBD>C-u C-x C-d</KBD>
(see section <A HREF="emacs_16.html#SEC163">M.8 File Directories</A>).  This shows the file's current author.  You
should attempt to contact him to warn him not to continue editing.
Often the next step is to save the contents of your Emacs buffer under a
different name, and use <CODE>diff</CODE> to compare the two files.</P><P>

<A NAME="File Shadowing"></A>
<HR SIZE="6">
<A NAME="SEC119"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC118"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC120"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC120"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC113"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC121"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> M.3.3 Shadowing Files </H3>
<!--docid::SEC119::-->
<P>

<DL COMPACT>
<DT><KBD>M-x shadow-initialize</KBD>
<DD>Set up file shadowing.
<DT><KBD>M-x shadow-define-literal-group</KBD>
<DD>Declare a single file to be shared between sites.
<DT><KBD>M-x shadow-define-regexp-group</KBD>
<DD>Make all files that match each of a group of files be shared between hosts.
<DT><KBD>M-x shadow-define-cluster <KBD>RET</KBD> <VAR>name</VAR> <KBD>RET</KBD></KBD>
<DD>Define a shadow file cluster <VAR>name</VAR>.
<DT><KBD>M-x shadow-copy-files</KBD>
<DD>Copy all pending shadow files.
<DT><KBD>M-x shadow-cancel</KBD>
<DD>Cancel the instruction to shadow some files.
</DL>
<P>

You can arrange to keep identical <EM>shadow</EM> copies of certain files
in more than one place--possibly on different machines.  To do this,
first you must set up a <EM>shadow file group</EM>, which is a set of
identically-named files shared between a list of sites.  The file
group is permanent and applies to further Emacs sessions as well as
the current one.  Once the group is set up, every time you exit Emacs,
it will copy the file you edited to the other files in its group.  You
can also do the copying without exiting Emacs, by typing <KBD>M-x
shadow-copy-files</KBD>.
</P><P>

To set up a shadow file group, use <KBD>M-x
shadow-define-literal-group</KBD> or <KBD>M-x shadow-define-regexp-group</KBD>.
See their documentation strings for further information.
</P><P>

Before copying a file to its shadows, Emacs asks for confirmation.
You can answer "no" to bypass copying of this file, this time.  If
you want to cancel the shadowing permanently for a certain file, use
<KBD>M-x shadow-cancel</KBD> to eliminate or change the shadow file group.
</P><P>

A <EM>shadow cluster</EM> is a group of hosts that share directories, so
that copying to or from one of them is sufficient to update the file
on all of them.  Each shadow cluster has a name, and specifies the
network address of a primary host (the one we copy files to), and a
regular expression that matches the host names of all the other hosts
in the cluster.  You can define a shadow cluster with <KBD>M-x
shadow-define-cluster</KBD>.
</P><P>

<A NAME="Time Stamps"></A>
<HR SIZE="6">
<A NAME="SEC120"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC119"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC121"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC121"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC113"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC121"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> M.3.4 Updating Time Stamps Automatically </H3>
<!--docid::SEC120::-->
<P>

You can arrange to put a time stamp in a file, so that it will be updated
automatically each time you edit and save the file.  The time stamp
has to be in the first eight lines of the file, and you should
insert it like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>Time-stamp: &#60;&#62;
</pre></td></tr></table></P><P>

or like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>Time-stamp: ""
</pre></td></tr></table></P><P>

  Then add the hook function <CODE>time-stamp</CODE> to the hook
<CODE>write-file-hooks</CODE>; that hook function will automatically update
the time stamp, inserting the current date and time when you save the
file.  You can also use the command <KBD>M-x time-stamp</KBD> to update the
time stamp manually.  For other customizations, see the Custom group
<CODE>time-stamp</CODE>.  Note that non-numeric fields in the time stamp are
formatted according to your locale setting (see section <A HREF="emacs_34.html#SEC533">AE.5 Environment Variables</A>).
</P><P>

<A NAME="Reverting"></A>
<HR SIZE="6">
<A NAME="SEC121"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC120"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC122"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC122"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC110"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_17.html#SEC172"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> M.4 Reverting a Buffer </H2>
<!--docid::SEC121::-->
<P>

  If you have made extensive changes to a file and then change your mind
about them, you can get rid of them by reading in the previous version
of the file.  To do this, use <KBD>M-x revert-buffer</KBD>, which operates on
the current buffer.  Since reverting a buffer unintentionally could lose
a lot of work, you must confirm this command with <KBD>yes</KBD>.
</P><P>

  <CODE>revert-buffer</CODE> keeps point at the same distance (measured in
characters) from the beginning of the file.  If the file was edited only
slightly, you will be at approximately the same piece of text after
reverting as before.  If you have made drastic changes, the same value of
point in the old file may address a totally different piece of text.
</P><P>

  Reverting marks the buffer as "not modified" until another change is
made.
</P><P>

  Some kinds of buffers whose contents reflect data bases other than files,
such as Dired buffers, can also be reverted.  For them, reverting means
recalculating their contents from the appropriate data base.  Buffers
created explicitly with <KBD>C-x b</KBD> cannot be reverted; <CODE>revert-buffer</CODE>
reports an error when asked to do so.
</P><P>

<A NAME="IDX564"></A>
  When you edit a file that changes automatically and frequently--for
example, a log of output from a process that continues to run--it may be
useful for Emacs to revert the file without querying you, whenever you
visit the file again with <KBD>C-x C-f</KBD>.
</P><P>

  To request this behavior, set the variable <CODE>revert-without-query</CODE>
to a list of regular expressions.  When a file name matches one of these
regular expressions, <CODE>find-file</CODE> and <CODE>revert-buffer</CODE> will
revert it automatically if it has changed--provided the buffer itself
is not modified.  (If you have edited the text, it would be wrong to
discard your changes.)
</P><P>

<A NAME="IDX565"></A>
<A NAME="IDX566"></A>
<A NAME="IDX567"></A>
<A NAME="IDX568"></A>
<A NAME="IDX569"></A>
<A NAME="IDX570"></A>
<A NAME="IDX571"></A>
You may find it useful to have Emacs revert files automatically when
they change.  Two minor modes are available to do this.  In Global
Auto-Revert mode, Emacs periodically checks all file buffers and
reverts any when the corresponding file has changed.  The local
variant, Auto-Revert mode, applies only to buffers in which it was
activated.  Checking the files is done at intervals determined by the
variable <CODE>auto-revert-interval</CODE>.
</P><P>

<A NAME="Auto Save"></A>
<HR SIZE="6">
<A NAME="SEC122"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC121"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC123"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC126"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC110"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC126"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> M.5 Auto-Saving: Protection Against Disasters </H2>
<!--docid::SEC122::-->
<P>

  Emacs saves all the visited files from time to time (based on counting
your keystrokes) without being asked.  This is called <EM>auto-saving</EM>.
It prevents you from losing more than a limited amount of work if the
system crashes.
</P><P>

  When Emacs determines that it is time for auto-saving, each buffer is
considered, and is auto-saved if auto-saving is turned on for it and it
has been changed since the last time it was auto-saved.  The message
<SAMP>`Auto-saving...'</SAMP> is displayed in the echo area during auto-saving,
if any files are actually auto-saved.  Errors occurring during
auto-saving are caught so that they do not interfere with the execution
of commands you have been typing.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC123">M.5.1 Auto-Save Files</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">The file where auto-saved changes are
                                  actually made until you save the file.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC124">M.5.2 Controlling Auto-Saving</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Controlling when and how often to auto-save.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC125">M.5.3 Recovering Data from Auto-Saves</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Recovering text from auto-save files.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Auto Save Files"></A>
<HR SIZE="6">
<A NAME="SEC123"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC122"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC124"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC126"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC122"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC126"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> M.5.1 Auto-Save Files </H3>
<!--docid::SEC123::-->
<P>

  Auto-saving does not normally save in the files that you visited, because
it can be very undesirable to save a program that is in an inconsistent
state when you have made half of a planned change.  Instead, auto-saving
is done in a different file called the <EM>auto-save file</EM>, and the
visited file is changed only when you request saving explicitly (such as
with <KBD>C-x C-s</KBD>).
</P><P>

  Normally, the auto-save file name is made by appending <SAMP>`#'</SAMP> to the
front and rear of the visited file name.  Thus, a buffer visiting file
<TT>`foo.c'</TT> is auto-saved in a file <TT>`#foo.c#'</TT>.  Most buffers that
are not visiting files are auto-saved only if you request it explicitly;
when they are auto-saved, the auto-save file name is made by appending
<SAMP>`#%'</SAMP> to the front and <SAMP>`#'</SAMP> to the rear of buffer name.  For
example, the <SAMP>`*mail*'</SAMP> buffer in which you compose messages to be
sent is auto-saved in a file named <TT>`#%*mail*#'</TT>.  Auto-save file
names are made this way unless you reprogram parts of Emacs to do
something different (the functions <CODE>make-auto-save-file-name</CODE> and
<CODE>auto-save-file-name-p</CODE>).  The file name to be used for auto-saving
in a buffer is calculated when auto-saving is turned on in that buffer.
</P><P>

  When you delete a substantial part of the text in a large buffer, auto
save turns off temporarily in that buffer.  This is because if you
deleted the text unintentionally, you might find the auto-save file more
useful if it contains the deleted text.  To reenable auto-saving after
this happens, save the buffer with <KBD>C-x C-s</KBD>, or use <KBD>C-u 1 M-x
auto-save</KBD>.
</P><P>

<A NAME="IDX572"></A>
  If you want auto-saving to be done in the visited file rather than
in a separate auto-save file, set the variable
<CODE>auto-save-visited-file-name</CODE> to a non-<CODE>nil</CODE> value.  In this
mode, there is no real difference between auto-saving and explicit
saving.
</P><P>

<A NAME="IDX573"></A>
  A buffer's auto-save file is deleted when you save the buffer in its
visited file.  To inhibit this, set the variable <CODE>delete-auto-save-files</CODE>
to <CODE>nil</CODE>.  Changing the visited file name with <KBD>C-x C-w</KBD> or
<CODE>set-visited-file-name</CODE> renames any auto-save file to go with
the new visited name.
</P><P>

<A NAME="Auto Save Control"></A>
<HR SIZE="6">
<A NAME="SEC124"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC123"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC125"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC125"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC122"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC126"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> M.5.2 Controlling Auto-Saving </H3>
<!--docid::SEC124::-->
<P>

<A NAME="IDX574"></A>
<A NAME="IDX575"></A>
  Each time you visit a file, auto-saving is turned on for that file's
buffer if the variable <CODE>auto-save-default</CODE> is non-<CODE>nil</CODE> (but not
in batch mode; see section <A HREF="emacs_6.html#SEC17">C. Entering and Exiting Emacs</A>).  The default for this variable is
<CODE>t</CODE>, so auto-saving is the usual practice for file-visiting buffers.
Auto-saving can be turned on or off for any existing buffer with the
command <KBD>M-x auto-save-mode</KBD>.  Like other minor mode commands, <KBD>M-x
auto-save-mode</KBD> turns auto-saving on with a positive argument, off with a
zero or negative argument; with no argument, it toggles.
</P><P>

<A NAME="IDX576"></A>
  Emacs does auto-saving periodically based on counting how many characters
you have typed since the last time auto-saving was done.  The variable
<CODE>auto-save-interval</CODE> specifies how many characters there are between
auto-saves.  By default, it is 300.
</P><P>

<A NAME="IDX577"></A>
  Auto-saving also takes place when you stop typing for a while.  The
variable <CODE>auto-save-timeout</CODE> says how many seconds Emacs should
wait before it does an auto save (and perhaps also a garbage
collection).  (The actual time period is longer if the current buffer is
long; this is a heuristic which aims to keep out of your way when you
are editing long buffers, in which auto-save takes an appreciable amount
of time.)  Auto-saving during idle periods accomplishes two things:
first, it makes sure all your work is saved if you go away from the
terminal for a while; second, it may avoid some auto-saving while you
are actually typing.
</P><P>

  Emacs also does auto-saving whenever it gets a fatal error.  This
includes killing the Emacs job with a shell command such as <SAMP>`kill
%emacs'</SAMP>, or disconnecting a phone line or network connection.
</P><P>

<A NAME="IDX578"></A>
  You can request an auto-save explicitly with the command <KBD>M-x
do-auto-save</KBD>.
</P><P>

<A NAME="Recover"></A>
<HR SIZE="6">
<A NAME="SEC125"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC124"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC126"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC126"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC122"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC126"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> M.5.3 Recovering Data from Auto-Saves </H3>
<!--docid::SEC125::-->
<P>

<A NAME="IDX579"></A>
  You can use the contents of an auto-save file to recover from a loss
of data with the command <KBD>M-x recover-file <KBD>RET</KBD> <VAR>file</VAR>
<KBD>RET</KBD></KBD>.  This visits <VAR>file</VAR> and then (after your confirmation)
restores the contents from its auto-save file <TT>`#<VAR>file</VAR>#'</TT>.
You can then save with <KBD>C-x C-s</KBD> to put the recovered text into
<VAR>file</VAR> itself.  For example, to recover file <TT>`foo.c'</TT> from its
auto-save file <TT>`#foo.c#'</TT>, do:</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>M-x recover-file <KBD>RET</KBD> foo.c <KBD>RET</KBD>
yes <KBD>RET</KBD>
C-x C-s
</pre></td></tr></table></P><P>

  Before asking for confirmation, <KBD>M-x recover-file</KBD> displays a
directory listing describing the specified file and the auto-save file,
so you can compare their sizes and dates.  If the auto-save file
is older, <KBD>M-x recover-file</KBD> does not offer to read it.
</P><P>

<A NAME="IDX580"></A>
  If Emacs or the computer crashes, you can recover all the files you
were editing from their auto save files with the command <KBD>M-x
recover-session</KBD>.  This first shows you a list of recorded interrupted
sessions.  Move point to the one you choose, and type <KBD>C-c C-c</KBD>.
</P><P>

  Then <CODE>recover-session</CODE> asks about each of the files that were
being edited during that session, asking whether to recover that file.
If you answer <KBD>y</KBD>, it calls <CODE>recover-file</CODE>, which works in its
normal fashion.  It shows the dates of the original file and its
auto-save file, and asks once again whether to recover that file.
</P><P>

  When <CODE>recover-session</CODE> is done, the files you've chosen to
recover are present in Emacs buffers.  You should then save them.  Only
this--saving them--updates the files themselves.
</P><P>

<A NAME="IDX581"></A>
  Emacs records interrupted sessions for later recovery in files named
<TT>`~/.emacs.d/auto-save-list/.saves-<VAR>pid</VAR>-<VAR>hostname</VAR>'</TT>.  The
<SAMP>`~/.emacs.d/auto-save-list/.saves-'</SAMP> portion of these names comes
from the value of <CODE>auto-save-list-file-prefix</CODE>.  You can record
sessions in a different place by customizing that variable.  If you
set <CODE>auto-save-list-file-prefix</CODE> to <CODE>nil</CODE> in your
<TT>`.emacs'</TT> file, sessions are not recorded for recovery.
</P><P>

<A NAME="File Aliases"></A>
<HR SIZE="6">
<A NAME="SEC126"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC125"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC127"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC127"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC110"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_17.html#SEC172"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> M.6 File Name Aliases </H2>
<!--docid::SEC126::-->
<P>

  Symbolic links and hard links both make it possible for several file
names to refer to the same file.  Hard links are alternate names that
refer directly to the file; all the names are equally valid, and no one
of them is preferred.  By contrast, a symbolic link is a kind of defined
alias: when <TT>`foo'</TT> is a symbolic link to <TT>`bar'</TT>, you can use
either name to refer to the file, but <TT>`bar'</TT> is the real name, while
<TT>`foo'</TT> is just an alias.  More complex cases occur when symbolic
links point to directories.
</P><P>

  If you visit two names for the same file, normally Emacs makes
two different buffers, but it warns you about the situation.
</P><P>

<A NAME="IDX582"></A>
<A NAME="IDX583"></A>
  Normally, if you visit a file which Emacs is already visiting under
a different name, Emacs displays a message in the echo area and uses
the existing buffer visiting that file.  This can happen on systems
that support symbolic links, or if you use a long file name on a
system that truncates long file names.  You can suppress the message by
setting the variable <CODE>find-file-suppress-same-file-warnings</CODE> to a
non-<CODE>nil</CODE> value.  You can disable this feature entirely by setting
the variable <CODE>find-file-existing-other-name</CODE> to <CODE>nil</CODE>: then
if you visit the same file under two different names, you get a separate
buffer for each file name.
</P><P>

<A NAME="IDX584"></A>
<A NAME="IDX585"></A>
<A NAME="IDX586"></A>
  If the variable <CODE>find-file-visit-truename</CODE> is non-<CODE>nil</CODE>,
then the file name recorded for a buffer is the file's <EM>truename</EM>
(made by replacing all symbolic links with their target names), rather
than the name you specify.  Setting <CODE>find-file-visit-truename</CODE> also
implies the effect of <CODE>find-file-existing-other-name</CODE>.
</P><P>

<A NAME="Version Control"></A>
<HR SIZE="6">
<A NAME="SEC127"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC126"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC128"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC163"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC110"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC163"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> M.7 Version Control </H2>
<!--docid::SEC127::-->
<P>

  <EM>Version control systems</EM> are packages that can record multiple
versions of a source file, usually storing the unchanged parts of the
file just once.  Version control systems also record history information
such as the creation time of each version, who created it, and a 
description of what was changed in that version.
</P><P>

  The Emacs version control interface is called VC.  Its commands work
with three version control systems--RCS, CVS, and SCCS.  The GNU
project recommends RCS and CVS, which are free software and available
from the Free Software Foundation.  We also have free software to
replace SCCS, known as CSSC; if you are using SCCS and don't want to
make the incompatible change to RCS or CVS, you can switch to CSSC.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC128">M.7.1 Introduction to Version Control</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How version control works in general.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC131">M.7.2 Version Control and the Mode Line</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How the mode line shows version control status.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC132">M.7.3 Basic Editing under Version Control</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to edit a file under version control.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC137">M.7.4 Examining And Comparing Old Versions</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Examining and comparing old versions.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC138">M.7.5 The Secondary Commands of VC</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">The commands used a little less frequently.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC144">M.7.6 Multiple Branches of a File</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Multiple lines of development.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC149">M.7.7 Remote Repositories</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Efficient access to remote CVS servers.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC152">M.7.8 Snapshots</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Sets of file versions treated as a unit.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC155">M.7.9 Miscellaneous Commands and Features of VC</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Various other commands and features of VC.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC159">M.7.10 Customizing VC</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Variables that change VC's behavior.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Introduction to VC"></A>
<HR SIZE="6">
<A NAME="SEC128"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC127"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC129"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC163"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC127"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC131"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> M.7.1 Introduction to Version Control </H3>
<!--docid::SEC128::-->
<P>

  VC allows you to use a version control system from within Emacs,
integrating the version control operations smoothly with editing.  VC
provides a uniform interface to version control, so that regardless of
which version control system is in use, you can use it the same way.
</P><P>

  This section provides a general overview of version control, and
describes the version control systems that VC supports.  You can skip
this section if you are already familiar with the version control system
you want to use.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC129">M.7.1.1 Supported Version Control Systems</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Supported version control back-end systems.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC130">M.7.1.2 Concepts of Version Control</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Words and concepts related to version control.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Version Systems"></A>
<HR SIZE="6">
<A NAME="SEC129"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC128"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC130"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC163"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC128"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC131"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.7.1.1 Supported Version Control Systems </H4>
<!--docid::SEC129::-->
<P>

<A NAME="IDX587"></A>
<A NAME="IDX588"></A>
  VC currently works with three different version control systems or
"back ends": RCS, CVS, and SCCS.
</P><P>

  RCS is a free version control system that is available from the Free
Software Foundation.  It is perhaps the most mature of the supported
back ends, and the VC commands are conceptually closest to RCS.  Almost
everything you can do with RCS can be done through VC.
</P><P>

<A NAME="IDX589"></A>
  CVS is built on top of RCS, and extends the features of RCS, allowing
for more sophisticated release management, and concurrent multi-user
development.  VC supports basic editing operations under CVS, but for
some less common tasks you still need to call CVS from the command line.
Note also that before using CVS you must set up a repository, which is a
subject too complex to treat here.
</P><P>

<A NAME="IDX590"></A>
  SCCS is a proprietary but widely used version control system.  In
terms of capabilities, it is the weakest of the three that VC
supports.  VC compensates for certain features missing in SCCS
(snapshots, for example) by implementing them itself, but some other VC
features, such as multiple branches, are not available with SCCS.  You
should use SCCS only if for some reason you cannot use RCS.
</P><P>

<A NAME="VC Concepts"></A>
<HR SIZE="6">
<A NAME="SEC130"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC129"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC131"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC163"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC128"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC131"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.7.1.2 Concepts of Version Control </H4>
<!--docid::SEC130::-->
<P>

<A NAME="IDX591"></A>
<A NAME="IDX592"></A>
   When a file is under version control, we also say that it is
<EM>registered</EM> in the version control system.  Each registered file
has a corresponding <EM>master file</EM> which represents the file's
present state plus its change history--enough to reconstruct the
current version or any earlier version.  Usually the master file also
records a <EM>log entry</EM> for each version, describing in words what was
changed in that version.
</P><P>

<A NAME="IDX593"></A>
<A NAME="IDX594"></A>
  The file that is maintained under version control is sometimes called
the <EM>work file</EM> corresponding to its master file.  You edit the work
file and make changes in it, as you would with an ordinary file.  (With
SCCS and RCS, you must <EM>lock</EM> the file before you start to edit it.)
After you are done with a set of changes, you <EM>check the file in</EM>,
which records the changes in the master file, along with a log entry for
them.
</P><P>

  With CVS, there are usually multiple work files corresponding to a
single master file--often each user has his own copy.  It is also
possible to use RCS in this way, but this is not the usual way to use
RCS.
</P><P>

<A NAME="IDX595"></A>
  A version control system typically has some mechanism to coordinate
between users who want to change the same file.  One method is
<EM>locking</EM> (analogous to the locking that Emacs uses to detect
simultaneous editing of a file, but distinct from it).  The other method
is to merge your changes with other people's changes when you check them
in.
</P><P>

  With version control locking, work files are normally read-only so
that you cannot change them.  You ask the version control system to make
a work file writable for you by locking it; only one user can do
this at any given time.  When you check in your changes, that unlocks
the file, making the work file read-only again.  This allows other users
to lock the file to make further changes.  SCCS always uses locking, and
RCS normally does.
</P><P>

  The other alternative for RCS is to let each user modify the work file
at any time.  In this mode, locking is not required, but it is
permitted; check-in is still the way to record a new version.
</P><P>

  CVS normally allows each user to modify his own copy of the work file
at any time, but requires merging with changes from other users at
check-in time.  However, CVS can also be set up to require locking.
(see section <A HREF="emacs_16.html#SEC162">M.7.10.3 Options specific for CVS</A>).
</P><P>

<A NAME="VC Mode Line"></A>
<HR SIZE="6">
<A NAME="SEC131"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC130"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC132"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC132"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC127"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC163"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> M.7.2 Version Control and the Mode Line </H3>
<!--docid::SEC131::-->
<P>

  When you visit a file that is under version control, Emacs indicates
this on the mode line.  For example, <SAMP>`RCS-1.3'</SAMP> says that RCS is
used for that file, and the current version is 1.3.
</P><P>

  The character between the back-end name and the version number
indicates the version control status of the file.  <SAMP>`-'</SAMP> means that
the work file is not locked (if locking is in use), or not modified (if
locking is not in use).  <SAMP>`:'</SAMP> indicates that the file is locked, or
that it is modified.  If the file is locked by some other user (for
instance, <SAMP>`jim'</SAMP>), that is displayed as <SAMP>`RCS:jim:1.3'</SAMP>.
</P><P>

<A NAME="Basic VC Editing"></A>
<HR SIZE="6">
<A NAME="SEC132"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC131"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC133"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC137"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC127"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC137"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> M.7.3 Basic Editing under Version Control </H3>
<!--docid::SEC132::-->
<P>

  The principal VC command is an all-purpose command that performs
either locking or check-in, depending on the situation.
</P><P>

<DL COMPACT>
<DT><KBD>C-x C-q</KBD>
<DD><DT><KBD>C-x v v</KBD>
<DD>Perform the next logical version control operation on this file.
</DL>
<P>

<A NAME="IDX596"></A>
<A NAME="IDX597"></A>
<A NAME="IDX598"></A>
<A NAME="IDX599"></A>
  Strictly speaking, the command for this job is <CODE>vc-next-action</CODE>,
bound to <KBD>C-x v v</KBD>.  However, the normal meaning of <KBD>C-x C-q</KBD> is
to make a read-only buffer writable, or vice versa; we have extended it
to do the same job properly for files managed by version control, by
performing the appropriate version control operations.  When you type
<KBD>C-x C-q</KBD> on a registered file, it acts like <KBD>C-x v v</KBD>.
</P><P>

  The precise action of this command depends on the state of the file,
and whether the version control system uses locking or not.  SCCS and
RCS normally use locking; CVS normally does not use locking.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC133">M.7.3.1 Basic Version Control with Locking</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">RCS in its default mode, SCCS, and optionally CVS.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC134">M.7.3.2 Basic Version Control without Locking</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Without locking: default mode for CVS.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC135">M.7.3.3 Advanced Control in <KBD>C-x C-q</KBD></A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Advanced features available with a prefix argument.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC136">M.7.3.4 Features of the Log Entry Buffer</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Features available in log entry buffers.</TD></TR>
</TABLE></BLOCKQUOTE>
               
<A NAME="VC with Locking"></A>
<HR SIZE="6">
<A NAME="SEC133"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC132"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC134"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC137"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC132"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC137"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.7.3.1 Basic Version Control with Locking </H4>
<!--docid::SEC133::-->
<P>

  If locking is used for the file (as with SCCS, and RCS in its default
mode), <KBD>C-x C-q</KBD> can either lock a file or check it in:
</P><P>

<UL>
<LI>
If the file is not locked, <KBD>C-x C-q</KBD> locks it, and
makes it writable so that you can change it.
<P>

<LI>
If the file is locked by you, and contains changes, <KBD>C-x C-q</KBD> checks
in the changes.  In order to do this, it first reads the log entry
for the new version.  See section <A HREF="emacs_16.html#SEC136">M.7.3.4 Features of the Log Entry Buffer</A>.
<P>

<LI>
If the file is locked by you, but you have not changed it since you
locked it, <KBD>C-x C-q</KBD> releases the lock and makes the file read-only
again.
<P>

<LI>
If the file is locked by some other user, <KBD>C-x C-q</KBD> asks you whether
you want to "steal the lock" from that user.  If you say yes, the file
becomes locked by you, but a message is sent to the person who had
formerly locked the file, to inform him of what has happened.
</UL>
<P>

  These rules also apply when you use CVS in locking mode, except
that there is no such thing as stealing a lock.
</P><P>

<A NAME="Without Locking"></A>
<HR SIZE="6">
<A NAME="SEC134"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC133"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC135"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC135"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC132"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC137"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.7.3.2 Basic Version Control without Locking </H4>
<!--docid::SEC134::-->
<P>

  When there is no locking--the default for CVS--work files are always
writable; you do not need to do anything before you begin to edit a
file.  The status indicator on the mode line is <SAMP>`-'</SAMP> if the file is
unmodified; it flips to <SAMP>`:'</SAMP> as soon as you save any changes in the
work file.
</P><P>

  Here is what <KBD>C-x C-q</KBD> does when using CVS:
</P><P>

<UL>
<LI>
If some other user has checked in changes into the master file, Emacs
asks you whether you want to merge those changes into your own work
file.  You must do this before you can check in your own changes.  (To
pick up any recent changes from the master file <EM>without</EM> trying
to commit your own changes, type <KBD>C-x v m <KBD>RET</KBD></KBD>.)
See section <A HREF="emacs_16.html#SEC147">M.7.6.3 Merging Branches</A>.
<P>

<LI>
If there are no new changes in the master file, but you have made
modifications in your work file, <KBD>C-x C-q</KBD> checks in your changes.
In order to do this, it first reads the log entry for the new version.
See section <A HREF="emacs_16.html#SEC136">M.7.3.4 Features of the Log Entry Buffer</A>.
<P>

<LI>
If the file is not modified, the <KBD>C-x C-q</KBD> does nothing.
</UL>
<P>

  These rules also apply when you use RCS in the mode that does not
require locking, except that automatic merging of changes from the
master file is not implemented.  Unfortunately, this means that nothing
informs you if another user has checked in changes in the same file
since you began editing it, and when this happens, his changes will be
effectively removed when you check in your version (though they will
remain in the master file, so they will not be entirely lost).  You must
therefore verify the current version is unchanged, before you check in your
changes.  We hope to eliminate this risk and provide automatic merging
with RCS in a future Emacs version.
</P><P>

  In addition, locking is possible with RCS even in this mode, although
it is not required; <KBD>C-x C-q</KBD> with an unmodified file locks the
file, just as it does with RCS in its normal (locking) mode.
</P><P>

<A NAME="Advanced C-x C-q"></A>
<HR SIZE="6">
<A NAME="SEC135"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC134"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC136"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC136"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC132"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC137"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.7.3.3 Advanced Control in <KBD>C-x C-q</KBD> </H4>
<!--docid::SEC135::-->
<P>

  When you give a prefix argument to <CODE>vc-next-action</CODE> (<KBD>C-u
C-x C-q</KBD>), it still performs the next logical version control
operation, but accepts additional arguments to specify precisely how
to do the operation.
</P><P>

<UL>
<LI>
If the file is modified (or locked), you can specify the version
number to use for the new version that you check in.  This is one way
to create a new branch (see section <A HREF="emacs_16.html#SEC144">M.7.6 Multiple Branches of a File</A>).
<P>

<LI>
If the file is not modified (and unlocked), you can specify the
version to select; this lets you start working from an older version,
or on another branch.  If you do not enter any version, that takes you
to the highest version on the current branch; therefore <KBD>C-u C-x
C-q <KBD>RET</KBD></KBD> is a convenient way to get the latest version of a file from
the repository.
<P>

<LI>
Instead of the version number, you can also specify the name of a
version control system.  This is useful when one file is being managed
with two version control systems at the same time (see section <A HREF="emacs_16.html#SEC151">M.7.7.2 Local Version Control</A>).
</UL>
<P>

<A NAME="Log Buffer"></A>
<HR SIZE="6">
<A NAME="SEC136"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC135"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC137"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC137"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC132"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC137"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.7.3.4 Features of the Log Entry Buffer </H4>
<!--docid::SEC136::-->
<P>

  When you check in changes, <KBD>C-x C-q</KBD> first reads a log entry.  It
pops up a buffer called <SAMP>`*VC-Log*'</SAMP> for you to enter the log entry.
When you are finished, type <KBD>C-c C-c</KBD> in the <SAMP>`*VC-Log*'</SAMP> buffer.
That is when check-in really happens.
</P><P>

  To abort check-in, just <STRONG>don't</STRONG> type <KBD>C-c C-c</KBD> in that
buffer.  You can switch buffers and do other editing.  As long as you
don't try to check in another file, the entry you were editing remains
in the <SAMP>`*VC-Log*'</SAMP> buffer, and you can go back to that buffer at any
time to complete the check-in.
</P><P>

  If you change several source files for the same reason, it is often
convenient to specify the same log entry for many of the files.  To do
this, use the history of previous log entries.  The commands <KBD>M-n</KBD>,
<KBD>M-p</KBD>, <KBD>M-s</KBD> and <KBD>M-r</KBD> for doing this work just like the
minibuffer history commands (except that these versions are used outside
the minibuffer).
</P><P>

<A NAME="IDX600"></A>
  Each time you check in a file, the log entry buffer is put into VC Log
mode, which involves running two hooks: <CODE>text-mode-hook</CODE> and
<CODE>vc-log-mode-hook</CODE>.  See section <A HREF="emacs_33.html#SEC484">AD.2.3 Hooks</A>.
</P><P>

<A NAME="Old Versions"></A>
<HR SIZE="6">
<A NAME="SEC137"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC136"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC138"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC138"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC127"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC163"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> M.7.4 Examining And Comparing Old Versions </H3>
<!--docid::SEC137::-->
<P>

  One of the convenient features of version control is the ability
to examine any version of a file, or compare two versions.
</P><P>

<DL COMPACT>
<DT><KBD>C-x v ~ <VAR>version</VAR> <KBD>RET</KBD></KBD>
<DD>Examine version <VAR>version</VAR> of the visited file, in a buffer of its
own.
<P>

<DT><KBD>C-x v =</KBD>
<DD>Compare the current buffer contents with the latest checked-in version
of the file.
<P>

<DT><KBD>C-u C-x v = <VAR>file</VAR> <KBD>RET</KBD> <VAR>oldvers</VAR> <KBD>RET</KBD> <VAR>newvers</VAR> <KBD>RET</KBD></KBD>
<DD>Compare the specified two versions of <VAR>file</VAR>.
<P>

<DT><KBD>C-x v g</KBD>
<DD>Display the result of the CVS annotate command using colors.
</DL>
<P>

<A NAME="IDX601"></A>
<A NAME="IDX602"></A>
  To examine an old version in its entirety, visit the file and then type
<KBD>C-x v ~ <VAR>version</VAR> <KBD>RET</KBD></KBD> (<CODE>vc-version-other-window</CODE>).
This puts the text of version <VAR>version</VAR> in a file named
<TT>`<VAR>filename</VAR>.~<VAR>version</VAR>~'</TT>, and visits it in its own buffer
in a separate window.  (In RCS, you can also select an old version
and create a branch from it.  See section <A HREF="emacs_16.html#SEC144">M.7.6 Multiple Branches of a File</A>.)
</P><P>

<A NAME="IDX603"></A>
<A NAME="IDX604"></A>
  It is usually more convenient to compare two versions of the file,
with the command <KBD>C-x v =</KBD> (<CODE>vc-diff</CODE>).  Plain <KBD>C-x v =</KBD>
compares the current buffer contents (saving them in the file if
necessary) with the last checked-in version of the file.  <KBD>C-u C-x
v =</KBD>, with a numeric argument, reads a file name and two version
numbers, then compares those versions of the specified file.  Both
forms display the output in a special buffer in another window.
</P><P>

  You can specify a checked-in version by its number; an empty input
specifies the current contents of the work file (which may be different
from all the checked-in versions).  You can also specify a snapshot name
(see section <A HREF="emacs_16.html#SEC152">M.7.8 Snapshots</A>) instead of one or both version numbers.
</P><P>

  If you supply a directory name instead of the name of a registered
file, this command compares the two specified versions of all registered
files in that directory and its subdirectories.
</P><P>

<A NAME="IDX605"></A>
<A NAME="IDX606"></A>
  <KBD>C-x v =</KBD> works by running a variant of the <CODE>diff</CODE> utility
designed to work with the version control system in use.  When you
invoke <CODE>diff</CODE> this way, in addition to the options specified by
<CODE>diff-switches</CODE> (see section <A HREF="emacs_16.html#SEC164">M.9 Comparing Files</A>), it receives those
specified by <CODE>vc-diff-switches</CODE>, plus those specified for the
specific back end by <CODE>vc-<VAR>backend</VAR>-diff-switches</CODE>.  For
instance, when the version control back end is RCS, <CODE>diff</CODE> uses
the options in <CODE>vc-rcs-diff-switches</CODE>.  The
<SAMP>`vc<small>...</small>diff-switches'</SAMP> variables are <CODE>nil</CODE> by default.
</P><P>

  Unlike the <KBD>M-x diff</KBD> command, <KBD>C-x v =</KBD> does not try to
locate the changes in the old and new versions.  This is because
normally one or both versions do not exist as files when you compare
them; they exist only in the records of the master file.
See section <A HREF="emacs_16.html#SEC164">M.9 Comparing Files</A>, for more information about <KBD>M-x diff</KBD>.
</P><P>

<A NAME="IDX607"></A>
<A NAME="IDX608"></A>
  For CVS-controlled files, you can display the result of the CVS
annotate command, using colors to enhance the visual appearance.  Use
the command <KBD>M-x vc-annotate</KBD> to do this.  It creates a new buffer
to display file's text, colored to show how old each part is.  Text
colored red is new, blue means old, and intermediate colors indicate
intermediate ages.  By default, the time scale is 360 days, so that
everything more than one year old is shown in blue.
</P><P>

  When you give a prefix argument to this command, it uses the
minibuffer to read two arguments: which version number to display and
annotate (instead of the current file contents), and a stretch factor
for the time scale.  A stretch factor of 0.1 means that the color
range from red to blue spans the past 36 days instead of 360 days.  A
stretch factor greater than 1 means the color range spans more than a
year.
</P><P>

<A NAME="Secondary VC Commands"></A>
<HR SIZE="6">
<A NAME="SEC138"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC137"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC139"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC144"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC127"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC144"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> M.7.5 The Secondary Commands of VC </H3>
<!--docid::SEC138::-->
<P>

  This section explains the secondary commands of VC; those that you might
use once a day.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC139">M.7.5.1 Registering a File for Version Control</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Putting a file under version control.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC140">M.7.5.2 VC Status Commands</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Viewing the VC status of files.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC141">M.7.5.3 Undoing Version Control Actions</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Cancelling changes before or after check-in.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC142">M.7.5.4 Dired under VC</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Listing files managed by version control.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC143">M.7.5.5 VC Dired Commands</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Commands to use in a VC Dired buffer.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Registering"></A>
<HR SIZE="6">
<A NAME="SEC139"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC138"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC140"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC144"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC138"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC144"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.7.5.1 Registering a File for Version Control </H4>
<!--docid::SEC139::-->
<P>

<A NAME="IDX609"></A>
<A NAME="IDX610"></A>
  You can put any file under version control by simply visiting it, and
then typing <KBD>C-x v i</KBD> (<CODE>vc-register</CODE>).
</P><P>

<DL COMPACT>
<DT><KBD>C-x v i</KBD>
<DD>Register the visited file for version control.
</DL>
<P>

  To register the file, Emacs must choose which version control system
to use for it.  If the file's directory already contains files
registered in a version control system, Emacs uses that system.  If
there is more than one system in use for a directory, Emacs uses the one
that appears first in <CODE>vc-handled-backends</CODE> (see section <A HREF="emacs_16.html#SEC159">M.7.10 Customizing VC</A>).
On the other hand, if there are no files already registered,
Emacs uses the first system from <CODE>vc-handled-backends</CODE> that could
register the file--for example, you cannot register a file under CVS if
its directory is not already part of a CVS tree.
</P><P>

  With the default value of <CODE>vc-handled-backends</CODE>, this means
that Emacs uses RCS if there are any files under RCS control, CVS if
there are any files under CVS, SCCS if any files are under SCCS, or
RCS as the ultimate default.
</P><P>

  If locking is in use, <KBD>C-x v i</KBD> leaves the file unlocked and
read-only.  Type <KBD>C-x C-q</KBD> if you wish to start editing it.  After
registering a file with CVS, you must subsequently commit the initial
version by typing <KBD>C-x C-q</KBD>.
</P><P>

<A NAME="IDX611"></A>
  The initial version number for a newly registered file is 1.1, by
default.  You can specify a different default by setting the variable
<CODE>vc-default-init-version</CODE>, or you can give <KBD>C-x v i</KBD> a numeric
argument; then it reads the initial version number for this particular
file using the minibuffer.
</P><P>

<A NAME="IDX612"></A>
  If <CODE>vc-initial-comment</CODE> is non-<CODE>nil</CODE>, <KBD>C-x v i</KBD> reads an
initial comment to describe the purpose of this source file.  Reading
the initial comment works like reading a log entry (see section <A HREF="emacs_16.html#SEC136">M.7.3.4 Features of the Log Entry Buffer</A>).
</P><P>

<A NAME="VC Status"></A>
<HR SIZE="6">
<A NAME="SEC140"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC139"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC141"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC141"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC138"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC144"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.7.5.2 VC Status Commands </H4>
<!--docid::SEC140::-->
<P>

<DL COMPACT>
<DT><KBD>C-x v l</KBD>
<DD>Display version control state and change history.
</DL>
<P>

<A NAME="IDX613"></A>
<A NAME="IDX614"></A>
  To view the detailed version control status and history of a file,
type <KBD>C-x v l</KBD> (<CODE>vc-print-log</CODE>).  It displays the history of
changes to the current file, including the text of the log entries.  The
output appears in a separate window.
</P><P>

<A NAME="VC Undo"></A>
<HR SIZE="6">
<A NAME="SEC141"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC140"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC142"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC142"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC138"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC144"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.7.5.3 Undoing Version Control Actions </H4>
<!--docid::SEC141::-->
<P>

<DL COMPACT>
<DT><KBD>C-x v u</KBD>
<DD>Revert the buffer and the file to the last checked-in version.
<P>

<DT><KBD>C-x v c</KBD>
<DD>Remove the last-entered change from the master for the visited file.
This undoes your last check-in.
</DL>
<P>

<A NAME="IDX615"></A>
<A NAME="IDX616"></A>
  If you want to discard your current set of changes and revert to the
last version checked in, use <KBD>C-x v u</KBD> (<CODE>vc-revert-buffer</CODE>).
This leaves the file unlocked; if locking is in use, you must first lock
the file again before you change it again.  <KBD>C-x v u</KBD> requires
confirmation, unless it sees that you haven't made any changes since the
last checked-in version.
</P><P>

  <KBD>C-x v u</KBD> is also the command to unlock a file if you lock it and
then decide not to change it.
</P><P>

<A NAME="IDX617"></A>
<A NAME="IDX618"></A>
  To cancel a change that you already checked in, use <KBD>C-x v c</KBD>
(<CODE>vc-cancel-version</CODE>).  This command discards all record of the
most recent checked-in version.  <KBD>C-x v c</KBD> also offers to revert
your work file and buffer to the previous version (the one that precedes
the version that is deleted).
</P><P>

  If you answer <KBD>no</KBD>, VC keeps your changes in the buffer, and locks
the file.  The no-revert option is useful when you have checked in a
change and then discover a trivial error in it; you can cancel the
erroneous check-in, fix the error, and check the file in again.
</P><P>

  When <KBD>C-x v c</KBD> does not revert the buffer, it unexpands all
version control headers in the buffer instead (see section <A HREF="emacs_16.html#SEC158">M.7.9.3 Inserting Version Control Headers</A>).
This is because the buffer no longer corresponds to any existing
version.  If you check it in again, the check-in process will expand the
headers properly for the new version number.
</P><P>

  However, it is impossible to unexpand the RCS <SAMP>`$Log$'</SAMP> header
automatically.  If you use that header feature, you have to unexpand it
by hand--by deleting the entry for the version that you just canceled.
</P><P>

  Be careful when invoking <KBD>C-x v c</KBD>, as it is easy to lose a lot of
work with it.  To help you be careful, this command always requires
confirmation with <KBD>yes</KBD>.  Note also that this command is disabled
under CVS, because canceling versions is very dangerous and discouraged
with CVS.
</P><P>

<A NAME="VC Dired Mode"></A>
<HR SIZE="6">
<A NAME="SEC142"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC141"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC143"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC143"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC138"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC144"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.7.5.4 Dired under VC </H4>
<!--docid::SEC142::-->
<P>

<A NAME="IDX619"></A>
<A NAME="IDX620"></A>
<A NAME="IDX621"></A>
  The VC Dired Mode described here works with all the version control
systems that VC supports.  Another more powerful facility, designed
specifically for CVS, is called PCL-CVS.  See section `About PCL-CVS' in <CITE>PCL-CVS -- The Emacs Front-End to CVS</CITE>.
</P><P>

<A NAME="IDX622"></A>
<A NAME="IDX623"></A>
  When you are working on a large program, it is often useful to find
out which files have changed within an entire directory tree, or to view
the status of all files under version control at once, and to perform
version control operations on collections of files.  You can use the
command <KBD>C-x v d</KBD> (<CODE>vc-directory</CODE>) to make a directory listing
that includes only files relevant for version control.
</P><P>

<A NAME="IDX624"></A>
  <KBD>C-x v d</KBD> creates a buffer which uses VC Dired Mode.  This looks
much like an ordinary Dired buffer (see section <A HREF="emacs_31.html#SEC396">AB. Dired, the Directory Editor</A>); however, normally it
shows only the noteworthy files (those locked or not up-to-date).  This
is called <EM>terse display</EM>.  If you set the variable
<CODE>vc-dired-terse-display</CODE> to <CODE>nil</CODE>, then VC Dired shows all
relevant files--those managed under version control, plus all
subdirectories (<EM>full display</EM>).  The command <KBD>v t</KBD> in a VC
Dired buffer toggles between terse display and full display (see section <A HREF="emacs_16.html#SEC143">M.7.5.5 VC Dired Commands</A>).
</P><P>

<A NAME="IDX625"></A>
  By default, VC Dired produces a recursive listing of noteworthy or
relevant files at or below the given directory.  You can change this by
setting the variable <CODE>vc-dired-recurse</CODE> to <CODE>nil</CODE>; then VC
Dired shows only the files in the given directory.
</P><P>

  The line for an individual file shows the version control state in the
place of the hard link count, owner, group, and size of the file.  If
the file is unmodified, in sync with the master file, the version
control state shown is blank.  Otherwise it consists of text in
parentheses.  Under RCS and SCCS, the name of the user locking the file
is shown; under CVS, an abbreviated version of the <SAMP>`cvs status'</SAMP>
output is used.  Here is an example using RCS:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>  /home/jim/project:

  -rw-r--r-- (jim)      Apr  2 23:39 file1
  -r--r--r--            Apr  5 20:21 file2
</FONT></pre></td></tr></table></P><P>

The files <SAMP>`file1'</SAMP> and <SAMP>`file2'</SAMP> are under version control,
<SAMP>`file1'</SAMP> is locked by user jim, and <SAMP>`file2'</SAMP> is unlocked.
</P><P>

  Here is an example using CVS:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>  /home/joe/develop:

  -rw-r--r-- (modified) Aug  2  1997 file1.c
  -rw-r--r--            Apr  4 20:09 file2.c
  -rw-r--r-- (merge)    Sep 13  1996 file3.c
</FONT></pre></td></tr></table></P><P>

  Here <SAMP>`file1.c'</SAMP> is modified with respect to the repository, and
<SAMP>`file2.c'</SAMP> is not.  <SAMP>`file3.c'</SAMP> is modified, but other changes
have also been checked in to the repository--you need to merge them
with the work file before you can check it in.
</P><P>

<A NAME="IDX626"></A>
  When VC Dired displays subdirectories (in the "full" display mode),
it omits some that should never contain any files under version control.
By default, this includes Version Control subdirectories such as
<SAMP>`RCS'</SAMP> and <SAMP>`CVS'</SAMP>; you can customize this by setting the
variable <CODE>vc-directory-exclusion-list</CODE>.
</P><P>

  You can fine-tune VC Dired's format by typing <KBD>C-u C-x v d</KBD>---as in
ordinary Dired, that allows you to specify additional switches for the
<SAMP>`ls'</SAMP> command.
</P><P>

<A NAME="VC Dired Commands"></A>
<HR SIZE="6">
<A NAME="SEC143"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC142"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC144"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC144"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC138"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC144"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.7.5.5 VC Dired Commands </H4>
<!--docid::SEC143::-->
<P>

  All the usual Dired commands work normally in VC Dired mode, except
for <KBD>v</KBD>, which is redefined as the version control prefix.  You can
invoke VC commands such as <CODE>vc-diff</CODE> and <CODE>vc-print-log</CODE> by
typing <KBD>v =</KBD>, or <KBD>v l</KBD>, and so on.  Most of these commands apply
to the file name on the current line.
</P><P>

  The command <KBD>v v</KBD> (<CODE>vc-next-action</CODE>) operates on all the
marked files, so that you can lock or check in several files at once.
If it operates on more than one file, it handles each file according to
its current state; thus, it might lock one file, but check in another
file.  This could be confusing; it is up to you to avoid confusing
behavior by marking a set of files that are in a similar state.
</P><P>

  If any files call for check-in, <KBD>v v</KBD> reads a single log entry,
then uses it for all the files being checked in.  This is convenient for
registering or checking in several files at once, as part of the same
change.
</P><P>

<A NAME="IDX627"></A>
<A NAME="IDX628"></A>
  You can toggle between terse display (only locked files, or files not
up-to-date) and full display at any time by typing <KBD>v t</KBD>
(<CODE>vc-dired-toggle-terse-mode</CODE>).  There is also a special command
<KBD>* l</KBD> (<CODE>vc-dired-mark-locked</CODE>), which marks all files currently
locked (or, with CVS, all files not up-to-date).  Thus, typing <KBD>* l
t k</KBD> is another way to delete from the buffer all files except those
currently locked.
</P><P>

<A NAME="Branches"></A>
<HR SIZE="6">
<A NAME="SEC144"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC143"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC145"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC149"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC127"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC149"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> M.7.6 Multiple Branches of a File </H3>
<!--docid::SEC144::-->
<P>

  One use of version control is to maintain multiple "current"
versions of a file.  For example, you might have different versions of a
program in which you are gradually adding various unfinished new
features.  Each such independent line of development is called a
<EM>branch</EM>.  VC allows you to create branches, switch between
different branches, and merge changes from one branch to another.
Please note, however, that branches are only supported for RCS at the
moment.
</P><P>

  A file's main line of development is usually called the <EM>trunk</EM>.
The versions on the trunk are normally numbered 1.1, 1.2, 1.3, etc.  At
any such version, you can start an independent branch.  A branch
starting at version 1.2 would have version number 1.2.1.1, and consecutive
versions on this branch would have numbers 1.2.1.2, 1.2.1.3, 1.2.1.4,
and so on.  If there is a second branch also starting at version 1.2, it
would consist of versions 1.2.2.1, 1.2.2.2, 1.2.2.3, etc.
</P><P>

<A NAME="IDX629"></A>
  If you omit the final component of a version number, that is called a
<EM>branch number</EM>.  It refers to the highest existing version on that
branch--the <EM>head version</EM> of that branch.  The branches in the
example above have branch numbers 1.2.1 and 1.2.2.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC145">M.7.6.1 Switching between Branches</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to get to another existing branch.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC146">M.7.6.2 Creating New Branches</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to start a new branch.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC147">M.7.6.3 Merging Branches</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Transferring changes between branches.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC148">M.7.6.4 Multi-User Branching</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Multiple users working at multiple branches 
                            in parallel.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Switching Branches"></A>
<HR SIZE="6">
<A NAME="SEC145"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC144"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC146"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC149"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC144"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC149"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.7.6.1 Switching between Branches </H4>
<!--docid::SEC145::-->
<P>

  To switch between branches, type <KBD>C-u C-x C-q</KBD> and specify the
version number you want to select.  This version is then visited
<EM>unlocked</EM> (write-protected), so you can examine it before locking
it.  Switching branches in this way is allowed only when the file is not
locked.
</P><P>

  You can omit the minor version number, thus giving only the branch
number; this takes you to the head version on the chosen branch.  If you
only type <KBD>RET</KBD>, Emacs goes to the highest version on the trunk.
</P><P>

  After you have switched to any branch (including the main branch), you
stay on it for subsequent VC commands, until you explicitly select some
other branch.
</P><P>

<A NAME="Creating Branches"></A>
<HR SIZE="6">
<A NAME="SEC146"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC145"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC147"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC147"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC144"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC149"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.7.6.2 Creating New Branches </H4>
<!--docid::SEC146::-->
<P>

  To create a new branch from a head version (one that is the latest in
the branch that contains it), first select that version if necessary,
lock it with <KBD>C-x C-q</KBD>, and make whatever changes you want.  Then,
when you check in the changes, use <KBD>C-u C-x C-q</KBD>.  This lets you
specify the version number for the new version.  You should specify a
suitable branch number for a branch starting at the current version.
For example, if the current version is 2.5, the branch number should be
2.5.1, 2.5.2, and so on, depending on the number of existing branches at
that point.
</P><P>

  To create a new branch at an older version (one that is no longer the
head of a branch), first select that version (see section <A HREF="emacs_16.html#SEC145">M.7.6.1 Switching between Branches</A>), then lock it with <KBD>C-x C-q</KBD>.  You'll be asked to
confirm, when you lock the old version, that you really mean to create a
new branch--if you say no, you'll be offered a chance to lock the
latest version instead.
</P><P>

  Then make your changes and type <KBD>C-x C-q</KBD> again to check in a new
version.  This automatically creates a new branch starting from the
selected version.  You need not specially request a new branch, because
that's the only way to add a new version at a point that is not the head
of a branch.
</P><P>

  After the branch is created, you "stay" on it.  That means that
subsequent check-ins create new versions on that branch.  To leave the
branch, you must explicitly select a different version with <KBD>C-u C-x
C-q</KBD>.  To transfer changes from one branch to another, use the merge
command, described in the next section.
</P><P>

<A NAME="Merging"></A>
<HR SIZE="6">
<A NAME="SEC147"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC146"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC148"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC148"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC144"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC149"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.7.6.3 Merging Branches </H4>
<!--docid::SEC147::-->
<P>

<A NAME="IDX630"></A>
  When you have finished the changes on a certain branch, you will
often want to incorporate them into the file's main line of development
(the trunk).  This is not a trivial operation, because development might
also have proceeded on the trunk, so that you must <EM>merge</EM> the
changes into a file that has already been changed otherwise.  VC allows
you to do this (and other things) with the <CODE>vc-merge</CODE> command.
</P><P>

<DL COMPACT>
<DT><KBD>C-x v m (vc-merge)</KBD>
<DD>Merge changes into the work file.
</DL>
<P>

<A NAME="IDX631"></A>
<A NAME="IDX632"></A>
  <KBD>C-x v m</KBD> (<CODE>vc-merge</CODE>) takes a set of changes and merges it
into the current version of the work file.  It firsts asks you in the
minibuffer where the changes should come from.  If you just type
<KBD>RET</KBD>, Emacs merges any changes that were made on the same branch
since you checked the file out (we call this <EM>merging the news</EM>).
This is the common way to pick up recent changes from the repository,
regardless of whether you have already changed the file yourself.
</P><P>

  You can also enter a branch number or a pair of version numbers in
the minibuffer.  Then <KBD>C-x v m</KBD> finds the changes from that
branch, or the differences between the two versions you specified, and
merges them into the current version of the current file.
</P><P>

  As an example, suppose that you have finished a certain feature on
branch 1.3.1.  In the meantime, development on the trunk has proceeded
to version 1.5.  To merge the changes from the branch to the trunk,
first go to the head version of the trunk, by typing <KBD>C-u C-x C-q
<KBD>RET</KBD></KBD>.  Version 1.5 is now current.  If locking is used for the file,
type <KBD>C-x C-q</KBD> to lock version 1.5 so that you can change it.  Next,
type <KBD>C-x v m 1.3.1 <KBD>RET</KBD></KBD>.  This takes the entire set of changes on
branch 1.3.1 (relative to version 1.3, where the branch started, up to
the last version on the branch) and merges it into the current version
of the work file.  You can now check in the changed file, thus creating
version 1.6 containing the changes from the branch.
</P><P>

  It is possible to do further editing after merging the branch, before
the next check-in.  But it is usually wiser to check in the merged
version, then lock it and make the further changes.  This will keep
a better record of the history of changes.
</P><P>

<A NAME="IDX633"></A>
<A NAME="IDX634"></A>
  When you merge changes into a file that has itself been modified, the
changes might overlap.  We call this situation a <EM>conflict</EM>, and
reconciling the conflicting changes is called <EM>resolving a
conflict</EM>.
</P><P>

  Whenever conflicts occur during merging, VC detects them, tells you
about them in the echo area, and asks whether you want help in merging.
If you say yes, it starts an Ediff session (see section `Ediff' in <CITE>The Ediff Manual</CITE>).
</P><P>

  If you say no, the conflicting changes are both inserted into the
file, surrounded by <EM>conflict markers</EM>.  The example below shows how
a conflict region looks; the file is called <SAMP>`name'</SAMP> and the current
master file version with user B's changes in it is 1.11.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>&#60;&#60;&#60;&#60;&#60;&#60;&#60; name
  <VAR>User A's version</VAR>
=======
  <VAR>User B's version</VAR>
&#62;&#62;&#62;&#62;&#62;&#62;&#62; 1.11
</FONT></pre></td></tr></table></P><P>

<A NAME="IDX635"></A>
  Then you can resolve the conflicts by editing the file manually.  Or
you can type <CODE>M-x vc-resolve-conflicts</CODE> after visiting the file.
This starts an Ediff session, as described above.  Don't forget to
check in the merged version afterwards.
</P><P>

<A NAME="Multi-User Branching"></A>
<HR SIZE="6">
<A NAME="SEC148"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC147"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC149"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC149"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC144"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC149"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.7.6.4 Multi-User Branching </H4>
<!--docid::SEC148::-->
<P>

  It is often useful for multiple developers to work simultaneously on
different branches of a file.  CVS allows this by default; for RCS, it
is possible if you create multiple source directories.  Each source
directory should have a link named <TT>`RCS'</TT> which points to a common
directory of RCS master files.  Then each source directory can have its
own choice of selected versions, but all share the same common RCS
records.
</P><P>

  This technique works reliably and automatically, provided that the
source files contain RCS version headers (see section <A HREF="emacs_16.html#SEC158">M.7.9.3 Inserting Version Control Headers</A>).  The
headers enable Emacs to be sure, at all times, which version number is
present in the work file.
</P><P>

  If the files do not have version headers, you must instead tell Emacs
explicitly in each session which branch you are working on.  To do this,
first find the file, then type <KBD>C-u C-x C-q</KBD> and specify the correct
branch number.  This ensures that Emacs knows which branch it is using
during this particular editing session.
</P><P>

<A NAME="Remote Repositories"></A>
<HR SIZE="6">
<A NAME="SEC149"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC148"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC150"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC152"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC127"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC152"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> M.7.7 Remote Repositories </H3>
<!--docid::SEC149::-->
<P>

  A common way of using CVS is to set up a central CVS repository on
some Internet host, then have each developer check out a personal
working copy of the files on his local machine.  Committing changes to
the repository, and picking up changes from other users into one's own
working area, then works by direct interactions with the CVS server.
</P><P>

  One difficulty is that access to the CVS server is often slow, and
that developers might need to work off-line as well.  VC is designed
to reduce the amount of network interaction necessary.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC150">M.7.7.1 Version Backups</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Keeping local copies of repository versions.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC151">M.7.7.2 Local Version Control</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Using another version system for local editing.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Version Backups"></A>
<HR SIZE="6">
<A NAME="SEC150"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC149"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC151"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC152"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC149"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC152"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.7.7.1 Version Backups </H4>
<!--docid::SEC150::-->
<P>

<A NAME="IDX636"></A>
  When VC sees that the CVS repository for a file is on a remote
machine, it automatically makes local backups of unmodified versions
of the file---<EM>automatic version backups</EM>.  This means that you
can compare the file to the repository version (<KBD>C-x v =</KBD>), or
revert to that version (<KBD>C-x v u</KBD>), without any network
interactions.
</P><P>

  The local copy of the unmodified file is called a <EM>version
backup</EM> to indicate that it corresponds exactly to a version that is
stored in the repository.  Note that version backups are not the same
as ordinary Emacs backup files (see section <A HREF="emacs_16.html#SEC114">M.3.1 Backup Files</A>).  But they follow a
similar naming convention.
</P><P>

  For a file that comes from a remote CVS repository, VC makes a
version backup whenever you save the first changes to the file, and
removes it after you have committed your modified version to the
repository. You can disable the making of automatic version backups by
setting <CODE>vc-cvs-stay-local</CODE> to <CODE>nil</CODE> (see section <A HREF="emacs_16.html#SEC162">M.7.10.3 Options specific for CVS</A>).
</P><P>

<A NAME="IDX637"></A>
  The name of the automatic version backup for version <VAR>version</VAR>
of file <VAR>file</VAR> is <CODE><VAR>file</VAR>.~<VAR>version</VAR>.~</CODE>.  This is
almost the same as the name used by <KBD>C-x v ~</KBD> (see section <A HREF="emacs_16.html#SEC137">M.7.4 Examining And Comparing Old Versions</A>), the only difference being the additional dot (<SAMP>`.'</SAMP>)
after the version number.  This similarity is intentional, because
both kinds of files store the same kind of information.  The file made
by <KBD>C-x v ~</KBD> acts as a <EM>manual version backup</EM>.
</P><P>

  All the VC commands that operate on old versions of a file can use
both kinds of version backups.  For instance, <KBD>C-x v ~</KBD> uses
either an automatic or a manual version backup, if possible, to get
the contents of the version you request.  Likewise, <KBD>C-x v =</KBD> and
<KBD>C-x v u</KBD> use either an automatic or a manual version backup, if
one of them exists, to get the contents of a version to compare or
revert to.  If you changed a file outside of Emacs, so that no
automatic version backup was created for the previous text, you can
create a manual backup of that version using <KBD>C-x v ~</KBD>, and thus
obtain the benefit of the local copy for Emacs commands.
</P><P>

  The only difference in Emacs's handling of manual and automatic
version backups, once they exist, is that Emacs deletes automatic
version backups when you commit to the repository.  By contrast,
manual version backups remain until you delete them.
</P><P>

<A NAME="Local Version Control"></A>
<HR SIZE="6">
<A NAME="SEC151"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC150"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC152"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC152"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC149"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC152"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.7.7.2 Local Version Control </H4>
<!--docid::SEC151::-->
<P>

When you make many changes to a file that comes from a remote
repository, it can be convenient to have version control on your local
machine as well.  You can then record intermediate versions, revert to
a previous state, etc., before you actually commit your changes to the
remote server.
</P><P>

VC lets you do this by putting a file under a second, local version
control system, so that the file is effectively registered in two
systems at the same time.  For the description here, we will assume
that the remote system is CVS, and you use RCS locally, although the
mechanism works with any combination of version control systems
(<EM>back ends</EM>).
</P><P>

To make it work with other back ends, you must make sure that the
"more local" back end comes before the "more remote" back end in
the setting of <CODE>vc-handled-backends</CODE> (see section <A HREF="emacs_16.html#SEC159">M.7.10 Customizing VC</A>).  By
default, this variable is set up so that you can use remote CVS and
local RCS as described here.
</P><P>

To start using local RCS for a file that comes from a remote CVS
server, you must <EM>register the file in RCS</EM>, by typing <KBD>C-u
C-x v v rcs <KBD>RET</KBD></KBD>.  (In other words, use <CODE>vc-next-action</CODE> with a
prefix argument, and specify RCS as the back end.)
</P><P>

You can do this at any time; it does not matter whether you have
already modified the file with respect to the version in the CVS
repository.  If possible, VC tries to make the RCS master start with
the unmodified repository version, then checks in any local changes
as a new version.  This works if you have not made any changes yet, or
if the unmodified repository version exists locally as a version
backup (see section <A HREF="emacs_16.html#SEC150">M.7.7.1 Version Backups</A>).  If the unmodified version is not
available locally, the RCS master starts with the modified version;
the only drawback to this is that you cannot compare your changes
locally to what is stored in the repository.
</P><P>

The version number of the RCS master is derived from the current CVS
version, starting a branch from it.  For example, if the current CVS
version is 1.23, the local RCS branch will be 1.23.1.  Version 1.23 in
the RCS master will be identical to version 1.23 under CVS; your first
changes are checked in as 1.23.1.1.  (If the unmodified file is not
available locally, VC will check in the modified file twice, both as
1.23 and 1.23.1.1, to make the revision numbers consistent.)
</P><P>

If you do not use locking under CVS (the default), locking is also
disabled for RCS, so that editing under RCS works exactly as under
CVS.
</P><P>

When you are done with local editing, you can commit the final version
back to the CVS repository by typing <KBD>C-u C-x v v cvs <KBD>RET</KBD></KBD>.
This initializes the log entry buffer (see section <A HREF="emacs_16.html#SEC136">M.7.3.4 Features of the Log Entry Buffer</A>) to contain
all the log entries you have recorded in the RCS master; you can edit
them as you wish, and then commit in CVS by typing <KBD>C-c C-c</KBD>.  If
the commit is successful, VC removes the RCS master, so that the file
is once again registered under CVS only.  (The RCS master is not
actually deleted, just renamed by appending <SAMP>`~'</SAMP> to the name, so
that you can refer to it later if you wish.)
</P><P>

While using local RCS, you can pick up recent changes from the CVS
repository into your local file, or commit some of your changes back
to CVS, without terminating local RCS version control.  To do this,
switch to the CVS back end temporarily, with the <KBD>C-x v b</KBD> command:
</P><P>

<DL COMPACT>
<DT><KBD>C-x v b</KBD>
<DD>Switch to another back end that the current file is registered
under (<CODE>vc-switch-backend</CODE>).
<P>

<DT><KBD>C-u C-x v b <VAR>backend</VAR> <KBD>RET</KBD></KBD>
<DD>Switch to <VAR>backend</VAR> for the current file.
</DL>
<P>

<A NAME="IDX638"></A>
<A NAME="IDX639"></A>
<KBD>C-x v b</KBD> does not change the buffer contents, or any files; it
only changes VC's perspective on how to handle the file.  Any
subsequent VC commands for that file will operate on the back end that
is currently selected.
</P><P>

If the current file is registered in more than one back end, typing
<KBD>C-x v b</KBD> "cycles" through all of these back ends.  With a
prefix argument, it asks for the back end to use in the minibuffer.
</P><P>

Thus, if you are using local RCS, and you want to pick up some recent
changes in the file from remote CVS, first visit the file, then type
<KBD>C-x v b</KBD> to switch to CVS, and finally use <KBD>C-x v m
<KBD>RET</KBD></KBD> to merge the news (see section <A HREF="emacs_16.html#SEC147">M.7.6.3 Merging Branches</A>).  You can then switch
back to RCS by typing <KBD>C-x v b</KBD> again, and continue to edit
locally.
</P><P>

But if you do this, the revision numbers in the RCS master no longer
correspond to those of CVS.  Technically, this is not a problem, but
it can become difficult to keep track of what is in the CVS repository
and what is not.  So we suggest that you return from time to time to
CVS-only operation, using <KBD>C-u C-x v v cvs <KBD>RET</KBD></KBD>.
</P><P>

<A NAME="Snapshots"></A>
<HR SIZE="6">
<A NAME="SEC152"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC151"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC153"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC155"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC127"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC155"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> M.7.8 Snapshots </H3>
<!--docid::SEC152::-->
<P>

  A <EM>snapshot</EM> is a named set of file versions (one for each
registered file) that you can treat as a unit.  One important kind of
snapshot is a <EM>release</EM>, a (theoretically) stable version of the
system that is ready for distribution to users.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC153">M.7.8.1 Making and Using Snapshots</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">The snapshot facilities.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC154">M.7.8.2 Snapshot Caveats</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Things to be careful of when using snapshots.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Making Snapshots"></A>
<HR SIZE="6">
<A NAME="SEC153"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC152"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC154"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC155"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC152"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC155"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.7.8.1 Making and Using Snapshots </H4>
<!--docid::SEC153::-->
<P>

  There are two basic commands for snapshots; one makes a
snapshot with a given name, the other retrieves a named snapshot.
</P><P>

<DL COMPACT>
<A NAME="IDX640"></A>
<A NAME="IDX641"></A>
<DT><CODE>C-x v s <VAR>name</VAR> <KBD>RET</KBD></CODE>
<DD>Define the last saved versions of every registered file in or under the
current directory as a snapshot named <VAR>name</VAR>
(<CODE>vc-create-snapshot</CODE>).
<P>

<A NAME="IDX642"></A>
<A NAME="IDX643"></A>
<DT><CODE>C-x v r <VAR>name</VAR> <KBD>RET</KBD></CODE>
<DD>For all registered files at or below the current directory level, select
whatever versions correspond to the snapshot <VAR>name</VAR>
(<CODE>vc-retrieve-snapshot</CODE>).
<P>

This command reports an error if any files are locked at or below the
current directory, without changing anything; this is to avoid
overwriting work in progress.
</DL>
<P>

  A snapshot uses a very small amount of resources--just enough to record
the list of file names and which version belongs to the snapshot.  Thus,
you need not hesitate to create snapshots whenever they are useful.
</P><P>

  You can give a snapshot name as an argument to <KBD>C-x v =</KBD> or
<KBD>C-x v ~</KBD> (see section <A HREF="emacs_16.html#SEC137">M.7.4 Examining And Comparing Old Versions</A>).  Thus, you can use it to compare a
snapshot against the current files, or two snapshots against each other,
or a snapshot against a named version.
</P><P>

<A NAME="Snapshot Caveats"></A>
<HR SIZE="6">
<A NAME="SEC154"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC153"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC155"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC155"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC152"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC155"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.7.8.2 Snapshot Caveats </H4>
<!--docid::SEC154::-->
<P>

<A NAME="IDX644"></A>
  VC's snapshot facilities are modeled on RCS's named-configuration
support.  They use RCS's native facilities for this, so under VC
snapshots made using RCS are visible even when you bypass VC.
</P><P>

  For SCCS, VC implements snapshots itself.  The files it uses contain
name/file/version-number triples.  These snapshots are visible only
through VC.
</P><P>

  A snapshot is a set of checked-in versions.  So make sure that all the
files are checked in and not locked when you make a snapshot.
</P><P>

  File renaming and deletion can create some difficulties with snapshots.
This is not a VC-specific problem, but a general design issue in version
control systems that no one has solved very well yet.
</P><P>

  If you rename a registered file, you need to rename its master along
with it (the command <CODE>vc-rename-file</CODE> does this automatically).  If
you are using SCCS, you must also update the records of the snapshot, to
mention the file by its new name (<CODE>vc-rename-file</CODE> does this,
too).  An old snapshot that refers to a master file that no longer
exists under the recorded name is invalid; VC can no longer retrieve
it.  It would be beyond the scope of this manual to explain enough about
RCS and SCCS to explain how to update the snapshots by hand.
</P><P>

  Using <CODE>vc-rename-file</CODE> makes the snapshot remain valid for
retrieval, but it does not solve all problems.  For example, some of the
files in your program probably refer to others by name.  At the very
least, the makefile probably mentions the file that you renamed.  If you
retrieve an old snapshot, the renamed file is retrieved under its new
name, which is not the name that the makefile expects.  So the program
won't really work as retrieved.
</P><P>

<A NAME="Miscellaneous VC"></A>
<HR SIZE="6">
<A NAME="SEC155"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC154"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC156"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC163"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC127"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC159"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> M.7.9 Miscellaneous Commands and Features of VC </H3>
<!--docid::SEC155::-->
<P>

  This section explains the less-frequently-used features of VC.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC156">M.7.9.1 Change Logs and VC</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Generating a change log file from log entries.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC157">M.7.9.2 Renaming VC Work Files and Master Files</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">A command to rename both the source and master 
                          file correctly.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC158">M.7.9.3 Inserting Version Control Headers</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Inserting version control headers into working files.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Change Logs and VC"></A>
<HR SIZE="6">
<A NAME="SEC156"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC155"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC157"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC163"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC155"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC159"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.7.9.1 Change Logs and VC </H4>
<!--docid::SEC156::-->
<P>

  If you use RCS or CVS for a program and also maintain a change log
file for it (see section <A HREF="emacs_26.html#SEC333">W.1 Change Logs</A>), you can generate change log entries
automatically from the version control log entries:
</P><P>

<DL COMPACT>
<DT><KBD>C-x v a</KBD>
<DD><A NAME="IDX645"></A>
<A NAME="IDX646"></A>
Visit the current directory's change log file and, for registered files
in that directory, create new entries for versions checked in since the
most recent entry in the change log file.
(<CODE>vc-update-change-log</CODE>).
<P>

This command works with RCS or CVS only, not with SCCS.
</P><P>

<DT><KBD>C-u C-x v a</KBD>
<DD>As above, but only find entries for the current buffer's file.
<P>

<DT><KBD>M-1 C-x v a</KBD>
<DD>As above, but find entries for all the currently visited files that are
maintained with version control.  This works only with RCS, and it puts
all entries in the log for the default directory, which may not be
appropriate.
</DL>
<P>

  For example, suppose the first line of <TT>`ChangeLog'</TT> is dated
1999-04-10, and that the only check-in since then was by Nathaniel
Bowditch to <TT>`rcs2log'</TT> on 1999-05-22 with log text <SAMP>`Ignore log
messages that start with `#'.'</SAMP>.  Then <KBD>C-x v a</KBD> visits
<TT>`ChangeLog'</TT> and inserts text like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>1999-05-22  Nathaniel Bowditch  &#60;nat@apn.org&#62;

        * rcs2log: Ignore log messages that start with `#'.
</FONT></pre></td></tr></table></P><P>

You can then edit the new change log entry further as you wish.
</P><P>

  Some of the new change log entries may duplicate what's already in
ChangeLog.  You will have to remove these duplicates by hand.
</P><P>

  Normally, the log entry for file <TT>`foo'</TT> is displayed as <SAMP>`*
foo: <VAR>text of log entry</VAR>'</SAMP>.  The <SAMP>`:'</SAMP> after <TT>`foo'</TT> is omitted
if the text of the log entry starts with <SAMP>`(<VAR>functionname</VAR>):
'</SAMP>.  For example, if the log entry for <TT>`vc.el'</TT> is
<SAMP>`(vc-do-command): Check call-process status.'</SAMP>, then the text in
<TT>`ChangeLog'</TT> looks like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>1999-05-06  Nathaniel Bowditch  &#60;nat@apn.org&#62;

        * vc.el (vc-do-command): Check call-process status.
</FONT></pre></td></tr></table></P><P>

  When <KBD>C-x v a</KBD> adds several change log entries at once, it groups
related log entries together if they all are checked in by the same
author at nearly the same time.  If the log entries for several such
files all have the same text, it coalesces them into a single entry.
For example, suppose the most recent check-ins have the following log
entries:
</P><P>

<PRE>* For <TT>`vc.texinfo'</TT>: <SAMP>`Fix expansion typos.'</SAMP>
* For <TT>`vc.el'</TT>: <SAMP>`Don't call expand-file-name.'</SAMP>
* For <TT>`vc-hooks.el'</TT>: <SAMP>`Don't call expand-file-name.'</SAMP>
</PRE>
<P>

They appear like this in <TT>`ChangeLog'</TT>:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>1999-04-01  Nathaniel Bowditch  &#60;nat@apn.org&#62;

        * vc.texinfo: Fix expansion typos.

        * vc.el, vc-hooks.el: Don't call expand-file-name.
</FONT></pre></td></tr></table></P><P>

  Normally, <KBD>C-x v a</KBD> separates log entries by a blank line, but you
can mark several related log entries to be clumped together (without an
intervening blank line) by starting the text of each related log entry
with a label of the form <SAMP>`{<VAR>clumpname</VAR>} '</SAMP>.  The label
itself is not copied to <TT>`ChangeLog'</TT>.  For example, suppose the log
entries are:
</P><P>

<PRE>* For <TT>`vc.texinfo'</TT>: <SAMP>`{expand} Fix expansion typos.'</SAMP>
* For <TT>`vc.el'</TT>: <SAMP>`{expand} Don't call expand-file-name.'</SAMP>
* For <TT>`vc-hooks.el'</TT>: <SAMP>`{expand} Don't call expand-file-name.'</SAMP>
</PRE>
<P>

Then the text in <TT>`ChangeLog'</TT> looks like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>1999-04-01  Nathaniel Bowditch  &#60;nat@apn.org&#62;

        * vc.texinfo: Fix expansion typos.
        * vc.el, vc-hooks.el: Don't call expand-file-name.
</FONT></pre></td></tr></table></P><P>

  A log entry whose text begins with <SAMP>`#'</SAMP> is not copied to
<TT>`ChangeLog'</TT>.  For example, if you merely fix some misspellings in
comments, you can log the change with an entry beginning with <SAMP>`#'</SAMP>
to avoid putting such trivia into <TT>`ChangeLog'</TT>.
</P><P>

<A NAME="Renaming and VC"></A>
<HR SIZE="6">
<A NAME="SEC157"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC156"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC158"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC158"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC155"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC159"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.7.9.2 Renaming VC Work Files and Master Files </H4>
<!--docid::SEC157::-->
<P>

<A NAME="IDX647"></A>
  When you rename a registered file, you must also rename its master
file correspondingly to get proper results.  Use <CODE>vc-rename-file</CODE>
to rename the source file as you specify, and rename its master file
accordingly.  It also updates any snapshots (see section <A HREF="emacs_16.html#SEC152">M.7.8 Snapshots</A>) that
mention the file, so that they use the new name; despite this, the
snapshot thus modified may not completely work (see section <A HREF="emacs_16.html#SEC154">M.7.8.2 Snapshot Caveats</A>).
</P><P>

  You cannot use <CODE>vc-rename-file</CODE> on a file that is locked by
someone else.
</P><P>

<A NAME="Version Headers"></A>
<HR SIZE="6">
<A NAME="SEC158"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC157"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC159"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC163"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC155"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC159"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.7.9.3 Inserting Version Control Headers </H4>
<!--docid::SEC158::-->
<P>

   Sometimes it is convenient to put version identification strings
directly into working files.  Certain special strings called
<EM>version headers</EM> are replaced in each successive version by the
number of that version.
</P><P>

  If you are using RCS, and version headers are present in your working
files, Emacs can use them to determine the current version and the
locking state of the files.  This is more reliable than referring to the
master files, which is done when there are no version headers.  Note
that in a multi-branch environment, version headers are necessary to
make VC behave correctly (see section <A HREF="emacs_16.html#SEC148">M.7.6.4 Multi-User Branching</A>).
</P><P>

  Searching for version headers is controlled by the variable
<CODE>vc-consult-headers</CODE>.  If it is non-<CODE>nil</CODE> (the default),
Emacs searches for headers to determine the version number you are
editing.  Setting it to <CODE>nil</CODE> disables this feature.
</P><P>

<A NAME="IDX648"></A>
<A NAME="IDX649"></A>
  You can use the <KBD>C-x v h</KBD> command (<CODE>vc-insert-headers</CODE>) to
insert a suitable header string.
</P><P>

<DL COMPACT>
<DT><KBD>C-x v h</KBD>
<DD>Insert headers in a file for use with your version-control system.
</DL>
<P>

<A NAME="IDX650"></A>
  The default header string is <SAMP>`$Id$'</SAMP> for RCS and
<SAMP>`%W%'</SAMP> for SCCS.  You can specify other headers to insert by
setting the variable <CODE>vc-header-alist</CODE>.  Its value is a list of
elements of the form <CODE>(<VAR>program</VAR> . <VAR>string</VAR>)</CODE> where
<VAR>program</VAR> is <CODE>RCS</CODE> or <CODE>SCCS</CODE> and <VAR>string</VAR> is the
string to use.
</P><P>

  Instead of a single string, you can specify a list of strings; then
each string in the list is inserted as a separate header on a line of
its own.
</P><P>

  It is often necessary to use "superfluous" backslashes when
writing the strings that you put in this variable.  For instance, you
might write <CODE>"$Id\$"</CODE> rather than <CODE>"$Id$"</CODE>.  The extra
backslash prevents the string constant from being interpreted as a
header, if the Emacs Lisp file containing it is maintained with
version control.
</P><P>

<A NAME="IDX651"></A>
  Each header is inserted surrounded by tabs, inside comment delimiters,
on a new line at point.  Normally the ordinary comment
start and comment end strings of the current mode are used, but for
certain modes, there are special comment delimiters for this purpose;
the variable <CODE>vc-comment-alist</CODE> specifies them.  Each element of
this list has the form <CODE>(<VAR>mode</VAR> <VAR>starter</VAR> <VAR>ender</VAR>)</CODE>.
</P><P>

<A NAME="IDX652"></A>
  The variable <CODE>vc-static-header-alist</CODE> specifies further strings
to add based on the name of the buffer.  Its value should be a list of
elements of the form <CODE>(<VAR>regexp</VAR> . <VAR>format</VAR>)</CODE>.  Whenever
<VAR>regexp</VAR> matches the buffer name, <VAR>format</VAR> is inserted as part
of the header.  A header line is inserted for each element that matches
the buffer name, and for each string specified by
<CODE>vc-header-alist</CODE>.  The header line is made by processing the
string from <CODE>vc-header-alist</CODE> with the format taken from the
element.  The default value for <CODE>vc-static-header-alist</CODE> is as follows:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(("\\.c$" .
  "\n#ifndef lint\nstatic char vcid[] = \"\%s\";\n\
#endif /* lint */\n"))
</pre></td></tr></table></P><P>

It specifies insertion of text of this form:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>
#ifndef lint
static char vcid[] = "<VAR>string</VAR>";
#endif /* lint */
</pre></td></tr></table></P><P>

Note that the text above starts with a blank line.
</P><P>

  If you use more than one version header in a file, put them close
together in the file.  The mechanism in <CODE>revert-buffer</CODE> that
preserves markers may not handle markers positioned between two version
headers.
</P><P>

<A NAME="Customizing VC"></A>
<HR SIZE="6">
<A NAME="SEC159"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC158"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC160"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC131"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC127"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC163"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> M.7.10 Customizing VC </H3>
<!--docid::SEC159::-->
<P>

<A NAME="IDX653"></A>
The variable <CODE>vc-handled-backends</CODE> determines which version
control systems VC should handle.  The default value is <CODE>(RCS CVS
SCCS)</CODE>, so it contains all three version systems that are currently
supported.  If you want VC to ignore one or more of these systems,
exclude its name from the list.
</P><P>

The order of systems in the list is significant: when you visit a file
registered in more than one system (see section <A HREF="emacs_16.html#SEC151">M.7.7.2 Local Version Control</A>),
VC uses the system that comes first in <CODE>vc-handled-backends</CODE> by
default.  The order is also significant when you register a file for
the first time, see section <A HREF="emacs_16.html#SEC139">M.7.5.1 Registering a File for Version Control</A> for details.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC160">M.7.10.1 General Options</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Options that apply to multiple back ends.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC161">M.7.10.2 Options for RCS and SCCS</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_16.html#SEC162">M.7.10.3 Options specific for CVS</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Options for CVS.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="General VC Options"></A>
<HR SIZE="6">
<A NAME="SEC160"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC159"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC161"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC131"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC159"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC163"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.7.10.1 General Options </H4>
<!--docid::SEC160::-->
<P>

<A NAME="IDX654"></A>
  Emacs normally does not save backup files for source files that are
maintained with version control.  If you want to make backup files even
for files that use version control, set the variable
<CODE>vc-make-backup-files</CODE> to a non-<CODE>nil</CODE> value.
</P><P>

<A NAME="IDX655"></A>
  Normally the work file exists all the time, whether it is locked or
not.  If you set <CODE>vc-keep-workfiles</CODE> to <CODE>nil</CODE>, then checking
in a new version with <KBD>C-x C-q</KBD> deletes the work file; but any
attempt to visit the file with Emacs creates it again.  (With CVS, work
files are always kept.)
</P><P>

<A NAME="IDX656"></A>
  Editing a version-controlled file through a symbolic link can be
dangerous.  It bypasses the version control system--you can edit the
file without locking it, and fail to check your changes in.  Also,
your changes might overwrite those of another user.  To protect against
this, VC checks each symbolic link that you visit, to see if it points
to a file under version control.
</P><P>

  The variable <CODE>vc-follow-symlinks</CODE> controls what to do when a
symbolic link points to a version-controlled file.  If it is <CODE>nil</CODE>,
VC only displays a warning message.  If it is <CODE>t</CODE>, VC automatically
follows the link, and visits the real file instead, telling you about
this in the echo area.  If the value is <CODE>ask</CODE> (the default), VC
asks you each time whether to follow the link.
</P><P>

<A NAME="IDX657"></A>
  If <CODE>vc-suppress-confirm</CODE> is non-<CODE>nil</CODE>, then <KBD>C-x C-q</KBD>
and <KBD>C-x v i</KBD> can save the current buffer without asking, and
<KBD>C-x v u</KBD> also operates without asking for confirmation.  (This
variable does not affect <KBD>C-x v c</KBD>; that operation is so drastic
that it should always ask for confirmation.)
</P><P>

<A NAME="IDX658"></A>
  VC mode does much of its work by running the shell commands for RCS,
CVS and SCCS.  If <CODE>vc-command-messages</CODE> is non-<CODE>nil</CODE>, VC
displays messages to indicate which shell commands it runs, and
additional messages when the commands finish.
</P><P>

<A NAME="IDX659"></A>
  You can specify additional directories to search for version control
programs by setting the variable <CODE>vc-path</CODE>.  These directories
are searched before the usual search path.  It is rarely necessary to
set this variable, because VC normally finds the proper files
automatically.
</P><P>

<A NAME="RCS and SCCS"></A>
<HR SIZE="6">
<A NAME="SEC161"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC160"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC162"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC162"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC159"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC163"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.7.10.2 Options for RCS and SCCS </H4>
<!--docid::SEC161::-->
<P>

<A NAME="IDX660"></A>
<A NAME="IDX661"></A>
  By default, RCS uses locking to coordinate the activities of several
users, but there is a mode called <EM>non-strict locking</EM> in which
you can check-in changes without locking the file first.  Use
<SAMP>`rcs -U'</SAMP> to switch to non-strict locking for a particular file,
see the <CODE>rcs</CODE> manual page for details.
</P><P>

  When deducing the version control state of an RCS file, VC first
looks for an RCS version header string in the file (see section <A HREF="emacs_16.html#SEC158">M.7.9.3 Inserting Version Control Headers</A>).  If there is no header string, VC normally looks at the
file permissions of the work file; this is fast.  But there might be
situations when the file permissions cannot be trusted.  In this case
the master file has to be consulted, which is rather expensive.  Also
the master file can only tell you <EM>if</EM> there's any lock on the
file, but not whether your work file really contains that locked
version.
</P><P>

<A NAME="IDX662"></A>
  You can tell VC not to use version headers to determine the file
status by setting <CODE>vc-consult-headers</CODE> to <CODE>nil</CODE>.  VC then
always uses the file permissions (if it is supposed to trust them), or
else checks the master file.
</P><P>

<A NAME="IDX663"></A>
  You can specify the criterion for whether to trust the file
permissions by setting the variable <CODE>vc-mistrust-permissions</CODE>.
Its value can be <CODE>t</CODE> (always mistrust the file permissions and
check the master file), <CODE>nil</CODE> (always trust the file
permissions), or a function of one argument which makes the decision.
The argument is the directory name of the <TT>`RCS'</TT> subdirectory.  A
non-<CODE>nil</CODE> value from the function says to mistrust the file
permissions.  If you find that the file permissions of work files are
changed erroneously, set <CODE>vc-mistrust-permissions</CODE> to <CODE>t</CODE>.
Then VC always checks the master file to determine the file's status.
</P><P>

  VC determines the version control state of files under SCCS much as
with RCS.  It does not consider SCCS version headers, though.  Thus,
the variable <CODE>vc-mistrust-permissions</CODE> affects SCCS use, but
<CODE>vc-consult-headers</CODE> does not.
</P><P>

<A NAME="CVS Options"></A>
<HR SIZE="6">
<A NAME="SEC162"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC161"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC163"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC131"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC159"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC163"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> M.7.10.3 Options specific for CVS </H4>
<!--docid::SEC162::-->
<P>

<A NAME="IDX664"></A>
  By default, CVS does not use locking to coordinate the activities of
several users; anyone can change a work file at any time.  However,
there are ways to restrict this, resulting in behavior that resembles
locking.
</P><P>

<A NAME="IDX665"></A>
  For one thing, you can set the <CODE>CVSREAD</CODE> environment variable
(the value you use makes no difference).  If this variable is defined,
CVS makes your work files read-only by default.  In Emacs, you must
type <KBD>C-x C-q</KBD> to make the file writable, so that editing works
in fact similar as if locking was used.  Note however, that no actual
locking is performed, so several users can make their files writable
at the same time.  When setting <CODE>CVSREAD</CODE> for the first time, make
sure to check out all your modules anew, so that the file protections
are set correctly.
</P><P>

<A NAME="IDX666"></A>
<A NAME="IDX667"></A>
  Another way to achieve something similar to locking is to use the
<EM>watch</EM> feature of CVS.  If a file is being watched, CVS makes it
read-only by default, and you must also use <KBD>C-x C-q</KBD> in Emacs to
make it writable.  VC calls <CODE>cvs edit</CODE> to make the file writable,
and CVS takes care to notify other developers of the fact that you
intend to change the file.  See the CVS documentation for details on
using the watch feature.
</P><P>

<A NAME="IDX668"></A>
<A NAME="IDX669"></A>
  When a file's repository is on a remote machine, VC tries to keep
network interactions to a minimum.  This is controlled by the variable
<CODE>vc-cvs-stay-local</CODE>.  If it is <CODE>t</CODE> (the default), then VC uses
only the entry in the local CVS subdirectory to determine the file's
state (and possibly information returned by previous CVS commands).  One
consequence of this is that when you have modified a file, and somebody
else has already checked in other changes to the file, you are not
notified of it until you actually try to commit.  (But you can try to
pick up any recent changes from the repository first, using <KBD>C-x v m
<KBD>RET</KBD></KBD>, see section <A HREF="emacs_16.html#SEC147">M.7.6.3 Merging Branches</A>).
</P><P>

  When <CODE>vc-cvs-stay-local</CODE> is <CODE>t</CODE>, VC also makes local
version backups, so that simple diff and revert operations are
completely local (see section <A HREF="emacs_16.html#SEC150">M.7.7.1 Version Backups</A>).
</P><P>

  On the other hand, if you set <CODE>vc-cvs-stay-local</CODE> to <CODE>nil</CODE>,
then VC queries the remote repository <EM>before</EM> it decides what to
do in <CODE>vc-next-action</CODE> (<KBD>C-x v v</KBD>), just as it does for local
repositories.  It also does not make any version backups.
</P><P>

  You can also set <CODE>vc-cvs-stay-local</CODE> to a regular expression
that is matched against the repository host name; VC then stays local
only for repositories from hosts that match the pattern.
</P><P>

<A NAME="Directories"></A>
<HR SIZE="6">
<A NAME="SEC163"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC162"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC164"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC164"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC110"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_17.html#SEC172"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> M.8 File Directories </H2>
<!--docid::SEC163::-->
<P>

<A NAME="IDX670"></A>
<A NAME="IDX671"></A>
  The file system groups files into <EM>directories</EM>.  A <EM>directory
listing</EM> is a list of all the files in a directory.  Emacs provides
commands to create and delete directories, and to make directory
listings in brief format (file names only) and verbose format (sizes,
dates, and authors included).  There is also a directory browser called
Dired; see <A HREF="emacs_31.html#SEC396">AB. Dired, the Directory Editor</A>.
</P><P>

<DL COMPACT>
<DT><KBD>C-x C-d <VAR>dir-or-pattern</VAR> <KBD>RET</KBD></KBD>
<DD>Display a brief directory listing (<CODE>list-directory</CODE>).
<DT><KBD>C-u C-x C-d <VAR>dir-or-pattern</VAR> <KBD>RET</KBD></KBD>
<DD>Display a verbose directory listing.
<DT><KBD>M-x make-directory <KBD>RET</KBD> <VAR>dirname</VAR> <KBD>RET</KBD></KBD>
<DD>Create a new directory named <VAR>dirname</VAR>.
<DT><KBD>M-x delete-directory <KBD>RET</KBD> <VAR>dirname</VAR> <KBD>RET</KBD></KBD>
<DD>Delete the directory named <VAR>dirname</VAR>.  It must be empty,
or you get an error.
</DL>
<P>

<A NAME="IDX672"></A>
<A NAME="IDX673"></A>
  The command to display a directory listing is <KBD>C-x C-d</KBD>
(<CODE>list-directory</CODE>).  It reads using the minibuffer a file name
which is either a directory to be listed or a wildcard-containing
pattern for the files to be listed.  For example,
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>C-x C-d /u2/emacs/etc <KBD>RET</KBD>
</pre></td></tr></table></P><P>

lists all the files in directory <TT>`/u2/emacs/etc'</TT>.  Here is an
example of specifying a file name pattern:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>C-x C-d /u2/emacs/src/*.c <KBD>RET</KBD>
</pre></td></tr></table></P><P>

  Normally, <KBD>C-x C-d</KBD> displays a brief directory listing containing
just file names.  A numeric argument (regardless of value) tells it to
make a verbose listing including sizes, dates, and owners (like
<SAMP>`ls -l'</SAMP>).
</P><P>

<A NAME="IDX674"></A>
<A NAME="IDX675"></A>
  The text of a directory listing is obtained by running <CODE>ls</CODE> in an
inferior process.  Two Emacs variables control the switches passed to
<CODE>ls</CODE>: <CODE>list-directory-brief-switches</CODE> is a string giving the
switches to use in brief listings (<CODE>"-CF"</CODE> by default), and
<CODE>list-directory-verbose-switches</CODE> is a string giving the switches to
use in a verbose listing (<CODE>"-l"</CODE> by default).
</P><P>

<A NAME="Comparing Files"></A>
<HR SIZE="6">
<A NAME="SEC164"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC163"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC165"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC110"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC110"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_17.html#SEC172"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> M.9 Comparing Files </H2>
<!--docid::SEC164::-->
<P>

<A NAME="IDX676"></A>
<A NAME="IDX677"></A>
  The command <KBD>M-x diff</KBD> compares two files, displaying the
differences in an Emacs buffer named <SAMP>`*diff*'</SAMP>.  It works by
running the <CODE>diff</CODE> program, using options taken from the variable
<CODE>diff-switches</CODE>.  The value of <CODE>diff-switches</CODE> should be a
string; the default is <CODE>"-c"</CODE> to specify a context diff.
</P><P>

  The buffer <SAMP>`*diff*'</SAMP> has Compilation mode as its major mode, so
you can use <KBD>C-x `</KBD> to visit successive changed locations in the two
source files.  You can also move to a particular hunk of changes and
type <KBD>RET</KBD> or <KBD>C-c C-c</KBD>, or click <KBD>Mouse-2</KBD> on it, to move
to the corresponding source location.  You can also use the other
special commands of Compilation mode: <KBD>SPC</KBD> and <KBD>DEL</KBD> for
scrolling, and <KBD>M-p</KBD> and <KBD>M-n</KBD> for cursor motion.
See section <A HREF="emacs_25.html#SEC317">V.1 Running Compilations under Emacs</A>.
</P><P>

<A NAME="IDX678"></A>
  The command <KBD>M-x diff-backup</KBD> compares a specified file with its most
recent backup.  If you specify the name of a backup file,
<CODE>diff-backup</CODE> compares it with the source file that it is a backup
of.
</P><P>

<A NAME="IDX679"></A>
  The command <KBD>M-x compare-windows</KBD> compares the text in the current
window with that in the next window.  Comparison starts at point in each
window, and each starting position is pushed on the mark ring in its
respective buffer.  Then point moves forward in each window, a character
at a time, until a mismatch between the two windows is reached.  Then
the command is finished.  For more information about windows in Emacs,
<A HREF="emacs_18.html#SEC183">O. Multiple Windows</A>.
</P><P>

<A NAME="IDX680"></A>
  With a numeric argument, <CODE>compare-windows</CODE> ignores changes in
whitespace.  If the variable <CODE>compare-ignore-case</CODE> is
non-<CODE>nil</CODE>, it ignores differences in case as well.
</P><P>

<A NAME="IDX681"></A>
<A NAME="IDX682"></A>
<A NAME="IDX683"></A>
<A NAME="IDX684"></A>
  Differences between versions of files are often distributed as
<EM>patches</EM>, which are the output from <CODE>diff</CODE> or a version
control system that uses <CODE>diff</CODE>.  <KBD>M-x diff-mode</KBD> turns on
Diff mode, a major mode for viewing and editing patches, either as
"unified diffs" or "context diffs."
</P><P>

<A NAME="IDX685"></A>
<A NAME="IDX686"></A>
<A NAME="IDX687"></A>
<A NAME="IDX688"></A>
<A NAME="IDX689"></A>
  You can use <KBD>M-x smerge-mode</KBD> to turn on Smerge mode, a minor
mode for editing output from the <CODE>diff3</CODE> program.  This is
typically the result of a failed merge from a version control system
"update" outside VC, due to conflicting changes to a file.  Smerge
mode provides commands to resolve conflicts by selecting specific
changes.
</P><P>

  See also <A HREF="emacs_26.html#SEC342">W.3 Merging Files with Emerge</A>, and section `Top' in <CITE>The Ediff Manual</CITE>, for
convenient facilities for merging two similar files.
</P><P>

<A NAME="Misc File Ops"></A>
<HR SIZE="6">
<A NAME="SEC165"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC164"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC166"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC112"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC110"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_17.html#SEC172"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> M.10 Miscellaneous File Operations </H2>
<!--docid::SEC165::-->
<P>

  Emacs has commands for performing many other operations on files.
All operate on one file; they do not accept wildcard file names.
</P><P>

<A NAME="IDX690"></A>
<A NAME="IDX691"></A>
<A NAME="IDX692"></A>
<A NAME="IDX693"></A>
  <KBD>M-x view-file</KBD> allows you to scan or read a file by sequential
screenfuls.  It reads a file name argument using the minibuffer.  After
reading the file into an Emacs buffer, <CODE>view-file</CODE> displays the
beginning.  You can then type <KBD>SPC</KBD> to scroll forward one windowful,
or <KBD>DEL</KBD> to scroll backward.  Various other commands are provided
for moving around in the file, but none for changing it; type <KBD>?</KBD>
while viewing for a list of them.  They are mostly the same as normal
Emacs cursor motion commands.  To exit from viewing, type <KBD>q</KBD>.
The commands for viewing are defined by a special major mode called View
mode.
</P><P>

  A related command, <KBD>M-x view-buffer</KBD>, views a buffer already present
in Emacs.  See section <A HREF="emacs_17.html#SEC175">N.3 Miscellaneous Buffer Operations</A>.
</P><P>

<A NAME="IDX694"></A>
<A NAME="IDX695"></A>
  <KBD>M-x insert-file</KBD> (also <KBD>C-x i</KBD>) inserts a copy of the
contents of the specified file into the current buffer at point,
leaving point unchanged before the contents and the mark after them.
</P><P>

<A NAME="IDX696"></A>
  <KBD>M-x write-region</KBD> is the inverse of <KBD>M-x insert-file</KBD>; it
copies the contents of the region into the specified file.  <KBD>M-x
append-to-file</KBD> adds the text of the region to the end of the specified
file.  See section <A HREF="emacs_11.html#SEC67">H.9 Accumulating Text</A>.
</P><P>

<A NAME="IDX697"></A>
<A NAME="IDX698"></A>
  <KBD>M-x delete-file</KBD> deletes the specified file, like the <CODE>rm</CODE>
command in the shell.  If you are deleting many files in one directory, it
may be more convenient to use Dired (see section <A HREF="emacs_31.html#SEC396">AB. Dired, the Directory Editor</A>).
</P><P>

<A NAME="IDX699"></A>
  <KBD>M-x rename-file</KBD> reads two file names <VAR>old</VAR> and <VAR>new</VAR> using
the minibuffer, then renames file <VAR>old</VAR> as <VAR>new</VAR>.  If the file name
<VAR>new</VAR> already exists, you must confirm with <KBD>yes</KBD> or renaming is not
done; this is because renaming causes the old meaning of the name <VAR>new</VAR>
to be lost.  If <VAR>old</VAR> and <VAR>new</VAR> are on different file systems, the
file <VAR>old</VAR> is copied and deleted.
</P><P>

<A NAME="IDX700"></A>
<A NAME="IDX701"></A>
  The similar command <KBD>M-x add-name-to-file</KBD> is used to add an
additional name to an existing file without removing its old name.
The new name is created as a "hard link" to the existing file.
The new name must belong on the same file system that the file is on.
On Windows, this command works only if the file resides in an NTFS
file system.  On MS-DOS, it works by copying the file.
</P><P>

<A NAME="IDX702"></A>
<A NAME="IDX703"></A>
  <KBD>M-x copy-file</KBD> reads the file <VAR>old</VAR> and writes a new file named
<VAR>new</VAR> with the same contents.  Confirmation is required if a file named
<VAR>new</VAR> already exists, because copying has the consequence of overwriting
the old contents of the file <VAR>new</VAR>.
</P><P>

<A NAME="IDX704"></A>
  <KBD>M-x make-symbolic-link</KBD> reads two file names <VAR>target</VAR> and
<VAR>linkname</VAR>, then creates a symbolic link named <VAR>linkname</VAR>, which
points at <VAR>target</VAR>.  The effect is that future attempts to open file
<VAR>linkname</VAR> will refer to whatever file is named <VAR>target</VAR> at the
time the opening is done, or will get an error if the name <VAR>target</VAR> is
not in use at that time.  This command does not expand the argument
<VAR>target</VAR>, so that it allows you to specify a relative name
as the target of the link.
</P><P>

  Confirmation is required when creating the link if <VAR>linkname</VAR> is
in use.  Note that not all systems support symbolic links; on systems
that don't support them, this command is not defined.
</P><P>

<A NAME="Compressed Files"></A>
<HR SIZE="6">
<A NAME="SEC166"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC165"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC167"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC112"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC110"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_17.html#SEC172"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> M.11 Accessing Compressed Files </H2>
<!--docid::SEC166::-->
<P>

<A NAME="IDX705"></A>
<A NAME="IDX706"></A>
  Emacs comes with a library that can automatically uncompress
compressed files when you visit them, and automatically recompress them
if you alter them and save them.  To enable this feature, type the
command <KBD>M-x auto-compression-mode</KBD>.  You can enable it permanently
by customizing the option <CODE>auto-compression-mode</CODE>.
</P><P>

  When automatic compression (which implies automatic uncompression as
well) is enabled, Emacs recognizes compressed files by their file names.
File names ending in <SAMP>`.gz'</SAMP> indicate a file compressed with
<CODE>gzip</CODE>.  Other endings indicate other compression programs.
</P><P>

  Automatic uncompression and compression apply to all the operations in
which Emacs uses the contents of a file.  This includes visiting it,
saving it, inserting its contents into a buffer, loading it, and byte
compiling it.
</P><P>

<A NAME="File Archives"></A>
<HR SIZE="6">
<A NAME="SEC167"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC166"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC168"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC112"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC110"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_17.html#SEC172"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> M.12 File Archives </H2>
<!--docid::SEC167::-->
<P>

  A file whose name ends in <SAMP>`.tar'</SAMP> is normally an <EM>archive</EM>
made by the <CODE>tar</CODE> program.  Emacs views these files in a special
mode called Tar mode which provides a Dired-like list of the contents
(see section <A HREF="emacs_31.html#SEC396">AB. Dired, the Directory Editor</A>).  You can move around through the list just as you
would in Dired, and visit the subfiles contained in the archive.
However, not all Dired commands are available in Tar mode.
</P><P>

  If you enable Auto Compression mode (see section <A HREF="emacs_16.html#SEC166">M.11 Accessing Compressed Files</A>), then
Tar mode is used also for compressed archives--files with extensions
<SAMP>`.tgz'</SAMP>, <CODE>.tar.Z</CODE> and <CODE>.tar.gz</CODE>.
</P><P>

  The keys <KBD>e</KBD>, <KBD>f</KBD> and <KBD>RET</KBD> all extract a component file
into its own buffer.  You can edit it there and when you save the buffer
the edited version will replace the version in the Tar buffer.  <KBD>v</KBD>
extracts a file into a buffer in View mode.  <KBD>o</KBD> extracts the file
and displays it in another window, so you could edit the file and
operate on the archive simultaneously.  <KBD>d</KBD> marks a file for
deletion when you later use <KBD>x</KBD>, and <KBD>u</KBD> unmarks a file, as in
Dired.  <KBD>C</KBD> copies a file from the archive to disk and <KBD>R</KBD>
renames a file.  <KBD>g</KBD> reverts the buffer from the archive on disk.
</P><P>

  The keys <KBD>M</KBD>, <KBD>G</KBD>, and <KBD>O</KBD> change the file's permission
bits, group, and owner, respectively.
</P><P>

  If your display supports colors and the mouse, moving the mouse
pointer across a file name highlights that file name, indicating that
you can click on it.  Clicking <KBD>Mouse-2</KBD> on the highlighted file
name extracts the file into a buffer and displays that buffer.
</P><P>

  Saving the Tar buffer writes a new version of the archive to disk with
the changes you made to the components.
</P><P>

  You don't need the <CODE>tar</CODE> program to use Tar mode--Emacs reads
the archives directly.  However, accessing compressed archives
requires the appropriate uncompression program.
</P><P>

<A NAME="IDX707"></A>
<A NAME="IDX708"></A>
<A NAME="IDX709"></A>
<A NAME="IDX710"></A>
<A NAME="IDX711"></A>
<A NAME="IDX712"></A>
<A NAME="IDX713"></A>
<A NAME="IDX714"></A>
<A NAME="IDX715"></A>
<A NAME="IDX716"></A>
<A NAME="IDX717"></A>
<A NAME="IDX718"></A>
<A NAME="IDX719"></A>
<A NAME="IDX720"></A>
  A separate but similar Archive mode is used for archives produced by
the programs <CODE>arc</CODE>, <CODE>jar</CODE>, <CODE>lzh</CODE>, <CODE>zip</CODE>, and
<CODE>zoo</CODE>, which have extensions corresponding to the program names.
</P><P>

  The key bindings of Archive mode are similar to those in Tar mode,
with the addition of the <KBD>m</KBD> key which marks a file for subsequent
operations, and <KBD>M-<KBD>DEL</KBD></KBD> which unmarks all the marked files.
Also, the <KBD>a</KBD> key toggles the display of detailed file
information, for those archive types where it won't fit in a single
line.  Operations such as renaming a subfile, or changing its mode or
owner, are supported only for some of the archive formats.
</P><P>

  Unlike Tar mode, Archive mode runs the archiving program to unpack
and repack archives.  Details of the program names and their options
can be set in the <SAMP>`Archive'</SAMP> Customize group.  However, you don't
need these programs to look at the archive table of contents, only to
extract or manipulate the subfiles in the archive.
</P><P>

<A NAME="Remote Files"></A>
<HR SIZE="6">
<A NAME="SEC168"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC167"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC169"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC112"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC110"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_17.html#SEC172"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> M.13 Remote Files </H2>
<!--docid::SEC168::-->
<P>

<A NAME="IDX721"></A>
<A NAME="IDX722"></A>
  You can refer to files on other machines using a special file name syntax:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>/<VAR>host</VAR>:<VAR>filename</VAR>
/<VAR>user</VAR>@<VAR>host</VAR>:<VAR>filename</VAR>
/<VAR>user</VAR>@<VAR>host</VAR>#<VAR>port</VAR>:<VAR>filename</VAR>
</pre></td></tr></table></P><P>

When you do this, Emacs uses the FTP program to read and write files on
the specified host.  It logs in through FTP using your user name or the
name <VAR>user</VAR>.  It may ask you for a password from time to time; this
is used for logging in on <VAR>host</VAR>.  The form using <VAR>port</VAR> allows
you to access servers running on a non-default TCP port.
</P><P>

<A NAME="IDX723"></A>
<A NAME="IDX724"></A>
  If you want to disable backups for remote files, set the variable
<CODE>ange-ftp-make-backup-files</CODE> to <CODE>nil</CODE>.
</P><P>

<A NAME="IDX725"></A>
<A NAME="IDX726"></A>
<A NAME="IDX727"></A>
  Normally, if you do not specify a user name in a remote file name,
that means to use your own user name.  But if you set the variable
<CODE>ange-ftp-default-user</CODE> to a string, that string is used instead.
(The Emacs package that implements FTP file access is called
<CODE>ange-ftp</CODE>.)
</P><P>

<A NAME="IDX728"></A>
<A NAME="IDX729"></A>
  To visit files accessible by anonymous FTP, you use special user
names <SAMP>`anonymous'</SAMP> or <SAMP>`ftp'</SAMP>.  Passwords for these user names
are handled specially.  The variable
<CODE>ange-ftp-generate-anonymous-password</CODE> controls what happens: if
the value of this variable is a string, then that string is used as
the password; if non-<CODE>nil</CODE> (the default), then the value of
<CODE>user-mail-address</CODE> is used; if <CODE>nil</CODE>, the user is prompted
for a password as normal.
</P><P>

<A NAME="IDX730"></A>
<A NAME="IDX731"></A>
<A NAME="IDX732"></A>
<A NAME="IDX733"></A>
  Sometimes you may be unable to access files on a remote machine
because a <EM>firewall</EM> in between blocks the connection for security
reasons.  If you can log in on a <EM>gateway</EM> machine from which the
target files <EM>are</EM> accessible, and whose FTP server supports
gatewaying features, you can still use remote file names; all you have
to do is specify the name of the gateway machine by setting the
variable <CODE>ange-ftp-gateway-host</CODE>, and set
<CODE>ange-ftp-smart-gateway</CODE> to <CODE>t</CODE>.  Otherwise you may be able
to make remote file names work, but the procedure is complex.  You can
read the instructions by typing <KBD>M-x finder-commentary <KBD>RET</KBD>
ange-ftp <KBD>RET</KBD></KBD>.
</P><P>

<A NAME="IDX734"></A>
<A NAME="IDX735"></A>
  You can entirely turn off the FTP file name feature by removing the
entries <CODE>ange-ftp-completion-hook-function</CODE> and
<CODE>ange-ftp-hook-function</CODE> from the variable
<CODE>file-name-handler-alist</CODE>.  You can turn off the feature in
individual cases by quoting the file name with <SAMP>`/:'</SAMP> (see section <A HREF="emacs_16.html#SEC169">M.14 Quoted File Names</A>).
</P><P>

<A NAME="Quoted File Names"></A>
<HR SIZE="6">
<A NAME="SEC169"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC168"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC170"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC112"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC110"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_17.html#SEC172"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> M.14 Quoted File Names </H2>
<!--docid::SEC169::-->
<P>

<A NAME="IDX736"></A>
  You can <EM>quote</EM> an absolute file name to prevent special
characters and syntax in it from having their special effects.
The way to do this is to add <SAMP>`/:'</SAMP> at the beginning.
</P><P>

  For example, you can quote a local file name which appears remote, to
prevent it from being treated as a remote file name.  Thus, if you have
a directory named <TT>`/foo:'</TT> and a file named <TT>`bar'</TT> in it, you
can refer to that file in Emacs as <SAMP>`/:/foo:/bar'</SAMP>.
</P><P>

  <SAMP>`/:'</SAMP> can also prevent <SAMP>`~'</SAMP> from being treated as a special
character for a user's home directory.  For example, <TT>`/:/tmp/~hack'</TT>
refers to a file whose name is <TT>`~hack'</TT> in directory <TT>`/tmp'</TT>.
</P><P>

  Likewise, quoting with <SAMP>`/:'</SAMP> is one way to enter in the minibuffer
a file name that contains <SAMP>`$'</SAMP>.  However, the <SAMP>`/:'</SAMP> must be at
the beginning of the minibuffer in order to quote <SAMP>`$'</SAMP>.
</P><P>

  You can also quote wildcard characters with <SAMP>`/:'</SAMP>, for visiting.
For example, <TT>`/:/tmp/foo*bar'</TT> visits the file <TT>`/tmp/foo*bar'</TT>.
However, in most cases you can simply type the wildcard characters for
themselves.  For example, if the only file name in <TT>`/tmp'</TT> that
starts with <SAMP>`foo'</SAMP> and ends with <SAMP>`bar'</SAMP> is <TT>`foo*bar'</TT>, then
specifying <TT>`/tmp/foo*bar'</TT> will visit just <TT>`/tmp/foo*bar'</TT>.
Another way is to specify <TT>`/tmp/foo[*]bar'</TT>.
</P><P>

<A NAME="File Name Cache"></A>
<HR SIZE="6">
<A NAME="SEC170"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC169"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC171"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC112"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC110"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_17.html#SEC172"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> M.15 File Name Cache </H2>
<!--docid::SEC170::-->
<P>

<A NAME="IDX737"></A>
<A NAME="IDX738"></A>
<A NAME="IDX739"></A>
<A NAME="IDX740"></A>
<A NAME="IDX741"></A>
  You can use the <EM>file name cache</EM> to make it easy to locate a
file by name, without having to remember exactly where it is located.
When typing a file name in the minibuffer, <KBD>C-<KBD>tab</KBD></KBD>
(<CODE>file-cache-minibuffer-complete</CODE>) completes it using the file
name cache.  If you repeat <KBD>C-<KBD>tab</KBD></KBD>, that cycles through the
possible completions of what you had originally typed.  Note that the
<KBD>C-<KBD>tab</KBD></KBD> character cannot be typed on most text-only
terminals.
</P><P>

  The file name cache does not fill up automatically.  Instead, you
load file names into the cache using these commands:
</P><P>

<A NAME="IDX742"></A>
<DL COMPACT>
<DT><KBD>M-x file-cache-add-directory <KBD>RET</KBD> <VAR>directory</VAR> <KBD>RET</KBD></KBD>
<DD>Add each file name in <VAR>directory</VAR> to the file name cache.
<DT><KBD>M-x file-cache-add-directory-using-find <KBD>RET</KBD> <VAR>directory</VAR> <KBD>RET</KBD></KBD>
<DD>Add each file name in <VAR>directory</VAR> and all of its nested
subdirectories to the file name cache.
<DT><KBD>M-x file-cache-add-directory-using-locate <KBD>RET</KBD> <VAR>directory</VAR> <KBD>RET</KBD></KBD>
<DD>Add each file name in <VAR>directory</VAR> and all of its nested
subdirectories to the file name cache, using <CODE>locate</CODE> to find
them all.
<DT><KBD>M-x file-cache-add-directory-list <KBD>RET</KBD> <VAR>variable</VAR> <KBD>RET</KBD></KBD>
<DD>Add each file name in each directory listed in <VAR>variable</VAR>
to the file name cache.  <VAR>variable</VAR> should be a Lisp variable
such as <CODE>load-path</CODE> or <CODE>exec-path</CODE>, whose value is a list
of directory names.
<DT><KBD>M-x file-cache-clear-cache <KBD>RET</KBD></KBD>
<DD>Clear the cache; that is, remove all file names from it.
</DL>
<P>

<A NAME="File Conveniences"></A>
<HR SIZE="6">
<A NAME="SEC171"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC170"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_17.html#SEC172"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC112"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC110"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_17.html#SEC172"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> M.16 Convenience Features for Finding Files </H2>
<!--docid::SEC171::-->
<P>

<A NAME="IDX743"></A>
<A NAME="IDX744"></A>
<A NAME="IDX745"></A>
<A NAME="IDX746"></A>
  If you enable Recentf mode, with <KBD>M-x recentf-mode</KBD>, the
<SAMP>`File'</SAMP> menu includes a submenu containing a list of recently
opened files.  <KBD>M-x recentf-save-list</KBD> saves the current
<CODE>recent-file-list</CODE> to a file, and <KBD>M-x recentf-edit-list</KBD>
edits it.
</P><P>

<A NAME="IDX747"></A>
<A NAME="IDX748"></A>
<A NAME="IDX749"></A>
<A NAME="IDX750"></A>
<A NAME="IDX751"></A>
<A NAME="IDX752"></A>
  When Auto-image-file minor mode is enabled, visiting an image file
displays it as an image, not as text.  Likewise, inserting an image
file into a buffer inserts it as an image.  This works only when Emacs
can display the relevant image type.  The variables
<CODE>image-file-name-extensions</CODE> or <CODE>image-file-name-regexps</CODE>
control which file names are recognized as containing images.
</P><P>

  The <KBD>M-x ffap</KBD> command generalizes <CODE>find-file</CODE> with more
powerful heuristic defaults (see section <A HREF="emacs_32.html#SEC471">AC.28.3 Finding Files and URLs at Point</A>), often based on the text at
point.  Partial Completion mode offers other features extending
<CODE>find-file</CODE>, which can be used with <CODE>ffap</CODE>.
See section <A HREF="emacs_8.html#SEC38">E.3.4 Completion Options</A>.
<A NAME="Buffers"></A>
<HR SIZE="6">
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_16.html#SEC112"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_17.html#SEC172"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated
on <I>April 2, 2002</I>
using <A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

</BODY>
</HTML>
