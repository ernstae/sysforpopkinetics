<HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created on May, 24  2001 by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HEAD>
<TITLE>Autoconf, Automake, and Libtool: 14.2 Fine-grained control of install</TITLE>

<META NAME="description" CONTENT="Autoconf, Automake, and Libtool: 14.2 Fine-grained control of install">
<META NAME="keywords" CONTENT="Autoconf, Automake, and Libtool: 14.2 Fine-grained control of install">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">
<script language="Javascript">
<!--    
// Check the browser version.

    function checkVersion() {
      if (navigator.appVersion.charAt(0)>=3) return true;
      if (navigator.appVersion.charAt(0)>=4) return true;
      else return false;
    }

      if (checkVersion()) {
             homeon = new Image();
             homeon.src = "homeon.png";

             homeoff = new Image();
             homeoff.src = "home.png";

             tocon = new Image();
             tocon.src = "tocon.png";

             tocoff = new Image();
             tocoff.src = "toc.png";

             indexon = new Image();
             indexon.src = "indexon.png";

             indexoff = new Image();
             indexoff.src = "index.png";

             helpon = new Image();
             helpon.src = "helpon.png";

             helpoff = new Image();
             helpoff.src = "help.png";

             backon = new Image();
             backon.src = "backon.png";

             backoff = new Image();
             backoff.src = "back.png";

             forwardon = new Image();
             forwardon.src = "forwardon.png";

             forwardoff = new Image();
             forwardoff.src = "forward.png";

             prevon = new Image();
             prevon.src = "prevon.png";

             prevoff = new Image();
             prevoff.src = "prev.png";

             nexton = new Image();
             nexton.src = "nexton.png";

             nextoff = new Image();
             nextoff.src = "next.png";

             upon = new Image();
             upon.src = "upon.png";

             upoff = new Image();
             upoff.src = "up.png";
         }

     function img_act(imgName) {
             if (checkVersion()) {
             imgOn = eval(imgName + "on.src");
             document [imgName].src = imgOn;
             }
     }

     function img_inact(imgName) {
             if (checkVersion()) {
             imgOff = eval(imgName + "off.src");
             document [imgName].src = imgOff;
             }
     }
// -->
</SCRIPT>

</HEAD>

<BODY LANG="EN" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#6688AA" VLINK="#336688" ALINK="#808080">

<A NAME="SEC107"></A>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=10>
<TR VALIGN="TOP">
<TD ALIGN="MIDDLE" WIDTH=50 BGCOLOR="#e6e6e6">
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="MIDDLE" ALIGN="LEFT"><A HREF="autobook_106.html#SEC106" onMouseover="img_act('prev')" onMouseout="img_inact('prev')"><IMG SRC="prev.png" BORDER="0" ALT="Back: 14.1 Where files are installed" ALIGN="MIDDLE" NAME="prev"></A></TD>
</TR>
<TR VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="MIDDLE" ALIGN="LEFT"><A HREF="autobook_108.html#SEC108" onMouseover="img_act('next')" onMouseout="img_inact('next')"><IMG SRC="next.png" BORDER="0" ALT="Forward: 14.3 Install hooks" ALIGN="MIDDLE" NAME="next"></A></TD>
</TR>
<TR VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TR VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="MIDDLE" ALIGN="LEFT"><A HREF="autobook_108.html#SEC108" onMouseover="img_act('back')" onMouseout="img_inact('back')"><IMG SRC="back.png" BORDER="0" ALT="FastBack: 14.3 Install hooks" ALIGN="MIDDLE" NAME="back"></A></TD>
</TR>
<TR VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="MIDDLE" ALIGN="LEFT"><A HREF="autobook_105.html#SEC105" onMouseover="img_act('up')" onMouseout="img_inact('up')"><IMG SRC="up.png" BORDER="0" ALT="Up: Installing and Uninstalling" ALIGN="MIDDLE" NAME="up"></A></TD>
</TR>
<TR VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="MIDDLE" ALIGN="LEFT"><A HREF="autobook_110.html#SEC110" onMouseover="img_act('forward')" onMouseout="img_inact('forward')"><IMG SRC="forward.png" BORDER="0" ALT="FastForward: Writing Portable C" ALIGN="MIDDLE" NAME="forward"></A></TD>
</TR>
<TR VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="MIDDLE" ALIGN="LEFT"><A HREF="autobook.html#SEC_Top" onMouseover="img_act('home')" onMouseout="img_inact('home')"><IMG SRC="home.png" BORDER="0" ALT="Top: Autoconf, Automake, and Libtool" ALIGN="MIDDLE" NAME="home"></A></TD>
</TR>
<TR VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="MIDDLE" ALIGN="LEFT"><A HREF="autobook_toc.html#SEC_Contents" onMouseover="img_act('toc')" onMouseout="img_inact('toc')"><IMG SRC="toc.png" BORDER="0" ALT="Contents: Table of Contents" ALIGN="MIDDLE" NAME="toc"></A></TD>
</TR>
<TR VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="MIDDLE" ALIGN="LEFT"><A HREF="autobook_285.html#SEC285" onMouseover="img_act('index')" onMouseout="img_inact('index')"><IMG SRC="index.png" BORDER="0" ALT="Index: Index" ALIGN="MIDDLE" NAME="index"></A></TD>
</TR>
<TR VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="MIDDLE" ALIGN="LEFT"><A HREF="autobook_abt.html#SEC_About" onMouseover="img_act('help')" onMouseout="img_inact('help')"><IMG SRC="help.png" BORDER="0" ALT="About: About this document" ALIGN="MIDDLE" NAME="help"></A></TD>
</TR>
</TABLE>
</TD>
<TD ALIGN="LEFT">
<H2> 14.2 Fine-grained control of install </H2>
<!--docid::SEC107::-->
<P>

The second most common way <A NAME="DOCF30" HREF="autobook_fot.html#FOOT30">(30)</A> to configure a package is to set <CODE>prefix</CODE> and
<CODE>exec-prefix</CODE> to different values.  This way, a system
administrator on a heterogenous network can arrange to have the
architecture-independent files shared by all platforms.  Typically this
doesn't save very much space, but it does make in-place bug fixing or
platform-independent runtime configuration a lot easier.
</P><P>

To this end, Automake provides finer control to the user than a simple
<CODE>make install</CODE>.  For instance, the user can strip all the package
executables at install time by running <CODE>make install-strip</CODE> (though
we recommend setting the various <SAMP>`INSTALL'</SAMP> environment variables
instead; this is discussed later).  More importantly, Automake provides
a way to install the architecture-dependent and architecture-independent
parts of a package independently.
</P><P>

In the above scenario, installing the architecture-independent files
more than once is just a waste of time.  Our hypothetical administrator
can install those pieces exactly once, with <CODE>make install-data</CODE>,
and then on each type of build machine install only the
architecture-dependent files with <CODE>make install-exec</CODE>.
</P><P>

Nonstandard directories specified in <TT>`Makefile.am'</TT> are also
separated along <SAMP>`data'</SAMP> and <SAMP>`exec'</SAMP> lines, giving the user
complete control over installation.  If, and only if, the directory
variable name contains the string <SAMP>`exec'</SAMP>, then items ending up in
that directory will be installed by <CODE>install-exec</CODE> and not
<CODE>install-data</CODE>.
</P><P>

At some sites, the paths referred to by software at runtime differ from
those used to actually install the software.  For instance, suppose
<TT>`/usr/local'</TT> is mounted read-only throughout the network.  On the
server, where new packages are built, the file system is available
read-write as <TT>`/w/usr/local'</TT> -- a directory which is not mounted
anywhere else.  In this situation the sysadmin can configure and build
using the <EM>runtime</EM> values, but use the <SAMP>`DESTDIR'</SAMP> trick to
temporarily change the paths at install time:
</P><P>

<TABLE width=100%><tr><td>&nbsp;</td><td class=example bgcolor=#6688aa><br><pre>./configure --prefix=/usr/local
make
make DESTDIR=/w install
</pre></td></tr></table></P><P>

Note that <SAMP>`DESTDIR'</SAMP> operates as a prefix only.  Sometimes this
isn't enough.  In this situation you can explicitly override each
directory variable:
</P><P>

<TABLE width=100%><tr><td>&nbsp;</td><td class=example bgcolor=#6688aa><br><pre>./configure --prefix=/usr/local
make
make prefix=/w/usr/local datadir=/w/usr/share install
</pre></td></tr></table></P><P>

Here is a full example <A NAME="DOCF31" HREF="autobook_fot.html#FOOT31">(31)</A> showing how you can unpack, configure, and build a typical
GNU program on multiple machines at the same time:
</P><P>

<TABLE width=100%><tr><td>&nbsp;</td><td class=example bgcolor=#6688aa><br><pre>sunos$ tar zxf foo-0.1.tar.gz
sunos$ mkdir sunos linux
</pre></td></tr></table></P><P>

In one window:
</P><P>

<TABLE width=100%><tr><td>&nbsp;</td><td class=example bgcolor=#6688aa><br><pre>sunos$ cd sunos
sunos$ ../foo-0.1/configure --prefix=/usr/local \
&#62; --exec-prefix=/usr/local/sunos
sunos$ make
sunos$ make install
</pre></td></tr></table></P><P>

And in another window:
</P><P>

<TABLE width=100%><tr><td>&nbsp;</td><td class=example bgcolor=#6688aa><br><pre>sunos$ rsh linux
linux$ cd ~/linux
linux$ ../foo-0.1/configure --prefix=/usr/local \
&#62; --exec-prefix=/usr/local/linux
linux$ make
linux$ make install-exec
</pre></td></tr></table></P><P>

In this example we install everything on the <SAMP>`sunos'</SAMP> machine, but
we only install the platform-dependent files on the <SAMP>`linux'</SAMP>
machine.  We use a different <CODE>exec-prefix</CODE>, so for example
GNU/Linux executables will end up in <TT>`/usr/local/linux/bin/'</TT>.
</P><P>

</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated
by <I>Gary V. Vaughan</I> on <I>May, 24  2001</I>
using <A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

</BODY>
</HTML>
