SUFFIXES = .dox
.html.dox : 
	doxygen $<

CORE_SRC   = ../libspkcompiler/client.h \
             ../libspkcompiler/Symbol.h \
             ../libspkcompiler/SymbolTable.h \
             ../libspkcompiler/ClientTranslator.h \
             ../libspkcompiler/SpkCompilerError.h \
             ../libspkcompiler/SpkCompilerException.h \
             ../libspkcompiler/upper.h \
             ../libspkcompiler/lower.h

NONMEM_SRC = ../libspkcompiler/nonmem/explang.cpp \
	     ../libspkcompiler/nonmem/lex_explang.c \
	     ../libspkcompiler/nonmem/explang.ypp \
	     ../libspkcompiler/nonmem/lex_explang.l \
             ../libspkcompiler/nonmem/nonmem.h

DRIVER_SRC = ../driver/spkcompiler.cpp

html : nonmem_html core_html compiler_html 

nonmem_html: nonmem.cfg $(NONMEM_SRC)
	doxygen nonmem.cfg

core_html: core.cfg $(CORE_SRC)
	doxygen core.cfg

compiler_html : $(DRIVER_SRC) nonmem_html core_html 
	doxygen spkcompiler.cfg

clean : 
	rm -rf html
	rm -rf latex
	rm -rf man
	rm -rf core/html
	rm -rf nonmem/html
	rm spkcompiler.tag

all  : 
	rm -rf html
	rm -rf latex
	rm -rf man
	rm -rf core/html
	rm -rf nonmem/html
	rm spkcompiler.tag
	doxygen nonmem.cfg
	doxygen core.cfg
	doxygen spkcompiler.cfg
