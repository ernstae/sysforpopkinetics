<!--------------------------------------------------------------------------------

      Specification: SpkInML for NONMEM

      This document specifies the SpkInML format specialized
      for NONMEM client.

---------------------------------------------------------------------------------->

<!ELEMENT spkinml (content, driver, model, data)>

<!----------------------------------------------------
    <content> specifies a short description or
    a title for the problem defined in the document.
----------------------------------------------------->
<!ELEMENT content (#PCDATA)>

<!-- 
     <content> takes "spkinml_ver" attribute which
     specifies the version of 
     the SpkML that a document complies to.
-->
<!ATTLIST content spkinml_ver CDATA #FIXED "1.0">

<!-- 
     <content> takes "client" attribute which
     chooses a client from
     the enumulated list.
     Since this documentation is about
     SpkML specialized for NONMEM control,
     it is fixed to "nonmem".
-->
<!ATTLIST content client (nonmem|saam2|matlab|...) #FIXED "nonmem">

<!--
     <content> takes "analysis" attribute which
     chooses the level of
     estimation, either population or individual.
     Since this documentation is about NONMEM
     specific SpkML, this value is fixed to
     "population".
-->
<!ATTLIST content analysis (population|individual) #FIXED "population">

<!---------------------------------------------------
     <driver> contains information necessary to
     define a SPK driver.
---------------------------------------------------->
<!ELEMENT driver (theta, sigma, omega+, eta, pop_opt, ind_opt, pop_stat, ind_stat)>

<!--
     <theta> section contains the initial estimate (in),
     the lower boudary (low) and the upper boundary (up) values
     for THETA vector.
-->
<!ELEMENT theta (in, low, up)>

<!--
     <theta> takes "length" attribute which specifies the
     length of THETA vector.  The value must much
     the number of <value>s appeared under the tree.
-->
<!ATTLIST theta length CDATA #REQUIRED>

<!--
     <sigma> section contains the initial estimate (in)
     for SIGMA matrix.
-->
<!ELEMENT sigma (in)>
<!--
     <sigma> takes "span" attribute which
     specifies the span of SIGMA matrix.
-->
<!ATTLIST sigma span CDATA #REQUIRED>

<!--
     <sigma> takes "struct" attribute which
     specifies the structure of SIGMA matrix,
     either block (lower half) or diagonal.
-->
<!ATTLIST sigma struct (block|diagonal) #REQUIRED>

<!--
     <omega> section contains the initial estimate (in)
     for OMEAGA matrix.
-->
<!ELEMENT omega (in)>

<!--
     <omega> takes "span" attribute which speicifies
     the span of OMEGA matrix.
-->
<!ATTLIST omega span CDATA #REQUIRED>

<!--
     <omega> takes "struct" attribute which specifies
     the structure of OMEGA matrix, either
     block (lower half) or diagonal.
-->
<!ATTLIST omega struct (block|diagonal) #REQUIRED>

<!--
     <eta> section contains the initial estimate (in)
     for ETA vector.
-->
<!ELEMENT eta (in)>

<!--
     <eta> takes "length" attribute which specifies
     the length of ETA vector.
-->
<!ATTLIST eta length CDATA #REQUIRED>

<!--
     <value> contains a double-precision number.
-->
<!ELEMENT value ($PCDATA)>
<!ATTLIST value fixed (yes|no) #REQUIRED>

<!--
     <in> contains a set of initial estimates.
-->
<!ELEMENT in  (value)+>

<!--
     <low> contains a set of lower boudary values.
-->
<!ELEMENT low (value)+>

<!--
     <up> contains a set of upper boundary values.
-->
<!ELEMENT up  (value)+>

<!--
     <pop_opt> is an empty element in which
     controls regarding the population level optimization
     are specified in terms of attributes.
-->
<!ELEMENT pop_opt EMPTY>

<!ATTLIST pop_opt approximation (fo|foce|laplace) #REQUIRED>
<!ATTLIST pop_opt pop_size CDATA #REQUIRED>
<!ATTLIST pop_opt epsilon CDATA #REQUIRED>
<!ATTLIST pop_opt mitr CDATA #REQUIRED>
<!ATTLIST pop_opt trace CDATA #REQUIRED>
<!ATTLIST pop_opt restart (yes|no) #REQUIRED>
<!ATTLIST pop_opt par_out (yes|no) #REQUIRED>
<!ATTLIST pop_opt obj_out (yes|no) #REQUIRED>
<!ATTLIST pop_opt deriv1_out (yes|no) #REQUIRED>
<!ATTLIST pop_opt deriv2_out (yes|no) #REQUIRED>

<!--
      <ind_opt> is an empty element in which
      controls regarding the individual level optimation
      are specified in terms of attributes.
-->
<!ELEMENT ind_opt EMPTY>


<!ATTLIST ind_opt epsilon CDATA #REQUIRED>
<!ATTLIST ind_opt mitr CDATA #REQUIRED>
<!ATTLIST ind_opt trace CDATA #REQUIRED>
<!ATTLIST ind_opt restart (yes|no) #REQUIRED>
<!ATTLIST ind_opt par_out (yes|no) #REQUIRED>

<!--
      <pop_stat> is an empty element in which
      statistics regarding the final population
      parameter estimates are requested/declined
      in terms of attributes.
-->
<!ELEMENT pop_stat EMPTY>

<!ATTLIST pop_stat stderror (yes|no) #REQUIRED>
<!ATTLIST pop_stat correlation (yes|no) #REQUIRED>
<!ATTLIST pop_stat cov (yes|no) #REQUIRED>
<!ATTLIST pop_stat coefficient (yes|no) #REQUIRED>
<!ATTLIST pop_stat confidence (yes|no) #REQUIRED>

<!--
      <ind_stat> is an empty element in which
      statistics regarding the final individual
      parameter estimates are requested/declined
      in terms of attributes.
-->
<!ELEMENT ind_stat EMPTY>

<!ATTLIST ind_stat stderror (yes|no) #REQUIRED>
<!ATTLIST ind_stat correlation (yes|no) #REQUIRED>
<!ATTLIST ind_stat cov (yes|no) #REQUIRED>
<!ATTLIST ind_stat coefficient (yes|no) #REQUIRED>
<!ATTLIST ind_stat confidence (yes|no) #REQUIRED>

<!---------------------------------------------------
     <model> section contains information
     necessary to define the physiological and
     the statistical models.
----------------------------------------------------->
<!ELEMENT model ( (pk, error) | (pred) )>

<!--
     <pk> is required when "base" attribute of <model>
     is present.  This is the user-portion of
     f(alp, b) definition.
-->
<!ELEMENT pk (#PCDATA)>

<!--
     <error> is required when "base" attribute of
     <model> is present.  This is the user-portion of
     R(alp, b) definition.  
     Case INsensitive.
-->
<!ELEMENT error (#PCDATA)>

<!--
     <pred> is required when "base" attribute of
     <model> is NOT present.
     This is the user definition of the physiological
     model (combining f(alp,b) and R(alp,b).
     Case INsensitive.
-->
<!ELEMENT pred (#PCDATA)>

<!--
     <model> may take "base" attribute when
     a NONMEM canned model is going to be used.
     When this attribute is given, <pk> and <error>
     blocks must be provided too.
     When this is not given, <pred> must appear.
-->
<!ATTLIST model base (advan1|advan2|advan3|advan4|advan5) #IMPLIED>


<!---------------------------------------------------
     <data> section contains various measurements
     taken from subjects in the population.
----------------------------------------------------->
<!ELEMENT data (individual)+>

<!ELEMENT individual (item)+>

<!--
     <item> contains a data item (a set of measurements/parameters).
-->
<!ELEMENT item (value)+>

<!--
     <individual> may take "order" attribute which
     specifies the order in which this individual
     is processed.  When it is not specified,
     the order in which this <individual> block
     appears in the SpkML document is taken
     as the order of processing.
-->
<!ATTLIST individual order CDATA #IMPLIED>

<!--
     <individual> takes "id" attribute which
     identifies the individual.  It can be
     any alpha-numerical string.
-->
<!ATTLIST individual id CDATA #REQUIRED>

<!--
     <individual> takes "length" attribute which
     specifies the length of a data set vector.
-->
<!ATTLIST individual length CDATA #REQUIRED>

<!--
     <item> takes "label" attribute which
     specifies a string used as the label in the output.
     This could be a user-defined or one of the NONMEM reserved
     words:
     (id|l1|l2|dv|mdv|time|data|dat1|dat2|dat3|drop|skip|evid|amt|rate|ss|ii|addl|cmt|pcmt|call|cont)
-->
<!ATTLIST item label(id|l1|l2|dv|mdv|time|data|dat1|dat2|dat3|drop|skip|evid|amt|rate|ss|ii|addl|cmt|pcmt|call|cont|CDATA) #REQUIRED>


<!--
     <item> may take "synonym" attribute which
     specifies an alias/synonym for the value in "label" attribute.
     The value of "synonym" must be one of the NONMEM reserved words:
     (id|l1|l2|dv|mdv|time|data|dat1|dat2|dat3|drop|skip|evid|amt|rate|ss|ii|addl|cmt|pcmt|call|cont)
-->
<!ATTLIST item synonym (id|l1|l2|dv|mdv|time|data|dat1|dat2|dat3|drop|skip|evid|amt|rate|ss|ii|addl|cmt|pcmt|call|cont) #IMPLIED>
