<html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>CVS RFPK HOWTO</title><meta content="DocBook XSL Stylesheets V1.57.0" name="generator"><meta name="description" content="Abstract: 

    "></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article" lang="en"><div class="titlepage"><div><h2 class="title"><a name="N400001"></a>CVS RFPK HOWTO</h2></div><div><div class="author"><h3 class="author">Alan Westhagen</h3></div></div><div><div class="abstract"><p class="title"><b>Abstract:</b></p><p>
    </p></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><a href="#N400013">Introduction</a></dt><dt><a href="#N400039">CVS and other Revision Control Systems</a></dt><dt><a href="#N400063">Repositories</a></dt><dt><a href="#N40008A">Accessing a Repository</a></dt></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="N400013"></a>Introduction</h2></div></div><p>
    Brad Bell and Ranjan Dash have started a new project that will
    include text documents as well as computer source code.  To manage
    revisions to their documents, they have decided to use a system
    known as CVS rather than Microsoft Visual SourceSafe, which is 
    currently being used by the Software Team to manage revisions
    to SPK.
  </p><p>
    CVS is a free, open source product used to manage revisions
    for many important software projects, including Apache, Mozilla, 
    and Linux.  It is especially useful when multiple authors, 
    geographically dispersed, collaborate on the same documents.  
    As configured at RFPK, CVS can be accessed with excellent 
    security from anywhere that there is an internet connection.
  </p><p>
    CVS is available to anyone in RFPK who has a need to manage 
    revisions to their text documents.  This paper contains 
    information specific to the RFPK installation of CVS.  Complete
    information is available in two manuals which are available for        
    download over the Internet.  These are 
    <a href="http://www.cvshome.org/docs/manual/" target="_top">
    <span class="emphasis"><em>Version Management with CVS</em></span>
    </a>, 
    by Per Cederqvist and
    <a href="http://cvsbook.red-bean.com/" target="_top">
    <span class="emphasis"><em>The CVS Book</em></span>
    </a>, <span class="emphasis"><em>Open Source Development with CVS,</em></span>
    by Karl Fogel.
    If you have any questions, please feel free to contact 
    Alan Westhagen (afw@u.washington.edu).
  </p><p>
    The CVS repository is on the Linux system with Internet
    domain name, 
    <tt>
	whitechuck.rfpk.washington.edu
    </tt>
    In order to use the CVS repositories on this system, you
    need to be installed as one of its users.  Please contact
    Mike Macaulay (macaulay@apl.washington.edu) to add your
    login to
    <tt>
       whitechuck
    </tt>.
  </p></div><div class="sect1" lang="en"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="N400039"></a>CVS and other Revision Control Systems</h2></div></div><p>CVS is an example of systems variously referred to as
      <span class="emphasis"><em>revision control</em></span> systems,
      <span class="emphasis"><em>source control</em></span> systems, or
      <span class="emphasis"><em>version control</em></span> systems.
      Widely used revision control systems include SCCS, RCS,
      Microsoft Visual SourceSafe (VSS) and CVS. 
      All of these
      systems were designed to work very much as 
      does SCCS, the senior member of the group, which was developed
      at Bell Labs in the 1970s.  As does SCCS, they all store
      revisions as differences between the revised version and
      the original, rather than complete copies of each version, using
      the same algorithms that were incorporated in SCCS. 
    </p><p>
      In one important respect, however, CVS differs from the
      others.  With all of the other systems, only one user
      is allowed to work on a particular document at
      any one time.  When a user wants to make changes to 
      a text, she must first <span class="emphasis"><em>check it out</em></span>,
      which means that the revision control systems gives
      her the exclusive right to make changes until she 
      subsequently <span class="emphasis"><em>commits</em></span> her modifications
      and relinquishes exclusive control.  If someone else
      has checked out the document that she wants to change,
      she must wait until that person relinquishes it.  If she
      is slow at making her changes, others must wait for
      her.
    </p><p>
      CVS, too, also originally designed to encorporate the
      exclusive checkout model.  This strategy was abandoned, however.
      The change came about in response to a new set
      of requirements that arose primarily as a result of the rapid expansion
      of the Internet in the 1990s.  Previously, software 
      development groups had almost always consisted of individuals
      working in the same office or the same building.  In fact,
      the leading software development methodologies required
      this.  When you are in the same office, it is relatively
      easy to negotiate directly with your co-workers about who
      should have exclusive modification access to a particular
      document.  When, conversely, you have people who are working on different
      continents and in different timezones and communications
      is asynchronous via email, it may take days to get a 
      co-worker to relinquish control.  Similarly, with 
      frequent travel, it became a necessity for team members
      to continue to work at hotels which may or may not have had
      good Internet conectivity, or even while on airplanes
      or in airports.  The exclusive checkout model had become
      an impediment to productivity in the new global environement.
    </p><p>
      The break-through came with the reversal of the checkout 
      model.  When a user checks out a project from CVS, she
      gets a complete working copy on her own machine.  She is
      free to make changes to any of the files in her working
      copy.  If, for example, her working copy is on a laptop,
      she can take her laptop off-line, travel to a conference
      or to her vacation home and continue to work on her project,
      secure in the knowledge that just because her 
      computer is temporarily cut off from the Internet or just
      because she can only devote a small part of the day
      to the project, she is in no way impeding her collaborators.
      When her computer comes back on line, whether by dial-up
      connection, connection at an Internet cafe, or the connection
      at her office, she can have her working copy
      updated with any changes her co-workers have committed just
      by issue a single command to CVS.
    </p><p>
      What happens if the user's changes conflict with changes
      that have been committed by her collaborators in the
      mean time?  This,
      of course, is the situation that the exclusive checkout
      model avoids.  With the CVS model, however,
      it really is not a problem.  When the user
      asks CVS to
      <span class="emphasis"><em>commit</em></span> her changes, CVS will refuse, informing
      her that there are potential conflicts and that she
      will have to perform a <span class="emphasis"><em>merge</em></span>.
      To observe all the 
      differences between her working copy and the current
      copy in the CVS repository, she can run the CVS 
      <span class="emphasis"><em>diff</em></span> command.  She can then edit
      her working copy to resolve any differences.  When
      she finally runs the CVS <span class="emphasis"><em>merge</em></span>
      command, CVS will provide an editing window in which
      she can make her final changes if any potential
      conflicts still remain.
      Once she completes the merge, her revision
      becomes the most recent revision in the repository.
    </p><p>
      Occasionally having to enter into a merging process is
      the price users of CVS pay for the freedom to make revisions
      whenever and wherever they can be done most effectively.
      Especially given the importance of collaboration with 
      partners at other institutions within the academic and
      scientific world, CVS will be a valuable addition to
      RFPK's set of resources.
    </p></div><div class="sect1" lang="en"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="N400063"></a>Repositories</h2></div></div><p>
      All of the documents under revision control are stored in
      <span class="emphasis"><em>repository</em></span> on a server.  CVS permits
      several repositories on a single server.  At present,
      we have defined two.  One repository is for the work
      being done by Ranjan and Brad.  The other is for certain
      documents of the Software Team, including this tutorial.
    </p><p>
      The repository set up for Ranjan and Brad
      has its root in the directory at the absolute path 
      <tt>
	/usr/local/cvs_repos/rfpk/r1
      </tt> 
      on the server with Internet domain name
      <tt>
	whitechuck.rfpk.washington.edu
      </tt>
      The other repository on
      <tt>whitechuck</tt>
      has its root in the directory at absolute path
      <tt>
	/usr/local/cvs_repos/rfpk/r2
      </tt>
      .
    </p><p>
      Within a repository, sets of documents are organized as
      modules.  A module could be all the source code for a 
      computer application, or all the source code for a part
      of the application.  It could be all the documents 
      required for an academic paper, or all the chapters of
      a book.  Within the operating system of the computer,
      the repository is directory hierarchy.  A module name
      can be associated with any directory in the hierarchy,
      with a single file, or even with a list of files.
    </p><p>
      For example, the first module added to the 
      <tt>r1</tt> repository
      was the module called <span class="emphasis"><em>muscle</em></span>,
      so named because it holds a paper that Ranjan and
      Brad are collaborating on which has something to 
      do with muscle tissue.
    </p></div><div class="sect1" lang="en"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="N40008A"></a>Accessing a Repository</h2></div></div><p>
      At present, the only way to use CVS at RFPK
      is from a Unix of 
      Linux computer, or from the Cygwin environment on a 
      Windows computer.  In either case, CVS provides
      the same command-line interface.
    </p><p>
      All access to CVS at RFPK is via
      <span class="emphasis"><em>ssh</em></span>, the secure shell.  When you 
      issue a CVS command from the command line on your
      workstation, the local copy of the <span class="emphasis"><em>cvs</em></span> program communicates
      with the server via an encrypted channel that it
      calls upon $ssh; to provide.  The command is actually 
      executed on the server, with data being piped through the
      encrypted channel between the server and your workstation.
      This is, arguably, the most secure arrangement possible on
      the Internet. 
    </p><p>
      Because CVS was originally designed to perform remote
      execution using not <span class="emphasis"><em>ssh</em></span> but rather an insecure program
      called <span class="emphasis"><em>rsh</em></span>, it is necessary to indicate
      to CVS that only $ssh; should be used.  This can be accomplished
      by setting and exporting the <tt>CVS_RSH</tt> 
      environment variable.  Using the Bash shell, which is 
      standard with Cygwin, most Linux systems and many Unix
      systems, you would input the following commands at the
      to the command-line interface:
      <pre class="programlisting">
	CVS_RSH=ssh
	export CVS_RSH
      </pre>
      To avoid having to type these two lines in every time you log
      in to a Linux or Unix shell or start the Cygwin shell
      window, you should add them to your
      <tt>.bash_profile</tt> shell
      initialization file.
    </p><p>
      Since the server supports several CVS repositories, you must 
      tell CVS which repository you are working with.  Although
      all <span class="emphasis"><em>cvs</em></span> commands allow you to identify the repository with
      a command-line argument, it is usually more convenient to
      define an environment variable.  The following lines should
      be added to your 
      <tt>.bash_profile</tt> shell
      initialization file:
      <pre class="programlisting">
        USER=<span class="emphasis"><em>user</em></span>
	CVSHOST=whitechuck.rfpk.washington.edu
	CVSPATH=/usr/local/cvs_repos/rfpk/r1
	CVSROOT=:ext:$USER@$CVSHOST:$CVSPATH
        export CVSROOT
      </pre>
      where <span class="emphasis"><em>user</em></span> is your login user name on 
      the the server.  
      <span class="emphasis"><em>Note the r1 at the end of the line which
      defines CVSPATH</em></span>.  This indicates that you
      want to use the 
      <tt>r1</tt>
      repository rather than
      <tt>r2</tt>
      or some other repository.
    </p></div></div></body></html>