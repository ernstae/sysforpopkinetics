<HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created on April 2, 2002 by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HEAD>
<TITLE>GNU Emacs Manual: Rmail</TITLE>

<META NAME="description" CONTENT="GNU Emacs Manual: Rmail">
<META NAME="keywords" CONTENT="GNU Emacs Manual: Rmail">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY LANG="EN" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC374"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_29.html#SEC373"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC375"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_29.html#SEC363"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_31.html#SEC396"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> AA. Reading Mail with Rmail </H1>
<!--docid::SEC374::-->
<P>

  Rmail is an Emacs subsystem for reading and disposing of mail that you
receive.  Rmail stores mail messages in files called Rmail files.
Reading the message in an Rmail file is done in a special major mode,
Rmail mode, which redefines most letters to run commands for managing
mail.  The command <CODE>rmail-mode</CODE> is used to switch into Rmail mode,
and it runs the hook <CODE>rmail-mode-hook</CODE> as usual, but don't run this
command by hand; it can't do a reasonable job unless the buffer is
visiting a proper Rmail file.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_30.html#SEC375">AA.1 Basic Concepts of Rmail</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Basic concepts of Rmail, and simple use.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_30.html#SEC376">AA.2 Scrolling Within a Message</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Scrolling through a message.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_30.html#SEC377">AA.3 Moving Among Messages</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Moving to another message.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_30.html#SEC378">AA.4 Deleting Messages</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Deleting and expunging messages.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_30.html#SEC379">AA.5 Rmail Files and Inboxes</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How mail gets into the Rmail file.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_30.html#SEC380">AA.6 Multiple Rmail Files</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Using multiple Rmail files.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_30.html#SEC381">AA.7 Copying Messages Out to Files</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Copying message out to files.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_30.html#SEC382">AA.8 Labels</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Classifying messages by labeling them.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_30.html#SEC383">AA.9 Rmail Attributes</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Certain standard labels, called attributes.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_30.html#SEC384">AA.10 Sending Replies</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Sending replies to messages you are viewing.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_30.html#SEC385">AA.11 Summaries</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Summaries show brief info on many messages.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_30.html#SEC388">AA.12 Sorting the Rmail File</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Sorting messages in Rmail.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_30.html#SEC389">AA.13 Display of Messages</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How Rmail displays a message; customization.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_30.html#SEC390">AA.14 Rmail and Coding Systems</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How Rmail handles decoding character sets.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_30.html#SEC391">AA.15 Editing Within a Message</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Editing message text and headers in Rmail.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_30.html#SEC392">AA.16 Digest Messages</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Extracting the messages from a digest message.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_30.html#SEC393">AA.17 Converting an Rmail File to Inbox Format</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Converting an Rmail file to mailbox format.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_30.html#SEC394">AA.18 Reading Rot13 Messages</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Reading messages encoded in the rot13 code.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_30.html#SEC395">AA.19 <CODE>movemail</CODE> and POP</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">More details of fetching new mail.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Rmail Basics"></A>
<HR SIZE="6">
<A NAME="SEC375"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC374"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC376"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC374"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC374"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_31.html#SEC396"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AA.1 Basic Concepts of Rmail </H2>
<!--docid::SEC375::-->
<P>

<A NAME="IDX1879"></A>
<A NAME="IDX1880"></A>
  Using Rmail in the simplest fashion, you have one Rmail file
<TT>`~/RMAIL'</TT> in which all of your mail is saved.  It is called your
<EM>primary Rmail file</EM>.  The command <KBD>M-x rmail</KBD> reads your primary
Rmail file, merges new mail in from your inboxes, displays the first
message you haven't read yet, and lets you begin reading.  The variable
<CODE>rmail-file-name</CODE> specifies the name of the primary Rmail file.
</P><P>

  Rmail uses narrowing to hide all but one message in the Rmail file.
The message that is shown is called the <EM>current message</EM>.  Rmail
mode's special commands can do such things as delete the current
message, copy it into another file, send a reply, or move to another
message.  You can also create multiple Rmail files and use Rmail to move
messages between them.
</P><P>

<A NAME="IDX1881"></A>
  Within the Rmail file, messages are normally arranged sequentially in
order of receipt; you can specify other ways to sort them.  Messages are
assigned consecutive integers as their <EM>message numbers</EM>.  The
number of the current message is displayed in Rmail's mode line,
followed by the total number of messages in the file.  You can move to a
message by specifying its message number with the <KBD>j</KBD> key
(see section <A HREF="emacs_30.html#SEC377">AA.3 Moving Among Messages</A>).
</P><P>

<A NAME="IDX1882"></A>
<A NAME="IDX1883"></A>
  Following the usual conventions of Emacs, changes in an Rmail file
become permanent only when the file is saved.  You can save it with
<KBD>s</KBD> (<CODE>rmail-expunge-and-save</CODE>), which also expunges deleted
messages from the file first (see section <A HREF="emacs_30.html#SEC378">AA.4 Deleting Messages</A>).  To save the
file without expunging, use <KBD>C-x C-s</KBD>.  Rmail also saves the Rmail
file after merging new mail from an inbox file (see section <A HREF="emacs_30.html#SEC379">AA.5 Rmail Files and Inboxes</A>).
</P><P>

<A NAME="IDX1884"></A>
<A NAME="IDX1885"></A>
<A NAME="IDX1886"></A>
<A NAME="IDX1887"></A>
  You can exit Rmail with <KBD>q</KBD> (<CODE>rmail-quit</CODE>); this expunges and
saves the Rmail file and then switches to another buffer.  But there is
no need to "exit" formally.  If you switch from Rmail to editing in
other buffers, and never happen to switch back, you have exited.  (The
Rmail command <KBD>b</KBD>, <CODE>rmail-bury</CODE>, does this for you.)  Just make
sure to save the Rmail file eventually (like any other file you have
changed).  <KBD>C-x s</KBD> is a good enough way to do this
(see section <A HREF="emacs_16.html#SEC113">M.3 Saving Files</A>).
</P><P>

<A NAME="Rmail Scrolling"></A>
<HR SIZE="6">
<A NAME="SEC376"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC375"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC377"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC377"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC374"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_31.html#SEC396"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AA.2 Scrolling Within a Message </H2>
<!--docid::SEC376::-->
<P>

  When Rmail displays a message that does not fit on the screen, you
must scroll through it to read the rest.  You could do this with 
<KBD>C-v</KBD>, <KBD>M-v</KBD> and <KBD>M-&#60;</KBD>, but in Rmail scrolling is so
frequent that it deserves to be easier to type.
</P><P>

<DL COMPACT>
<DT><KBD><KBD>SPC</KBD></KBD>
<DD>Scroll forward (<CODE>scroll-up</CODE>).
<DT><KBD><KBD>DEL</KBD></KBD>
<DD>Scroll backward (<CODE>scroll-down</CODE>).
<DT><KBD>.</KBD>
<DD>Scroll to start of message (<CODE>rmail-beginning-of-message</CODE>).
</DL>
<P>

<A NAME="IDX1888"></A>
<A NAME="IDX1889"></A>
  Since the most common thing to do while reading a message is to scroll
through it by screenfuls, Rmail makes <KBD>SPC</KBD> and <KBD>DEL</KBD> synonyms of
<KBD>C-v</KBD> (<CODE>scroll-up</CODE>) and <KBD>M-v</KBD> (<CODE>scroll-down</CODE>)
</P><P>

<A NAME="IDX1890"></A>
<A NAME="IDX1891"></A>
  The command <KBD>.</KBD> (<CODE>rmail-beginning-of-message</CODE>) scrolls back to the
beginning of the selected message.  This is not quite the same as <KBD>M-&#60;</KBD>:
for one thing, it does not set the mark; for another, it resets the buffer
boundaries to the current message if you have changed them.
</P><P>

<A NAME="Rmail Motion"></A>
<HR SIZE="6">
<A NAME="SEC377"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC376"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC378"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC378"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC374"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_31.html#SEC396"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AA.3 Moving Among Messages </H2>
<!--docid::SEC377::-->
<P>

  The most basic thing to do with a message is to read it.  The way to
do this in Rmail is to make the message current.  The usual practice is
to move sequentially through the file, since this is the order of
receipt of messages.  When you enter Rmail, you are positioned at the
first message that you have not yet made current (that is, the first one
that has the <SAMP>`unseen'</SAMP> attribute; see section <A HREF="emacs_30.html#SEC383">AA.9 Rmail Attributes</A>).  Move
forward to see the other new messages; move backward to re-examine old
messages.
</P><P>

<DL COMPACT>
<DT><KBD>n</KBD>
<DD>Move to the next nondeleted message, skipping any intervening deleted
messages (<CODE>rmail-next-undeleted-message</CODE>).
<DT><KBD>p</KBD>
<DD>Move to the previous nondeleted message
(<CODE>rmail-previous-undeleted-message</CODE>).
<DT><KBD>M-n</KBD>
<DD>Move to the next message, including deleted messages
(<CODE>rmail-next-message</CODE>).
<DT><KBD>M-p</KBD>
<DD>Move to the previous message, including deleted messages
(<CODE>rmail-previous-message</CODE>).
<DT><KBD>j</KBD>
<DD>Move to the first message.  With argument <VAR>n</VAR>, move to
message number <VAR>n</VAR> (<CODE>rmail-show-message</CODE>).
<DT><KBD>&#62;</KBD>
<DD>Move to the last message (<CODE>rmail-last-message</CODE>).
<DT><KBD>&#60;</KBD>
<DD>Move to the first message (<CODE>rmail-first-message</CODE>).
<P>

<DT><KBD>M-s <VAR>regexp</VAR> <KBD>RET</KBD></KBD>
<DD>Move to the next message containing a match for <VAR>regexp</VAR>
(<CODE>rmail-search</CODE>).
<P>

<DT><KBD>- M-s <VAR>regexp</VAR> <KBD>RET</KBD></KBD>
<DD>Move to the previous message containing a match for <VAR>regexp</VAR>.
</DL>
<P>

<A NAME="IDX1892"></A>
<A NAME="IDX1893"></A>
<A NAME="IDX1894"></A>
<A NAME="IDX1895"></A>
<A NAME="IDX1896"></A>
<A NAME="IDX1897"></A>
<A NAME="IDX1898"></A>
<A NAME="IDX1899"></A>
  <KBD>n</KBD> and <KBD>p</KBD> are the usual way of moving among messages in
Rmail.  They move through the messages sequentially, but skip over
deleted messages, which is usually what you want to do.  Their command
definitions are named <CODE>rmail-next-undeleted-message</CODE> and
<CODE>rmail-previous-undeleted-message</CODE>.  If you do not want to skip
deleted messages--for example, if you want to move to a message to
undelete it--use the variants <KBD>M-n</KBD> and <KBD>M-p</KBD>
(<CODE>rmail-next-message</CODE> and <CODE>rmail-previous-message</CODE>).  A
numeric argument to any of these commands serves as a repeat
count.</P><P>

  In Rmail, you can specify a numeric argument by typing just the
digits.  You don't need to type <KBD>C-u</KBD> first.
</P><P>

<A NAME="IDX1900"></A>
<A NAME="IDX1901"></A>
<A NAME="IDX1902"></A>
  The <KBD>M-s</KBD> (<CODE>rmail-search</CODE>) command is Rmail's version of
search.  The usual incremental search command <KBD>C-s</KBD> works in Rmail,
but it searches only within the current message.  The purpose of
<KBD>M-s</KBD> is to search for another message.  It reads a regular
expression (see section <A HREF="emacs_14.html#SEC97">K.5 Syntax of Regular Expressions</A>) nonincrementally, then searches starting at
the beginning of the following message for a match.  It then selects
that message.  If <VAR>regexp</VAR> is empty, <KBD>M-s</KBD> reuses the regexp
used the previous time.
</P><P>

  To search backward in the file for another message, give <KBD>M-s</KBD> a
negative argument.  In Rmail you can do this with <KBD>- M-s</KBD>.
</P><P>

  It is also possible to search for a message based on labels.
See section <A HREF="emacs_30.html#SEC382">AA.8 Labels</A>.
</P><P>

<A NAME="IDX1903"></A>
<A NAME="IDX1904"></A>
<A NAME="IDX1905"></A>
<A NAME="IDX1906"></A>
<A NAME="IDX1907"></A>
<A NAME="IDX1908"></A>
  To move to a message specified by absolute message number, use <KBD>j</KBD>
(<CODE>rmail-show-message</CODE>) with the message number as argument.  With
no argument, <KBD>j</KBD> selects the first message.  <KBD>&#60;</KBD>
(<CODE>rmail-first-message</CODE>) also selects the first message.  <KBD>&#62;</KBD>
(<CODE>rmail-last-message</CODE>) selects the last message.
</P><P>

<A NAME="Rmail Deletion"></A>
<HR SIZE="6">
<A NAME="SEC378"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC377"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC379"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC379"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC374"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_31.html#SEC396"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AA.4 Deleting Messages </H2>
<!--docid::SEC378::-->
<P>

<A NAME="IDX1909"></A>
  When you no longer need to keep a message, you can <EM>delete</EM> it.  This
flags it as ignorable, and some Rmail commands pretend it is no longer
present; but it still has its place in the Rmail file, and still has its
message number.
</P><P>

<A NAME="IDX1910"></A>
  <EM>Expunging</EM> the Rmail file actually removes the deleted messages.
The remaining messages are renumbered consecutively.  Expunging is the only
action that changes the message number of any message, except for
undigestifying (see section <A HREF="emacs_30.html#SEC392">AA.16 Digest Messages</A>).
</P><P>

<DL COMPACT>
<DT><KBD>d</KBD>
<DD>Delete the current message, and move to the next nondeleted message
(<CODE>rmail-delete-forward</CODE>).
<DT><KBD>C-d</KBD>
<DD>Delete the current message, and move to the previous nondeleted
message (<CODE>rmail-delete-backward</CODE>).
<DT><KBD>u</KBD>
<DD>Undelete the current message, or move back to a deleted message and
undelete it (<CODE>rmail-undelete-previous-message</CODE>).
<DT><KBD>x</KBD>
<DD>Expunge the Rmail file (<CODE>rmail-expunge</CODE>).
</DL>
<P>

<A NAME="IDX1911"></A>
<A NAME="IDX1912"></A>
<A NAME="IDX1913"></A>
<A NAME="IDX1914"></A>
  There are two Rmail commands for deleting messages.  Both delete the
current message and select another message.  <KBD>d</KBD>
(<CODE>rmail-delete-forward</CODE>) moves to the following message, skipping
messages already deleted, while <KBD>C-d</KBD> (<CODE>rmail-delete-backward</CODE>)
moves to the previous nondeleted message.  If there is no nondeleted
message to move to in the specified direction, the message that was just
deleted remains current.  A numeric argument to either command reverses
the direction of motion after deletion.
</P><P>

<A NAME="IDX1915"></A>
  Whenever Rmail deletes a message, it runs the hook
<CODE>rmail-delete-message-hook</CODE>.  When the hook functions are invoked,
the message has been marked deleted, but it is still the current message
in the Rmail buffer.
</P><P>

<A NAME="IDX1916"></A>
<A NAME="IDX1917"></A>
<A NAME="IDX1918"></A>
<A NAME="IDX1919"></A>
<A NAME="IDX1920"></A>
  To make all the deleted messages finally vanish from the Rmail file,
type <KBD>x</KBD> (<CODE>rmail-expunge</CODE>).  Until you do this, you can still
<EM>undelete</EM> the deleted messages.  The undeletion command, <KBD>u</KBD>
(<CODE>rmail-undelete-previous-message</CODE>), is designed to cancel the
effect of a <KBD>d</KBD> command in most cases.  It undeletes the current
message if the current message is deleted.  Otherwise it moves backward
to previous messages until a deleted message is found, and undeletes
that message.
</P><P>

  You can usually undo a <KBD>d</KBD> with a <KBD>u</KBD> because the <KBD>u</KBD>
moves back to and undeletes the message that the <KBD>d</KBD> deleted.  But
this does not work when the <KBD>d</KBD> skips a few already-deleted messages
that follow the message being deleted; then the <KBD>u</KBD> command
undeletes the last of the messages that were skipped.  There is no clean
way to avoid this problem.  However, by repeating the <KBD>u</KBD> command,
you can eventually get back to the message that you intend to
undelete.  You can also select a particular deleted message with
the <KBD>M-p</KBD> command, then type <KBD>u</KBD> to undelete it.
</P><P>

  A deleted message has the <SAMP>`deleted'</SAMP> attribute, and as a result
<SAMP>`deleted'</SAMP> appears in the mode line when the current message is
deleted.  In fact, deleting or undeleting a message is nothing more than
adding or removing this attribute.  See section <A HREF="emacs_30.html#SEC383">AA.9 Rmail Attributes</A>.
</P><P>

<A NAME="Rmail Inbox"></A>
<HR SIZE="6">
<A NAME="SEC379"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC378"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC380"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC380"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC374"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_31.html#SEC396"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AA.5 Rmail Files and Inboxes </H2>
<!--docid::SEC379::-->
<P>

  The operating system places incoming mail for you in a file that we
call your <EM>inbox</EM>.  When you start up Rmail, it runs a C program
called <CODE>movemail</CODE> to copy the new messages from your inbox into
your primary Rmail file, which also contains other messages saved from
previous Rmail sessions.  It is in this file that you actually read the
mail with Rmail.  This operation is called <EM>getting new mail</EM>.  You
can get new mail at any time in Rmail by typing <KBD>g</KBD>.
</P><P>

<A NAME="IDX1921"></A>
<A NAME="IDX1922"></A>
  The variable <CODE>rmail-primary-inbox-list</CODE> contains a list of the
files which are inboxes for your primary Rmail file.  If you don't set
this variable explicitly, it is initialized from the <CODE>MAIL</CODE>
environment variable, or, as a last resort, set to <CODE>nil</CODE>, which
means to use the default inbox.  The default inbox is
<TT>`/var/mail/<VAR>username</VAR>'</TT>, <TT>`/usr/spool/mail/<VAR>username</VAR>'</TT>,
or <TT>`/usr/mail/<VAR>username</VAR>'</TT>, depending on your operating system.
</P><P>

  To see what the default is on your system, use <KBD>C-h v
rmail-primary-inbox <KBD>RET</KBD></KBD>.  You can specify the inbox file(s) for
any Rmail file with the command <CODE>set-rmail-inbox-list</CODE>; see
<A HREF="emacs_30.html#SEC380">AA.6 Multiple Rmail Files</A>.
</P><P>

  There are two reasons for having separate Rmail files and inboxes.
</P><P>

<OL>
<LI>
The inbox file format varies between operating systems and according to
the other mail software in use.  Only one part of Rmail needs to know
about the alternatives, and it need only understand how to convert all
of them to Rmail's own format.
<P>

<LI>
It is very cumbersome to access an inbox file without danger of losing
mail, because it is necessary to interlock with mail delivery.
Moreover, different operating systems use different interlocking
techniques.  The strategy of moving mail out of the inbox once and for
all into a separate Rmail file avoids the need for interlocking in all
the rest of Rmail, since only Rmail operates on the Rmail file.
</OL>
<P>

  Rmail was written to use Babyl format as its internal format.  Since
then, we have recognized that the usual inbox format on Unix and GNU
systems is adequate for the job, and we plan to change Rmail to use that
as its internal format.  However, the Rmail file will still be separate
from the inbox file, even on systems where their format is the same.
</P><P>

<A NAME="Rmail Files"></A>
<HR SIZE="6">
<A NAME="SEC380"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC379"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC381"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC381"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC374"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_31.html#SEC396"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AA.6 Multiple Rmail Files </H2>
<!--docid::SEC380::-->
<P>

  Rmail operates by default on your <EM>primary Rmail file</EM>, which is named
<TT>`~/RMAIL'</TT> and receives your incoming mail from your system inbox file.
But you can also have other Rmail files and edit them with Rmail.  These
files can receive mail through their own inboxes, or you can move messages
into them with explicit Rmail commands (see section <A HREF="emacs_30.html#SEC381">AA.7 Copying Messages Out to Files</A>).
</P><P>

<DL COMPACT>
<DT><KBD>i <VAR>file</VAR> <KBD>RET</KBD></KBD>
<DD>Read <VAR>file</VAR> into Emacs and run Rmail on it (<CODE>rmail-input</CODE>).
<P>

<DT><KBD>M-x set-rmail-inbox-list <KBD>RET</KBD> <VAR>files</VAR> <KBD>RET</KBD></KBD>
<DD>Specify inbox file names for current Rmail file to get mail from.
<P>

<DT><KBD>g</KBD>
<DD>Merge new mail from current Rmail file's inboxes
(<CODE>rmail-get-new-mail</CODE>).
<P>

<DT><KBD>C-u g <VAR>file</VAR> <KBD>RET</KBD></KBD>
<DD>Merge new mail from inbox file <VAR>file</VAR>.
</DL>
<P>

<A NAME="IDX1923"></A>
<A NAME="IDX1924"></A>
  To run Rmail on a file other than your primary Rmail file, you may use
the <KBD>i</KBD> (<CODE>rmail-input</CODE>) command in Rmail.  This visits the file
in Rmail mode.  You can use <KBD>M-x rmail-input</KBD> even when not in
Rmail.
</P><P>

  The file you read with <KBD>i</KBD> should normally be a valid Rmail file.
If it is not, Rmail tries to decompose it into a stream of messages in
various known formats.  If it succeeds, it converts the whole file to an
Rmail file.  If you specify a file name that doesn't exist, <KBD>i</KBD>
initializes a new buffer for creating a new Rmail file.
</P><P>

<A NAME="IDX1925"></A>
<A NAME="IDX1926"></A>
  You can also select an Rmail file from a menu.  Choose first the menu
bar Classify item, then from the Classify menu choose the Input Rmail
File item; then choose the Rmail file you want.  The variables
<CODE>rmail-secondary-file-directory</CODE> and
<CODE>rmail-secondary-file-regexp</CODE> specify which files to offer in the
menu: the first variable says which directory to find them in; the
second says which files in that directory to offer (all those that match
the regular expression).  These variables also apply to choosing a file
for output (see section <A HREF="emacs_30.html#SEC381">AA.7 Copying Messages Out to Files</A>).
</P><P>

<A NAME="IDX1927"></A>
  Each Rmail file can contain a list of inbox file names; you can specify
this list with <KBD>M-x set-rmail-inbox-list <KBD>RET</KBD> <VAR>files</VAR>
<KBD>RET</KBD></KBD>.  The argument can contain any number of file names, separated
by commas.  It can also be empty, which specifies that this file should
have no inboxes.  Once a list of inboxes is specified, the Rmail file
remembers it permanently until you specify a different list.
</P><P>

  As a special exception, if your primary Rmail file does not specify any
inbox files, it uses your standard system inbox.
</P><P>

<A NAME="IDX1928"></A>
<A NAME="IDX1929"></A>
  The <KBD>g</KBD> command (<CODE>rmail-get-new-mail</CODE>) merges mail into the
current Rmail file from its specified inboxes.  If the Rmail file
has no inboxes, <KBD>g</KBD> does nothing.  The command <KBD>M-x rmail</KBD>
also merges new mail into your primary Rmail file.
</P><P>

  To merge mail from a file that is not the usual inbox, give the
<KBD>g</KBD> key a numeric argument, as in <KBD>C-u g</KBD>.  Then it reads a file
name and merges mail from that file.  The inbox file is not deleted or
changed in any way when <KBD>g</KBD> with an argument is used.  This is,
therefore, a general way of merging one file of messages into another.
</P><P>

<A NAME="Rmail Output"></A>
<HR SIZE="6">
<A NAME="SEC381"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC380"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC382"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC382"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC374"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_31.html#SEC396"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AA.7 Copying Messages Out to Files </H2>
<!--docid::SEC381::-->
<P>

  These commands copy messages from an Rmail file into another file.
</P><P>

<DL COMPACT>
<DT><KBD>o <VAR>file</VAR> <KBD>RET</KBD></KBD>
<DD>Append a copy of the current message to the file <VAR>file</VAR>, using Rmail
file format by default (<CODE>rmail-output-to-rmail-file</CODE>).
<P>

<DT><KBD>C-o <VAR>file</VAR> <KBD>RET</KBD></KBD>
<DD>Append a copy of the current message to the file <VAR>file</VAR>, using
system inbox file format by default (<CODE>rmail-output</CODE>).
<P>

<DT><KBD>w <VAR>file</VAR> <KBD>RET</KBD></KBD>
<DD>Output just the message body to the file <VAR>file</VAR>, taking the default
file name from the message <SAMP>`Subject'</SAMP> header.
</DL>
<P>

<A NAME="IDX1930"></A>
<A NAME="IDX1931"></A>
<A NAME="IDX1932"></A>
<A NAME="IDX1933"></A>
  The commands <KBD>o</KBD> and <KBD>C-o</KBD> copy the current message into a
specified file.  This file may be an Rmail file or it may be in system
inbox format; the output commands ascertain the file's format and write
the copied message in that format.
</P><P>

  The <KBD>o</KBD> and <KBD>C-o</KBD> commands differ in two ways: each has its
own separate default file name, and each specifies a choice of format to
use when the file does not already exist.  The <KBD>o</KBD> command uses
Rmail format when it creates a new file, while <KBD>C-o</KBD> uses system
inbox format for a new file.  The default file name for <KBD>o</KBD> is the
file name used last with <KBD>o</KBD>, and the default file name for
<KBD>C-o</KBD> is the file name used last with <KBD>C-o</KBD>.
</P><P>

  If the output file is an Rmail file currently visited in an Emacs buffer,
the output commands copy the message into that buffer.  It is up to you
to save the buffer eventually in its file.
</P><P>

<A NAME="IDX1934"></A>
<A NAME="IDX1935"></A>
  Sometimes you may receive a message whose body holds the contents of a
file.  You can save the body to a file (excluding the message header)
with the <KBD>w</KBD> command (<CODE>rmail-output-body-to-file</CODE>).  Often
these messages contain the intended file name in the <SAMP>`Subject'</SAMP>
field, so the <KBD>w</KBD> command uses the <SAMP>`Subject'</SAMP> field as the
default for the output file name.  However, the file name is read using
the minibuffer, so you can specify a different name if you wish.
</P><P>

  You can also output a message to an Rmail file chosen with a menu.
Choose first the menu bar Classify item, then from the Classify menu
choose the Output Rmail File menu item; then choose the Rmail file you want.
This outputs the current message to that file, like the <KBD>o</KBD> command.
The variables <CODE>rmail-secondary-file-directory</CODE> and
<CODE>rmail-secondary-file-regexp</CODE> specify which files to offer in the
menu: the first variable says which directory to find them in; the
second says which files in that directory to offer (all those that match
the regular expression).
</P><P>

<A NAME="IDX1936"></A>
  Copying a message gives the original copy of the message the
<SAMP>`filed'</SAMP> attribute, so that <SAMP>`filed'</SAMP> appears in the mode line
when such a message is current.  If you like to keep just a single copy
of every mail message, set the variable <CODE>rmail-delete-after-output</CODE>
to <CODE>t</CODE>; then the <KBD>o</KBD> and <KBD>C-o</KBD> commands delete the original
message after copying it.  (You can undelete the original afterward if
you wish.)
</P><P>

  Copying messages into files in system inbox format uses the header
fields that are displayed in Rmail at the time.  Thus, if you use the
<KBD>t</KBD> command to view the entire header and then copy the message, the
entire header is copied.  See section <A HREF="emacs_30.html#SEC389">AA.13 Display of Messages</A>.
</P><P>

<A NAME="IDX1937"></A>
  The variable <CODE>rmail-output-file-alist</CODE> lets you specify
intelligent defaults for the output file, based on the contents of the
current message.  The value should be a list whose elements have this
form:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(<VAR>regexp</VAR> . <VAR>name-exp</VAR>)
</pre></td></tr></table></P><P>

If there's a match for <VAR>regexp</VAR> in the current message, then the
default file name for output is <VAR>name-exp</VAR>.  If multiple elements
match the message, the first matching element decides the default file
name.  The subexpression <VAR>name-exp</VAR> may be a string constant giving
the file name to use, or more generally it may be any Lisp expression
that returns a file name as a string.  <CODE>rmail-output-file-alist</CODE>
applies to both <KBD>o</KBD> and <KBD>C-o</KBD>.
</P><P>

<A NAME="Rmail Labels"></A>
<HR SIZE="6">
<A NAME="SEC382"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC381"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC383"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC383"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC374"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_31.html#SEC396"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AA.8 Labels </H2>
<!--docid::SEC382::-->
<P>

  Each message can have various <EM>labels</EM> assigned to it as a means
of classification.  Each label has a name; different names are different
labels.  Any given label is either present or absent on a particular
message.  A few label names have standard meanings and are given to
messages automatically by Rmail when appropriate; these special labels
are called <EM>attributes</EM>.
(See section <A HREF="emacs_30.html#SEC383">AA.9 Rmail Attributes</A>.)
All other labels are assigned only by users.
</P><P>

<DL COMPACT>
<DT><KBD>a <VAR>label</VAR> <KBD>RET</KBD></KBD>
<DD>Assign the label <VAR>label</VAR> to the current message (<CODE>rmail-add-label</CODE>).
<DT><KBD>k <VAR>label</VAR> <KBD>RET</KBD></KBD>
<DD>Remove the label <VAR>label</VAR> from the current message (<CODE>rmail-kill-label</CODE>).
<DT><KBD>C-M-n <VAR>labels</VAR> <KBD>RET</KBD></KBD>
<DD>Move to the next message that has one of the labels <VAR>labels</VAR>
(<CODE>rmail-next-labeled-message</CODE>).
<DT><KBD>C-M-p <VAR>labels</VAR> <KBD>RET</KBD></KBD>
<DD>Move to the previous message that has one of the labels <VAR>labels</VAR>
(<CODE>rmail-previous-labeled-message</CODE>).
<DT><KBD>C-M-l <VAR>labels</VAR> <KBD>RET</KBD></KBD>
<DD>Make a summary of all messages containing any of the labels <VAR>labels</VAR>
(<CODE>rmail-summary-by-labels</CODE>).
</DL>
<P>

<A NAME="IDX1938"></A>
<A NAME="IDX1939"></A>
<A NAME="IDX1940"></A>
<A NAME="IDX1941"></A>
  The <KBD>a</KBD> (<CODE>rmail-add-label</CODE>) and <KBD>k</KBD>
(<CODE>rmail-kill-label</CODE>) commands allow you to assign or remove any
label on the current message.  If the <VAR>label</VAR> argument is empty, it
means to assign or remove the same label most recently assigned or
removed.
</P><P>

  Once you have given messages labels to classify them as you wish, there
are two ways to use the labels: in moving and in summaries.
</P><P>

<A NAME="IDX1942"></A>
<A NAME="IDX1943"></A>
<A NAME="IDX1944"></A>
<A NAME="IDX1945"></A>
  The command <KBD>C-M-n <VAR>labels</VAR> <KBD>RET</KBD></KBD>
(<CODE>rmail-next-labeled-message</CODE>) moves to the next message that has
one of the labels <VAR>labels</VAR>.  The argument <VAR>labels</VAR> specifies one
or more label names, separated by commas.  <KBD>C-M-p</KBD>
(<CODE>rmail-previous-labeled-message</CODE>) is similar, but moves backwards
to previous messages.  A numeric argument to either command serves as a
repeat count.
</P><P>

  The command <KBD>C-M-l <VAR>labels</VAR> <KBD>RET</KBD></KBD>
(<CODE>rmail-summary-by-labels</CODE>) displays a summary containing only the
messages that have at least one of a specified set of labels.  The
argument <VAR>labels</VAR> is one or more label names, separated by commas.
See section <A HREF="emacs_30.html#SEC385">AA.11 Summaries</A>, for information on summaries.</P><P>

  If the <VAR>labels</VAR> argument to <KBD>C-M-n</KBD>, <KBD>C-M-p</KBD> or
<KBD>C-M-l</KBD> is empty, it means to use the last set of labels specified
for any of these commands.
</P><P>

<A NAME="Rmail Attributes"></A>
<HR SIZE="6">
<A NAME="SEC383"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC382"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC384"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC374"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC374"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_31.html#SEC396"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AA.9 Rmail Attributes </H2>
<!--docid::SEC383::-->
<P>

  Some labels such as <SAMP>`deleted'</SAMP> and <SAMP>`filed'</SAMP> have built-in
meanings and are assigned to or removed from messages automatically at
appropriate times; these labels are called <EM>attributes</EM>.  Here is a
list of Rmail attributes:
</P><P>

<DL COMPACT>
<DT><SAMP>`unseen'</SAMP>
<DD>Means the message has never been current.  Assigned to messages when
they come from an inbox file, and removed when a message is made
current.  When you start Rmail, it initially shows the first message
that has this attribute.
<DT><SAMP>`deleted'</SAMP>
<DD>Means the message is deleted.  Assigned by deletion commands and
removed by undeletion commands (see section <A HREF="emacs_30.html#SEC378">AA.4 Deleting Messages</A>).
<DT><SAMP>`filed'</SAMP>
<DD>Means the message has been copied to some other file.  Assigned by the
file output commands (see section <A HREF="emacs_30.html#SEC380">AA.6 Multiple Rmail Files</A>).
<DT><SAMP>`answered'</SAMP>
<DD>Means you have mailed an answer to the message.  Assigned by the <KBD>r</KBD>
command (<CODE>rmail-reply</CODE>).  See section <A HREF="emacs_30.html#SEC384">AA.10 Sending Replies</A>.
<DT><SAMP>`forwarded'</SAMP>
<DD>Means you have forwarded the message.  Assigned by the <KBD>f</KBD> command
(<CODE>rmail-forward</CODE>).  See section <A HREF="emacs_30.html#SEC384">AA.10 Sending Replies</A>.
<DT><SAMP>`edited'</SAMP>
<DD>Means you have edited the text of the message within Rmail.
See section <A HREF="emacs_30.html#SEC391">AA.15 Editing Within a Message</A>.
<DT><SAMP>`resent'</SAMP>
<DD>Means you have resent the message.  Assigned by the command <KBD>M-x
rmail-resend</KBD>.  See section <A HREF="emacs_30.html#SEC384">AA.10 Sending Replies</A>.
</DL>
<P>

  All other labels are assigned or removed only by the user, and have no
standard meaning.
</P><P>

<A NAME="Rmail Reply"></A>
<HR SIZE="6">
<A NAME="SEC384"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC383"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC385"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC376"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC374"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_31.html#SEC396"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AA.10 Sending Replies </H2>
<!--docid::SEC384::-->
<P>

  Rmail has several commands that use Mail mode to send outgoing mail.
See section <A HREF="emacs_29.html#SEC363">Z. Sending Mail</A>, for information on using Mail mode, including
certain features meant to work with Rmail.  What this section documents
are the special commands of Rmail for entering Mail mode.  Note that the
usual keys for sending mail---<KBD>C-x m</KBD>, <KBD>C-x 4 m</KBD>, and <KBD>C-x 5
m</KBD>---are available in Rmail mode and work just as they usually do.
</P><P>

<DL COMPACT>
<DT><KBD>m</KBD>
<DD>Send a message (<CODE>rmail-mail</CODE>).
<DT><KBD>c</KBD>
<DD>Continue editing the already started outgoing message (<CODE>rmail-continue</CODE>).
<DT><KBD>r</KBD>
<DD>Send a reply to the current Rmail message (<CODE>rmail-reply</CODE>).
<DT><KBD>f</KBD>
<DD>Forward the current message to other users (<CODE>rmail-forward</CODE>).
<DT><KBD>C-u f</KBD>
<DD>Resend the current message to other users (<CODE>rmail-resend</CODE>).
<DT><KBD>M-m</KBD>
<DD>Try sending a bounced message a second time (<CODE>rmail-retry-failure</CODE>).
</DL>
<P>

<A NAME="IDX1946"></A>
<A NAME="IDX1947"></A>
<A NAME="IDX1948"></A>
  The most common reason to send a message while in Rmail is to reply to
the message you are reading.  To do this, type <KBD>r</KBD>
(<CODE>rmail-reply</CODE>).  This displays the <SAMP>`*mail*'</SAMP> buffer in another
window, much like <KBD>C-x 4 m</KBD>, but preinitializes the <SAMP>`Subject'</SAMP>,
<SAMP>`To'</SAMP>, <SAMP>`CC'</SAMP> and <SAMP>`In-reply-to'</SAMP> header fields based on the
message you are replying to.  The <SAMP>`To'</SAMP> field starts out as the
address of the person who sent the message you received, and the
<SAMP>`CC'</SAMP> field starts out with all the other recipients of that
message.
</P><P>

<A NAME="IDX1949"></A>
  You can exclude certain recipients from being placed automatically in
the <SAMP>`CC'</SAMP>, using the variable <CODE>rmail-dont-reply-to-names</CODE>.  Its
value should be a regular expression (as a string); any recipient that
the regular expression matches, is excluded from the <SAMP>`CC'</SAMP> field.
The default value matches your own name, and any name starting with
<SAMP>`info-'</SAMP>.  (Those names are excluded because there is a convention
of using them for large mailing lists to broadcast announcements.)
</P><P>

  To omit the <SAMP>`CC'</SAMP> field completely for a particular reply, enter
the reply command with a numeric argument: <KBD>C-u r</KBD> or <KBD>1 r</KBD>.
</P><P>

  Once the <SAMP>`*mail*'</SAMP> buffer has been initialized, editing and
sending the mail goes as usual (see section <A HREF="emacs_29.html#SEC363">Z. Sending Mail</A>).  You can edit the
presupplied header fields if they are not right for you.  You can also
use the commands of Mail mode (see section <A HREF="emacs_29.html#SEC367">Z.4 Mail Mode</A>), including <KBD>C-c
C-y</KBD> which yanks in the message that you are replying to.  You can
switch to the Rmail buffer, select a different message there, switch
back, and yank the new current message.
</P><P>

<A NAME="IDX1950"></A>
<A NAME="IDX1951"></A>
<A NAME="IDX1952"></A>
<A NAME="IDX1953"></A>
  Sometimes a message does not reach its destination.  Mailers usually
send the failed message back to you, enclosed in a <EM>failure
message</EM>.  The Rmail command <KBD>M-m</KBD> (<CODE>rmail-retry-failure</CODE>)
prepares to send the same message a second time: it sets up a
<SAMP>`*mail*'</SAMP> buffer with the same text and header fields as before.  If
you type <KBD>C-c C-c</KBD> right away, you send the message again exactly
the same as the first time.  Alternatively, you can edit the text or
headers and then send it.  The variable
<CODE>rmail-retry-ignored-headers</CODE>, in the same format as
<CODE>rmail-ignored-headers</CODE> (see section <A HREF="emacs_30.html#SEC389">AA.13 Display of Messages</A>), controls which
headers are stripped from the failed message when retrying it.
</P><P>

<A NAME="IDX1954"></A>
<A NAME="IDX1955"></A>
<A NAME="IDX1956"></A>
  Another frequent reason to send mail in Rmail is to <EM>forward</EM> the
current message to other users.  <KBD>f</KBD> (<CODE>rmail-forward</CODE>) makes
this easy by preinitializing the <SAMP>`*mail*'</SAMP> buffer with the current
message as the text, and a subject designating a forwarded message.  All
you have to do is fill in the recipients and send.  When you forward a
message, recipients get a message which is "from" you, and which has
the original message in its contents.
</P><P>

<A NAME="IDX1957"></A>
  Forwarding a message encloses it between two delimiter lines.  It also
modifies every line that starts with a dash, by inserting <SAMP>`- '</SAMP>
at the start of the line.  When you receive a forwarded message, if it
contains something besides ordinary text--for example, program source
code--you might find it useful to undo that transformation.  You can do
this by selecting the forwarded message and typing <KBD>M-x
unforward-rmail-message</KBD>.  This command extracts the original forwarded
message, deleting the inserted <SAMP>`- '</SAMP> strings, and inserts it
into the Rmail file as a separate message immediately following the
current one.
</P><P>

<A NAME="IDX1958"></A>
  <EM>Resending</EM> is an alternative similar to forwarding; the
difference is that resending sends a message that is "from" the
original sender, just as it reached you--with a few added header fields
<SAMP>`Resent-From'</SAMP> and <SAMP>`Resent-To'</SAMP> to indicate that it came via
you.  To resend a message in Rmail, use <KBD>C-u f</KBD>.  (<KBD>f</KBD> runs
<CODE>rmail-forward</CODE>, which is programmed to invoke <CODE>rmail-resend</CODE>
if you provide a numeric argument.)
</P><P>

<A NAME="IDX1959"></A>
<A NAME="IDX1960"></A>
  The <KBD>m</KBD> (<CODE>rmail-mail</CODE>) command is used to start editing an
outgoing message that is not a reply.  It leaves the header fields empty.
Its only difference from <KBD>C-x 4 m</KBD> is that it makes the Rmail buffer
accessible for <KBD>C-c C-y</KBD>, just as <KBD>r</KBD> does.  Thus, <KBD>m</KBD> can be
used to reply to or forward a message; it can do anything <KBD>r</KBD> or <KBD>f</KBD>
can do.</P><P>

<A NAME="IDX1961"></A>
<A NAME="IDX1962"></A>
  The <KBD>c</KBD> (<CODE>rmail-continue</CODE>) command resumes editing the
<SAMP>`*mail*'</SAMP> buffer, to finish editing an outgoing message you were
already composing, or to alter a message you have sent.</P><P>

<A NAME="IDX1963"></A>
  If you set the variable <CODE>rmail-mail-new-frame</CODE> to a
non-<CODE>nil</CODE> value, then all the Rmail commands to start sending a
message create a new frame to edit it in.  This frame is deleted when
you send the message, or when you use the <SAMP>`Cancel'</SAMP> item in the
<SAMP>`Mail'</SAMP> menu.
</P><P>

  All the Rmail commands to send a message use the mail-composition
method that you have chosen (see section <A HREF="emacs_29.html#SEC373">Z.6 Mail-Composition Methods</A>).
</P><P>

<A NAME="Rmail Summary"></A>
<HR SIZE="6">
<A NAME="SEC385"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC384"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC386"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC376"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC374"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC388"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AA.11 Summaries </H2>
<!--docid::SEC385::-->
<P>

  A <EM>summary</EM> is a buffer containing one line per message to give
you an overview of the mail in an Rmail file.  Each line shows the
message number and date, the sender, the line count, the labels, and
the subject.  Moving point in the summary buffer selects messages as
you move to their summary lines.  Almost all Rmail commands are valid
in the summary buffer also; when used there, they apply to the message
described by the current line of the summary.
</P><P>

  A summary buffer applies to a single Rmail file only; if you are
editing multiple Rmail files, each one can have its own summary buffer.
The summary buffer name is made by appending <SAMP>`-summary'</SAMP> to the
Rmail buffer's name.  Normally only one summary buffer is displayed at a
time.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_30.html#SEC386">AA.11.1 Making Summaries</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Making various sorts of summaries.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_30.html#SEC387">AA.11.2 Editing in Summaries</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Manipulating messages from the summary.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Rmail Make Summary"></A>
<HR SIZE="6">
<A NAME="SEC386"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC385"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC387"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC376"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC385"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC388"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AA.11.1 Making Summaries </H3>
<!--docid::SEC386::-->
<P>

  Here are the commands to create a summary for the current Rmail file.
Once the Rmail file has a summary buffer, changes in the Rmail file
(such as deleting or expunging messages, and getting new mail)
automatically update the summary.
</P><P>

<DL COMPACT>
<DT><KBD>h</KBD>
<DD><DT><KBD>C-M-h</KBD>
<DD>Summarize all messages (<CODE>rmail-summary</CODE>).
<DT><KBD>l <VAR>labels</VAR> <KBD>RET</KBD></KBD>
<DD><DT><KBD>C-M-l <VAR>labels</VAR> <KBD>RET</KBD></KBD>
<DD>Summarize messages that have one or more of the specified labels
(<CODE>rmail-summary-by-labels</CODE>).
<DT><KBD>C-M-r <VAR>rcpts</VAR> <KBD>RET</KBD></KBD>
<DD>Summarize messages that have one or more of the specified recipients
(<CODE>rmail-summary-by-recipients</CODE>).
<DT><KBD>C-M-t <VAR>topic</VAR> <KBD>RET</KBD></KBD>
<DD>Summarize messages that have a match for the specified regexp
<VAR>topic</VAR> in their subjects (<CODE>rmail-summary-by-topic</CODE>).
<DT><KBD>C-M-s <VAR>regexp</VAR></KBD>
<DD>Summarize messages whose headers and the subject line match the
specified regular expression <VAR>regexp</VAR>
(<CODE>rmail-summary-by-regexp</CODE>).
</DL>
<P>

<A NAME="IDX1964"></A>
<A NAME="IDX1965"></A>
  The <KBD>h</KBD> or <KBD>C-M-h</KBD> (<CODE>rmail-summary</CODE>) command fills the summary buffer
for the current Rmail file with a summary of all the messages in the file.
It then displays and selects the summary buffer in another window.
</P><P>

<A NAME="IDX1966"></A>
<A NAME="IDX1967"></A>
<A NAME="IDX1968"></A>
  <KBD>C-M-l <VAR>labels</VAR> <KBD>RET</KBD></KBD> (<CODE>rmail-summary-by-labels</CODE>) makes
a partial summary mentioning only the messages that have one or more of the
labels <VAR>labels</VAR>.  <VAR>labels</VAR> should contain label names separated by
commas.</P><P>

<A NAME="IDX1969"></A>
<A NAME="IDX1970"></A>
  <KBD>C-M-r <VAR>rcpts</VAR> <KBD>RET</KBD></KBD> (<CODE>rmail-summary-by-recipients</CODE>)
makes a partial summary mentioning only the messages that have one or more
of the recipients <VAR>rcpts</VAR>.  <VAR>rcpts</VAR> should contain mailing
addresses separated by commas.</P><P>

<A NAME="IDX1971"></A>
<A NAME="IDX1972"></A>
  <KBD>C-M-t <VAR>topic</VAR> <KBD>RET</KBD></KBD> (<CODE>rmail-summary-by-topic</CODE>)
makes a partial summary mentioning only the messages whose subjects have
a match for the regular expression <VAR>topic</VAR>.
</P><P>

<A NAME="IDX1973"></A>
<A NAME="IDX1974"></A>
  <KBD>C-M-s <VAR>regexp</VAR> <KBD>RET</KBD></KBD> (<CODE>rmail-summary-by-regexp</CODE>)
makes a partial summary which mentions only the messages whose headers
(including the date and the subject lines) match the regular
expression <VAR>regexp</VAR>.
</P><P>

  Note that there is only one summary buffer for any Rmail file; making one
kind of summary discards any previously made summary.
</P><P>

<A NAME="IDX1975"></A>
<A NAME="IDX1976"></A>
  The variable <CODE>rmail-summary-window-size</CODE> says how many lines to
use for the summary window.  The variable
<CODE>rmail-summary-line-count-flag</CODE> controls whether the summary line
for a message should include the line count of the message.
</P><P>

<A NAME="Rmail Summary Edit"></A>
<HR SIZE="6">
<A NAME="SEC387"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC386"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC388"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC376"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC385"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC388"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AA.11.2 Editing in Summaries </H3>
<!--docid::SEC387::-->
<P>

  You can use the Rmail summary buffer to do almost anything you can do
in the Rmail buffer itself.  In fact, once you have a summary buffer,
there's no need to switch back to the Rmail buffer.
</P><P>

  You can select and display various messages in the Rmail buffer, from
the summary buffer, just by moving point in the summary buffer to
different lines.  It doesn't matter what Emacs command you use to move
point; whichever line point is on at the end of the command, that
message is selected in the Rmail buffer.
</P><P>

  Almost all Rmail commands work in the summary buffer as well as in the
Rmail buffer.  Thus, <KBD>d</KBD> in the summary buffer deletes the current
message, <KBD>u</KBD> undeletes, and <KBD>x</KBD> expunges.  <KBD>o</KBD> and <KBD>C-o</KBD>
output the current message to a file; <KBD>r</KBD> starts a reply to it.  You
can scroll the current message while remaining in the summary buffer
using <KBD>SPC</KBD> and <KBD>DEL</KBD>.
</P><P>

  The Rmail commands to move between messages also work in the summary
buffer, but with a twist: they move through the set of messages included
in the summary.  They also ensure the Rmail buffer appears on the screen
(unlike cursor motion commands, which update the contents of the Rmail
buffer but don't display it in a window unless it already appears).
Here is a list of these commands:
</P><P>

<DL COMPACT>
<DT><KBD>n</KBD>
<DD>Move to next line, skipping lines saying `deleted', and select its
message.
<DT><KBD>p</KBD>
<DD>Move to previous line, skipping lines saying `deleted', and select
its message.
<DT><KBD>M-n</KBD>
<DD>Move to next line and select its message.
<DT><KBD>M-p</KBD>
<DD>Move to previous line and select its message.
<DT><KBD>&#62;</KBD>
<DD>Move to the last line, and select its message.
<DT><KBD>&#60;</KBD>
<DD>Move to the first line, and select its message.
<DT><KBD>M-s <VAR>pattern</VAR> <KBD>RET</KBD></KBD>
<DD>Search through messages for <VAR>pattern</VAR> starting with the current
message; select the message found, and move point in the summary buffer
to that message's line.
</DL>
<P>

<A NAME="IDX1977"></A>
  Deletion, undeletion, and getting new mail, and even selection of a
different message all update the summary buffer when you do them in the
Rmail buffer.  If the variable <CODE>rmail-redisplay-summary</CODE> is
non-<CODE>nil</CODE>, these actions also bring the summary buffer back onto
the screen.
</P><P>

<A NAME="IDX1978"></A>
<A NAME="IDX1979"></A>
<A NAME="IDX1980"></A>
<A NAME="IDX1981"></A>
  When you are finished using the summary, type <KBD>Q</KBD>
(<CODE>rmail-summary-wipe</CODE>) to delete the summary buffer's window.  You
can also exit Rmail while in the summary: <KBD>q</KBD>
(<CODE>rmail-summary-quit</CODE>) deletes the summary window, then exits from
Rmail by saving the Rmail file and switching to another buffer.
</P><P>

<A NAME="Rmail Sorting"></A>
<HR SIZE="6">
<A NAME="SEC388"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC387"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC389"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC376"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC374"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_31.html#SEC396"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AA.12 Sorting the Rmail File </H2>
<!--docid::SEC388::-->
<P>

<DL COMPACT>
<DT><KBD>M-x rmail-sort-by-date</KBD>
<DD>Sort messages of current Rmail file by date.
<P>

<DT><KBD>M-x rmail-sort-by-subject</KBD>
<DD>Sort messages of current Rmail file by subject.
<P>

<DT><KBD>M-x rmail-sort-by-author</KBD>
<DD>Sort messages of current Rmail file by author's name.
<P>

<DT><KBD>M-x rmail-sort-by-recipient</KBD>
<DD>Sort messages of current Rmail file by recipient's names.
<P>

<DT><KBD>M-x rmail-sort-by-correspondent</KBD>
<DD>Sort messages of current Rmail file by the name of the other
correspondent.
<P>

<DT><KBD>M-x rmail-sort-by-lines</KBD>
<DD>Sort messages of current Rmail file by size (number of lines).
<P>

<DT><KBD>M-x rmail-sort-by-keywords <KBD>RET</KBD> <VAR>labels</VAR> <KBD>RET</KBD></KBD>
<DD>Sort messages of current Rmail file by labels.  The argument
<VAR>labels</VAR> should be a comma-separated list of labels.  The order of
these labels specifies the order of messages; messages with the first
label come first, messages with the second label come second, and so on.
Messages which have none of these labels come last.
</DL>
<P>

  The Rmail sort commands perform a <EM>stable sort</EM>: if there is no
reason to prefer either one of two messages, their order remains
unchanged.  You can use this to sort by more than one criterion.  For
example, if you use <CODE>rmail-sort-by-date</CODE> and then
<CODE>rmail-sort-by-author</CODE>, messages from the same author appear in
order by date.
</P><P>

  With a numeric argument, all these commands reverse the order of
comparison.  This means they sort messages from newest to oldest, from
biggest to smallest, or in reverse alphabetical order.
</P><P>

<A NAME="Rmail Display"></A>
<HR SIZE="6">
<A NAME="SEC389"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC388"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC390"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC376"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC374"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_31.html#SEC396"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AA.13 Display of Messages </H2>
<!--docid::SEC389::-->
<P>

  Rmail reformats the header of each message before displaying it for
the first time.  Reformatting hides uninteresting header fields to
reduce clutter.  You can use the <KBD>t</KBD> command to show the entire
header or to repeat the header reformatting operation.
</P><P>

<DL COMPACT>
<DT><KBD>t</KBD>
<DD>Toggle display of complete header (<CODE>rmail-toggle-header</CODE>).
</DL>
<P>

<A NAME="IDX1982"></A>
  Reformatting the header involves deleting most header fields, on the
grounds that they are not interesting.  The variable
<CODE>rmail-ignored-headers</CODE> holds a regular expression that specifies
which header fields to hide in this way--if it matches the beginning of
a header field, that whole field is hidden.
</P><P>

<A NAME="IDX1983"></A>
<A NAME="IDX1984"></A>
  Rmail saves the complete original header before reformatting; to see
it, use the <KBD>t</KBD> command (<CODE>rmail-toggle-header</CODE>).  This
discards the reformatted headers of the current message and displays it
with the original header.  Repeating <KBD>t</KBD> reformats the message
again.  Selecting the message again also reformats.
</P><P>

  One consequence of this is that if you edit the reformatted header
(using <KBD>e</KBD>; see section <A HREF="emacs_30.html#SEC391">AA.15 Editing Within a Message</A>), subsequent use of <KBD>t</KBD> will
discard your edits.  On the other hand, if you use <KBD>e</KBD> after
<KBD>t</KBD>, to edit the original (unreformatted) header, those changes are
permanent.
</P><P>

  When the <KBD>t</KBD> command has a prefix argument, a positive argument
means to show the reformatted header, and a zero or negative argument
means to show the full header.
</P><P>

<A NAME="IDX1985"></A>
  When the terminal supports multiple fonts or colors, Rmail
highlights certain header fields that are especially interesting--by
default, the <SAMP>`From'</SAMP> and <SAMP>`Subject'</SAMP> fields.  The variable
<CODE>rmail-highlighted-headers</CODE> holds a regular expression that
specifies the header fields to highlight; if it matches the beginning
of a header field, that whole field is highlighted.
</P><P>

  If you specify unusual colors for your text foreground and
background, the colors used for highlighting may not go well with
them.  If so, specify different colors for the face
<CODE>rmail-highlight-face</CODE>.  See section <A HREF="emacs_13.html#SEC78">J.1 Using Multiple Typefaces</A>, for how to do this.  To
turn off highlighting entirely in Rmail, set
<CODE>rmail-highlighted-headers</CODE> to <CODE>nil</CODE>.
</P><P>

  You can highlight and activate URLs in incoming messages by adding
the function <CODE>goto-address</CODE> to the hook
<CODE>rmail-show-message-hook</CODE>.  Then you can browse these URLs by
clicking on them with <KBD>Mouse-2</KBD> or by moving to one and typing
<KBD>C-c <KBD>RET</KBD></KBD>.  See section <A HREF="emacs_32.html#SEC470">Activating URLs</A>.
</P><P>

<A NAME="Rmail Coding"></A>
<HR SIZE="6">
<A NAME="SEC390"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC389"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC391"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC376"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC374"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_31.html#SEC396"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AA.14 Rmail and Coding Systems </H2>
<!--docid::SEC390::-->
<P>

<A NAME="IDX1986"></A>
  Rmail automatically decodes messages which contain non-ASCII
characters, just as Emacs does with files you visit and with subprocess
output.  Rmail uses the standard <SAMP>`charset=<VAR>charset</VAR>'</SAMP> header in
the message, if any, to determine how the message was encoded by the
sender.  It maps <VAR>charset</VAR> into the corresponding Emacs coding
system (see section <A HREF="emacs_20.html#SEC220">Q.7 Coding Systems</A>), and uses that coding system to decode
message text.  If the message header doesn't have the <SAMP>`charset'</SAMP>
specification, or if <VAR>charset</VAR> is not recognized,
Rmail chooses the coding system with the usual Emacs heuristics and
defaults (see section <A HREF="emacs_20.html#SEC221">Q.8 Recognizing Coding Systems</A>).
</P><P>

<A NAME="IDX1987"></A>
  Occasionally, a message is decoded incorrectly, either because Emacs
guessed the wrong coding system in the absence of the <SAMP>`charset'</SAMP>
specification, or because the specification was inaccurate.  For
example, a misconfigured mailer could send a message with a
<SAMP>`charset=iso-8859-1'</SAMP> header when the message is actually encoded
in <CODE>koi8-r</CODE>.  When you see the message text garbled, or some of
its characters displayed as empty boxes, this may have happened.
</P><P>

<A NAME="IDX1988"></A>
  You can correct the problem by decoding the message again using the
right coding system, if you can figure out or guess which one is
right.  To do this, invoke the <KBD>M-x rmail-redecode-body</KBD> command.
It reads the name of a coding system, encodes the message body using
whichever coding system was used to decode it before, then redecodes
it using the coding system you specified.  If you specified the right
coding system, the result should be readable.
</P><P>

  Decoding and encoding using the wrong coding system is lossless for
most encodings, in particular with 8-bit encodings such as iso-8859 or
koi8.  So, if the initial attempt to redecode the message didn't
result in a legible text, you can try other coding systems until you
succeed.
</P><P>

  With some coding systems, notably those from the iso-2022 family,
information can be lost in decoding, so that encoding the message
again won't bring back the original incoming text.  In such a case,
<CODE>rmail-redecode-body</CODE> cannot work.  However, the problems that
call for use of <CODE>rmail-redecode-body</CODE> rarely occur with those
coding systems.  So in practice the command works when you need it.
</P><P>

<A NAME="Rmail Editing"></A>
<HR SIZE="6">
<A NAME="SEC391"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC390"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC392"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC376"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC374"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_31.html#SEC396"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AA.15 Editing Within a Message </H2>
<!--docid::SEC391::-->
<P>

  Most of the usual Emacs commands are available in Rmail mode, though a
few, such as <KBD>C-M-n</KBD> and <KBD>C-M-h</KBD>, are redefined by Rmail for
other purposes.  However, the Rmail buffer is normally read only, and
most of the letters are redefined as Rmail commands.  If you want to
edit the text of a message, you must use the Rmail command <KBD>e</KBD>.
</P><P>

<DL COMPACT>
<DT><KBD>e</KBD>
<DD>Edit the current message as ordinary text.
</DL>
<P>

<A NAME="IDX1989"></A>
<A NAME="IDX1990"></A>
  The <KBD>e</KBD> command (<CODE>rmail-edit-current-message</CODE>) switches from
Rmail mode into Rmail Edit mode, another major mode which is nearly the
same as Text mode.  The mode line indicates this change.
</P><P>

  In Rmail Edit mode, letters insert themselves as usual and the Rmail
commands are not available.  When you are finished editing the message and
are ready to go back to Rmail, type <KBD>C-c C-c</KBD>, which switches back to
Rmail mode.  Alternatively, you can return to Rmail mode but cancel all the
editing that you have done, by typing <KBD>C-c C-]</KBD>.
</P><P>

<A NAME="IDX1991"></A>
  Entering Rmail Edit mode runs the hook <CODE>text-mode-hook</CODE>; then it
runs the hook <CODE>rmail-edit-mode-hook</CODE> (see section <A HREF="emacs_33.html#SEC484">AD.2.3 Hooks</A>).  It adds the
attribute <SAMP>`edited'</SAMP> to the message.  It also displays the full
headers of the message, so that you can edit the headers as well as the
body of the message, and your changes in the headers will be
permanent.
</P><P>

<A NAME="Rmail Digest"></A>
<HR SIZE="6">
<A NAME="SEC392"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC391"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC393"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC376"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC374"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_31.html#SEC396"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AA.16 Digest Messages </H2>
<!--docid::SEC392::-->
<P>

  A <EM>digest message</EM> is a message which exists to contain and carry
several other messages.  Digests are used on some moderated mailing
lists; all the messages that arrive for the list during a period of time
such as one day are put inside a single digest which is then sent to the
subscribers.  Transmitting the single digest uses much less computer
time than transmitting the individual messages even though the total
size is the same, because the per-message overhead in network mail
transmission is considerable.
</P><P>

<A NAME="IDX1992"></A>
  When you receive a digest message, the most convenient way to read it is
to <EM>undigestify</EM> it: to turn it back into many individual messages.
Then you can read and delete the individual messages as it suits you.
</P><P>

  To do this, select the digest message and type the command <KBD>M-x
undigestify-rmail-message</KBD>.  This extracts the submessages as separate
Rmail messages, and inserts them following the digest.  The digest
message itself is flagged as deleted.
</P><P>

<A NAME="Out of Rmail"></A>
<HR SIZE="6">
<A NAME="SEC393"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC392"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC394"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC376"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC374"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_31.html#SEC396"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AA.17 Converting an Rmail File to Inbox Format </H2>
<!--docid::SEC393::-->
<P>

<A NAME="IDX1993"></A>
  The command <KBD>M-x unrmail</KBD> converts a file in Rmail format to inbox
format (also known as the system mailbox, or mbox, format), so that
you can use it with other mail-editing tools.  You must specify two
arguments, the name of the Rmail file and the name to use for the
converted file.  <KBD>M-x unrmail</KBD> does not alter the Rmail file itself.
</P><P>

<A NAME="IDX1994"></A>
  <KBD>M-x unrmail</KBD> is useful if you can run Emacs on the machine
where the Rmail file resides, or can access the Rmail file remotely
(see section <A HREF="emacs_16.html#SEC168">M.13 Remote Files</A>) from a machine where Emacs is installed.  If
accessing Rmail files from Emacs is impossible, you can use the
<CODE>b2m</CODE> program instead.  <CODE>b2m</CODE> is part of the Emacs
distribution, it is installed into the same directory where all the
other auxiliary programs (<CODE>etags</CODE> etc.) are installed, and its
source is available in the Emacs source distribution, so that you
could copy the source to the target machine and compile it there.
</P><P>

  To convert a file <TT>`<VAR>babyl-file</VAR>'</TT> into <TT>`<VAR>mbox-file</VAR>'</TT>,
invoke <CODE>b2m</CODE> like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre> b2m &#60; <VAR>babyl-file</VAR> &#62; <VAR>mbox-file</VAR>
</pre></td></tr></table></P><P>

<A NAME="Rmail Rot13"></A>
<HR SIZE="6">
<A NAME="SEC394"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC393"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC395"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC376"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC374"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_31.html#SEC396"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AA.18 Reading Rot13 Messages </H2>
<!--docid::SEC394::-->
<P>

  Mailing list messages that might offend some readers are sometimes
encoded in a simple code called <EM>rot13</EM>---so named because it
rotates the alphabet by 13 letters.  This code is not for secrecy, as it
provides none; rather, it enables those who might be offended to avoid
ever seeing the real text of the message.
</P><P>

<A NAME="IDX1995"></A>
  To view a buffer using the rot13 code, use the command <KBD>M-x
rot13-other-window</KBD>.  This displays the current buffer in another window
which applies the code when displaying the text.
</P><P>

<A NAME="Movemail"></A>
<HR SIZE="6">
<A NAME="SEC395"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC394"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_31.html#SEC396"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC376"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC374"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_31.html#SEC396"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AA.19 <CODE>movemail</CODE> and POP </H2>
<!--docid::SEC395::-->
<P>

<A NAME="IDX1996"></A>
  When getting new mail, Rmail first copies the new mail from the inbox
file to the Rmail file; then it saves the Rmail file; then it truncates
the inbox file.  This way, a system crash may cause duplication of mail
between the inbox and the Rmail file, but cannot lose mail.  If
<CODE>rmail-preserve-inbox</CODE> is non-<CODE>nil</CODE>, then Rmail will copy new
mail from the inbox file to the Rmail file without truncating the inbox
file.  You may wish to set this, for example, on a portable computer you
use to check your mail via POP while traveling, so that your mail will
remain on the server and you can save it later on your workstation.
</P><P>

  In some cases, Rmail copies the new mail from the inbox file
indirectly.  First it runs the <CODE>movemail</CODE> program to move the mail
from the inbox to an intermediate file called
<TT>`~/.newmail-<VAR>inboxname</VAR>'</TT>.  Then Rmail merges the new mail from
that file, saves the Rmail file, and only then deletes the intermediate
file.  If there is a crash at the wrong time, this file continues to
exist, and Rmail will use it again the next time it gets new mail from
that inbox.
</P><P>

<A NAME="IDX1997"></A>
  If Rmail is unable to convert the data in
<TT>`~/.newmail-<VAR>inboxname</VAR>'</TT> into Babyl format, it renames the file
to <TT>`~/RMAILOSE.<VAR>n</VAR>'</TT> (<VAR>n</VAR> is an integer chosen to make the
name unique) so that Rmail will not have trouble with the data again.
You should look at the file, find whatever message confuses Rmail
(probably one that includes the control-underscore character, octal code
037), and delete it.  Then you can use <KBD>1 g</KBD> to get new mail from
the corrected file.
</P><P>

  Some sites use a method called POP for accessing users' inbox data
instead of storing the data in inbox files.  <CODE>movemail</CODE> can work
with POP if you compile it with the macro <CODE>MAIL_USE_POP</CODE> defined.
(You can achieve that by specifying <SAMP>`--with-pop'</SAMP> when you run
<CODE>configure</CODE> during the installation of Emacs.)
<CODE>movemail</CODE> only works with POP3, not with older
versions of POP.
</P><P>

<A NAME="IDX1998"></A>
<A NAME="IDX1999"></A>
  Assuming you have compiled and installed <CODE>movemail</CODE>
appropriately, you can specify a POP inbox by using a "file name" of
the form <SAMP>`po:<VAR>username</VAR>'</SAMP>, in the inbox list of an Rmail file.
<CODE>movemail</CODE> handles such a name by opening a connection to the POP
server.  The <CODE>MAILHOST</CODE> environment variable specifies the machine
to look for the server on; alternatively, you can specify the POP server
host name as part of the mailbox name using the syntax
<SAMP>`po:<VAR>username</VAR>:<VAR>hostname</VAR>'</SAMP>.
</P><P>

<A NAME="IDX2000"></A>
<A NAME="IDX2001"></A>
  Accessing mail via POP may require a password.  If the variable
<CODE>rmail-pop-password</CODE> is non-<CODE>nil</CODE>, it specifies the password
to use for POP.  Alternatively, if <CODE>rmail-pop-password-required</CODE> is
non-<CODE>nil</CODE>, then Rmail asks you for the password to use.
</P><P>

<A NAME="IDX2002"></A>
  If you need to pass additional command-line flags to <CODE>movemail</CODE>,
set the variable <CODE>rmail-movemail-flags</CODE> a list of the flags you
wish to use.  Do not use this variable to pass the <SAMP>`-p'</SAMP> flag to
preserve your inbox contents; use <CODE>rmail-preserve-inbox</CODE> instead.
</P><P>

<A NAME="IDX2003"></A>
  The <CODE>movemail</CODE> program installed at your site may support
Kerberos authentication.  If it is
supported, it is used by default whenever you attempt to retrieve
POP mail when <CODE>rmail-pop-password</CODE> and
<CODE>rmail-pop-password-required</CODE> are unset.
</P><P>

<A NAME="IDX2004"></A>
  Some POP servers store messages in reverse order.  If your server does
this, and you would rather read your mail in the order in which it was
received, you can tell <CODE>movemail</CODE> to reverse the order of
downloaded messages by adding the <SAMP>`-r'</SAMP> flag to
<CODE>rmail-movemail-flags</CODE>.
<A NAME="Dired"></A>
<HR SIZE="6">
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_30.html#SEC376"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_31.html#SEC396"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated
on <I>April 2, 2002</I>
using <A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

</BODY>
</HTML>
