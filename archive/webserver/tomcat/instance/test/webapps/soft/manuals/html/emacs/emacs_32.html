<HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created on April 2, 2002 by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HEAD>
<TITLE>GNU Emacs Manual: Calendar/Diary</TITLE>

<META NAME="description" CONTENT="GNU Emacs Manual: Calendar/Diary">
<META NAME="keywords" CONTENT="GNU Emacs Manual: Calendar/Diary">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY LANG="EN" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC412"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_31.html#SEC411"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC413"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_31.html#SEC396"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC438"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> AC. The Calendar and the Diary </H1>
<!--docid::SEC412::-->
<P>

  Emacs provides the functions of a desk calendar, with a diary of
planned or past events.  It also has facilities for managing your
appointments, and keeping track of how much time you spend working on
certain projects.
</P><P>

  To enter the calendar, type <KBD>M-x calendar</KBD>; this displays a
three-month calendar centered on the current month, with point on the
current date.  With a numeric argument, as in <KBD>C-u M-x calendar</KBD>, it
prompts you for the month and year to be the center of the three-month
calendar.  The calendar uses its own buffer, whose major mode is
Calendar mode.
</P><P>

  <KBD>Mouse-2</KBD> in the calendar brings up a menu of operations on a
particular date; <KBD>C-Mouse-3</KBD> brings up a menu of commonly used
calendar features that are independent of any particular date.  To exit
the calendar, type <KBD>q</KBD>.  See section `Calendar' in <CITE>The Emacs Lisp Reference Manual</CITE>, for customization
information about the calendar and diary.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC413">AC.1 Movement in the Calendar</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Moving through the calendar; selecting a date.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC417">AC.2 Scrolling in the Calendar</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Bringing earlier or later months onto the screen.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC418">AC.3 Counting Days</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How many days are there between two dates?</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC419">AC.4 Miscellaneous Calendar Commands</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Exiting or recomputing the calendar.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC420">AC.5 LaTeX Calendar</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Print a calendar using LaTeX.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC421">AC.6 Holidays</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Displaying dates of holidays.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC422">AC.7 Times of Sunrise and Sunset</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Displaying local times of sunrise and sunset.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC423">AC.8 Phases of the Moon</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Displaying phases of the moon.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC424">AC.9 Conversion To and From Other Calendars</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Converting dates to other calendar systems.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC429">AC.10 The Diary</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Displaying events from your diary.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC435">AC.11 Appointments</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Reminders when it's time to do something.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC436">AC.12 Daylight Savings Time</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to specify when daylight savings time is active.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC437">AC.13 Summing Time Intervals</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Keeping track of time intervals.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Calendar Motion"></A>
<HR SIZE="6">
<A NAME="SEC413"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC412"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC414"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC412"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC412"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC417"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.1 Movement in the Calendar </H2>
<!--docid::SEC413::-->
<P>

<A NAME="IDX2206"></A>
  Calendar mode lets you move through the calendar in logical units of
time such as days, weeks, months, and years.  If you move outside the
three months originally displayed, the calendar display "scrolls"
automatically through time to make the selected date visible.  Moving to
a date lets you view its holidays or diary entries, or convert it to other
calendars; moving longer time periods is also useful simply to scroll the
calendar.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC414">AC.1.1 Motion by Standard Lengths of Time</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Moving by days, weeks, months, and years.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC415">AC.1.2 Beginning or End of Week, Month or Year</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Moving to start/end of weeks, months, and years.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC416">AC.1.3 Specified Dates</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Moving to the current date or another
                                specific date.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Calendar Unit Motion"></A>
<HR SIZE="6">
<A NAME="SEC414"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC413"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC415"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC412"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC413"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC417"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.1.1 Motion by Standard Lengths of Time </H3>
<!--docid::SEC414::-->
<P>

  The commands for movement in the calendar buffer parallel the
commands for movement in text.  You can move forward and backward by
days, weeks, months, and years.
</P><P>

<DL COMPACT>
<DT><KBD>C-f</KBD>
<DD>Move point one day forward (<CODE>calendar-forward-day</CODE>).
<DT><KBD>C-b</KBD>
<DD>Move point one day backward (<CODE>calendar-backward-day</CODE>).
<DT><KBD>C-n</KBD>
<DD>Move point one week forward (<CODE>calendar-forward-week</CODE>).
<DT><KBD>C-p</KBD>
<DD>Move point one week backward (<CODE>calendar-backward-week</CODE>).
<DT><KBD>M-}</KBD>
<DD>Move point one month forward (<CODE>calendar-forward-month</CODE>).
<DT><KBD>M-{</KBD>
<DD>Move point one month backward (<CODE>calendar-backward-month</CODE>).
<DT><KBD>C-x ]</KBD>
<DD>Move point one year forward (<CODE>calendar-forward-year</CODE>).
<DT><KBD>C-x [</KBD>
<DD>Move point one year backward (<CODE>calendar-backward-year</CODE>).
</DL>
<P>

<A NAME="IDX2207"></A>
<A NAME="IDX2208"></A>
<A NAME="IDX2209"></A>
<A NAME="IDX2210"></A>
<A NAME="IDX2211"></A>
<A NAME="IDX2212"></A>
<A NAME="IDX2213"></A>
<A NAME="IDX2214"></A>
  The day and week commands are natural analogues of the usual Emacs
commands for moving by characters and by lines.  Just as <KBD>C-n</KBD>
usually moves to the same column in the following line, in Calendar
mode it moves to the same day in the following week.  And <KBD>C-p</KBD>
moves to the same day in the previous week.
</P><P>

  The arrow keys are equivalent to <KBD>C-f</KBD>, <KBD>C-b</KBD>, <KBD>C-n</KBD> and
<KBD>C-p</KBD>, just as they normally are in other modes.
</P><P>

<A NAME="IDX2215"></A>
<A NAME="IDX2216"></A>
<A NAME="IDX2217"></A>
<A NAME="IDX2218"></A>
<A NAME="IDX2219"></A>
<A NAME="IDX2220"></A>
<A NAME="IDX2221"></A>
<A NAME="IDX2222"></A>
  The commands for motion by months and years work like those for
weeks, but move a larger distance.  The month commands <KBD>M-}</KBD> and
<KBD>M-{</KBD> move forward or backward by an entire month's time.  The
year commands <KBD>C-x ]</KBD> and <KBD>C-x [</KBD> move forward or backward a
whole year.
</P><P>

  The easiest way to remember these commands is to consider months and
years analogous to paragraphs and pages of text, respectively.  But the
commands themselves are not quite analogous.  The ordinary Emacs paragraph
commands move to the beginning or end of a paragraph, whereas these month
and year commands move by an entire month or an entire year, which usually
involves skipping across the end of a month or year.
</P><P>

  All these commands accept a numeric argument as a repeat count.
For convenience, the digit keys and the minus sign specify numeric
arguments in Calendar mode even without the Meta modifier.  For example,
<KBD>100 C-f</KBD> moves point 100 days forward from its present location.
</P><P>

<A NAME="Move to Beginning or End"></A>
<HR SIZE="6">
<A NAME="SEC415"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC414"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC416"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC416"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC413"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC417"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.1.2 Beginning or End of Week, Month or Year </H3>
<!--docid::SEC415::-->
<P>

  A week (or month, or year) is not just a quantity of days; we think of
weeks (months, years) as starting on particular dates.  So Calendar mode
provides commands to move to the beginning or end of a week, month or
year:
</P><P>

<DL COMPACT>
<A NAME="IDX2223"></A>
<A NAME="IDX2224"></A>
<DT><KBD>C-a</KBD>
<DD>Move point to start of week (<CODE>calendar-beginning-of-week</CODE>).
<A NAME="IDX2225"></A>
<A NAME="IDX2226"></A>
<DT><KBD>C-e</KBD>
<DD>Move point to end of week (<CODE>calendar-end-of-week</CODE>).
<A NAME="IDX2227"></A>
<A NAME="IDX2228"></A>
<DT><KBD>M-a</KBD>
<DD>Move point to start of month (<CODE>calendar-beginning-of-month</CODE>).
<A NAME="IDX2229"></A>
<A NAME="IDX2230"></A>
<DT><KBD>M-e</KBD>
<DD>Move point to end of month (<CODE>calendar-end-of-month</CODE>).
<A NAME="IDX2231"></A>
<A NAME="IDX2232"></A>
<DT><KBD>M-&#60;</KBD>
<DD>Move point to start of year (<CODE>calendar-beginning-of-year</CODE>).
<A NAME="IDX2233"></A>
<A NAME="IDX2234"></A>
<DT><KBD>M-&#62;</KBD>
<DD>Move point to end of year (<CODE>calendar-end-of-year</CODE>).
</DL>
<P>

  These commands also take numeric arguments as repeat counts, with the
repeat count indicating how many weeks, months, or years to move
backward or forward.
</P><P>

<A NAME="IDX2235"></A>
<A NAME="IDX2236"></A>
<A NAME="IDX2237"></A>
  By default, weeks begin on Sunday.  To make them begin on Monday
instead, set the variable <CODE>calendar-week-start-day</CODE> to 1.
</P><P>

<A NAME="Specified Dates"></A>
<HR SIZE="6">
<A NAME="SEC416"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC415"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC417"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC412"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC413"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC417"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.1.3 Specified Dates </H3>
<!--docid::SEC416::-->
<P>

  Calendar mode provides commands for moving to a particular date
specified in various ways.
</P><P>

<DL COMPACT>
<DT><KBD>g d</KBD>
<DD>Move point to specified date (<CODE>calendar-goto-date</CODE>).
<DT><KBD>o</KBD>
<DD>Center calendar around specified month (<CODE>calendar-other-month</CODE>).
<DT><KBD>.</KBD>
<DD>Move point to today's date (<CODE>calendar-goto-today</CODE>).
</DL>
<P>

<A NAME="IDX2238"></A>
<A NAME="IDX2239"></A>
  <KBD>g d</KBD> (<CODE>calendar-goto-date</CODE>) prompts for a year, a month, and a day
of the month, and then moves to that date.  Because the calendar includes all
dates from the beginning of the current era, you must type the year in its
entirety; that is, type <SAMP>`1990'</SAMP>, not <SAMP>`90'</SAMP>.
</P><P>

<A NAME="IDX2240"></A>
<A NAME="IDX2241"></A>
  <KBD>o</KBD> (<CODE>calendar-other-month</CODE>) prompts for a month and year,
then centers the three-month calendar around that month.
</P><P>

<A NAME="IDX2242"></A>
<A NAME="IDX2243"></A>
  You can return to today's date with <KBD>.</KBD>
(<CODE>calendar-goto-today</CODE>).
</P><P>

<A NAME="Scroll Calendar"></A>
<HR SIZE="6">
<A NAME="SEC417"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC416"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC418"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC418"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC412"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC438"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.2 Scrolling in the Calendar </H2>
<!--docid::SEC417::-->
<P>

<A NAME="IDX2244"></A>
  The calendar display scrolls automatically through time when you
move out of the visible portion.  You can also scroll it manually.
Imagine that the calendar window contains a long strip of paper with
the months on it.  Scrolling the calendar means moving the strip
horizontally, so that new months become visible in the window.
</P><P>

<DL COMPACT>
<DT><KBD>C-x &#60;</KBD>
<DD>Scroll calendar one month forward (<CODE>scroll-calendar-left</CODE>).
<DT><KBD>C-x &#62;</KBD>
<DD>Scroll calendar one month backward (<CODE>scroll-calendar-right</CODE>).
<DT><KBD>C-v</KBD>
<DD><DT><KBD><KBD>NEXT</KBD></KBD>
<DD>Scroll calendar three months forward
(<CODE>scroll-calendar-left-three-months</CODE>).
<DT><KBD>M-v</KBD>
<DD><DT><KBD><KBD>PRIOR</KBD></KBD>
<DD>Scroll calendar three months backward
(<CODE>scroll-calendar-right-three-months</CODE>).
</DL>
<P>

<A NAME="IDX2245"></A>
<A NAME="IDX2246"></A>
<A NAME="IDX2247"></A>
<A NAME="IDX2248"></A>
  The most basic calendar scroll commands scroll by one month at a
time.  This means that there are two months of overlap between the
display before the command and the display after.  <KBD>C-x &#60;</KBD> scrolls
the calendar contents one month to the left; that is, it moves the
display forward in time.  <KBD>C-x &#62;</KBD> scrolls the contents to the
right, which moves backwards in time.
</P><P>

<A NAME="IDX2249"></A>
<A NAME="IDX2250"></A>
<A NAME="IDX2251"></A>
<A NAME="IDX2252"></A>
  The commands <KBD>C-v</KBD> and <KBD>M-v</KBD> scroll the calendar by an entire
"screenful"---three months--in analogy with the usual meaning of
these commands.  <KBD>C-v</KBD> makes later dates visible and <KBD>M-v</KBD> makes
earlier dates visible.  These commands take a numeric argument as a
repeat count; in particular, since <KBD>C-u</KBD> multiplies the next command
by four, typing <KBD>C-u C-v</KBD> scrolls the calendar forward by a year and
typing <KBD>C-u M-v</KBD> scrolls the calendar backward by a year.
</P><P>

  The function keys <KBD>NEXT</KBD> and <KBD>PRIOR</KBD> are equivalent to
<KBD>C-v</KBD> and <KBD>M-v</KBD>, just as they are in other modes.
</P><P>

<A NAME="Counting Days"></A>
<HR SIZE="6">
<A NAME="SEC418"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC417"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC419"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC419"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC412"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC438"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.3 Counting Days </H2>
<!--docid::SEC418::-->
<P>

<DL COMPACT>
<DT><KBD>M-=</KBD>
<DD>Display the number of days in the current region
(<CODE>calendar-count-days-region</CODE>).
</DL>
<P>

<A NAME="IDX2253"></A>
<A NAME="IDX2254"></A>
  To determine the number of days in the region, type <KBD>M-=</KBD>
(<CODE>calendar-count-days-region</CODE>).  The numbers of days shown is
<EM>inclusive</EM>; that is, it includes the days specified by mark and
point.
</P><P>

<A NAME="General Calendar"></A>
<HR SIZE="6">
<A NAME="SEC419"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC418"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC420"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC420"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC412"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC438"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.4 Miscellaneous Calendar Commands </H2>
<!--docid::SEC419::-->
<P>

<DL COMPACT>
<DT><KBD>p d</KBD>
<DD>Display day-in-year (<CODE>calendar-print-day-of-year</CODE>).
<DT><KBD>C-c C-l</KBD>
<DD>Regenerate the calendar window (<CODE>redraw-calendar</CODE>).
<DT><KBD>SPC</KBD>
<DD>Scroll the next window (<CODE>scroll-other-window</CODE>).
<DT><KBD>q</KBD>
<DD>Exit from calendar (<CODE>exit-calendar</CODE>).
</DL>
<P>

<A NAME="IDX2255"></A>
<A NAME="IDX2256"></A>
<A NAME="IDX2257"></A>
  To display the number of days elapsed since the start of the year, or
the number of days remaining in the year, type the <KBD>p d</KBD> command
(<CODE>calendar-print-day-of-year</CODE>).  This displays both of those
numbers in the echo area.  The number of days elapsed includes the
selected date.  The number of days remaining does not include that
date.
</P><P>

<A NAME="IDX2258"></A>
<A NAME="IDX2259"></A>
  If the calendar window text gets corrupted, type <KBD>C-c C-l</KBD>
(<CODE>redraw-calendar</CODE>) to redraw it.  (This can only happen if you use
non-Calendar-mode editing commands.)
</P><P>

<A NAME="IDX2260"></A>
  In Calendar mode, you can use <KBD>SPC</KBD> (<CODE>scroll-other-window</CODE>)
to scroll the other window.  This is handy when you display a list of
holidays or diary entries in another window.
</P><P>

<A NAME="IDX2261"></A>
<A NAME="IDX2262"></A>
  To exit from the calendar, type <KBD>q</KBD> (<CODE>exit-calendar</CODE>).  This
buries all buffers related to the calendar, selecting other buffers.
(If a frame contains a dedicated calendar window, exiting from the
calendar iconifies that frame.)
</P><P>

<A NAME="LaTeX Calendar"></A>
<HR SIZE="6">
<A NAME="SEC420"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC419"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC421"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC421"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC412"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC438"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.5 LaTeX Calendar </H2>
<!--docid::SEC420::-->
<P>

   The Calendar LaTeX commands produce a buffer of LaTeX code that
prints as a calendar.  Depending on the command you use, the printed
calendar covers the day, week, month or year that point is in.
</P><P>

<A NAME="IDX2263"></A>
<DL COMPACT>
<DT><KBD>t m</KBD>
<DD>Generate a one-month calendar (<CODE>cal-tex-cursor-month</CODE>).
<DT><KBD>t M</KBD>
<DD>Generate a sideways-printing one-month calendar
(<CODE>cal-tex-cursor-month-landscape</CODE>).
<DT><KBD>t d</KBD>
<DD>Generate a one-day calendar
(<CODE>cal-tex-cursor-day</CODE>).
<DT><KBD>t w 1</KBD>
<DD>Generate a one-page calendar for one week
(<CODE>cal-tex-cursor-week</CODE>).
<DT><KBD>t w 2</KBD>
<DD>Generate a two-page calendar for one week
(<CODE>cal-tex-cursor-week2</CODE>).
<DT><KBD>t w 3</KBD>
<DD>Generate an ISO-style calendar for one week
(<CODE>cal-tex-cursor-week-iso</CODE>).
<DT><KBD>t w 4</KBD>
<DD>Generate a calendar for one Monday-starting week
(<CODE>cal-tex-cursor-week-monday</CODE>).
<DT><KBD>t f w</KBD>
<DD>Generate a Filofax-style two-weeks-at-a-glance calendar
(<CODE>cal-tex-cursor-filofax-2week</CODE>).
<DT><KBD>t f W</KBD>
<DD>Generate a Filofax-style one-week-at-a-glance calendar
(<CODE>cal-tex-cursor-filofax-week</CODE>).
<DT><KBD>t y</KBD>
<DD>Generate a calendar for one year
(<CODE>cal-tex-cursor-year</CODE>).
<DT><KBD>t Y</KBD>
<DD>Generate a sideways-printing calendar for one year
(<CODE>cal-tex-cursor-year-landscape</CODE>).
<DT><KBD>t f y</KBD>
<DD>Generate a Filofax-style calendar for one year
(<CODE>cal-tex-cursor-filofax-year</CODE>).
</DL>
<P>

  Some of these commands print the calendar sideways (in "landscape
mode"), so it can be wider than it is long.  Some of them use Filofax
paper size (3.75in x 6.75in).  All of these commands accept a prefix
argument which specifies how many days, weeks, months or years to print
(starting always with the selected one).
</P><P>

  If the variable <CODE>cal-tex-holidays</CODE> is non-<CODE>nil</CODE> (the default),
then the printed calendars show the holidays in <CODE>calendar-holidays</CODE>.
If the variable <CODE>cal-tex-diary</CODE> is non-<CODE>nil</CODE> (the default is
<CODE>nil</CODE>), diary entries are included also (in weekly and monthly
calendars only).  If the variable <CODE>cal-tex-rules</CODE> is non-<CODE>nil</CODE>
(the default is <CODE>nil</CODE>), the calendar displays ruled pages
in styles that have sufficient room.
</P><P>

<A NAME="Holidays"></A>
<HR SIZE="6">
<A NAME="SEC421"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC420"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC422"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC422"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC412"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC438"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.6 Holidays </H2>
<!--docid::SEC421::-->
<P>

  The Emacs calendar knows about all major and many minor holidays,
and can display them.
</P><P>

<DL COMPACT>
<DT><KBD>h</KBD>
<DD>Display holidays for the selected date
(<CODE>calendar-cursor-holidays</CODE>).
<DT><KBD>Mouse-2 Holidays</KBD>
<DD>Display any holidays for the date you click on.
<DT><KBD>x</KBD>
<DD>Mark holidays in the calendar window (<CODE>mark-calendar-holidays</CODE>).
<DT><KBD>u</KBD>
<DD>Unmark calendar window (<CODE>calendar-unmark</CODE>).
<DT><KBD>a</KBD>
<DD>List all holidays for the displayed three months in another window
(<CODE>list-calendar-holidays</CODE>).
<DT><KBD>M-x holidays</KBD>
<DD>List all holidays for three months around today's date in another
window.
<DT><KBD>M-x list-holidays</KBD>
<DD>List holidays in another window for a specified range of years.
</DL>
<P>

<A NAME="IDX2264"></A>
<A NAME="IDX2265"></A>
  To see if any holidays fall on a given date, position point on that
date in the calendar window and use the <KBD>h</KBD> command.  Alternatively,
click on that date with <KBD>Mouse-2</KBD> and then choose <KBD>Holidays</KBD>
from the menu that appears.  Either way, this displays the holidays for
that date, in the echo area if they fit there, otherwise in a separate
window.
</P><P>

<A NAME="IDX2266"></A>
<A NAME="IDX2267"></A>
<A NAME="IDX2268"></A>
<A NAME="IDX2269"></A>
  To view the distribution of holidays for all the dates shown in the
calendar, use the <KBD>x</KBD> command.  This displays the dates that are
holidays in a different face (or places a <SAMP>`*'</SAMP> after these dates, if
display with multiple faces is not available).  The command applies both
to the currently visible months and to other months that subsequently
become visible by scrolling.  To turn marking off and erase the current
marks, type <KBD>u</KBD>, which also erases any diary marks (see section <A HREF="emacs_32.html#SEC429">AC.10 The Diary</A>).
</P><P>

<A NAME="IDX2270"></A>
<A NAME="IDX2271"></A>
  To get even more detailed information, use the <KBD>a</KBD> command, which
displays a separate buffer containing a list of all holidays in the
current three-month range.  You can use <KBD>SPC</KBD> in the calendar window
to scroll that list.
</P><P>

<A NAME="IDX2272"></A>
  The command <KBD>M-x holidays</KBD> displays the list of holidays for the
current month and the preceding and succeeding months; this works even
if you don't have a calendar window.  If you want the list of holidays
centered around a different month, use <KBD>C-u M-x holidays</KBD>, which
prompts for the month and year.
</P><P>

  The holidays known to Emacs include United States holidays and the
major Christian, Jewish, and Islamic holidays; also the solstices and
equinoxes.
</P><P>

<A NAME="IDX2273"></A>
   The command <KBD>M-x list-holidays</KBD> displays the list of holidays for
a range of years.  This function asks you for the starting and stopping
years, and allows you to choose all the holidays or one of several
categories of holidays.  You can use this command even if you don't have
a calendar window.
</P><P>

  The dates used by Emacs for holidays are based on <EM>current
practice</EM>, not historical fact.  Historically, for instance, the start
of daylight savings time and even its existence have varied from year to
year, but present United States law mandates that daylight savings time
begins on the first Sunday in April.  When the daylight savings rules
are set up for the United States, Emacs always uses the present
definition, even though it is wrong for some prior years.
</P><P>

<A NAME="Sunrise/Sunset"></A>
<HR SIZE="6">
<A NAME="SEC422"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC421"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC423"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC423"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC412"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC438"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.7 Times of Sunrise and Sunset </H2>
<!--docid::SEC422::-->
<P>

  Special calendar commands can tell you, to within a minute or two, the
times of sunrise and sunset for any date.
</P><P>

<DL COMPACT>
<DT><KBD>S</KBD>
<DD>Display times of sunrise and sunset for the selected date
(<CODE>calendar-sunrise-sunset</CODE>).
<DT><KBD>Mouse-2 Sunrise/sunset</KBD>
<DD>Display times of sunrise and sunset for the date you click on.
<DT><KBD>M-x sunrise-sunset</KBD>
<DD>Display times of sunrise and sunset for today's date.
<DT><KBD>C-u M-x sunrise-sunset</KBD>
<DD>Display times of sunrise and sunset for a specified date.
</DL>
<P>

<A NAME="IDX2274"></A>
<A NAME="IDX2275"></A>
<A NAME="IDX2276"></A>
  Within the calendar, to display the <EM>local times</EM> of sunrise and
sunset in the echo area, move point to the date you want, and type
<KBD>S</KBD>.  Alternatively, click <KBD>Mouse-2</KBD> on the date, then choose
<SAMP>`Sunrise/sunset'</SAMP> from the menu that appears.  The command <KBD>M-x
sunrise-sunset</KBD> is available outside the calendar to display this
information for today's date or a specified date.  To specify a date
other than today, use <KBD>C-u M-x sunrise-sunset</KBD>, which prompts for
the year, month, and day.
</P><P>

  You can display the times of sunrise and sunset for any location and
any date with <KBD>C-u C-u M-x sunrise-sunset</KBD>.  This asks you for a
longitude, latitude, number of minutes difference from Coordinated
Universal Time, and date, and then tells you the times of sunrise and
sunset for that location on that date.
</P><P>

  Because the times of sunrise and sunset depend on the location on
earth, you need to tell Emacs your latitude, longitude, and location
name before using these commands.  Here is an example of what to set:
</P><P>

<A NAME="IDX2277"></A>
<A NAME="IDX2278"></A>
<A NAME="IDX2279"></A>
<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq calendar-latitude 40.1)
(setq calendar-longitude -88.2)
(setq calendar-location-name "Urbana, IL")
</pre></td></tr></table></P><P>

Use one decimal place in the values of <CODE>calendar-latitude</CODE> and
<CODE>calendar-longitude</CODE>.
</P><P>

  Your time zone also affects the local time of sunrise and sunset.
Emacs usually gets time zone information from the operating system, but
if these values are not what you want (or if the operating system does
not supply them), you must set them yourself.  Here is an example:
</P><P>

<A NAME="IDX2280"></A>
<A NAME="IDX2281"></A>
<A NAME="IDX2282"></A>
<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq calendar-time-zone -360)
(setq calendar-standard-time-zone-name "CST")
(setq calendar-daylight-time-zone-name "CDT")
</pre></td></tr></table></P><P>

The value of <CODE>calendar-time-zone</CODE> is the number of minutes
difference between your local standard time and Coordinated Universal
Time (Greenwich time).  The values of
<CODE>calendar-standard-time-zone-name</CODE> and
<CODE>calendar-daylight-time-zone-name</CODE> are the abbreviations used in
your time zone.  Emacs displays the times of sunrise and sunset
<EM>corrected for daylight savings time</EM>.  See section <A HREF="emacs_32.html#SEC436">AC.12 Daylight Savings Time</A>,
for how daylight savings time is determined.
</P><P>

  As a user, you might find it convenient to set the calendar location
variables for your usual physical location in your <TT>`.emacs'</TT> file.
And when you install Emacs on a machine, you can create a
<TT>`default.el'</TT> file which sets them properly for the typical location
of most users of that machine.  See section <A HREF="emacs_33.html#SEC505">AD.7 The Init File, <TT>`~/.emacs'</TT></A>.
</P><P>

<A NAME="Lunar Phases"></A>
<HR SIZE="6">
<A NAME="SEC423"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC422"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC424"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC424"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC412"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC438"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.8 Phases of the Moon </H2>
<!--docid::SEC423::-->
<P>

  These calendar commands display the dates and times of the phases of
the moon (new moon, first quarter, full moon, last quarter).  This
feature is useful for debugging problems that "depend on the phase of
the moon."
</P><P>

<DL COMPACT>
<DT><KBD>M</KBD>
<DD>Display the dates and times for all the quarters of the moon for the
three-month period shown (<CODE>calendar-phases-of-moon</CODE>).
<DT><KBD>M-x phases-of-moon</KBD>
<DD>Display dates and times of the quarters of the moon for three months around
today's date.
</DL>
<P>

<A NAME="IDX2283"></A>
<A NAME="IDX2284"></A>
  Within the calendar, use the <KBD>M</KBD> command to display a separate
buffer of the phases of the moon for the current three-month range.  The
dates and times listed are accurate to within a few minutes.
</P><P>

<A NAME="IDX2285"></A>
  Outside the calendar, use the command <KBD>M-x phases-of-moon</KBD> to
display the list of the phases of the moon for the current month and the
preceding and succeeding months.  For information about a different
month, use <KBD>C-u M-x phases-of-moon</KBD>, which prompts for the month and
year.
</P><P>

  The dates and times given for the phases of the moon are given in
local time (corrected for daylight savings, when appropriate); but if
the variable <CODE>calendar-time-zone</CODE> is void, Coordinated Universal
Time (the Greenwich time zone) is used.  See section <A HREF="emacs_32.html#SEC436">AC.12 Daylight Savings Time</A>.
</P><P>

<A NAME="Other Calendars"></A>
<HR SIZE="6">
<A NAME="SEC424"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC423"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC425"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC412"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC412"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC429"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.9 Conversion To and From Other Calendars </H2>
<!--docid::SEC424::-->
<P>

<A NAME="IDX2286"></A>
  The Emacs calendar displayed is <EM>always</EM> the Gregorian calendar,
sometimes called the "new style" calendar, which is used in most of
the world today.  However, this calendar did not exist before the
sixteenth century and was not widely used before the eighteenth century;
it did not fully displace the Julian calendar and gain universal
acceptance until the early twentieth century.  The Emacs calendar can
display any month since January, year 1 of the current era, but the
calendar displayed is the Gregorian, even for a date at which the
Gregorian calendar did not exist.
</P><P>

  While Emacs cannot display other calendars, it can convert dates to
and from several other calendars.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC425">AC.9.1 Supported Calendar Systems</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">The calendars Emacs understands</TD></TR>
</TABLE>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(aside&nbsp;from&nbsp;Gregorian).
<br>
<TABLE BORDER=0 CELLSPACING=0>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC426">AC.9.2 Converting To Other Calendars</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Converting the selected date to various calendars.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC427">AC.9.3 Converting From Other Calendars</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Moving to a date specified in another calendar.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC428">AC.9.4 Converting from the Mayan Calendar</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Moving to a date specified in a Mayan calendar.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Calendar Systems"></A>
<HR SIZE="6">
<A NAME="SEC425"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC424"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC426"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC412"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC424"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC429"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.9.1 Supported Calendar Systems </H3>
<!--docid::SEC425::-->
<P>

<A NAME="IDX2287"></A>
  The ISO commercial calendar is used largely in Europe.
</P><P>

<A NAME="IDX2288"></A>
  The Julian calendar, named after Julius Caesar, was the one used in Europe
throughout medieval times, and in many countries up until the nineteenth
century.
</P><P>

<A NAME="IDX2289"></A>
<A NAME="IDX2290"></A>
  Astronomers use a simple counting of days elapsed since noon, Monday,
January 1, 4713 B.C. on the Julian calendar.  The number of days elapsed
is called the <EM>Julian day number</EM> or the <EM>Astronomical day number</EM>.
</P><P>

<A NAME="IDX2291"></A>
  The Hebrew calendar is used by tradition in the Jewish religion.  The
Emacs calendar program uses the Hebrew calendar to determine the dates
of Jewish holidays.  Hebrew calendar dates begin and end at sunset.
</P><P>

<A NAME="IDX2292"></A>
  The Islamic calendar is used in many predominantly Islamic countries.
Emacs uses it to determine the dates of Islamic holidays.  There is no
universal agreement in the Islamic world about the calendar; Emacs uses
a widely accepted version, but the precise dates of Islamic holidays
often depend on proclamation by religious authorities, not on
calculations.  As a consequence, the actual dates of observance can vary
slightly from the dates computed by Emacs.  Islamic calendar dates begin
and end at sunset.
</P><P>

<A NAME="IDX2293"></A>
  The French Revolutionary calendar was created by the Jacobins after the 1789
revolution, to represent a more secular and nature-based view of the annual
cycle, and to install a 10-day week in a rationalization measure similar to
the metric system.  The French government officially abandoned this
calendar at the end of 1805.
</P><P>

<A NAME="IDX2294"></A>
  The Maya of Central America used three separate, overlapping calendar
systems, the <EM>long count</EM>, the <EM>tzolkin</EM>, and the <EM>haab</EM>.
Emacs knows about all three of these calendars.  Experts dispute the
exact correlation between the Mayan calendar and our calendar; Emacs uses the
Goodman-Martinez-Thompson correlation in its calculations.
</P><P>

<A NAME="IDX2295"></A>
<A NAME="IDX2296"></A>
  The Copts use a calendar based on the ancient Egyptian solar calendar.
Their calendar consists of twelve 30-day months followed by an extra
five-day period.  Once every fourth year they add a leap day to this
extra period to make it six days.  The Ethiopic calendar is identical in
structure, but has different year numbers and month names.
</P><P>

<A NAME="IDX2297"></A>
  The Persians use a solar calendar based on a design of Omar Khayyam.
Their calendar consists of twelve months of which the first six have 31
days, the next five have 30 days, and the last has 29 in ordinary years
and 30 in leap years.  Leap years occur in a complicated pattern every
four or five years.
</P><P>

<A NAME="IDX2298"></A>
  The Chinese calendar is a complicated system of lunar months arranged
into solar years.  The years go in cycles of sixty, each year containing
either twelve months in an ordinary year or thirteen months in a leap
year; each month has either 29 or 30 days.  Years, ordinary months, and
days are named by combining one of ten "celestial stems" with one of
twelve "terrestrial branches" for a total of sixty names that are
repeated in a cycle of sixty.
</P><P>

<A NAME="To Other Calendar"></A>
<HR SIZE="6">
<A NAME="SEC426"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC425"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC427"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC427"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC424"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC429"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.9.2 Converting To Other Calendars </H3>
<!--docid::SEC426::-->
<P>

  The following commands describe the selected date (the date at point)
in various other calendar systems:
</P><P>

<DL COMPACT>
<DT><KBD>Mouse-2  Other calendars</KBD>
<DD>Display the date that you click on, expressed in various other calendars.
<A NAME="IDX2299"></A>
<A NAME="IDX2300"></A>
<DT><KBD>p c</KBD>
<DD>Display ISO commercial calendar equivalent for selected day
(<CODE>calendar-print-iso-date</CODE>).
<A NAME="IDX2301"></A>
<DT><KBD>p j</KBD>
<DD>Display Julian date for selected day (<CODE>calendar-print-julian-date</CODE>).
<A NAME="IDX2302"></A>
<DT><KBD>p a</KBD>
<DD>Display astronomical (Julian) day number for selected day
(<CODE>calendar-print-astro-day-number</CODE>).
<A NAME="IDX2303"></A>
<DT><KBD>p h</KBD>
<DD>Display Hebrew date for selected day (<CODE>calendar-print-hebrew-date</CODE>).
<A NAME="IDX2304"></A>
<DT><KBD>p i</KBD>
<DD>Display Islamic date for selected day (<CODE>calendar-print-islamic-date</CODE>).
<A NAME="IDX2305"></A>
<DT><KBD>p f</KBD>
<DD>Display French Revolutionary date for selected day
(<CODE>calendar-print-french-date</CODE>).
<A NAME="IDX2306"></A>
<DT><KBD>p C</KBD>
<DD>Display Chinese date for selected day
(<CODE>calendar-print-chinese-date</CODE>).
<A NAME="IDX2307"></A>
<DT><KBD>p k</KBD>
<DD>Display Coptic date for selected day
(<CODE>calendar-print-coptic-date</CODE>).
<A NAME="IDX2308"></A>
<DT><KBD>p e</KBD>
<DD>Display Ethiopic date for selected day
(<CODE>calendar-print-ethiopic-date</CODE>).
<A NAME="IDX2309"></A>
<DT><KBD>p p</KBD>
<DD>Display Persian date for selected day
(<CODE>calendar-print-persian-date</CODE>).
<A NAME="IDX2310"></A>
<DT><KBD>p m</KBD>
<DD>Display Mayan date for selected day (<CODE>calendar-print-mayan-date</CODE>).
</DL>
<P>

  If you are using X, the easiest way to translate a date into other
calendars is to click on it with <KBD>Mouse-2</KBD>, then choose <KBD>Other
calendars</KBD> from the menu that appears.  This displays the equivalent
forms of the date in all the calendars Emacs understands, in the form of
a menu.  (Choosing an alternative from this menu doesn't actually do
anything--the menu is used only for display.)
</P><P>

  Otherwise, move point to the date you want to convert, then type the
appropriate command starting with <KBD>p</KBD> from the table above.  The
prefix <KBD>p</KBD> is a mnemonic for "print," since Emacs "prints" the
equivalent date in the echo area.
</P><P>

<A NAME="From Other Calendar"></A>
<HR SIZE="6">
<A NAME="SEC427"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC426"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC428"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC428"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC424"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC429"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.9.3 Converting From Other Calendars </H3>
<!--docid::SEC427::-->
<P>

  You can use the other supported calendars to specify a date to move
to.  This section describes the commands for doing this using calendars
other than Mayan; for the Mayan calendar, see the following section.
</P><P>

<A NAME="IDX2311"></A>
<A NAME="IDX2312"></A>
<A NAME="IDX2313"></A>
<A NAME="IDX2314"></A>
<A NAME="IDX2315"></A>
<A NAME="IDX2316"></A>
<A NAME="IDX2317"></A>
<A NAME="IDX2318"></A>
<A NAME="IDX2319"></A>
<A NAME="IDX2320"></A>
<A NAME="IDX2321"></A>
<DL COMPACT>
<DT><KBD>g c</KBD>
<DD>Move to a date specified in the ISO commercial calendar
(<CODE>calendar-goto-iso-date</CODE>).
<DT><KBD>g j</KBD>
<DD>Move to a date specified in the Julian calendar
(<CODE>calendar-goto-julian-date</CODE>).
<DT><KBD>g a</KBD>
<DD>Move to a date specified with an astronomical (Julian) day number
(<CODE>calendar-goto-astro-day-number</CODE>).
<DT><KBD>g h</KBD>
<DD>Move to a date specified in the Hebrew calendar
(<CODE>calendar-goto-hebrew-date</CODE>).
<DT><KBD>g i</KBD>
<DD>Move to a date specified in the Islamic calendar
(<CODE>calendar-goto-islamic-date</CODE>).
<DT><KBD>g f</KBD>
<DD>Move to a date specified in the French Revolutionary calendar
(<CODE>calendar-goto-french-date</CODE>).
<DT><KBD>g C</KBD>
<DD>Move to a date specified in the Chinese calendar
(<CODE>calendar-goto-chinese-date</CODE>).
<DT><KBD>g p</KBD>
<DD>Move to a date specified in the Persian calendar
(<CODE>calendar-goto-persian-date</CODE>).
<DT><KBD>g k</KBD>
<DD>Move to a date specified in the Coptic calendar
(<CODE>calendar-goto-coptic-date</CODE>).
<DT><KBD>g e</KBD>
<DD>Move to a date specified in the Ethiopic calendar
(<CODE>calendar-goto-ethiopic-date</CODE>).
</DL>
<P>

  These commands ask you for a date on the other calendar, move point to
the Gregorian calendar date equivalent to that date, and display the
other calendar's date in the echo area.  Emacs uses strict completion
(see section <A HREF="emacs_8.html#SEC34">E.3 Completion</A>) whenever it asks you to type a month name, so you
don't have to worry about the spelling of Hebrew, Islamic, or French names.
</P><P>

<A NAME="IDX2322"></A>
<A NAME="IDX2323"></A>
  One common question concerning the Hebrew calendar is the computation
of the anniversary of a date of death, called a "yahrzeit."  The Emacs
calendar includes a facility for such calculations.  If you are in the
calendar, the command <KBD>M-x list-yahrzeit-dates</KBD> asks you for a
range of years and then displays a list of the yahrzeit dates for those
years for the date given by point.  If you are not in the calendar,
this command first asks you for the date of death and the range of
years, and then displays the list of yahrzeit dates.
</P><P>

<A NAME="Mayan Calendar"></A>
<HR SIZE="6">
<A NAME="SEC428"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC427"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC429"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC412"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC424"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC429"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.9.4 Converting from the Mayan Calendar </H3>
<!--docid::SEC428::-->
<P>

  Here are the commands to select dates based on the Mayan calendar:
</P><P>

<DL COMPACT>
<DT><KBD>g m l</KBD>
<DD>Move to a date specified by the long count calendar
(<CODE>calendar-goto-mayan-long-count-date</CODE>).
<DT><KBD>g m n t</KBD>
<DD>Move to the next occurrence of a place in the
tzolkin calendar (<CODE>calendar-next-tzolkin-date</CODE>).
<DT><KBD>g m p t</KBD>
<DD>Move to the previous occurrence of a place in the
tzolkin calendar (<CODE>calendar-previous-tzolkin-date</CODE>).
<DT><KBD>g m n h</KBD>
<DD>Move to the next occurrence of a place in the
haab calendar (<CODE>calendar-next-haab-date</CODE>).
<DT><KBD>g m p h</KBD>
<DD>Move to the previous occurrence of a place in the
haab calendar (<CODE>calendar-previous-haab-date</CODE>).
<DT><KBD>g m n c</KBD>
<DD>Move to the next occurrence of a place in the
calendar round (<CODE>calendar-next-calendar-round-date</CODE>).
<DT><KBD>g m p c</KBD>
<DD>Move to the previous occurrence of a place in the
calendar round (<CODE>calendar-previous-calendar-round-date</CODE>).
</DL>
<P>

<A NAME="IDX2324"></A>
  To understand these commands, you need to understand the Mayan calendars.
The <EM>long count</EM> is a counting of days with these units:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=display><pre style="font-family: serif">1 kin = 1 day   1 uinal = 20 kin   1 tun = 18 uinal
1 katun = 20 tun   1 baktun = 20 katun
</pre></td></tr></table></P><P>

<A NAME="IDX2325"></A>
<A NAME="IDX2326"></A>
Thus, the long count date 12.16.11.16.6 means 12 baktun, 16 katun, 11
tun, 16 uinal, and 6 kin.  The Emacs calendar can handle Mayan long
count dates as early as 7.17.18.13.1, but no earlier.  When you use the
<KBD>g m l</KBD> command, type the Mayan long count date with the baktun,
katun, tun, uinal, and kin separated by periods.
</P><P>

<A NAME="IDX2327"></A>
<A NAME="IDX2328"></A>
<A NAME="IDX2329"></A>
  The Mayan tzolkin calendar is a cycle of 260 days formed by a pair of
independent cycles of 13 and 20 days.  Since this cycle repeats
endlessly, Emacs provides commands to move backward and forward to the
previous or next point in the cycle.  Type <KBD>g m p t</KBD> to go to the
previous tzolkin date; Emacs asks you for a tzolkin date and moves point
to the previous occurrence of that date.  Similarly, type <KBD>g m n t</KBD>
to go to the next occurrence of a tzolkin date.
</P><P>

<A NAME="IDX2330"></A>
<A NAME="IDX2331"></A>
<A NAME="IDX2332"></A>
  The Mayan haab calendar is a cycle of 365 days arranged as 18 months
of 20 days each, followed a 5-day monthless period.  Like the tzolkin
cycle, this cycle repeats endlessly, and there are commands to move
backward and forward to the previous or next point in the cycle.  Type
<KBD>g m p h</KBD> to go to the previous haab date; Emacs asks you for a haab
date and moves point to the previous occurrence of that date.
Similarly, type <KBD>g m n h</KBD> to go to the next occurrence of a haab
date.
</P><P>

<A NAME="IDX2333"></A>
<A NAME="IDX2334"></A>
  The Maya also used the combination of the tzolkin date and the haab
date.  This combination is a cycle of about 52 years called a
<EM>calendar round</EM>.  If you type <KBD>g m p c</KBD>, Emacs asks you for
both a haab and a tzolkin date and then moves point to the previous
occurrence of that combination.  Use <KBD>g m n c</KBD> to move point to the
next occurrence of a combination.  These commands signal an error if the
haab/tzolkin date combination you have typed is impossible.
</P><P>

  Emacs uses strict completion (see section <A HREF="emacs_8.html#SEC37">E.3.3 Strict Completion</A>) whenever it
asks you to type a Mayan name, so you don't have to worry about
spelling.
</P><P>

<A NAME="Diary"></A>
<HR SIZE="6">
<A NAME="SEC429"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC428"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC430"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC417"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC412"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC435"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.10 The Diary </H2>
<!--docid::SEC429::-->
<P>

  The Emacs diary keeps track of appointments or other events on a daily
basis, in conjunction with the calendar.  To use the diary feature, you
must first create a <EM>diary file</EM> containing a list of events and
their dates.  Then Emacs can automatically pick out and display the
events for today, for the immediate future, or for any specified
date.
</P><P>

  By default, Emacs uses <TT>`~/diary'</TT> as the diary file.  This is the
same file that the <CODE>calendar</CODE> utility uses.  A sample
<TT>`~/diary'</TT> file is:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>12/22/1988  Twentieth wedding anniversary!!
&#38;1/1.       Happy New Year!
10/22       Ruth's birthday.
* 21, *:    Payday
Tuesday--weekly meeting with grad students at 10am
         Supowit, Shen, Bitner, and Kapoor to attend.
1/13/89     Friday the thirteenth!!
&#38;thu 4pm    squash game with Lloyd.
mar 16      Dad's birthday
April 15, 1989 Income tax due.
&#38;* 15       time cards due.
</pre></td></tr></table></P><P>

This example uses extra spaces to align the event descriptions of most
of the entries.  Such formatting is purely a matter of taste.
</P><P>

  Although you probably will start by creating a diary manually, Emacs
provides a number of commands to let you view, add, and change diary
entries.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC430">AC.10.1 Commands Displaying Diary Entries</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Viewing diary entries and associated calendar dates.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC431">AC.10.2 The Diary File</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Entering events in your diary.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC432">AC.10.3 Date Formats</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Various ways you can specify dates.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC433">AC.10.4 Commands to Add to the Diary</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Commands to create diary entries.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC434">AC.10.5 Special Diary Entries</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Anniversaries, blocks of dates, cyclic entries, etc.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Diary Commands"></A>
<HR SIZE="6">
<A NAME="SEC430"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC429"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC431"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC417"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC429"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC435"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.10.1 Commands Displaying Diary Entries </H3>
<!--docid::SEC430::-->
<P>

  Once you have created a <TT>`~/diary'</TT> file, you can use the calendar
to view it.  You can also view today's events outside of Calendar mode.
</P><P>

<DL COMPACT>
<DT><KBD>d</KBD>
<DD>Display all diary entries for the selected date
(<CODE>view-diary-entries</CODE>).
<DT><KBD>Mouse-2 Diary</KBD>
<DD>Display all diary entries for the date you click on.
<DT><KBD>s</KBD>
<DD>Display the entire diary file (<CODE>show-all-diary-entries</CODE>).
<DT><KBD>m</KBD>
<DD>Mark all visible dates that have diary entries
(<CODE>mark-diary-entries</CODE>).
<DT><KBD>u</KBD>
<DD>Unmark the calendar window (<CODE>calendar-unmark</CODE>).
<DT><KBD>M-x print-diary-entries</KBD>
<DD>Print hard copy of the diary display as it appears.
<DT><KBD>M-x diary</KBD>
<DD>Display all diary entries for today's date.
<DT><KBD>M-x diary-mail-entries</KBD>
<DD>Mail yourself email reminders about upcoming diary entries.
</DL>
<P>

<A NAME="IDX2335"></A>
<A NAME="IDX2336"></A>
  Displaying the diary entries with <KBD>d</KBD> shows in a separate window
the diary entries for the selected date in the calendar.  The mode line
of the new window shows the date of the diary entries and any holidays
that fall on that date.  If you specify a numeric argument with <KBD>d</KBD>,
it shows all the diary entries for that many successive days.  Thus,
<KBD>2 d</KBD> displays all the entries for the selected date and for the
following day.
</P><P>

  Another way to display the diary entries for a date is to click
<KBD>Mouse-2</KBD> on the date, and then choose <KBD>Diary entries</KBD> from
the menu that appears.
</P><P>

<A NAME="IDX2337"></A>
<A NAME="IDX2338"></A>
  To get a broader view of which days are mentioned in the diary, use
the <KBD>m</KBD> command.  This displays the dates that have diary entries
in a different face (or places a <SAMP>`+'</SAMP> after these dates, if
display with multiple faces is not available).  The command applies both
to the currently visible months and to other months that subsequently
become visible by scrolling.  To turn marking off and erase the current
marks, type <KBD>u</KBD>, which also turns off holiday marks
(see section <A HREF="emacs_32.html#SEC421">AC.6 Holidays</A>).
</P><P>

<A NAME="IDX2339"></A>
<A NAME="IDX2340"></A>
  To see the full diary file, rather than just some of the entries, use
the <KBD>s</KBD> command.
</P><P>

  Display of selected diary entries uses the selective display feature
to hide entries that don't apply.
</P><P>

  The diary buffer as you see it is an illusion, so simply printing the
buffer does not print what you see on your screen.  There is a special
command to print hard copy of the diary buffer <EM>as it appears</EM>;
this command is <KBD>M-x print-diary-entries</KBD>.  It sends the data
directly to the printer.  You can customize it like <CODE>lpr-region</CODE>
(see section <A HREF="emacs_32.html#SEC458">AC.18 Hardcopy Output</A>).
</P><P>

<A NAME="IDX2341"></A>
  The command <KBD>M-x diary</KBD> displays the diary entries for the current
date, independently of the calendar display, and optionally for the next
few days as well; the variable <CODE>number-of-diary-entries</CODE> specifies
how many days to include.  See section `Calendar' in <CITE>The Emacs Lisp Reference Manual</CITE>.
</P><P>

  If you put <CODE>(diary)</CODE> in your <TT>`.emacs'</TT> file, this
automatically displays a window with the day's diary entries, when you
enter Emacs.  The mode line of the displayed window shows the date and
any holidays that fall on that date.
</P><P>

<A NAME="IDX2342"></A>
<A NAME="IDX2343"></A>
  Many users like to receive notice of events in their diary as email.
To send such mail to yourself, use the command <KBD>M-x
diary-mail-entries</KBD>.  A prefix argument specifies how many days
(starting with today) to check; otherwise, the variable
<CODE>diary-mail-days</CODE> says how many days.
</P><P>

<A NAME="Format of Diary File"></A>
<HR SIZE="6">
<A NAME="SEC431"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC430"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC432"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC432"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC429"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC435"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.10.2 The Diary File </H3>
<!--docid::SEC431::-->
<P>

<A NAME="IDX2344"></A>
  Your <EM>diary file</EM> is a file that records events associated with
particular dates.  The name of the diary file is specified by the
variable <CODE>diary-file</CODE>; <TT>`~/diary'</TT> is the default.  The
<CODE>calendar</CODE> utility program supports a subset of the format allowed
by the Emacs diary facilities, so you can use that utility to view the
diary file, with reasonable results aside from the entries it cannot
understand.
</P><P>

  Each entry in the diary file describes one event and consists of one
or more lines.  An entry always begins with a date specification at the
left margin.  The rest of the entry is simply text to describe the
event.  If the entry has more than one line, then the lines after the
first must begin with whitespace to indicate they continue a previous
entry.  Lines that do not begin with valid dates and do not continue a
preceding entry are ignored.
</P><P>

  You can inhibit the marking of certain diary entries in the calendar
window; to do this, insert an ampersand (<SAMP>`&#38;'</SAMP>) at the beginning of
the entry, before the date.  This has no effect on display of the entry
in the diary window; it affects only marks on dates in the calendar
window.  Nonmarking entries are especially useful for generic entries
that would otherwise mark many different dates.
</P><P>

  If the first line of a diary entry consists only of the date or day
name with no following blanks or punctuation, then the diary window
display doesn't include that line; only the continuation lines appear.
For example, this entry:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>02/11/1989
      Bill B. visits Princeton today
      2pm Cognitive Studies Committee meeting
      2:30-5:30 Liz at Lawrenceville
      4:00pm Dentist appt
      7:30pm Dinner at George's
      8:00-10:00pm concert
</pre></td></tr></table></P><P>

appears in the diary window without the date line at the beginning.
This style of entry looks neater when you display just a single day's
entries, but can cause confusion if you ask for more than one day's
entries.
</P><P>

  You can edit the diary entries as they appear in the window, but it is
important to remember that the buffer displayed contains the <EM>entire</EM>
diary file, with portions of it concealed from view.  This means, for
instance, that the <KBD>C-f</KBD> (<CODE>forward-char</CODE>) command can put point
at what appears to be the end of the line, but what is in reality the
middle of some concealed line.
</P><P>

  <EM>Be careful when editing the diary entries!</EM>  Inserting
additional lines or adding/deleting characters in the middle of a
visible line cannot cause problems, but editing at the end of a line may
not do what you expect.  Deleting a line may delete other invisible
entries that follow it.  Before editing the diary, it is best to display
the entire file with <KBD>s</KBD> (<CODE>show-all-diary-entries</CODE>).
</P><P>

<A NAME="Date Formats"></A>
<HR SIZE="6">
<A NAME="SEC432"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC431"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC433"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC433"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC429"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC435"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.10.3 Date Formats </H3>
<!--docid::SEC432::-->
<P>

  Here are some sample diary entries, illustrating different ways of
formatting a date.  The examples all show dates in American order
(month, day, year), but Calendar mode supports European order (day,
month, year) as an option.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>4/20/93  Switch-over to new tabulation system
apr. 25  Start tabulating annual results
4/30  Results for April are due
*/25  Monthly cycle finishes
Friday  Don't leave without backing up files
</pre></td></tr></table></P><P>

  The first entry appears only once, on April 20, 1993.  The second and
third appear every year on the specified dates, and the fourth uses a
wildcard (asterisk) for the month, so it appears on the 25th of every
month.  The final entry appears every week on Friday.
</P><P>

  You can use just numbers to express a date, as in
<SAMP>`<VAR>month</VAR>/<VAR>day</VAR>'</SAMP> or <SAMP>`<VAR>month</VAR>/<VAR>day</VAR>/<VAR>year</VAR>'</SAMP>.
This must be followed by a nondigit.  In the date itself, <VAR>month</VAR>
and <VAR>day</VAR> are numbers of one or two digits.  The optional <VAR>year</VAR>
is also a number, and may be abbreviated to the last two digits; that
is, you can use <SAMP>`11/12/1989'</SAMP> or <SAMP>`11/12/89'</SAMP>.
</P><P>

  Dates can also have the form <SAMP>`<VAR>monthname</VAR> <VAR>day</VAR>'</SAMP> or
<SAMP>`<VAR>monthname</VAR> <VAR>day</VAR>, <VAR>year</VAR>'</SAMP>, where the month's name can
be spelled in full or abbreviated to three characters (with or without a
period).  Case is not significant.
</P><P>

  A date may be <EM>generic</EM>; that is, partially unspecified.  Then the
entry applies to all dates that match the specification.  If the date
does not contain a year, it is generic and applies to any year.
Alternatively, <VAR>month</VAR>, <VAR>day</VAR>, or <VAR>year</VAR> can be a <SAMP>`*'</SAMP>;
this matches any month, day, or year, respectively.  Thus, a diary entry
<SAMP>`3/*/*'</SAMP> matches any day in March of any year; so does <SAMP>`march
*'</SAMP>.
</P><P>

<A NAME="IDX2345"></A>
<A NAME="IDX2346"></A>
<A NAME="IDX2347"></A>
  If you prefer the European style of writing dates--in which the day
comes before the month--type <KBD>M-x european-calendar</KBD> while in the
calendar, or set the variable <CODE>european-calendar-style</CODE> to <CODE>t</CODE>
<EM>before</EM> using any calendar or diary command.  This mode interprets
all dates in the diary in the European manner, and also uses European
style for displaying diary dates.  (Note that there is no comma after
the <VAR>monthname</VAR> in the European style.)  To go back to the (default)
American style of writing dates, type <KBD>M-x american-calendar</KBD>.
</P><P>

  You can use the name of a day of the week as a generic date which
applies to any date falling on that day of the week.  You can abbreviate
the day of the week to three letters (with or without a period) or spell
it in full; case is not significant.
</P><P>

<A NAME="Adding to Diary"></A>
<HR SIZE="6">
<A NAME="SEC433"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC432"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC434"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC434"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC429"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC435"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.10.4 Commands to Add to the Diary </H3>
<!--docid::SEC433::-->
<P>

  While in the calendar, there are several commands to create diary
entries:
</P><P>

<DL COMPACT>
<DT><KBD>i d</KBD>
<DD>Add a diary entry for the selected date (<CODE>insert-diary-entry</CODE>).
<DT><KBD>i w</KBD>
<DD>Add a diary entry for the selected day of the week (<CODE>insert-weekly-diary-entry</CODE>).
<DT><KBD>i m</KBD>
<DD>Add a diary entry for the selected day of the month (<CODE>insert-monthly-diary-entry</CODE>).
<DT><KBD>i y</KBD>
<DD>Add a diary entry for the selected day of the year (<CODE>insert-yearly-diary-entry</CODE>).
</DL>
<P>

<A NAME="IDX2348"></A>
<A NAME="IDX2349"></A>
  You can make a diary entry for a specific date by selecting that date
in the calendar window and typing the <KBD>i d</KBD> command.  This command
displays the end of your diary file in another window and inserts the
date; you can then type the rest of the diary entry.
</P><P>

<A NAME="IDX2350"></A>
<A NAME="IDX2351"></A>
<A NAME="IDX2352"></A>
<A NAME="IDX2353"></A>
<A NAME="IDX2354"></A>
<A NAME="IDX2355"></A>
  If you want to make a diary entry that applies to a specific day of
the week, select that day of the week (any occurrence will do) and type
<KBD>i w</KBD>.  This inserts the day-of-week as a generic date; you can then
type the rest of the diary entry.  You can make a monthly diary entry in
the same fashion: select the day of the month, use the <KBD>i m</KBD>
command, and type the rest of the entry.  Similarly, you can insert a
yearly diary entry with the <KBD>i y</KBD> command.
</P><P>

  All of the above commands make marking diary entries by default.  To
make a nonmarking diary entry, give a numeric argument to the command.
For example, <KBD>C-u i w</KBD> makes a nonmarking weekly diary entry.
</P><P>

  When you modify the diary file, be sure to save the file before
exiting Emacs.
</P><P>

<A NAME="Special Diary Entries"></A>
<HR SIZE="6">
<A NAME="SEC434"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC433"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC435"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC417"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC429"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC435"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.10.5 Special Diary Entries </H3>
<!--docid::SEC434::-->
<P>

  In addition to entries based on calendar dates, the diary file can
contain <EM>sexp entries</EM> for regular events such as anniversaries.
These entries are based on Lisp expressions (sexps) that Emacs evaluates
as it scans the diary file.  Instead of a date, a sexp entry contains
<SAMP>`%%'</SAMP> followed by a Lisp expression which must begin and end with
parentheses.  The Lisp expression determines which dates the entry
applies to.
</P><P>

  Calendar mode provides commands to insert certain commonly used
sexp entries:
</P><P>

<DL COMPACT>
<DT><KBD>i a</KBD>
<DD>Add an anniversary diary entry for the selected date
(<CODE>insert-anniversary-diary-entry</CODE>).
<DT><KBD>i b</KBD>
<DD>Add a block diary entry for the current region
(<CODE>insert-block-diary-entry</CODE>).
<DT><KBD>i c</KBD>
<DD>Add a cyclic diary entry starting at the date
(<CODE>insert-cyclic-diary-entry</CODE>).
</DL>
<P>

<A NAME="IDX2356"></A>
<A NAME="IDX2357"></A>
  If you want to make a diary entry that applies to the anniversary of a
specific date, move point to that date and use the <KBD>i a</KBD> command.
This displays the end of your diary file in another window and inserts
the anniversary description; you can then type the rest of the diary
entry.  The entry looks like this:
</P><P>

<A NAME="IDX2358"></A>
<TABLE><tr><td>&nbsp;</td><td class=example><pre>%%(diary-anniversary 10 31 1948) Arthur's birthday
</pre></td></tr></table></P><P>

This entry applies to October 31 in any year after 1948; <SAMP>`10 31
1948'</SAMP> specifies the date.  (If you are using the European calendar
style, the month and day are interchanged.)  The reason this expression
requires a beginning year is that advanced diary functions can use it to
calculate the number of elapsed years.
</P><P>

  A <EM>block</EM> diary entry applies to a specified range of consecutive
dates.  Here is a block diary entry that applies to all dates from June
24, 1990 through July 10, 1990:
</P><P>

<A NAME="IDX2359"></A>
<TABLE><tr><td>&nbsp;</td><td class=example><pre>%%(diary-block 6 24 1990 7 10 1990) Vacation
</pre></td></tr></table></P><P>

The <SAMP>`6 24 1990'</SAMP> indicates the starting date and the <SAMP>`7 10 1990'</SAMP>
indicates the stopping date.  (Again, if you are using the European calendar
style, the month and day are interchanged.)
</P><P>

<A NAME="IDX2360"></A>
<A NAME="IDX2361"></A>
  To insert a block entry, place point and the mark on the two
dates that begin and end the range, and type <KBD>i b</KBD>.  This command
displays the end of your diary file in another window and inserts the
block description; you can then type the diary entry.
</P><P>

<A NAME="IDX2362"></A>
<A NAME="IDX2363"></A>
   <EM>Cyclic</EM> diary entries repeat after a fixed interval of days.  To
create one, select the starting date and use the <KBD>i c</KBD> command.  The
command prompts for the length of interval, then inserts the entry,
which looks like this:
</P><P>

<A NAME="IDX2364"></A>
<TABLE><tr><td>&nbsp;</td><td class=example><pre>%%(diary-cyclic 50 3 1 1990) Renew medication
</pre></td></tr></table></P><P>

This entry applies to March 1, 1990 and every 50th day following;
<SAMP>`3 1 1990'</SAMP> specifies the starting date.  (If you are using the
European calendar style, the month and day are interchanged.)
</P><P>

  All three of these commands make marking diary entries.  To insert a
nonmarking entry, give a numeric argument to the command.  For example,
<KBD>C-u i a</KBD> makes a nonmarking anniversary diary entry.
</P><P>

  Marking sexp diary entries in the calendar is <EM>extremely</EM>
time-consuming, since every date visible in the calendar window must be
individually checked.  So it's a good idea to make sexp diary entries
nonmarking (with <SAMP>`&#38;'</SAMP>) when possible.
</P><P>

  Another sophisticated kind of sexp entry, a <EM>floating</EM> diary entry,
specifies a regularly occurring event by offsets specified in days,
weeks, and months.  It is comparable to a crontab entry interpreted by
the <CODE>cron</CODE> utility.  Here is a nonmarking, floating diary entry
that applies to the last Thursday in November:
</P><P>

<A NAME="IDX2365"></A>
<TABLE><tr><td>&nbsp;</td><td class=example><pre>&#38;%%(diary-float 11 4 -1) American Thanksgiving
</pre></td></tr></table></P><P>

The 11 specifies November (the eleventh month), the 4 specifies Thursday
(the fourth day of the week, where Sunday is numbered zero), and the
-1 specifies "last" (1 would mean "first," 2 would mean
"second," -2 would mean "second-to-last," and so on).  The
month can be a single month or a list of months.  Thus you could change
the 11 above to <SAMP>`'(1 2 3)'</SAMP> and have the entry apply to the last
Thursday of January, February, and March.  If the month is <CODE>t</CODE>, the
entry applies to all months of the year.</P><P>

  Most generally, sexp diary entries can perform arbitrary
computations to determine when they apply.  See section `Sexp Diary Entries' in <CITE>The Emacs Lisp Reference Manual</CITE>.
</P><P>

<A NAME="Appointments"></A>
<HR SIZE="6">
<A NAME="SEC435"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC434"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC436"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC417"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC412"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC438"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.11 Appointments </H2>
<!--docid::SEC435::-->
<P>

  If you have a diary entry for an appointment, and that diary entry
begins with a recognizable time of day, Emacs can warn you several
minutes beforehand that that appointment is pending.  Emacs alerts you
to the appointment by displaying a message in the mode line.
</P><P>

<A NAME="IDX2366"></A>
<A NAME="IDX2367"></A>
  To enable appointment notification, you must enable the time display
feature of Emacs, <KBD>M-x display-time</KBD> (see section <A HREF="emacs_5.html#SEC11">B.3 The Mode Line</A>).  You must
also add the function <CODE>appt-make-list</CODE> to the
<CODE>diary-hook</CODE>, like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(add-hook 'diary-hook 'appt-make-list)
</pre></td></tr></table></P><P>

Adding this text to your <TT>`.emacs'</TT> file does the whole job:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(display-time)
(add-hook 'diary-hook 'appt-make-list)
(diary 0)
</pre></td></tr></table></P><P>

  With these preparations done, when you display the diary (either with
the <KBD>d</KBD> command in the calendar window or with the <KBD>M-x diary</KBD>
command), it sets up an appointment list of all the diary entries found
with recognizable times of day, and reminds you just before each of
them.
</P><P>

  For example, suppose the diary file contains these lines:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>Monday
  9:30am Coffee break
 12:00pm Lunch        
</pre></td></tr></table></P><P>

Then on Mondays, after you have displayed the diary, you will be
reminded at 9:20am about your coffee break and at 11:50am about lunch.
</P><P>

  You can write times in am/pm style (with <SAMP>`12:00am'</SAMP> standing
for midnight and <SAMP>`12:00pm'</SAMP> standing for noon), or 24-hour
European/military style.  You need not be consistent; your diary file
can have a mixture of the two styles.
</P><P>

<A NAME="IDX2368"></A>
  Emacs updates the appointments list automatically just after
midnight.  This also displays the next day's diary entries in the diary
buffer, unless you set <CODE>appt-display-diary</CODE> to <CODE>nil</CODE>.
</P><P>

<A NAME="IDX2369"></A>
<A NAME="IDX2370"></A>
<A NAME="IDX2371"></A>
  You can also use the appointment notification facility like an alarm
clock.  The command <KBD>M-x appt-add</KBD> adds entries to the appointment
list without affecting your diary file.  You delete entries from the
appointment list with <KBD>M-x appt-delete</KBD>.
</P><P>

<A NAME="IDX2372"></A>
  You can turn off the appointment notification feature at any time by
setting <CODE>appt-issue-message</CODE> to <CODE>nil</CODE>.
</P><P>

<A NAME="Daylight Savings"></A>
<HR SIZE="6">
<A NAME="SEC436"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC435"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC437"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC417"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC412"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC438"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.12 Daylight Savings Time </H2>
<!--docid::SEC436::-->
<P>

  Emacs understands the difference between standard time and daylight
savings time--the times given for sunrise, sunset, solstices,
equinoxes, and the phases of the moon take that into account.  The rules
for daylight savings time vary from place to place and have also varied
historically from year to year.  To do the job properly, Emacs needs to
know which rules to use.
</P><P>

<A NAME="IDX2373"></A>
<A NAME="IDX2374"></A>
  Some operating systems keep track of the rules that apply to the place
where you are; on these systems, Emacs gets the information it needs
from the system automatically.  If some or all of this information is
missing, Emacs fills in the gaps with the rules currently used in
Cambridge, Massachusetts.  If the resulting rules are not what you want,
you can tell Emacs the rules to use by setting certain variables:
<CODE>calendar-daylight-savings-starts</CODE> and
<CODE>calendar-daylight-savings-ends</CODE>.
</P><P>

  These values should be Lisp expressions that refer to the variable
<CODE>year</CODE>, and evaluate to the Gregorian date on which daylight
savings time starts or (respectively) ends, in the form of a list
<CODE>(<VAR>month</VAR> <VAR>day</VAR> <VAR>year</VAR>)</CODE>.  The values should be
<CODE>nil</CODE> if your area does not use daylight savings time.
</P><P>

  Emacs uses these expressions to determine the starting date of
daylight savings time for the holiday list and for correcting times of
day in the solar and lunar calculations.
</P><P>

  The values for Cambridge, Massachusetts are as follows:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(calendar-nth-named-day 1 0 4 year)
(calendar-nth-named-day -1 0 10 year)
</pre></td></tr></table></P><P>

That is, the first 0th day (Sunday) of the fourth month (April) in
the year specified by <CODE>year</CODE>, and the last Sunday of the tenth month
(October) of that year.  If daylight savings time were
changed to start on October 1, you would set
<CODE>calendar-daylight-savings-starts</CODE> to this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(list 10 1 year)
</pre></td></tr></table></P><P>

  If there is no daylight savings time at your location, or if you want
all times in standard time, set <CODE>calendar-daylight-savings-starts</CODE>
and <CODE>calendar-daylight-savings-ends</CODE> to <CODE>nil</CODE>.
</P><P>

<A NAME="IDX2375"></A>
  The variable <CODE>calendar-daylight-time-offset</CODE> specifies the
difference between daylight savings time and standard time, measured in
minutes.  The value for Cambridge, Massachusetts is 60.
</P><P>

<A NAME="IDX2376"></A>
  The two variables <CODE>calendar-daylight-savings-starts-time</CODE> and
<CODE>calendar-daylight-savings-ends-time</CODE> specify the number of minutes
after midnight local time when the transition to and from daylight
savings time should occur.  For Cambridge, Massachusetts both variables'
values are 120.
</P><P>

<A NAME="Time Intervals"></A>
<HR SIZE="6">
<A NAME="SEC437"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC436"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC438"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC417"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC412"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC438"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.13 Summing Time Intervals </H2>
<!--docid::SEC437::-->
<P>

  The timeclock feature adds up time intervals, so you can (for
instance) keep track of how much time you spend working.
</P><P>

<A NAME="IDX2377"></A>
<A NAME="IDX2378"></A>
<A NAME="IDX2379"></A>
<A NAME="IDX2380"></A>
  Use the <KBD>M-x timeclock-in</KBD> command when you start working on a
project, and <KBD>M-x timeclock-out</KBD> command when you're done.  Each
time you do this, it adds one time interval to the record of the project.
</P><P>

  Once you've collected data from a number of time intervals, you can use
<KBD>M-x timeclock-workday-remaining</KBD> to see how much time is left to
work today (assuming a typical average of 8 hours a day), and <KBD>M-x
timeclock-when-to-leave</KBD> which will calculate when you're "done."
</P><P>

<A NAME="IDX2381"></A>
<A NAME="IDX2382"></A>
  If you want Emacs to display the amount of time "left" of your
workday in the mode line, either customize the
<CODE>timeclock-modeline-display</CODE> variable and set its value to
<CODE>t</CODE>, or invoke the <KBD>M-x timeclock-modeline-display</KBD> command.
</P><P>

<A NAME="IDX2383"></A>
  Terminating the current Emacs session might or might not mean that
you have stopped working on the project.  If you'd like Emacs to ask
you about this, set the value of the variable
<CODE>timeclock-ask-before-exiting</CODE> to <CODE>t</CODE> (via <KBD>M-x
customize</KBD>).  By default, only an explicit <KBD>M-x timeclock-out</KBD>
tells Emacs that the current interval is over.
</P><P>

<A NAME="IDX2384"></A>
<A NAME="IDX2385"></A>
<A NAME="IDX2386"></A>
  The timeclock functions work by accumulating the data in a file
called <TT>`.timelog'</TT> in your home directory.  (On MS-DOS, this file
is called <TT>`_timelog'</TT>, since an initial period is not allowed in
file names on MS-DOS.)  You can specify a different name for this file
by customizing the variable <CODE>timeclock-file</CODE>.  If you edit the
timeclock file manually, or if you change the value of any of
timeclock's customizable variables, you should run the command
<KBD>M-x timeclock-reread-log</KBD> to update the data in Emacs from the
file.
<A NAME="Gnus"></A>
<HR SIZE="6">
<A NAME="SEC438"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC437"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC439"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC412"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC442"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.14 Gnus </H2>
<!--docid::SEC438::-->
<P>

Gnus is an Emacs package primarily designed for reading and posting
Usenet news.  It can also be used to read and respond to messages from a
number of other sources--mail, remote directories, digests, and so on.
</P><P>

Here we introduce Gnus and describe several basic features.
For full details, see section `Top' in <CITE>The Gnus Manual</CITE>.
</P><P>

<A NAME="IDX2387"></A>
To start Gnus, type <KBD>M-x gnus <KBD>RET</KBD></KBD>.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC439">AC.14.1 Gnus Buffers</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">The group, summary, and article buffers.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC440">AC.14.2 When Gnus Starts Up</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">What you should know about starting Gnus.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC441">AC.14.3 Summary of Gnus Commands</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">A short description of the basic Gnus commands.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Buffers of Gnus"></A>
<HR SIZE="6">
<A NAME="SEC439"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC438"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC440"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC438"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC438"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC442"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.14.1 Gnus Buffers </H3>
<!--docid::SEC439::-->
<P>

As opposed to most normal Emacs packages, Gnus uses a number of
different buffers to display information and to receive commands.  The
three buffers users spend most of their time in are the <EM>group
buffer</EM>, the <EM>summary buffer</EM> and the <EM>article buffer</EM>.  
</P><P>

The <EM>group buffer</EM> contains a list of groups.  This is the first
buffer Gnus displays when it starts up.  It normally displays only the
groups to which you subscribe and that contain unread articles.  Use
this buffer to select a specific group.
</P><P>

The <EM>summary buffer</EM> lists one line for each article in a single
group.  By default, the author, the subject and the line number are
displayed for each article, but this is customizable, like most aspects
of Gnus display.  The summary buffer is created when you select a group
in the group buffer, and is killed when you exit the group.  Use this
buffer to select an article.
</P><P>

The <EM>article buffer</EM> displays the article.  In normal Gnus usage,
you don't select this buffer--all useful article-oriented commands work
in the summary buffer.  But you can select the article buffer, and
execute all Gnus commands from that buffer, if you want to.
</P><P>

<A NAME="Gnus Startup"></A>
<HR SIZE="6">
<A NAME="SEC440"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC439"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC441"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC441"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC438"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC442"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.14.2 When Gnus Starts Up </H3>
<!--docid::SEC440::-->
<P>

At startup, Gnus reads your <TT>`.newsrc'</TT> news initialization file
and attempts to communicate with the local news server, which is a
repository of news articles.  The news server need not be the same
computer you are logged in on.
</P><P>

If you start Gnus and connect to the server, but do not see any
newsgroups listed in the group buffer, type <KBD>L</KBD> or <KBD>A k</KBD> to get
a listing of all the groups.  Then type <KBD>u</KBD> to toggle
subscription to groups.
</P><P>

The first time you start Gnus, Gnus subscribes you to a few selected
groups.  All other groups start out as <EM>killed groups</EM> for you; you
can list them with <KBD>A k</KBD>.  All new groups that subsequently come to
exist at the news server become <EM>zombie groups</EM> for you; type <KBD>A
z</KBD> to list them.  You can subscribe to a group shown in these lists
using the <KBD>u</KBD> command.
</P><P>

When you quit Gnus with <KBD>q</KBD>, it automatically records in your
<TT>`.newsrc'</TT> and <TT>`.newsrc.eld'</TT> initialization files the
subscribed or unsubscribed status of all groups.  You should normally
not edit these files manually, but you may if you know how.
</P><P>

<A NAME="Summary of Gnus"></A>
<HR SIZE="6">
<A NAME="SEC441"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC440"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC442"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC438"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC438"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC442"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.14.3 Summary of Gnus Commands </H3>
<!--docid::SEC441::-->
<P>

Reading news is a two-step process:
</P><P>

<OL>
<LI>
Choose a group in the group buffer.
<P>

<LI>
Select articles from the summary buffer.  Each article selected is
displayed in the article buffer in a large window, below the summary
buffer in its small window.
</OL>
<P>

  Each Gnus buffer has its own special commands; however, the meanings
of any given key in the various Gnus buffers are usually analogous, even
if not identical.  Here are commands for the group and summary buffers:
</P><P>

<DL COMPACT>
<A NAME="IDX2388"></A>
<A NAME="IDX2389"></A>
<DT><KBD>q</KBD>
<DD>In the group buffer, update your <TT>`.newsrc'</TT> initialization file
and quit Gnus.
<P>

In the summary buffer, exit the current group and return to the
group buffer.  Thus, typing <KBD>q</KBD> twice quits Gnus.
</P><P>

<A NAME="IDX2390"></A>
<A NAME="IDX2391"></A>
<DT><KBD>L</KBD>
<DD>In the group buffer, list all the groups available on your news
server (except those you have killed).  This may be a long list!
<P>

<A NAME="IDX2392"></A>
<A NAME="IDX2393"></A>
<DT><KBD>l</KBD>
<DD>In the group buffer, list only the groups to which you subscribe and
which contain unread articles.
<P>

<A NAME="IDX2394"></A>
<A NAME="IDX2395"></A>
<A NAME="IDX2396"></A>
<A NAME="IDX2397"></A>
<DT><KBD>u</KBD>
<DD>In the group buffer, unsubscribe from (or subscribe to) the group listed
in the line that point is on.  When you quit Gnus by typing <KBD>q</KBD>,
Gnus lists in your <TT>`.newsrc'</TT> file which groups you have subscribed
to.  The next time you start Gnus, you won't see this group,
because Gnus normally displays only subscribed-to groups.
<P>

<A NAME="IDX2398"></A>
<A NAME="IDX2399"></A>
<DT><KBD>C-k</KBD>
<DD>In the group buffer, "kill" the current line's group--don't
even list it in <TT>`.newsrc'</TT> from now on.  This affects future
Gnus sessions as well as the present session.
<P>

When you quit Gnus by typing <KBD>q</KBD>, Gnus writes information
in the file <TT>`.newsrc'</TT> describing all newsgroups except those you
have "killed."
</P><P>

<A NAME="IDX2400"></A>
<A NAME="IDX2401"></A>
<DT><KBD><KBD>SPC</KBD></KBD>
<DD>In the group buffer, select the group on the line under the cursor
and display the first unread article in that group.
<P>

In the summary buffer, 
</P><P>

<UL>
<LI>
Select the article on the line under the cursor if none is selected.
<P>

<LI>
Scroll the text of the selected article (if there is one).
<P>

<LI>
Select the next unread article if at the end of the current article.
</UL>
<P>

Thus, you can move through all the articles by repeatedly typing <KBD>SPC</KBD>.
</P><P>

<A NAME="IDX2402"></A>
<DT><KBD><KBD>DEL</KBD></KBD>
<DD>In the group buffer, move point to the previous group containing
unread articles.
<P>

<A NAME="IDX2403"></A>
In the summary buffer, scroll the text of the article backwards.
</P><P>

<A NAME="IDX2404"></A>
<A NAME="IDX2405"></A>
<A NAME="IDX2406"></A>
<DT><KBD>n</KBD>
<DD>Move point to the next unread group, or select the next unread article.
<P>

<A NAME="IDX2407"></A>
<A NAME="IDX2408"></A>
<A NAME="IDX2409"></A>
<DT><KBD>p</KBD>
<DD>Move point to the previous unread group, or select the previous
unread article.
<P>

<A NAME="IDX2410"></A>
<A NAME="IDX2411"></A>
<A NAME="IDX2412"></A>
<A NAME="IDX2413"></A>
<A NAME="IDX2414"></A>
<A NAME="IDX2415"></A>
<A NAME="IDX2416"></A>
<A NAME="IDX2417"></A>
<DT><KBD>C-n</KBD>
<DD><DT><KBD>C-p</KBD>
<DD>Move point to the next or previous item, even if it is marked as read.
This does not select the article or group on that line.
<P>

<A NAME="IDX2418"></A>
<A NAME="IDX2419"></A>
<DT><KBD>s</KBD>
<DD>In the summary buffer, do an incremental search of the current text in
the article buffer, just as if you switched to the article buffer and
typed <KBD>C-s</KBD>.
<P>

<A NAME="IDX2420"></A>
<A NAME="IDX2421"></A>
<DT><KBD>M-s <VAR>regexp</VAR> <KBD>RET</KBD></KBD>
<DD>In the summary buffer, search forward for articles containing a match
for <VAR>regexp</VAR>.
<P>

</DL>
<P>

<A NAME="Shell"></A>
<HR SIZE="6">
<A NAME="SEC442"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC441"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC443"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC438"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC456"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.15 Running Shell Commands from Emacs </H2>
<!--docid::SEC442::-->
<P>

  Emacs has commands for passing single command lines to inferior shell
processes; it can also run a shell interactively with input and output
to an Emacs buffer named <SAMP>`*shell*'</SAMP> or run a shell inside a terminal
emulator window.
</P><P>

There is a shell implemented entirely in Emacs, documented in a separate
manual.  See section `Eshell' in <CITE>Eshell: The Emacs Shell</CITE>.
</P><P>

<DL COMPACT>
<DT><KBD>M-! <VAR>cmd</VAR> <KBD>RET</KBD></KBD>
<DD>Run the shell command line <VAR>cmd</VAR> and display the output
(<CODE>shell-command</CODE>).
<DT><KBD>M-| <VAR>cmd</VAR> <KBD>RET</KBD></KBD>
<DD>Run the shell command line <VAR>cmd</VAR> with region contents as input;
optionally replace the region with the output
(<CODE>shell-command-on-region</CODE>).
<DT><KBD>M-x shell</KBD>
<DD>Run a subshell with input and output through an Emacs buffer.
You can then give commands interactively.
<DT><KBD>M-x term</KBD>
<DD>Run a subshell with input and output through an Emacs buffer.
You can then give commands interactively.
Full terminal emulation is available.
<DT><KBD>M-x eshell</KBD>
<DD><A NAME="IDX2422"></A>
Start the Emacs shell.
</DL>
<P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC443">AC.15.1 Single Shell Commands</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to run one shell command and return.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC444">AC.15.2 Interactive Inferior Shell</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Permanent shell taking input via Emacs.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC445">AC.15.3 Shell Mode</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Special Emacs commands used with permanent shell.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC446">AC.15.4 Shell Command History</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Repeating previous commands in a shell buffer.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC450">AC.15.5 Directory Tracking</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Keeping track when the subshell changes directory.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC451">AC.15.6 Shell Mode Options</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Options for customizing Shell mode.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC452">AC.15.7 Emacs Terminal Emulator</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">An Emacs window as a terminal emulator.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC453">AC.15.8 Term Mode</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Special Emacs commands used in Term mode.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC454">AC.15.9 Page-At-A-Time Output</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Paging in the terminal emulator.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC455">AC.15.10 Remote Host Shell</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Connecting to another computer.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Single Shell"></A>
<HR SIZE="6">
<A NAME="SEC443"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC442"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC444"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC442"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC442"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC456"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.15.1 Single Shell Commands </H3>
<!--docid::SEC443::-->
<P>

<A NAME="IDX2423"></A>
<A NAME="IDX2424"></A>
  <KBD>M-!</KBD> (<CODE>shell-command</CODE>) reads a line of text using the
minibuffer and executes it as a shell command in a subshell made just
for that command.  Standard input for the command comes from the null
device.  If the shell command produces any output, the output appears
either in the echo area (if it is short), or in an Emacs buffer named
<SAMP>`*Shell Command Output*'</SAMP>, which is displayed in another window
but not selected (if the output is long).
</P><P>

  For instance, one way to decompress a file <TT>`foo.gz'</TT> from Emacs
is to type <KBD>M-! gunzip foo.gz <KBD>RET</KBD></KBD>.  That shell command
normally creates the file <TT>`foo'</TT> and produces no terminal output.
</P><P>

  A numeric argument, as in <KBD>M-1 M-!</KBD>, says to insert terminal
output into the current buffer instead of a separate buffer.  It puts
point before the output, and sets the mark after the output.  For
instance, <KBD>M-1 M-! gunzip &#60; foo.gz <KBD>RET</KBD></KBD> would insert the
uncompressed equivalent of <TT>`foo.gz'</TT> into the current buffer.
</P><P>

  If the shell command line ends in <SAMP>`&#38;'</SAMP>, it runs asynchronously.
For a synchronous shell command, <CODE>shell-command</CODE> returns the
command's exit status (0 means success), when it is called from a Lisp
program.  You do not get any status information for an asynchronous
command, since it hasn't finished yet.
</P><P>

<A NAME="IDX2425"></A>
<A NAME="IDX2426"></A>
  <KBD>M-|</KBD> (<CODE>shell-command-on-region</CODE>) is like <KBD>M-!</KBD> but
passes the contents of the region as the standard input to the shell
command, instead of no input.  If a numeric argument is used, meaning
insert the output in the current buffer, then the old region is deleted
first and the output replaces it as the contents of the region.  It
returns the command's exit status when it is called from a Lisp program.
</P><P>

  One use for <KBD>M-|</KBD> is to run <CODE>uudecode</CODE>.  For instance, if
the buffer contains uuencoded text, type <KBD>C-x h M-| uudecode
<KBD>RET</KBD></KBD> to feed the entire buffer contents to the <CODE>uudecode</CODE>
program.  That program will ignore everything except the encoded text,
and will store the decoded output into the file whose name is
specified in the encoded text.
</P><P>

<A NAME="IDX2427"></A>
  Both <KBD>M-!</KBD> and <KBD>M-|</KBD> use <CODE>shell-file-name</CODE> to specify the
shell to use.  This variable is initialized based on your <CODE>SHELL</CODE>
environment variable when Emacs is started.  If the file name does not
specify a directory, the directories in the list <CODE>exec-path</CODE> are
searched; this list is initialized based on the environment variable
<CODE>PATH</CODE> when Emacs is started.  Your <TT>`.emacs'</TT> file can override
either or both of these default initializations.</P><P>

  Both <KBD>M-!</KBD> and <KBD>M-|</KBD> wait for the shell command to complete.
To stop waiting, type <KBD>C-g</KBD> to quit; that terminates the shell
command with the signal <CODE>SIGINT</CODE>---the same signal that <KBD>C-c</KBD>
normally generates in the shell.  Emacs waits until the command actually
terminates.  If the shell command doesn't stop (because it ignores the
<CODE>SIGINT</CODE> signal), type <KBD>C-g</KBD> again; this sends the command a
<CODE>SIGKILL</CODE> signal which is impossible to ignore.
</P><P>

  To specify a coding system for <KBD>M-!</KBD> or <KBD>M-|</KBD>, use the command
<KBD>C-x <KBD>RET</KBD> c</KBD> immediately beforehand.  See section <A HREF="emacs_20.html#SEC222">Q.9 Specifying a Coding System</A>.
</P><P>

<A NAME="IDX2428"></A>
  Error output from the command is normally intermixed with the regular
output.  If you set the variable
<CODE>shell-command-default-error-buffer</CODE> to a string, which is a buffer
name, error output is inserted before point in the buffer of that name.
</P><P>

<A NAME="Interactive Shell"></A>
<HR SIZE="6">
<A NAME="SEC444"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC443"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC445"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC445"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC442"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC456"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.15.2 Interactive Inferior Shell </H3>
<!--docid::SEC444::-->
<P>

<A NAME="IDX2429"></A>
  To run a subshell interactively, putting its typescript in an Emacs
buffer, use <KBD>M-x shell</KBD>.  This creates (or reuses) a buffer named
<SAMP>`*shell*'</SAMP> and runs a subshell with input coming from and output going
to that buffer.  That is to say, any "terminal output" from the subshell
goes into the buffer, advancing point, and any "terminal input" for
the subshell comes from text in the buffer.  To give input to the subshell,
go to the end of the buffer and type the input, terminated by <KBD>RET</KBD>.
</P><P>

  Emacs does not wait for the subshell to do anything.  You can switch
windows or buffers and edit them while the shell is waiting, or while it is
running a command.  Output from the subshell waits until Emacs has time to
process it; this happens whenever Emacs is waiting for keyboard input or
for time to elapse.
</P><P>

<A NAME="IDX2430"></A>
<A NAME="IDX2431"></A>
  Input lines, once you submit them, are displayed using the face
<CODE>comint-highlight-input</CODE>, and prompts are displayed using the
face <CODE>comint-highlight-prompt</CODE>.  This makes it easier to see
previous input lines in the buffer.  See section <A HREF="emacs_13.html#SEC78">J.1 Using Multiple Typefaces</A>.
</P><P>

  To make multiple subshells, you can invoke <KBD>M-x shell</KBD> with a
prefix argument (e.g. <KBD>C-u M-x shell</KBD>), which will read a buffer
name and create (or reuse) a subshell in that buffer.  You can also
rename the <SAMP>`*shell*'</SAMP> buffer using <KBD>M-x rename-uniquely</KBD>, then
create a new <SAMP>`*shell*'</SAMP> buffer using plain <KBD>M-x shell</KBD>.  All the
subshells in different buffers run independently and in parallel.
</P><P>

<A NAME="IDX2432"></A>
<A NAME="IDX2433"></A>
<A NAME="IDX2434"></A>
<A NAME="IDX2435"></A>
  The file name used to load the subshell is the value of the variable
<CODE>explicit-shell-file-name</CODE>, if that is non-<CODE>nil</CODE>.  Otherwise,
the environment variable <CODE>ESHELL</CODE> is used, or the environment
variable <CODE>SHELL</CODE> if there is no <CODE>ESHELL</CODE>.  If the file name
specified is relative, the directories in the list <CODE>exec-path</CODE> are
searched; this list is initialized based on the environment variable
<CODE>PATH</CODE> when Emacs is started.  Your <TT>`.emacs'</TT> file can override
either or both of these default initializations.
</P><P>

  Emacs sends the new shell the contents of the file
<TT>`~/.emacs_<VAR>shellname</VAR>'</TT> as input, if it exists, where
<VAR>shellname</VAR> is the name of the file that the shell was loaded
from.  For example, if you use bash, the file sent to it is
<TT>`~/.emacs_bash'</TT>.
</P><P>

  To specify a coding system for the shell, you can use the command
<KBD>C-x <KBD>RET</KBD> c</KBD> immediately before <KBD>M-x shell</KBD>.  You can also
specify a coding system after starting the shell by using <KBD>C-x
<KBD>RET</KBD> p</KBD> in the shell buffer.  See section <A HREF="emacs_20.html#SEC222">Q.9 Specifying a Coding System</A>.
</P><P>

<A NAME="IDX2436"></A>
  Unless the environment variable <CODE>EMACS</CODE> is already defined,
Emacs defines it in the subshell, with value <CODE>t</CODE>.  A shell script
can check this variable to determine whether it has been run from an
Emacs subshell.
</P><P>

<A NAME="Shell Mode"></A>
<HR SIZE="6">
<A NAME="SEC445"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC444"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC446"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC446"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC442"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC456"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.15.3 Shell Mode </H3>
<!--docid::SEC445::-->
<P>

  Shell buffers use Shell mode, which defines several special keys
attached to the <KBD>C-c</KBD> prefix.  They are chosen to resemble the usual
editing and job control characters present in shells that are not under
Emacs, except that you must type <KBD>C-c</KBD> first.  Here is a complete list
of the special key bindings of Shell mode:
</P><P>

<DL COMPACT>
<DT><KBD><KBD>RET</KBD></KBD>
<DD><A NAME="IDX2437"></A>
<A NAME="IDX2438"></A>
At end of buffer send line as input; otherwise, copy current line to
end of buffer and send it (<CODE>comint-send-input</CODE>).  When a line is
copied, any prompt at the beginning of the line (text output by
programs preceding your input) is omitted.  (See also the variable
<CODE>comint-use-prompt-regexp-instead-of-fields</CODE>.)
<P>

<DT><KBD><KBD>TAB</KBD></KBD>
<DD><A NAME="IDX2439"></A>
<A NAME="IDX2440"></A>
Complete the command name or file name before point in the shell buffer
(<CODE>comint-dynamic-complete</CODE>).  <KBD>TAB</KBD> also completes history
references (see section <A HREF="emacs_32.html#SEC449">AC.15.4.3 Shell History References</A>) and environment variable names.
<P>

<A NAME="IDX2441"></A>
<A NAME="IDX2442"></A>
The variable <CODE>shell-completion-fignore</CODE> specifies a list of file
name extensions to ignore in Shell mode completion.  The default
setting is <CODE>nil</CODE>, but some users prefer <CODE>("~" "#" "%")</CODE> to
ignore file names ending in <SAMP>`~'</SAMP>, <SAMP>`#'</SAMP> or <SAMP>`%'</SAMP>.  Other
related Comint modes use the variable <CODE>comint-completion-fignore</CODE>
instead.
</P><P>

<DT><KBD>M-?</KBD>
<DD><A NAME="IDX2443"></A>
<A NAME="IDX2444"></A>
Display temporarily a list of the possible completions of the file name
before point in the shell buffer
(<CODE>comint-dynamic-list-filename-completions</CODE>).
<P>

<DT><KBD>C-d</KBD>
<DD><A NAME="IDX2445"></A>
<A NAME="IDX2446"></A>
Either delete a character or send EOF
(<CODE>comint-delchar-or-maybe-eof</CODE>).  Typed at the end of the shell
buffer, <KBD>C-d</KBD> sends EOF to the subshell.  Typed at any other
position in the buffer, <KBD>C-d</KBD> deletes a character as usual.
<P>

<DT><KBD>C-c C-a</KBD>
<DD><A NAME="IDX2447"></A>
<A NAME="IDX2448"></A>
Move to the beginning of the line, but after the prompt if any
(<CODE>comint-bol-or-process-mark</CODE>).  If you repeat this command twice
in a row, the second time it moves back to the process mark, which is
the beginning of the input that you have not yet sent to the subshell.
(Normally that is the same place--the end of the prompt on this
line--but after <KBD>C-c <KBD>SPC</KBD></KBD> the process mark may be in a
previous line.)
<P>

<DT><KBD>C-c <KBD>SPC</KBD></KBD>
<DD>Accumulate multiple lines of input, then send them together.  This
command inserts a newline before point, but does not send the preceding
text as input to the subshell--at least, not yet.  Both lines, the one
before this newline and the one after, will be sent together (along with
the newline that separates them), when you type <KBD>RET</KBD>.
<P>

<DT><KBD>C-c C-u</KBD>
<DD><A NAME="IDX2449"></A>
<A NAME="IDX2450"></A>
Kill all text pending at end of buffer to be sent as input
(<CODE>comint-kill-input</CODE>).
<P>

<DT><KBD>C-c C-w</KBD>
<DD><A NAME="IDX2451"></A>
Kill a word before point (<CODE>backward-kill-word</CODE>).
<P>

<DT><KBD>C-c C-c</KBD>
<DD><A NAME="IDX2452"></A>
<A NAME="IDX2453"></A>
Interrupt the shell or its current subjob if any
(<CODE>comint-interrupt-subjob</CODE>).  This command also kills
any shell input pending in the shell buffer and not yet sent.
<P>

<DT><KBD>C-c C-z</KBD>
<DD><A NAME="IDX2454"></A>
<A NAME="IDX2455"></A>
Stop the shell or its current subjob if any (<CODE>comint-stop-subjob</CODE>).
This command also kills any shell input pending in the shell buffer and
not yet sent.
<P>

<DT><KBD>C-c C-\</KBD>
<DD><A NAME="IDX2456"></A>
<A NAME="IDX2457"></A>
Send quit signal to the shell or its current subjob if any
(<CODE>comint-quit-subjob</CODE>).  This command also kills any shell input
pending in the shell buffer and not yet sent.
<P>

<DT><KBD>C-c C-o</KBD>
<DD><A NAME="IDX2458"></A>
<A NAME="IDX2459"></A>
Delete the last batch of output from a shell command
(<CODE>comint-delete-output</CODE>).  This is useful if a shell command spews
out lots of output that just gets in the way.  This command used to be
called <CODE>comint-kill-output</CODE>.
<P>

<DT><KBD>C-c C-s</KBD>
<DD><A NAME="IDX2460"></A>
<A NAME="IDX2461"></A>
Write the last batch of output from a shell command to a file
(<CODE>comint-write-output</CODE>).  With a prefix argument, the file is
appended to instead.  Any prompt at the end of the output is not
written.
<P>

<DT><KBD>C-c C-r</KBD>
<DD><DT><KBD>C-M-l</KBD>
<DD><A NAME="IDX2462"></A>
<A NAME="IDX2463"></A>
<A NAME="IDX2464"></A>
Scroll to display the beginning of the last batch of output at the top
of the window; also move the cursor there (<CODE>comint-show-output</CODE>).
<P>

<DT><KBD>C-c C-e</KBD>
<DD><A NAME="IDX2465"></A>
<A NAME="IDX2466"></A>
Scroll to put the end of the buffer at the bottom of the window
(<CODE>comint-show-maximum-output</CODE>).
<P>

<DT><KBD>C-c C-f</KBD>
<DD><A NAME="IDX2467"></A>
<A NAME="IDX2468"></A>
<A NAME="IDX2469"></A>
Move forward across one shell command, but not beyond the current line
(<CODE>shell-forward-command</CODE>).  The variable <CODE>shell-command-regexp</CODE>
specifies how to recognize the end of a command.
<P>

<DT><KBD>C-c C-b</KBD>
<DD><A NAME="IDX2470"></A>
<A NAME="IDX2471"></A>
Move backward across one shell command, but not beyond the current line
(<CODE>shell-backward-command</CODE>).
<P>

<DT><KBD>C-c C-l</KBD>
<DD><A NAME="IDX2472"></A>
<A NAME="IDX2473"></A>
Display the buffer's history of shell commands in another window
(<CODE>comint-dynamic-list-input-ring</CODE>).
<P>

<DT><KBD>M-x dirs</KBD>
<DD>Ask the shell what its current directory is, so that Emacs can agree
with the shell.
<P>

<DT><KBD>M-x send-invisible <KBD>RET</KBD> <VAR>text</VAR> <KBD>RET</KBD></KBD>
<DD><A NAME="IDX2474"></A>
Send <VAR>text</VAR> as input to the shell, after reading it without
echoing.  This is useful when a shell command runs a program that asks
for a password.
<P>

Alternatively, you can arrange for Emacs to notice password prompts
and turn off echoing for them, as follows:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(add-hook 'comint-output-filter-functions
          'comint-watch-for-password-prompt)
</pre></td></tr></table></P><P>

<DT><KBD>M-x comint-continue-subjob</KBD>
<DD><A NAME="IDX2475"></A>
Continue the shell process.  This is useful if you accidentally suspend
the shell process.<A NAME="DOCF14" HREF="emacs_fot.html#FOOT14">(14)</A>
<P>

<DT><KBD>M-x comint-strip-ctrl-m</KBD>
<DD><A NAME="IDX2476"></A>
Discard all control-M characters from the current group of shell output.
The most convenient way to use this command is to make it run
automatically when you get output from the subshell.  To do that,
evaluate this Lisp expression:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(add-hook 'comint-output-filter-functions
          'comint-strip-ctrl-m)
</pre></td></tr></table></P><P>

<DT><KBD>M-x comint-truncate-buffer</KBD>
<DD><A NAME="IDX2477"></A>
This command truncates the shell buffer to a certain maximum number of
lines, specified by the variable <CODE>comint-buffer-maximum-size</CODE>.
Here's how to do this automatically each time you get output from the
subshell:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(add-hook 'comint-output-filter-functions
          'comint-truncate-buffer)
</pre></td></tr></table></DL>
<P>

  Shell mode also customizes the paragraph commands so that only shell
prompts start new paragraphs.  Thus, a paragraph consists of an input
command plus the output that follows it in the buffer.
</P><P>

<A NAME="IDX2478"></A>
<A NAME="IDX2479"></A>
  Shell mode is a derivative of Comint mode, a general-purpose mode for
communicating with interactive subprocesses.  Most of the features of
Shell mode actually come from Comint mode, as you can see from the
command names listed above.  The special features of Shell mode include
the directory tracking feature, and a few user commands.
</P><P>

  Other Emacs features that use variants of Comint mode include GUD
(see section <A HREF="emacs_25.html#SEC321">V.5 Running Debuggers Under Emacs</A>) and <KBD>M-x run-lisp</KBD> (see section <A HREF="emacs_25.html#SEC331">V.10 Running an External Lisp</A>).
</P><P>

<A NAME="IDX2480"></A>
  You can use <KBD>M-x comint-run</KBD> to execute any program of your choice
in a subprocess using unmodified Comint mode--without the
specializations of Shell mode.
</P><P>

<A NAME="Shell History"></A>
<HR SIZE="6">
<A NAME="SEC446"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC445"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC447"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC450"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC442"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC450"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.15.4 Shell Command History </H3>
<!--docid::SEC446::-->
<P>

  Shell buffers support three ways of repeating earlier commands.  You
can use the same keys used in the minibuffer; these work much as they do
in the minibuffer, inserting text from prior commands while point
remains always at the end of the buffer.  You can move through the
buffer to previous inputs in their original place, then resubmit them or
copy them to the end.  Or you can use a <SAMP>`!'</SAMP>-style history
reference.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC447">AC.15.4.1 Shell History Ring</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Fetching commands from the history list.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC448">AC.15.4.2 Shell History Copying</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Moving to a command and then copying it.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC449">AC.15.4.3 Shell History References</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Expanding <SAMP>`!'</SAMP>-style history references.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Shell Ring"></A>
<HR SIZE="6">
<A NAME="SEC447"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC446"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC448"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC450"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC446"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC450"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> AC.15.4.1 Shell History Ring </H4>
<!--docid::SEC447::-->
<P>

<DL COMPACT>
<A NAME="IDX2481"></A>
<A NAME="IDX2482"></A>
<DT><KBD>M-p</KBD>
<DD>Fetch the next earlier old shell command.
<P>

<A NAME="IDX2483"></A>
<A NAME="IDX2484"></A>
<DT><KBD>M-n</KBD>
<DD>Fetch the next later old shell command.
<P>

<A NAME="IDX2485"></A>
<A NAME="IDX2486"></A>
<A NAME="IDX2487"></A>
<A NAME="IDX2488"></A>
<DT><KBD>M-r <VAR>regexp</VAR> <KBD>RET</KBD></KBD>
<DD><DT><KBD>M-s <VAR>regexp</VAR> <KBD>RET</KBD></KBD>
<DD>Search backwards or forwards for old shell commands that match <VAR>regexp</VAR>.
<P>

<DT><KBD>C-c C-x (Shell mode)</KBD>
<DD><A NAME="IDX2489"></A>
Fetch the next subsequent command from the history.
</DL>
<P>

  Shell buffers provide a history of previously entered shell commands.  To
reuse shell commands from the history, use the editing commands <KBD>M-p</KBD>,
<KBD>M-n</KBD>, <KBD>M-r</KBD> and <KBD>M-s</KBD>.  These work just like the minibuffer
history commands except that they operate on the text at the end of the
shell buffer, where you would normally insert text to send to the shell.
</P><P>

  <KBD>M-p</KBD> fetches an earlier shell command to the end of the shell buffer.
Successive use of <KBD>M-p</KBD> fetches successively earlier shell commands,
each replacing any text that was already present as potential shell input.
<KBD>M-n</KBD> does likewise except that it finds successively more recent shell
commands from the buffer.
</P><P>

  The history search commands <KBD>M-r</KBD> and <KBD>M-s</KBD> read a regular
expression and search through the history for a matching command.  Aside
from the choice of which command to fetch, they work just like <KBD>M-p</KBD>
and <KBD>M-n</KBD>.  If you enter an empty regexp, these commands reuse the
same regexp used last time.
</P><P>

  When you find the previous input you want, you can resubmit it by
typing <KBD>RET</KBD>, or you can edit it first and then resubmit it if you
wish.
</P><P>

  Often it is useful to reexecute several successive shell commands that
were previously executed in sequence.  To do this, first find and
reexecute the first command of the sequence.  Then type <KBD>C-c C-x</KBD>;
that will fetch the following command--the one that follows the command
you just repeated.  Then type <KBD>RET</KBD> to reexecute this command.  You
can reexecute several successive commands by typing <KBD>C-c C-x
<KBD>RET</KBD></KBD> over and over.
</P><P>

  These commands get the text of previous shell commands from a special
history list, not from the shell buffer itself.  Thus, editing the shell
buffer, or even killing large parts of it, does not affect the history
that these commands access.
</P><P>

<A NAME="IDX2490"></A>
  Some shells store their command histories in files so that you can
refer to previous commands from previous shell sessions.  Emacs reads
the command history file for your chosen shell, to initialize its own
command history.  The file name is <TT>`~/.bash_history'</TT> for bash,
<TT>`~/.sh_history'</TT> for ksh, and <TT>`~/.history'</TT> for other shells.
</P><P>

<A NAME="Shell History Copying"></A>
<HR SIZE="6">
<A NAME="SEC448"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC447"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC449"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC449"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC446"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC450"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> AC.15.4.2 Shell History Copying </H4>
<!--docid::SEC448::-->
<P>

<DL COMPACT>
<A NAME="IDX2491"></A>
<A NAME="IDX2492"></A>
<DT><KBD>C-c C-p</KBD>
<DD>Move point to the previous prompt (<CODE>comint-previous-prompt</CODE>).
<P>

<A NAME="IDX2493"></A>
<A NAME="IDX2494"></A>
<DT><KBD>C-c C-n</KBD>
<DD>Move point to the following prompt (<CODE>comint-next-prompt</CODE>).
<P>

<A NAME="IDX2495"></A>
<A NAME="IDX2496"></A>
<DT><KBD>C-c <KBD>RET</KBD></KBD>
<DD>Copy the input command which point is in, inserting the copy at the end
of the buffer (<CODE>comint-copy-old-input</CODE>).  This is useful if you
move point back to a previous command.  After you copy the command, you
can submit the copy as input with <KBD>RET</KBD>.  If you wish, you can
edit the copy before resubmitting it.
</DL>
<P>

  Moving to a previous input and then copying it with <KBD>C-c
<KBD>RET</KBD></KBD> produces the same results--the same buffer contents--that
you would get by using <KBD>M-p</KBD> enough times to fetch that previous
input from the history list.  However, <KBD>C-c <KBD>RET</KBD></KBD> copies the
text from the buffer, which can be different from what is in the history
list if you edit the input text in the buffer after it has been sent.
</P><P>

<A NAME="History References"></A>
<HR SIZE="6">
<A NAME="SEC449"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC448"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC450"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC450"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC446"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC450"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> AC.15.4.3 Shell History References </H4>
<!--docid::SEC449::-->
<P>

  Various shells including csh and bash support <EM>history
references</EM> that begin with <SAMP>`!'</SAMP> and <SAMP>`^'</SAMP>.  Shell mode
recognizes these constructs, and can perform the history substitution
for you.
</P><P>

  If you insert a history reference and type <KBD>TAB</KBD>, this searches
the input history for a matching command, performs substitution if
necessary, and places the result in the buffer in place of the history
reference.  For example, you can fetch the most recent command
beginning with <SAMP>`mv'</SAMP> with <KBD>! m v <KBD>TAB</KBD></KBD>.  You can edit the
command if you wish, and then resubmit the command to the shell by
typing <KBD>RET</KBD>.
</P><P>

<A NAME="IDX2497"></A>
<A NAME="IDX2498"></A>
  Shell mode can optionally expand history references in the buffer
when you send them to the shell.  To request this, set the variable
<CODE>comint-input-autoexpand</CODE> to <CODE>input</CODE>.  You can make
<KBD>SPC</KBD> perform history expansion by binding <KBD>SPC</KBD> to the
command <CODE>comint-magic-space</CODE>.
</P><P>

<A NAME="IDX2499"></A>
<A NAME="IDX2500"></A>
<A NAME="IDX2501"></A>
<A NAME="IDX2502"></A>
  Shell mode recognizes history references when they follow a prompt.
Normally, any text output by a program at the beginning of an input
line is considered a prompt.  However, if the variable
<CODE>comint-use-prompt-regexp-instead-of-fields</CODE> is non-<CODE>nil</CODE>,
then Comint mode uses a regular expression to recognize prompts.  In
general, the variable <CODE>comint-prompt-regexp</CODE> specifies the
regular expression; Shell mode uses the variable
<CODE>shell-prompt-pattern</CODE> to set up <CODE>comint-prompt-regexp</CODE> in
the shell buffer.
</P><P>

<A NAME="Directory Tracking"></A>
<HR SIZE="6">
<A NAME="SEC450"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC449"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC451"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC451"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC442"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC456"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.15.5 Directory Tracking </H3>
<!--docid::SEC450::-->
<P>

<A NAME="IDX2503"></A>
<A NAME="IDX2504"></A>
<A NAME="IDX2505"></A>
  Shell mode keeps track of <SAMP>`cd'</SAMP>, <SAMP>`pushd'</SAMP> and <SAMP>`popd'</SAMP>
commands given to the inferior shell, so it can keep the
<SAMP>`*shell*'</SAMP> buffer's default directory the same as the shell's
working directory.  It recognizes these commands syntactically, by
examining lines of input that are sent.
</P><P>

  If you use aliases for these commands, you can tell Emacs to
recognize them also.  For example, if the value of the variable
<CODE>shell-pushd-regexp</CODE> matches the beginning of a shell command
line, that line is regarded as a <CODE>pushd</CODE> command.  Change this
variable when you add aliases for <SAMP>`pushd'</SAMP>.  Likewise,
<CODE>shell-popd-regexp</CODE> and <CODE>shell-cd-regexp</CODE> are used to
recognize commands with the meaning of <SAMP>`popd'</SAMP> and <SAMP>`cd'</SAMP>.
These commands are recognized only at the beginning of a shell command
line.
</P><P>

<A NAME="IDX2506"></A>
  If Emacs gets confused about changes in the current directory of the
subshell, use the command <KBD>M-x dirs</KBD> to ask the shell what its
current directory is.  This command works for shells that support the
most common command syntax; it may not work for unusual shells.
</P><P>

<A NAME="IDX2507"></A>
  You can also use <KBD>M-x dirtrack-mode</KBD> to enable (or disable) an
alternative and more aggressive method of tracking changes in the
current directory.
</P><P>

<A NAME="Shell Options"></A>
<HR SIZE="6">
<A NAME="SEC451"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC450"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC452"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC452"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC442"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC456"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.15.6 Shell Mode Options </H3>
<!--docid::SEC451::-->
<P>

<A NAME="IDX2508"></A>
  If the variable <CODE>comint-scroll-to-bottom-on-input</CODE> is
non-<CODE>nil</CODE>, insertion and yank commands scroll the selected window
to the bottom before inserting.
</P><P>

<A NAME="IDX2509"></A>
  If <CODE>comint-scroll-show-maximum-output</CODE> is non-<CODE>nil</CODE>, then
scrolling due to the arrival of output tries to place the last line of
text at the bottom line of the window, so as to show as much useful
text as possible.  (This mimics the scrolling behavior of many
terminals.)  The default is <CODE>nil</CODE>.
</P><P>

<A NAME="IDX2510"></A>
  By setting <CODE>comint-scroll-to-bottom-on-output</CODE>, you can opt for
having point jump to the end of the buffer whenever output arrives--no
matter where in the buffer point was before.  If the value is
<CODE>this</CODE>, point jumps in the selected window.  If the value is
<CODE>all</CODE>, point jumps in each window that shows the Comint buffer.  If
the value is <CODE>other</CODE>, point jumps in all nonselected windows that
show the current buffer.  The default value is <CODE>nil</CODE>, which means
point does not jump to the end.
</P><P>

<A NAME="IDX2511"></A>
  The variable <CODE>comint-input-ignoredups</CODE> controls whether successive
identical inputs are stored in the input history.  A non-<CODE>nil</CODE>
value means to omit an input that is the same as the previous input.
The default is <CODE>nil</CODE>, which means to store each input even if it is
equal to the previous input.
</P><P>

<A NAME="IDX2512"></A>
<A NAME="IDX2513"></A>
<A NAME="IDX2514"></A>
  Three variables customize file name completion.  The variable
<CODE>comint-completion-addsuffix</CODE> controls whether completion inserts a
space or a slash to indicate a fully completed file or directory name
(non-<CODE>nil</CODE> means do insert a space or slash).
<CODE>comint-completion-recexact</CODE>, if non-<CODE>nil</CODE>, directs <KBD>TAB</KBD>
to choose the shortest possible completion if the usual Emacs completion
algorithm cannot add even a single character.
<CODE>comint-completion-autolist</CODE>, if non-<CODE>nil</CODE>, says to list all
the possible completions whenever completion is not exact.
</P><P>

<A NAME="IDX2515"></A>
  Command completion normally considers only executable files.
If you set <CODE>shell-completion-execonly</CODE> to <CODE>nil</CODE>,
it considers nonexecutable files as well.
</P><P>

<A NAME="IDX2516"></A>
<A NAME="IDX2517"></A>
<A NAME="IDX2518"></A>
  You can configure the behavior of <SAMP>`pushd'</SAMP>.  Variables control
whether <SAMP>`pushd'</SAMP> behaves like <SAMP>`cd'</SAMP> if no argument is given
(<CODE>shell-pushd-tohome</CODE>), pop rather than rotate with a numeric
argument (<CODE>shell-pushd-dextract</CODE>), and only add directories to the
directory stack if they are not already on it
(<CODE>shell-pushd-dunique</CODE>).  The values you choose should match the
underlying shell, of course.
</P><P>

<A NAME="Terminal emulator"></A>
<HR SIZE="6">
<A NAME="SEC452"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC451"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC453"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC453"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC442"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC456"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.15.7 Emacs Terminal Emulator </H3>
<!--docid::SEC452::-->
<P>

  To run a subshell in a terminal emulator, putting its typescript in
an Emacs buffer, use <KBD>M-x term</KBD>.  This creates (or reuses) a
buffer named <SAMP>`*terminal*'</SAMP>, and runs a subshell with input coming
from your keyboard, and output going to that buffer.
</P><P>

  The terminal emulator uses Term mode, which has two input modes.  In
line mode, Term basically acts like Shell mode; see <A HREF="emacs_32.html#SEC445">AC.15.3 Shell Mode</A>.
</P><P>

  In char mode, each character is sent directly to the inferior
subshell, as "terminal input."  Any "echoing" of your input is the
responsibility of the subshell.  The sole exception is the terminal
escape character, which by default is <KBD>C-c</KBD> (see section <A HREF="emacs_32.html#SEC453">AC.15.8 Term Mode</A>).
Any "terminal output" from the subshell goes into the buffer,
advancing point.
</P><P>

  Some programs (such as Emacs itself) need to control the appearance
on the terminal screen in detail.  They do this by sending special
control codes.  The exact control codes needed vary from terminal to
terminal, but nowadays most terminals and terminal emulators
(including <CODE>xterm</CODE>) understand the ANSI-standard (VT100-style)
escape sequences.  Term mode recognizes these escape sequences, and
handles each one appropriately, changing the buffer so that the
appearance of the window matches what it would be on a real terminal.
You can actually run Emacs inside an Emacs Term window.
</P><P>

   The file name used to load the subshell is determined the same way
as for Shell mode.  To make multiple terminal emulators, rename the
buffer <SAMP>`*terminal*'</SAMP> to something different using <KBD>M-x
rename-uniquely</KBD>, just as with Shell mode.
</P><P>

  Unlike Shell mode, Term mode does not track the current directory by
examining your input.  But some shells can tell Term what the current
directory is.  This is done automatically by <CODE>bash</CODE> version 1.15
and later.
</P><P>

<A NAME="Term Mode"></A>
<HR SIZE="6">
<A NAME="SEC453"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC452"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC454"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC454"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC442"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC456"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.15.8 Term Mode </H3>
<!--docid::SEC453::-->
<P>

  The terminal emulator uses Term mode, which has two input modes.  In
line mode, Term basically acts like Shell mode; see <A HREF="emacs_32.html#SEC445">AC.15.3 Shell Mode</A>.
In char mode, each character is sent directly to the inferior
subshell, except for the Term escape character, normally <KBD>C-c</KBD>.
</P><P>

  To switch between line and char mode, use these commands:
</P><P>

<DL COMPACT>
<A NAME="IDX2519"></A>
<A NAME="IDX2520"></A>
<DT><KBD>C-c C-k</KBD>
<DD>Switch to line mode.  Do nothing if already in line mode.
<P>

<A NAME="IDX2521"></A>
<A NAME="IDX2522"></A>
<DT><KBD>C-c C-j</KBD>
<DD>Switch to char mode.  Do nothing if already in char mode.
</DL>
<P>

  The following commands are only available in char mode:
</P><P>

<DL COMPACT>
<DT><KBD>C-c C-c</KBD>
<DD>Send a literal <KBD>C-c</KBD> to the sub-shell.
<P>

<DT><KBD>C-c C-x</KBD>
<DD>A prefix command to access the global <KBD>C-x</KBD> commands conveniently.
For example, <KBD>C-c C-x o</KBD> invokes the global binding of
<KBD>C-x o</KBD>, which is normally <SAMP>`other-window'</SAMP>.
</DL>
<P>

<A NAME="Paging in Term"></A>
<HR SIZE="6">
<A NAME="SEC454"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC453"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC455"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC442"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC442"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC456"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.15.9 Page-At-A-Time Output </H3>
<!--docid::SEC454::-->
<P>

  Term mode has a page-at-a-time feature.  When enabled it makes
output pause at the end of each screenful.
</P><P>

<DL COMPACT>
<A NAME="IDX2523"></A>
<A NAME="IDX2524"></A>
<DT><KBD>C-c C-q</KBD>
<DD>Toggle the page-at-a-time feature.  This command works in both line
and char modes.  When page-at-a-time is enabled, the mode-line
displays the word <SAMP>`page'</SAMP>.
</DL>
<P>

  With page-at-a-time enabled, whenever Term receives more than a
screenful of output since your last input, it pauses, displaying
<SAMP>`**MORE**'</SAMP> in the mode-line.  Type <KBD>SPC</KBD> to display the next
screenful of output.  Type <KBD>?</KBD> to see your other options.  The
interface is similar to the <CODE>more</CODE> program.
</P><P>

<A NAME="Remote Host"></A>
<HR SIZE="6">
<A NAME="SEC455"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC454"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC456"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC444"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC442"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC456"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.15.10 Remote Host Shell </H3>
<!--docid::SEC455::-->
<P>

  You can login to a remote computer, using whatever commands you
would from a regular terminal (e.g. using the <CODE>telnet</CODE> or
<CODE>rlogin</CODE> commands), from a Term window.
</P><P>

  A program that asks you for a password will normally suppress
echoing of the password, so the password will not show up in the
buffer.  This will happen just as if you were using a real terminal,
if the buffer is in char mode.  If it is in line mode, the password is
temporarily visible, but will be erased when you hit return.  (This
happens automatically; there is no special password processing.)
</P><P>

  When you log in to a different machine, you need to specify the type
of terminal you're using.  Terminal types <SAMP>`ansi'</SAMP> or <SAMP>`vt100'</SAMP>
will work on most systems.
</P><P>

<A NAME="Emacs Server"></A>
<HR SIZE="6">
<A NAME="SEC456"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC455"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC457"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC442"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC458"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.16 Using Emacs as a Server </H2>
<!--docid::SEC456::-->
<P>

  Various programs such as <CODE>mail</CODE> can invoke your choice of editor
to edit a particular piece of text, such as a message that you are
sending.  By convention, most of these programs use the environment
variable <CODE>EDITOR</CODE> to specify which editor to run.  If you set
<CODE>EDITOR</CODE> to <SAMP>`emacs'</SAMP>, they invoke Emacs--but in an
inconvenient fashion, by starting a new, separate Emacs process.  This
is inconvenient because it takes time and because the new Emacs process
doesn't share the buffers in any existing Emacs process.
</P><P>

  You can arrange to use your existing Emacs process as the editor for
programs like <CODE>mail</CODE> by using the Emacs client and Emacs server
programs.  Here is how.
</P><P>

<A NAME="IDX2525"></A>
  First, the preparation.  Within Emacs, call the function
<CODE>server-start</CODE>.  (Your <TT>`.emacs'</TT> file can do this automatically
if you add the expression <CODE>(server-start)</CODE> to it.)  Then, outside
Emacs, set the <CODE>EDITOR</CODE> environment variable to <SAMP>`emacsclient'</SAMP>.
(Note that some programs use a different environment variable; for
example, to make TeX use <SAMP>`emacsclient'</SAMP>, you should set the
<CODE>TEXEDIT</CODE> environment variable to <SAMP>`emacsclient +%d %s'</SAMP>.)
</P><P>

<A NAME="IDX2526"></A>
<A NAME="IDX2527"></A>
  Then, whenever any program invokes your specified <CODE>EDITOR</CODE>
program, the effect is to send a message to your principal Emacs telling
it to visit a file.  (That's what the program <CODE>emacsclient</CODE> does.)
Emacs displays the buffer immediately and you can immediately begin
editing it.
</P><P>

  When you've finished editing that buffer, type <KBD>C-x #</KBD>
(<CODE>server-edit</CODE>).  This saves the file and sends a message back to
the <CODE>emacsclient</CODE> program telling it to exit.  The programs that
use <CODE>EDITOR</CODE> wait for the "editor" (actually, <CODE>emacsclient</CODE>)
to exit.  <KBD>C-x #</KBD> also checks for other pending external requests
to edit various files, and selects the next such file.
</P><P>

  You can switch to a server buffer manually if you wish; you don't
have to arrive at it with <KBD>C-x #</KBD>.  But <KBD>C-x #</KBD> is the way to
say that you are finished with one.
</P><P>

<A NAME="IDX2528"></A>
<A NAME="IDX2529"></A>
  Finishing with a server buffer also kills the buffer, unless it
already existed in the Emacs session before the server asked to create
it.  However, if you set <CODE>server-kill-new-buffers</CODE> to <CODE>nil</CODE>,
then a different criterion is used: finishing with a server buffer
kills it if the file name matches the regular expression
<CODE>server-temp-file-regexp</CODE>.  This is set up to distinguish certain
"temporary" files.
</P><P>

<A NAME="IDX2530"></A>
  If you set the variable <CODE>server-window</CODE> to a window or a frame,
<KBD>C-x #</KBD> displays the server buffer in that window or in that frame.
</P><P>

  While <CODE>mail</CODE> or another application is waiting for
<CODE>emacsclient</CODE> to finish, <CODE>emacsclient</CODE> does not read terminal
input.  So the terminal that <CODE>mail</CODE> was using is effectively
blocked for the duration.  In order to edit with your principal Emacs,
you need to be able to use it without using that terminal.  There are
three ways to do this:
</P><P>

<UL>
<LI>
Using a window system, run <CODE>mail</CODE> and the principal Emacs in two
separate windows.  While <CODE>mail</CODE> is waiting for <CODE>emacsclient</CODE>,
the window where it was running is blocked, but you can use Emacs by
switching windows.
<P>

<LI>
Using virtual terminals, run <CODE>mail</CODE> in one virtual terminal
and run Emacs in another.
<P>

<LI>
Use Shell mode or Term mode in Emacs to run the other program such as
<CODE>mail</CODE>; then, <CODE>emacsclient</CODE> blocks only the subshell under
Emacs, and you can still use Emacs to edit the file.
</UL>
<P>

  If you run <CODE>emacsclient</CODE> with the option <SAMP>`--no-wait'</SAMP>, it
returns immediately without waiting for you to "finish" the buffer
in Emacs.  Note that server buffers created in this way are not killed
automatically when you finish with them.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC457">AC.17 Invoking <CODE>emacsclient</CODE></A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Invoking emacsclient"></A>
<HR SIZE="6">
<A NAME="SEC457"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC456"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC458"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC456"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC456"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC458"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.17 Invoking <CODE>emacsclient</CODE> </H2>
<!--docid::SEC457::-->
<P>

  To run the <CODE>emacsclient</CODE> program, specify file names as arguments,
and optionally line numbers as well.  Do it like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>emacsclient {[+<VAR>line</VAR>[<VAR>column</VAR>]] <VAR>filename</VAR>}<small>...</small>
</pre></td></tr></table></P><P>

This tells Emacs to visit each of the specified files; if you specify a
line number for a certain file, Emacs moves to that line in the file.
If you specify a column number as well, Emacs puts point on that column
in the line.
</P><P>

  Ordinarily, <CODE>emacsclient</CODE> does not return until you use the
<KBD>C-x #</KBD> command on each of these buffers.  When that happens,
Emacs sends a message to the <CODE>emacsclient</CODE> program telling it to
return.
</P><P>

  But if you use the option <SAMP>`-n'</SAMP> or <SAMP>`--no-wait'</SAMP> when running
<CODE>emacsclient</CODE>, then it returns immediately.  (You can take as
long as you like to edit the files in Emacs.)
</P><P>

  The option <SAMP>`--alternate-editor=<VAR>command</VAR>'</SAMP> is useful when
running <CODE>emacsclient</CODE> in a script.  It specifies a command to run
if <CODE>emacsclient</CODE> fails to contact Emacs.  For example, the
following setting for the <VAR>EDITOR</VAR> environment variable will
always give an editor, even if Emacs is not running:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>EDITOR="emacsclient --alternate-editor vi +%d %s"
</pre></td></tr></table></P><P>

The environment variable <VAR>ALTERNATE_EDITOR</VAR> has the same effect, but
the value of the <SAMP>`--alternate-editor'</SAMP> takes precedence.
</P><P>

<A NAME="IDX2531"></A>
  Alternatively, the file <TT>`etc/emacs.bash'</TT> defines a bash
function which will communicate with a running Emacs server, or start
one if none exists.
</P><P>

<A NAME="Hardcopy"></A>
<HR SIZE="6">
<A NAME="SEC458"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC457"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC459"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC456"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC459"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.18 Hardcopy Output </H2>
<!--docid::SEC458::-->
<P>

  The Emacs commands for making hardcopy let you print either an entire
buffer or just part of one, either with or without page headers.
See also the hardcopy commands of Dired (see section <A HREF="emacs_16.html#SEC165">M.10 Miscellaneous File Operations</A>)
and the diary (see section <A HREF="emacs_32.html#SEC430">AC.10.1 Commands Displaying Diary Entries</A>).
</P><P>

<DL COMPACT>
<DT><KBD>M-x print-buffer</KBD>
<DD>Print hardcopy of current buffer with page headings containing the file
name and page number.
<DT><KBD>M-x lpr-buffer</KBD>
<DD>Print hardcopy of current buffer without page headings.
<DT><KBD>M-x print-region</KBD>
<DD>Like <CODE>print-buffer</CODE> but print only the current region.
<DT><KBD>M-x lpr-region</KBD>
<DD>Like <CODE>lpr-buffer</CODE> but print only the current region.
</DL>
<P>

<A NAME="IDX2532"></A>
<A NAME="IDX2533"></A>
<A NAME="IDX2534"></A>
<A NAME="IDX2535"></A>
<A NAME="IDX2536"></A>
  The hardcopy commands (aside from the Postscript commands) pass extra
switches to the <CODE>lpr</CODE> program based on the value of the variable
<CODE>lpr-switches</CODE>.  Its value should be a list of strings, each string
an option starting with <SAMP>`-'</SAMP>.  For example, to specify a line width
of 80 columns for all the printing you do in Emacs, set
<CODE>lpr-switches</CODE> like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq lpr-switches '("-w80"))
</pre></td></tr></table></P><P>

<A NAME="IDX2537"></A>
  You can specify the printer to use by setting the variable
<CODE>printer-name</CODE>.
</P><P>

<A NAME="IDX2538"></A>
<A NAME="IDX2539"></A>
<A NAME="IDX2540"></A>
  The variable <CODE>lpr-command</CODE> specifies the name of the printer
program to run; the default value depends on your operating system type.
On most systems, the default is <CODE>"lpr"</CODE>.  The variable
<CODE>lpr-headers-switches</CODE> similarly specifies the extra switches to
use to make page headers.  The variable <CODE>lpr-add-switches</CODE> controls
whether to supply <SAMP>`-T'</SAMP> and <SAMP>`-J'</SAMP> options (suitable for
<CODE>lpr</CODE>) to the printer program: <CODE>nil</CODE> means don't add them.
<CODE>lpr-add-switches</CODE> should be <CODE>nil</CODE> if your printer program is
not compatible with <CODE>lpr</CODE>.
</P><P>

<A NAME="PostScript"></A>
<HR SIZE="6">
<A NAME="SEC459"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC458"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC460"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC458"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC460"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.19 PostScript Hardcopy </H2>
<!--docid::SEC459::-->
<P>

  These commands convert buffer contents to PostScript,
either printing it or leaving it in another Emacs buffer.
</P><P>

<DL COMPACT>
<DT><KBD>M-x ps-print-buffer</KBD>
<DD>Print hardcopy of the current buffer in PostScript form.
<DT><KBD>M-x ps-print-region</KBD>
<DD>Print hardcopy of the current region in PostScript form.
<DT><KBD>M-x ps-print-buffer-with-faces</KBD>
<DD>Print hardcopy of the current buffer in PostScript form, showing the
faces used in the text by means of PostScript features.
<DT><KBD>M-x ps-print-region-with-faces</KBD>
<DD>Print hardcopy of the current region in PostScript form, showing the
faces used in the text.
<DT><KBD>M-x ps-spool-buffer</KBD>
<DD>Generate PostScript for the current buffer text.
<DT><KBD>M-x ps-spool-region</KBD>
<DD>Generate PostScript for the current region.
<DT><KBD>M-x ps-spool-buffer-with-faces</KBD>
<DD>Generate PostScript for the current buffer, showing the faces used.
<DT><KBD>M-x ps-spool-region-with-faces</KBD>
<DD>Generate PostScript for the current region, showing the faces used.
<DT><KBD>M-x handwrite</KBD>
<DD>Generates/prints PostScript for the current buffer as if handwritten.
</DL>
<P>

<A NAME="IDX2541"></A>
<A NAME="IDX2542"></A>
<A NAME="IDX2543"></A>
<A NAME="IDX2544"></A>
  The PostScript commands, <CODE>ps-print-buffer</CODE> and
<CODE>ps-print-region</CODE>, print buffer contents in PostScript form.  One
command prints the entire buffer; the other, just the region.  The
corresponding <SAMP>`-with-faces'</SAMP> commands,
<CODE>ps-print-buffer-with-faces</CODE> and <CODE>ps-print-region-with-faces</CODE>,
use PostScript features to show the faces (fonts and colors) in the text
properties of the text being printed.
</P><P>

  If you are using a color display, you can print a buffer of program
code with color highlighting by turning on Font-Lock mode in that
buffer, and using <CODE>ps-print-buffer-with-faces</CODE>.
</P><P>

<A NAME="IDX2545"></A>
<A NAME="IDX2546"></A>
<A NAME="IDX2547"></A>
<A NAME="IDX2548"></A>
  The commands whose names have <SAMP>`spool'</SAMP> instead of <SAMP>`print'</SAMP>
generate the PostScript output in an Emacs buffer instead of sending
it to the printer.
</P><P>

<A NAME="IDX2549"></A>
<A NAME="IDX2550"></A>
<KBD>M-x handwrite</KBD> is more frivolous.  It generates a PostScript
rendition of the current buffer as a cursive handwritten document.  It
can be customized in group <CODE>handwrite</CODE>.  This function only
supports ISO 8859-1 characters.
</P><P>

  The following section describes variables for customizing these commands.
</P><P>

<A NAME="PostScript Variables"></A>
<HR SIZE="6">
<A NAME="SEC460"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC459"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC461"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC459"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC461"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.20 Variables for PostScript Hardcopy </H2>
<!--docid::SEC460::-->
<P>

<A NAME="IDX2551"></A>
<A NAME="IDX2552"></A>
<A NAME="IDX2553"></A>
  All the PostScript hardcopy commands use the variables
<CODE>ps-lpr-command</CODE> and <CODE>ps-lpr-switches</CODE> to specify how to print
the output.  <CODE>ps-lpr-command</CODE> specifies the command name to run,
<CODE>ps-lpr-switches</CODE> specifies command line options to use, and
<CODE>ps-printer-name</CODE> specifies the printer.  If you don't set the
first two variables yourself, they take their initial values from
<CODE>lpr-command</CODE> and <CODE>lpr-switches</CODE>.  If <CODE>ps-printer-name</CODE>
is <CODE>nil</CODE>, <CODE>printer-name</CODE> is used.
</P><P>

<A NAME="IDX2554"></A>
  The variable <CODE>ps-print-header</CODE> controls whether these commands
add header lines to each page--set it to <CODE>nil</CODE> to turn headers
off.
</P><P>

<A NAME="IDX2555"></A>
<A NAME="IDX2556"></A>
  If your printer doesn't support colors, you should turn off color
processing by setting <CODE>ps-print-color-p</CODE> to <CODE>nil</CODE>.  By
default, if the display supports colors, Emacs produces hardcopy output
with color information; on black-and-white printers, colors are emulated
with shades of gray.  This might produce illegible output, even if your
screen colors only use shades of gray.
</P><P>

<A NAME="IDX2557"></A>
  By default, PostScript printing ignores the background colors of the
faces, unless the variable <CODE>ps-use-face-background</CODE> is
non-<CODE>nil</CODE>.  This is to avoid unwanted interference with the zebra
stripes and background image/text.
</P><P>

<A NAME="IDX2558"></A>
<A NAME="IDX2559"></A>
  The variable <CODE>ps-paper-type</CODE> specifies which size of paper to
format for; legitimate values include <CODE>a4</CODE>, <CODE>a3</CODE>,
<CODE>a4small</CODE>, <CODE>b4</CODE>, <CODE>b5</CODE>, <CODE>executive</CODE>, <CODE>ledger</CODE>,
<CODE>legal</CODE>, <CODE>letter</CODE>, <CODE>letter-small</CODE>, <CODE>statement</CODE>,
<CODE>tabloid</CODE>.  The default is <CODE>letter</CODE>.  You can define
additional paper sizes by changing the variable
<CODE>ps-page-dimensions-database</CODE>.
</P><P>

<A NAME="IDX2560"></A>
  The variable <CODE>ps-landscape-mode</CODE> specifies the orientation of
printing on the page.  The default is <CODE>nil</CODE>, which stands for
"portrait" mode.  Any non-<CODE>nil</CODE> value specifies "landscape"
mode.
</P><P>

<A NAME="IDX2561"></A>
  The variable <CODE>ps-number-of-columns</CODE> specifies the number of
columns; it takes effect in both landscape and portrait mode.  The
default is 1.
</P><P>

<A NAME="IDX2562"></A>
<A NAME="IDX2563"></A>
<A NAME="IDX2564"></A>
  The variable <CODE>ps-font-family</CODE> specifies which font family to use
for printing ordinary text.  Legitimate values include <CODE>Courier</CODE>,
<CODE>Helvetica</CODE>, <CODE>NewCenturySchlbk</CODE>, <CODE>Palatino</CODE> and
<CODE>Times</CODE>.  The variable <CODE>ps-font-size</CODE> specifies the size of
the font for ordinary text.  It defaults to 8.5 points.
</P><P>

<A NAME="IDX2565"></A>
<A NAME="IDX2566"></A>
<A NAME="IDX2567"></A>
  Emacs supports more scripts and characters than a typical PostScript
printer.  Thus, some of the characters in your buffer might not be
printable using the fonts built into your printer.  You can augment
the fonts supplied with the printer with those from the GNU Intlfonts
package, or you can instruct Emacs to use Intlfonts exclusively.  The
variable <CODE>ps-multibyte-buffer</CODE> controls this: the default value,
<CODE>nil</CODE>, is appropriate for printing ASCII and Latin-1
characters; a value of <CODE>non-latin-printer</CODE> is for printers which
have the fonts for ASCII, Latin-1, Japanese, and Korean
characters built into them.  A value of <CODE>bdf-font</CODE> arranges for
the BDF fonts from the Intlfonts package to be used for <EM>all</EM>
characters.  Finally, a value of <CODE>bdf-font-except-latin</CODE>
instructs the printer to use built-in fonts for ASCII and Latin-1
characters, and Intlfonts BDF fonts for the rest.
</P><P>

<A NAME="IDX2568"></A>
  To be able to use the BDF fonts, Emacs needs to know where to find
them.  The variable <CODE>bdf-directory-list</CODE> holds the list of
directories where Emacs should look for the fonts; the default value
includes a single directory <TT>`/usr/local/share/emacs/fonts/bdf'</TT>.
</P><P>

  Many other customization variables for these commands are defined and
described in the Lisp files <TT>`ps-print.el'</TT> and <TT>`ps-mule.el'</TT>.
</P><P>

<A NAME="Sorting"></A>
<HR SIZE="6">
<A NAME="SEC461"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC460"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC462"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC460"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC462"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.21 Sorting Text </H2>
<!--docid::SEC461::-->
<P>

  Emacs provides several commands for sorting text in the buffer.  All
operate on the contents of the region (the text between point and the
mark).  They divide the text of the region into many <EM>sort records</EM>,
identify a <EM>sort key</EM> for each record, and then reorder the records
into the order determined by the sort keys.  The records are ordered so
that their keys are in alphabetical order, or, for numeric sorting, in
numeric order.  In alphabetic sorting, all upper-case letters `A' through
`Z' come before lower-case `a', in accord with the ASCII character
sequence.
</P><P>

  The various sort commands differ in how they divide the text into sort
records and in which part of each record is used as the sort key.  Most of
the commands make each line a separate sort record, but some commands use
paragraphs or pages as sort records.  Most of the sort commands use each
entire sort record as its own sort key, but some use only a portion of the
record as the sort key.
</P><P>

<A NAME="IDX2569"></A>
<A NAME="IDX2570"></A>
<A NAME="IDX2571"></A>
<A NAME="IDX2572"></A>
<A NAME="IDX2573"></A>
<A NAME="IDX2574"></A>
<DL COMPACT>
<DT><KBD>M-x sort-lines</KBD>
<DD>Divide the region into lines, and sort by comparing the entire
text of a line.  A numeric argument means sort into descending order.
<P>

<DT><KBD>M-x sort-paragraphs</KBD>
<DD>Divide the region into paragraphs, and sort by comparing the entire
text of a paragraph (except for leading blank lines).  A numeric
argument means sort into descending order.
<P>

<DT><KBD>M-x sort-pages</KBD>
<DD>Divide the region into pages, and sort by comparing the entire
text of a page (except for leading blank lines).  A numeric
argument means sort into descending order.
<P>

<DT><KBD>M-x sort-fields</KBD>
<DD>Divide the region into lines, and sort by comparing the contents of
one field in each line.  Fields are defined as separated by
whitespace, so the first run of consecutive non-whitespace characters
in a line constitutes field 1, the second such run constitutes field
2, etc.
<P>

Specify which field to sort by with a numeric argument: 1 to sort by
field 1, etc.  A negative argument means count fields from the right
instead of from the left; thus, minus 1 means sort by the last field.
If several lines have identical contents in the field being sorted, they
keep the same relative order that they had in the original buffer.
</P><P>

<DT><KBD>M-x sort-numeric-fields</KBD>
<DD>Like <KBD>M-x sort-fields</KBD> except the specified field is converted
to an integer for each line, and the numbers are compared.  <SAMP>`10'</SAMP>
comes before <SAMP>`2'</SAMP> when considered as text, but after it when
considered as a number.  By default, numbers are interpreted according
to <CODE>sort-numeric-base</CODE>, but numbers beginning with <SAMP>`0x'</SAMP> or
<SAMP>`0'</SAMP> are interpreted as hexadecimal and octal, respectively.
<P>

<DT><KBD>M-x sort-columns</KBD>
<DD>Like <KBD>M-x sort-fields</KBD> except that the text within each line
used for comparison comes from a fixed range of columns.  See below
for an explanation.
<P>

<DT><KBD>M-x reverse-region</KBD>
<DD>Reverse the order of the lines in the region.  This is useful for
sorting into descending order by fields or columns, since those sort
commands do not have a feature for doing that.
</DL>
<P>

  For example, if the buffer contains this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>On systems where clash detection (locking of files being edited) is
implemented, Emacs also checks the first time you modify a buffer
whether the file has changed on disk since it was last visited or
saved.  If it has, you are asked to confirm that you want to change
the buffer.
</FONT></pre></td></tr></table></P><P>

applying <KBD>M-x sort-lines</KBD> to the entire buffer produces this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>On systems where clash detection (locking of files being edited) is
implemented, Emacs also checks the first time you modify a buffer
saved.  If it has, you are asked to confirm that you want to change
the buffer.
whether the file has changed on disk since it was last visited or
</FONT></pre></td></tr></table></P><P>

where the upper-case <SAMP>`O'</SAMP> sorts before all lower-case letters.  If
you use <KBD>C-u 2 M-x sort-fields</KBD> instead, you get this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>implemented, Emacs also checks the first time you modify a buffer
saved.  If it has, you are asked to confirm that you want to change
the buffer.
On systems where clash detection (locking of files being edited) is
whether the file has changed on disk since it was last visited or
</FONT></pre></td></tr></table></P><P>

where the sort keys were <SAMP>`Emacs'</SAMP>, <SAMP>`If'</SAMP>, <SAMP>`buffer'</SAMP>,
<SAMP>`systems'</SAMP> and <SAMP>`the'</SAMP>.
</P><P>

<A NAME="IDX2575"></A>
  <KBD>M-x sort-columns</KBD> requires more explanation.  You specify the
columns by putting point at one of the columns and the mark at the other
column.  Because this means you cannot put point or the mark at the
beginning of the first line of the text you want to sort, this command
uses an unusual definition of "region": all of the line point is in is
considered part of the region, and so is all of the line the mark is in,
as well as all the lines in between.
</P><P>

  For example, to sort a table by information found in columns 10 to 15,
you could put the mark on column 10 in the first line of the table, and
point on column 15 in the last line of the table, and then run
<CODE>sort-columns</CODE>.  Equivalently, you could run it with the mark on
column 15 in the first line and point on column 10 in the last line.
</P><P>

  This can be thought of as sorting the rectangle specified by point and
the mark, except that the text on each line to the left or right of the
rectangle moves along with the text inside the rectangle.
See section <A HREF="emacs_11.html#SEC68">H.10 Rectangles</A>.
</P><P>

<A NAME="IDX2576"></A>
  Many of the sort commands ignore case differences when comparing, if
<CODE>sort-fold-case</CODE> is non-<CODE>nil</CODE>.
</P><P>

<A NAME="Narrowing"></A>
<HR SIZE="6">
<A NAME="SEC462"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC461"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC463"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC461"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC463"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.22 Narrowing </H2>
<!--docid::SEC462::-->
<P>

  <EM>Narrowing</EM> means focusing in on some portion of the buffer,
making the rest temporarily inaccessible.  The portion which you can
still get to is called the <EM>accessible portion</EM>.  Canceling the
narrowing, which makes the entire buffer once again accessible, is
called <EM>widening</EM>.  The amount of narrowing in effect in a buffer at
any time is called the buffer's <EM>restriction</EM>.
</P><P>

  Narrowing can make it easier to concentrate on a single subroutine or
paragraph by eliminating clutter.  It can also be used to restrict the
range of operation of a replace command or repeating keyboard macro.
</P><P>

<DL COMPACT>
<DT><KBD>C-x n n</KBD>
<DD>Narrow down to between point and mark (<CODE>narrow-to-region</CODE>).
<DT><KBD>C-x n w</KBD>
<DD>Widen to make the entire buffer accessible again (<CODE>widen</CODE>).
<DT><KBD>C-x n p</KBD>
<DD>Narrow down to the current page (<CODE>narrow-to-page</CODE>).
<DT><KBD>C-x n d</KBD>
<DD>Narrow down to the current defun (<CODE>narrow-to-defun</CODE>).
</DL>
<P>

  When you have narrowed down to a part of the buffer, that part appears
to be all there is.  You can't see the rest, you can't move into it
(motion commands won't go outside the accessible part), you can't change
it in any way.  However, it is not gone, and if you save the file all
the inaccessible text will be saved.  The word <SAMP>`Narrow'</SAMP> appears in
the mode line whenever narrowing is in effect.
</P><P>

<A NAME="IDX2577"></A>
<A NAME="IDX2578"></A>
  The primary narrowing command is <KBD>C-x n n</KBD> (<CODE>narrow-to-region</CODE>).
It sets the current buffer's restrictions so that the text in the current
region remains accessible, but all text before the region or after the
region is inaccessible.  Point and mark do not change.
</P><P>

<A NAME="IDX2579"></A>
<A NAME="IDX2580"></A>
<A NAME="IDX2581"></A>
<A NAME="IDX2582"></A>
  Alternatively, use <KBD>C-x n p</KBD> (<CODE>narrow-to-page</CODE>) to narrow
down to the current page.  See section <A HREF="emacs_23.html#SEC237">T.4 Pages</A>, for the definition of a page.
<KBD>C-x n d</KBD> (<CODE>narrow-to-defun</CODE>) narrows down to the defun
containing point (see section <A HREF="emacs_24.html#SEC270">U.2 Top-Level Definitions, or Defuns</A>).
</P><P>

<A NAME="IDX2583"></A>
<A NAME="IDX2584"></A>
  The way to cancel narrowing is to widen with <KBD>C-x n w</KBD>
(<CODE>widen</CODE>).  This makes all text in the buffer accessible again.
</P><P>

  You can get information on what part of the buffer you are narrowed down
to using the <KBD>C-x =</KBD> command.  See section <A HREF="emacs_7.html#SEC28">D.9 Cursor Position Information</A>.
</P><P>

  Because narrowing can easily confuse users who do not understand it,
<CODE>narrow-to-region</CODE> is normally a disabled command.  Attempting to use
this command asks for confirmation and gives you the option of enabling it;
if you enable the command, confirmation will no longer be required for
it.  See section <A HREF="emacs_33.html#SEC502">AD.4.11 Disabling Commands</A>.
</P><P>

<A NAME="Two-Column"></A>
<HR SIZE="6">
<A NAME="SEC463"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC462"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC464"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC462"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC464"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.23 Two-Column Editing </H2>
<!--docid::SEC463::-->
<P>

  Two-column mode lets you conveniently edit two side-by-side columns of
text.  It uses two side-by-side windows, each showing its own
buffer.
</P><P>

  There are three ways to enter two-column mode:
</P><P>

<DL COMPACT>
<DT><KBD><KBD>F2</KBD> 2</KBD> or <KBD>C-x 6 2</KBD>
<DD><A NAME="IDX2585"></A>
<A NAME="IDX2586"></A>
<A NAME="IDX2587"></A>
Enter two-column mode with the current buffer on the left, and on the
right, a buffer whose name is based on the current buffer's name
(<CODE>2C-two-columns</CODE>).  If the right-hand buffer doesn't already
exist, it starts out empty; the current buffer's contents are not
changed.
<P>

This command is appropriate when the current buffer is empty or contains
just one column and you want to add another column.
</P><P>

<DT><KBD><KBD>F2</KBD> s</KBD> or <KBD>C-x 6 s</KBD>
<DD><A NAME="IDX2588"></A>
<A NAME="IDX2589"></A>
<A NAME="IDX2590"></A>
Split the current buffer, which contains two-column text, into two
buffers, and display them side by side (<CODE>2C-split</CODE>).  The current
buffer becomes the left-hand buffer, but the text in the right-hand
column is moved into the right-hand buffer.  The current column
specifies the split point.  Splitting starts with the current line and
continues to the end of the buffer.
<P>

This command is appropriate when you have a buffer that already contains
two-column text, and you wish to separate the columns temporarily.
</P><P>

<DT><KBD><KBD>F2</KBD> b <VAR>buffer</VAR> <KBD>RET</KBD></KBD>
<DD><DT><KBD>C-x 6 b <VAR>buffer</VAR> <KBD>RET</KBD></KBD>
<DD><A NAME="IDX2591"></A>
<A NAME="IDX2592"></A>
<A NAME="IDX2593"></A>
Enter two-column mode using the current buffer as the left-hand buffer,
and using buffer <VAR>buffer</VAR> as the right-hand buffer
(<CODE>2C-associate-buffer</CODE>).
</DL>
<P>

  <KBD><KBD>F2</KBD> s</KBD> or <KBD>C-x 6 s</KBD> looks for a column separator, which
is a string that appears on each line between the two columns.  You can
specify the width of the separator with a numeric argument to
<KBD><KBD>F2</KBD> s</KBD>; that many characters, before point, constitute the
separator string.  By default, the width is 1, so the column separator
is the character before point.
</P><P>

  When a line has the separator at the proper place, <KBD><KBD>F2</KBD> s</KBD>
puts the text after the separator into the right-hand buffer, and
deletes the separator.  Lines that don't have the column separator at
the proper place remain unsplit; they stay in the left-hand buffer, and
the right-hand buffer gets an empty line to correspond.  (This is the
way to write a line that "spans both columns while in two-column
mode": write it in the left-hand buffer, and put an empty line in the
right-hand buffer.)
</P><P>

<A NAME="IDX2594"></A>
<A NAME="IDX2595"></A>
<A NAME="IDX2596"></A>
  The command <KBD>C-x 6 <KBD>RET</KBD></KBD> or <KBD><KBD>F2</KBD> <KBD>RET</KBD></KBD>
(<CODE>2C-newline</CODE>) inserts a newline in each of the two buffers at
corresponding positions.  This is the easiest way to add a new line to
the two-column text while editing it in split buffers.
</P><P>

<A NAME="IDX2597"></A>
<A NAME="IDX2598"></A>
<A NAME="IDX2599"></A>
  When you have edited both buffers as you wish, merge them with
<KBD><KBD>F2</KBD> 1</KBD> or <KBD>C-x 6 1</KBD> (<CODE>2C-merge</CODE>).  This copies the
text from the right-hand buffer as a second column in the other buffer.
To go back to two-column editing, use <KBD><KBD>F2</KBD> s</KBD>.
</P><P>

<A NAME="IDX2600"></A>
<A NAME="IDX2601"></A>
<A NAME="IDX2602"></A>
  Use <KBD><KBD>F2</KBD> d</KBD> or <KBD>C-x 6 d</KBD> to dissociate the two buffers,
leaving each as it stands (<CODE>2C-dissociate</CODE>).  If the other buffer,
the one not current when you type <KBD><KBD>F2</KBD> d</KBD>, is empty,
<KBD><KBD>F2</KBD> d</KBD> kills it.
</P><P>

<A NAME="Editing Binary Files"></A>
<HR SIZE="6">
<A NAME="SEC464"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC463"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC465"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC463"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC465"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.24 Editing Binary Files </H2>
<!--docid::SEC464::-->
<P>

<A NAME="IDX2603"></A>
<A NAME="IDX2604"></A>
<A NAME="IDX2605"></A>
<A NAME="IDX2606"></A>
  There is a special major mode for editing binary files: Hexl mode.  To
use it, use <KBD>M-x hexl-find-file</KBD> instead of <KBD>C-x C-f</KBD> to visit
the file.  This command converts the file's contents to hexadecimal and
lets you edit the translation.  When you save the file, it is converted
automatically back to binary.
</P><P>

  You can also use <KBD>M-x hexl-mode</KBD> to translate an existing buffer
into hex.  This is useful if you visit a file normally and then discover
it is a binary file.
</P><P>

  Ordinary text characters overwrite in Hexl mode.  This is to reduce
the risk of accidentally spoiling the alignment of data in the file.
There are special commands for insertion.  Here is a list of the
commands of Hexl mode:
</P><P>

<DL COMPACT>
<DT><KBD>C-M-d</KBD>
<DD>Insert a byte with a code typed in decimal.
<P>

<DT><KBD>C-M-o</KBD>
<DD>Insert a byte with a code typed in octal.
<P>

<DT><KBD>C-M-x</KBD>
<DD>Insert a byte with a code typed in hex.
<P>

<DT><KBD>C-x [</KBD>
<DD>Move to the beginning of a 1k-byte "page."
<P>

<DT><KBD>C-x ]</KBD>
<DD>Move to the end of a 1k-byte "page."
<P>

<DT><KBD>M-g</KBD>
<DD>Move to an address specified in hex.
<P>

<DT><KBD>M-j</KBD>
<DD>Move to an address specified in decimal.
<P>

<DT><KBD>C-c C-c</KBD>
<DD>Leave Hexl mode, going back to the major mode this buffer had before you
invoked <CODE>hexl-mode</CODE>.
</DL>
<P>

Other Hexl commands let you insert strings (sequences) of binary
bytes, move by <CODE>short</CODE>s or <CODE>int</CODE>s, etc.; type <KBD>C-h a
hexl-<KBD>RET</KBD></KBD> for details.
</P><P>

<A NAME="Saving Emacs Sessions"></A>
<HR SIZE="6">
<A NAME="SEC465"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC464"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC466"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC464"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC466"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.25 Saving Emacs Sessions </H2>
<!--docid::SEC465::-->
<P>

  You can use the Desktop library to save the state of Emacs from one
session to another.  Saving the state means that Emacs starts up with
the same set of buffers, major modes, buffer positions, and so on that
the previous Emacs session had.
</P><P>

<A NAME="IDX2607"></A>
  To use Desktop, you should use the Customization buffer (see section <A HREF="emacs_33.html#SEC479">AD.2.2 Easy Customization Interface</A>) to set <CODE>desktop-enable</CODE> to a non-<CODE>nil</CODE> value,
or add these lines at the end of your <TT>`.emacs'</TT> file:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(desktop-load-default)
(desktop-read)
</pre></td></tr></table></P><P>

<A NAME="IDX2608"></A>
The first time you save the state of the Emacs session, you must do it
manually, with the command <KBD>M-x desktop-save</KBD>.  Once you have done
that, exiting Emacs will save the state again--not only the present
Emacs session, but also subsequent sessions.  You can also save the
state at any time, without exiting Emacs, by typing <KBD>M-x
desktop-save</KBD> again.
</P><P>

  In order for Emacs to recover the state from a previous session, you
must start it with the same current directory as you used when you
started the previous session.  This is because <CODE>desktop-read</CODE> looks
in the current directory for the file to read.  This means that you can
have separate saved sessions in different directories; the directory in
which you start Emacs will control which saved session to use.
</P><P>

<A NAME="IDX2609"></A>
  The variable <CODE>desktop-files-not-to-save</CODE> controls which files are
excluded from state saving.  Its value is a regular expression that
matches the files to exclude.  By default, remote (ftp-accessed) files
are excluded; this is because visiting them again in the subsequent
session would be slow.  If you want to include these files in state
saving, set <CODE>desktop-files-not-to-save</CODE> to <CODE>"^$"</CODE>.
See section <A HREF="emacs_16.html#SEC168">M.13 Remote Files</A>.
</P><P>

<A NAME="IDX2610"></A>
<A NAME="IDX2611"></A>
<A NAME="IDX2612"></A>
  The Saveplace library provides a simpler feature that records your
position in each file when you kill its buffer (or kill Emacs), and
jumps to the same position when you visit the file again (even in
another Emacs session).  Use <KBD>M-x toggle-save-place</KBD> to turn on
place-saving in a given file.  Customize the option <CODE>save-place</CODE>
to turn it on for all files in each session.
</P><P>

<A NAME="Recursive Edit"></A>
<HR SIZE="6">
<A NAME="SEC466"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC465"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC467"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC465"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC467"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.26 Recursive Editing Levels </H2>
<!--docid::SEC466::-->
<P>

  A <EM>recursive edit</EM> is a situation in which you are using Emacs
commands to perform arbitrary editing while in the middle of another
Emacs command.  For example, when you type <KBD>C-r</KBD> inside of a
<CODE>query-replace</CODE>, you enter a recursive edit in which you can change
the current buffer.  On exiting from the recursive edit, you go back to
the <CODE>query-replace</CODE>.
</P><P>

<A NAME="IDX2613"></A>
<A NAME="IDX2614"></A>
<A NAME="IDX2615"></A>
  <EM>Exiting</EM> the recursive edit means returning to the unfinished
command, which continues execution.  The command to exit is <KBD>C-M-c</KBD>
(<CODE>exit-recursive-edit</CODE>).
</P><P>

  You can also <EM>abort</EM> the recursive edit.  This is like exiting,
but also quits the unfinished command immediately.  Use the command
<KBD>C-]</KBD> (<CODE>abort-recursive-edit</CODE>) to do this.  See section <A HREF="emacs_33.html#SEC510">AD.8 Quitting and Aborting</A>.
</P><P>

  The mode line shows you when you are in a recursive edit by displaying
square brackets around the parentheses that always surround the major and
minor mode names.  Every window's mode line shows this in the same way,
since being in a recursive edit is true of Emacs as a whole rather than
any particular window or buffer.
</P><P>

  It is possible to be in recursive edits within recursive edits.  For
example, after typing <KBD>C-r</KBD> in a <CODE>query-replace</CODE>, you may type a
command that enters the debugger.  This begins a recursive editing level
for the debugger, within the recursive editing level for <KBD>C-r</KBD>.
Mode lines display a pair of square brackets for each recursive editing
level currently in progress.
</P><P>

  Exiting the inner recursive edit (such as, with the debugger <KBD>c</KBD>
command) resumes the command running in the next level up.  When that
command finishes, you can then use <KBD>C-M-c</KBD> to exit another recursive
editing level, and so on.  Exiting applies to the innermost level only.
Aborting also gets out of only one level of recursive edit; it returns
immediately to the command level of the previous recursive edit.  If you
wish, you can then abort the next recursive editing level.
</P><P>

  Alternatively, the command <KBD>M-x top-level</KBD> aborts all levels of
recursive edits, returning immediately to the top-level command reader.
</P><P>

  The text being edited inside the recursive edit need not be the same text
that you were editing at top level.  It depends on what the recursive edit
is for.  If the command that invokes the recursive edit selects a different
buffer first, that is the buffer you will edit recursively.  In any case,
you can switch buffers within the recursive edit in the normal manner (as
long as the buffer-switching keys have not been rebound).  You could
probably do all the rest of your editing inside the recursive edit,
visiting files and all.  But this could have surprising effects (such as
stack overflow) from time to time.  So remember to exit or abort the
recursive edit when you no longer need it.
</P><P>

  In general, we try to minimize the use of recursive editing levels in
GNU Emacs.  This is because they constrain you to "go back" in a
particular order--from the innermost level toward the top level.  When
possible, we present different activities in separate buffers so that
you can switch between them as you please.  Some commands switch to a
new major mode which provides a command to switch back.  These
approaches give you more flexibility to go back to unfinished tasks in
the order you choose.
</P><P>

<A NAME="Emulation"></A>
<HR SIZE="6">
<A NAME="SEC467"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC466"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC468"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC466"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC468"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.27 Emulation </H2>
<!--docid::SEC467::-->
<P>

  GNU Emacs can be programmed to emulate (more or less) most other
editors.  Standard facilities can emulate these:
</P><P>

<DL COMPACT>
<DT>CRiSP/Brief (PC editor)
<DD><A NAME="IDX2616"></A>
<A NAME="IDX2617"></A>
<A NAME="IDX2618"></A>
<A NAME="IDX2619"></A>
<A NAME="IDX2620"></A>
<A NAME="IDX2621"></A>
<A NAME="IDX2622"></A>
You can turn on key bindings to emulate the CRiSP/Brief editor with
<KBD>M-x crisp-mode</KBD>.  Note that this rebinds <KBD>M-x</KBD> to exit Emacs
unless you change the user option <CODE>crisp-override-meta-x</CODE>.  You can
also use the command <KBD>M-x scroll-all-mode</KBD> or set the user option
<CODE>crisp-load-scroll-all</CODE> to emulate CRiSP's scroll-all feature
(scrolling all windows together).
<P>

<DT>EDT (DEC VMS editor)
<DD><A NAME="IDX2623"></A>
<A NAME="IDX2624"></A>
Turn on EDT emulation with <KBD>M-x edt-emulation-on</KBD>.  <KBD>M-x
edt-emulation-off</KBD> restores normal Emacs command bindings.
<P>

Most of the EDT emulation commands are keypad keys, and most standard
Emacs key bindings are still available.  The EDT emulation rebindings
are done in the global keymap, so there is no problem switching
buffers or major modes while in EDT emulation.
</P><P>

<DT>"PC" bindings
<DD><A NAME="IDX2625"></A>
<A NAME="IDX2626"></A>
The command <KBD>M-x pc-bindings-mode</KBD> sets up certain key bindings
for "PC compatibility"---what people are often used to on PCs--as
follows: <KBD>Delete</KBD> and its variants delete forward instead of
backward, <KBD>C-Backspace</KBD> kills backward a word (as <KBD>C-Delete</KBD>
normally would), <KBD>M-Backspace</KBD> does undo, <KBD>Home</KBD> and <KBD>End</KBD>
move to beginning and end of line, <KBD>C-Home</KBD> and <KBD>C-End</KBD> move
to beginning and end of buffer and <KBD>C-Escape</KBD> does
<CODE>list-buffers</CODE>.
<P>

<DT>PC Selection mode
<DD><A NAME="IDX2627"></A>
<A NAME="IDX2628"></A>
<A NAME="IDX2629"></A>
<A NAME="IDX2630"></A>
The command <KBD>M-x pc-selection-mode</KBD> enables a global minor mode
that emulates the mark, copy, cut and paste commands of various other
systems--an interface known as CUA.  It establishes the key bindings
of PC mode, and also modifies the bindings of the cursor keys and the
<KBD>next</KBD>, <KBD>prior</KBD>, <KBD>home</KBD> and <KBD>end</KBD> keys.  It does not
provide the full set of CUA key bindings--the fundamental Emacs keys
<KBD>C-c</KBD>, <KBD>C-v</KBD> and <KBD>C-x</KBD> are not changed.
<P>

The standard keys for moving around (<KBD>right</KBD>, <KBD>left</KBD>,
<KBD>up</KBD>, <KBD>down</KBD>, <KBD>home</KBD>, <KBD>end</KBD>, <KBD>prior</KBD>, <KBD>next</KBD>,
called "move-keys") deactivate the mark in PC selection mode.
However, using <KBD>Shift</KBD> together with the "move keys" activates
the region over which they move.  The copy, cut and paste functions
are available on <KBD>C-insert</KBD>, <KBD>S-delete</KBD> and <KBD>S-insert</KBD>
respectively.
</P><P>

<A NAME="IDX2631"></A>
The <CODE>s-region</CODE> package provides similar, but less complete,
facilities.
</P><P>

<DT>TPU (DEC VMS editor)
<DD><A NAME="IDX2632"></A>
<A NAME="IDX2633"></A>
<KBD>M-x tpu-edt-on</KBD> turns on emulation of the TPU editor emulating EDT.
<P>

<DT>vi (Berkeley editor)
<DD><A NAME="IDX2634"></A>
Viper is the newest emulator for vi.  It implements several levels of
emulation; level 1 is closest to vi itself, while level 5 departs
somewhat from strict emulation to take advantage of the capabilities of
Emacs.  To invoke Viper, type <KBD>M-x viper-mode</KBD>; it will guide you
the rest of the way and ask for the emulation level.  See Info file `viper', node `Top'.
<P>

<DT>vi (another emulator)
<DD><A NAME="IDX2635"></A>
<KBD>M-x vi-mode</KBD> enters a major mode that replaces the previously
established major mode.  All of the vi commands that, in real vi, enter
"input" mode are programmed instead to return to the previous major
mode.  Thus, ordinary Emacs serves as vi's "input" mode.
<P>

Because vi emulation works through major modes, it does not work
to switch buffers during emulation.  Return to normal Emacs first.
</P><P>

If you plan to use vi emulation much, you probably want to bind a key
to the <CODE>vi-mode</CODE> command.
</P><P>

<DT>vi (alternate emulator)
<DD><A NAME="IDX2636"></A>
<KBD>M-x vip-mode</KBD> invokes another vi emulator, said to resemble real vi
more thoroughly than <KBD>M-x vi-mode</KBD>.  "Input" mode in this emulator
is changed from ordinary Emacs so you can use <KBD>ESC</KBD> to go back to
emulated vi command mode.  To get from emulated vi command mode back to
ordinary Emacs, type <KBD>C-z</KBD>.
<P>

This emulation does not work through major modes, and it is possible
to switch buffers in various ways within the emulator.  It is not
so necessary to assign a key to the command <CODE>vip-mode</CODE> as
it is with <CODE>vi-mode</CODE> because terminating insert mode does
not use it.
</P><P>

See Info file `vip', node `Top', for full information.
</P><P>

<DT>WordStar (old wordprocessor)
<DD><A NAME="IDX2637"></A>
<KBD>M-x wordstar-mode</KBD> provides a major mode with WordStar-like
key bindings.
</DL>
<P>

<A NAME="Hyperlinking"></A>
<HR SIZE="6">
<A NAME="SEC468"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC467"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC469"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC467"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC473"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.28 Hyperlinking and Navigation Features </H2>
<!--docid::SEC468::-->
<P>

<A NAME="IDX2638"></A>
<A NAME="IDX2639"></A>
  Various modes documented elsewhere have hypertext features so that
you can follow links, usually by clicking <KBD>Mouse-2</KBD> on the link or
typing <KBD>RET</KBD> while point is on the link.  Info mode, Help mode and
the Dired-like modes are examples.  The Tags facility links between
uses and definitions in source files, see <A HREF="emacs_26.html#SEC334">W.2 Tags Tables</A>.  Imenu provides
navigation amongst items indexed in the current buffer, see
<A HREF="emacs_24.html#SEC273">U.2.3 Imenu</A>.  Info-lookup provides mode-specific lookup of definitions
in Info indexes, see <A HREF="emacs_24.html#SEC289">U.6 Documentation Lookup</A>.  Speedbar maintains a frame
in which links to files, and locations in files are displayed, see
<A HREF="emacs_19.html#SEC200">P.9 Making and Using a Speedbar Frame</A>.
</P><P>

  Other non-mode-specific facilities described in this section enable
following links from the current buffer in a context-sensitive
fashion.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC469">AC.28.1 Following URLs</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Following URLs.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC470">AC.28.2 Activating URLs</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Activating URLs.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC471">AC.28.3 Finding Files and URLs at Point</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Finding files etc. at point.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_32.html#SEC472">AC.28.4 Finding Function and Variable Definitions</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Finding function and variable definitions.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Browse-URL"></A>
<HR SIZE="6">
<A NAME="SEC469"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC468"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC470"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC468"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC468"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC473"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.28.1 Following URLs </H3>
<!--docid::SEC469::-->
<P>

<DL COMPACT>
<DT><KBD>M-x browse-url <KBD>RET</KBD> <VAR>url</VAR> <KBD>RET</KBD></KBD>
<DD>Load a URL into a Web browser.
</DL>
<P>

The Browse-URL package provides facilities for following URLs specifying
links on the World Wide Web.  Usually this works by invoking a web
browser, but you can, for instance, arrange to invoke <CODE>compose-mail</CODE>
from <SAMP>`mailto:'</SAMP> URLs.
</P><P>

  The general way to use this feature is to type <KBD>M-x browse-url</KBD>,
which displays a specified URL.  If point is located near a plausible
URL, that URL is used as the default.  Other commands are available
which you might like to bind to keys, such as
<CODE>browse-url-at-point</CODE> and <CODE>browse-url-at-mouse</CODE>.
</P><P>

<A NAME="IDX2640"></A>
  You can customize Browse-URL's behavior via various options in the
<CODE>browse-url</CODE> Customize group, particularly
<CODE>browse-url-browser-function</CODE>.  You can invoke actions dependent
on the type of URL by defining <CODE>browse-url-browser-function</CODE> as
an association list.  The package's commentary available via <KBD>C-h
p</KBD> provides more information.  Packages with facilities for following
URLs should always go through Browse-URL, so that the customization
options for Browse-URL will affect all browsing in Emacs.
</P><P>

<A NAME="Goto-address"></A>
<HR SIZE="6">
<A NAME="SEC470"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC469"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC471"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC471"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC468"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC473"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.28.2 Activating URLs </H3>
<!--docid::SEC470::-->
<P>

<DL COMPACT>
<DT><KBD>M-x goto-address</KBD>
<DD>Activate URLs and e-mail addresses in the current buffer.
</DL>
<P>

  You can make URLs in the current buffer active with <KBD>M-x
goto-address</KBD>.  This finds all the URLs in the buffer, and establishes
bindings for <KBD>Mouse-2</KBD> and <KBD>C-c <KBD>RET</KBD></KBD> on them.  After
activation, if you click on a URL with <KBD>Mouse-2</KBD>, or move to a URL
and type <KBD>C-c <KBD>RET</KBD></KBD>, that will display the web page that the URL
specifies.  For a <SAMP>`mailto'</SAMP> URL, it sends mail instead, using your
selected mail-composition method (see section <A HREF="emacs_29.html#SEC373">Z.6 Mail-Composition Methods</A>).
</P><P>

  It can be useful to add <CODE>goto-address</CODE> to mode hooks and the
hooks used to display an incoming message.
<CODE>rmail-show-message-hook</CODE> is the appropriate hook for Rmail, and
<CODE>mh-show-mode-hook</CODE> for MH-E.  This is not needed for Gnus,
which has a similar feature of its own.
</P><P>

<A NAME="FFAP"></A>
<HR SIZE="6">
<A NAME="SEC471"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC470"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC472"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC472"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC468"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC473"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.28.3 Finding Files and URLs at Point </H3>
<!--docid::SEC471::-->
<P>

  FFAP mode replaces certain key bindings for finding files, including
<KBD>C-x C-f</KBD>, with commands that provide more sensitive defaults.
These commands behave like the ordinary ones when given a prefix
argument.  Otherwise, they get the default file name or URL from the
text around point.  If what is found in the buffer has the form of a
URL rather than a file name, the commands use <CODE>browse-url</CODE> to
view it.
</P><P>

  This feature is useful for following references in mail or news
buffers, <TT>`README'</TT> files, <TT>`MANIFEST'</TT> files, and so on.  The
<SAMP>`ffap'</SAMP> package's commentary available via <KBD>C-h p</KBD> and the
<CODE>ffap</CODE> Custom group provide details.
</P><P>

<A NAME="IDX2641"></A>
<A NAME="IDX2642"></A>
  You can turn on FFAP minor mode to make the following key bindings
and to install hooks for using <CODE>ffap</CODE> in Rmail, Gnus and VM
article buffers.
</P><P>

<DL COMPACT>
<DT><KBD>C-x C-f <VAR>filename</VAR> <KBD>RET</KBD></KBD>
<DD><A NAME="IDX2643"></A>
Find <VAR>filename</VAR>, guessing a default from text around point
(<CODE>find-file-at-point</CODE>).
<DT><KBD>C-x 4 f</KBD>
<DD><A NAME="IDX2644"></A>
<CODE>ffap-other-window</CODE>, analogous to <CODE>find-file-other-window</CODE>.
<DT><KBD>C-x 5 f</KBD>
<DD><A NAME="IDX2645"></A>
<CODE>ffap-other-frame</CODE>, analogous to <CODE>find-file-other-frame</CODE>.
<DT><KBD>M-x ffap-next</KBD>
<DD>Search buffer for next file name or URL, then find that file or URL.
<DT><KBD>C-x d <VAR>directory</VAR> <KBD>RET</KBD></KBD>
<DD><A NAME="IDX2646"></A>
Start Dired on <VAR>directory</VAR>, defaulting to the directory name at
point (<CODE>ffap-dired-at-point</CODE>).
<DT><KBD>S-Mouse-3</KBD>
<DD><A NAME="IDX2647"></A>
<CODE>ffap-at-mouse</CODE> finds the file guessed from text around the position
of a mouse click.
<DT><KBD>C-S-Mouse-3</KBD>
<DD><A NAME="IDX2648"></A>
Display a menu of files and URLs mentioned in current buffer, then
find the one you select (<CODE>ffap-menu</CODE>).
</DL>
<P>

<A NAME="Find-func"></A>
<HR SIZE="6">
<A NAME="SEC472"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC471"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC473"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC468"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC468"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC473"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AC.28.4 Finding Function and Variable Definitions </H3>
<!--docid::SEC472::-->
<P>

<DL COMPACT>
<DT><KBD>M-x find-function <KBD>RET</KBD> <VAR>function</VAR> <KBD>RET</KBD></KBD>
<DD>Find the definition of <VAR>function</VAR> in its source file.
<DT><KBD>M-x find-variable <KBD>RET</KBD> <VAR>variable</VAR> <KBD>RET</KBD></KBD>
<DD>Find the definition of <VAR>variable</VAR> in its source file.
<DT><KBD>M-x find-function-on-key <KBD>RET</KBD> <VAR>key</VAR></KBD>
<DD>Find the definition of the function that <VAR>key</VAR> invokes.
</DL>
<P>

  These commands provide an easy way to find the definitions of Emacs
Lisp functions and variables.  They are similar in purpose to the Tags
facility (see section <A HREF="emacs_26.html#SEC334">W.2 Tags Tables</A>), but don't require a tags table; on the other
hand, they only work for function and variable definitions that are
already loaded in the Emacs session.
</P><P>

<A NAME="IDX2649"></A>
<A NAME="IDX2650"></A>
<A NAME="IDX2651"></A>
  To find the definition of a function, use <KBD>M-x find-function</KBD>.
<KBD>M-x find-variable</KBD> finds the definition of a specified variable.
<KBD>M-x find-function-on-key</KBD> finds the definition of the function
bound to a specified key.
</P><P>

  To use these commands, you must have the Lisp source (<SAMP>`.el'</SAMP>)
files available along with the compiled (<SAMP>`.elc'</SAMP>) files, in
directories in <CODE>load-path</CODE>.  You can use compressed source files
if you enable Auto Compression mode.  These commands only handle
definitions written in Lisp, not primitive functions or variables
defined in the C code of Emacs.
</P><P>

<A NAME="Dissociated Press"></A>
<HR SIZE="6">
<A NAME="SEC473"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC472"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC474"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC468"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC474"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.29 Dissociated Press </H2>
<!--docid::SEC473::-->
<P>

<A NAME="IDX2652"></A>
  <KBD>M-x dissociated-press</KBD> is a command for scrambling a file of text
either word by word or character by character.  Starting from a buffer of
straight English, it produces extremely amusing output.  The input comes
from the current Emacs buffer.  Dissociated Press writes its output in a
buffer named <SAMP>`*Dissociation*'</SAMP>, and redisplays that buffer after every
couple of lines (approximately) so you can read the output as it comes out.
</P><P>

  Dissociated Press asks every so often whether to continue generating
output.  Answer <KBD>n</KBD> to stop it.  You can also stop at any time by
typing <KBD>C-g</KBD>.  The dissociation output remains in the
<SAMP>`*Dissociation*'</SAMP> buffer for you to copy elsewhere if you wish.
</P><P>

<A NAME="IDX2653"></A>
  Dissociated Press operates by jumping at random from one point in the
buffer to another.  In order to produce plausible output rather than
gibberish, it insists on a certain amount of overlap between the end of
one run of consecutive words or characters and the start of the next.
That is, if it has just output `president' and then decides to jump
to a different point in the file, it might spot the `ent' in `pentagon'
and continue from there, producing `presidentagon'.<A NAME="DOCF15" HREF="emacs_fot.html#FOOT15">(15)</A>  Long sample texts produce the best results.
</P><P>

<A NAME="IDX2654"></A>
  A positive argument to <KBD>M-x dissociated-press</KBD> tells it to operate
character by character, and specifies the number of overlap characters.  A
negative argument tells it to operate word by word and specifies the number
of overlap words.  In this mode, whole words are treated as the elements to
be permuted, rather than characters.  No argument is equivalent to an
argument of two.  For your againformation, the output goes only into the
buffer <SAMP>`*Dissociation*'</SAMP>.  The buffer you start with is not changed.
</P><P>

<A NAME="IDX2655"></A>
<A NAME="IDX2656"></A>
<A NAME="IDX2657"></A>
  Dissociated Press produces nearly the same results as a Markov chain
based on a frequency table constructed from the sample text.  It is,
however, an independent, ignoriginal invention.  Dissociated Press
techniquitously copies several consecutive characters from the sample
between random choices, whereas a Markov chain would choose randomly for
each word or character.  This makes for more plausible sounding results,
and runs faster.
</P><P>

<A NAME="IDX2658"></A>
<A NAME="IDX2659"></A>
<A NAME="IDX2660"></A>
<A NAME="IDX2661"></A>
<A NAME="IDX2662"></A>
<A NAME="IDX2663"></A>
  It is a mustatement that too much use of Dissociated Press can be a
developediment to your real work.  Sometimes to the point of outragedy.
And keep dissociwords out of your documentation, if you want it to be well
userenced and properbose.  Have fun.  Your buggestions are welcome.
</P><P>

<A NAME="Amusements"></A>
<HR SIZE="6">
<A NAME="SEC474"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC473"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC475"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC473"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC475"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AC.30 Other Amusements </H2>
<!--docid::SEC474::-->
<P>

  If you are a little bit bored, you can try <KBD>M-x hanoi</KBD>.  If you are
considerably bored, give it a numeric argument.  If you are very, very
bored, try an argument of 9.  Sit back and watch.
</P><P>

<A NAME="IDX2664"></A>
  If you want a little more personal involvement, try <KBD>M-x gomoku</KBD>,
which plays the game Go Moku with you.
</P><P>

<A NAME="IDX2665"></A>
<A NAME="IDX2666"></A>
<A NAME="IDX2667"></A>
<A NAME="IDX2668"></A>
  <KBD>M-x blackbox</KBD>, <KBD>M-x mpuz</KBD> and <KBD>M-x 5x5</KBD> are kinds of puzzles.
<CODE>blackbox</CODE> challenges you to determine the location of objects
inside a box by tomography.  <CODE>mpuz</CODE> displays a multiplication
puzzle with letters standing for digits in a code that you must
guess--to guess a value, type a letter and then the digit you think it
stands for.  The aim of <CODE>5x5</CODE> is to fill in all the squares.
</P><P>

<A NAME="IDX2669"></A>
<A NAME="IDX2670"></A>
<A NAME="IDX2671"></A>
<KBD>M-x decipher</KBD> helps you to cryptanalyze a buffer which is encrypted
in a simple monoalphabetic substitution cipher.
</P><P>

<A NAME="IDX2672"></A>
  <KBD>M-x dunnet</KBD> runs an adventure-style exploration game, which is
a bigger sort of puzzle.
</P><P>

<A NAME="IDX2673"></A>
<A NAME="IDX2674"></A>
<KBD>M-x lm</KBD> runs a relatively non-participatory game in which a robot
attempts to maneuver towards a tree at the center of the window based on
unique olfactory cues from each of the four directions.
</P><P>

<A NAME="IDX2675"></A>
<A NAME="IDX2676"></A>
<KBD>M-x life</KBD> runs Conway's "Life" cellular automaton.
</P><P>

<A NAME="IDX2677"></A>
<A NAME="IDX2678"></A>
<A NAME="IDX2679"></A>
<A NAME="IDX2680"></A>
<KBD>M-x morse-region</KBD> converts text in a region to Morse code and
<KBD>M-x unmorse-region</KBD> converts it back.  No cause for remorse.
</P><P>

<A NAME="IDX2681"></A>
<A NAME="IDX2682"></A>
<KBD>M-x pong</KBD> plays a Pong-like game, bouncing the ball off opposing
bats.
</P><P>

<A NAME="IDX2683"></A>
<A NAME="IDX2684"></A>
<KBD>M-x solitaire</KBD> plays a game of solitaire in which you jump pegs
across other pegs.
</P><P>

<A NAME="IDX2685"></A>
<A NAME="IDX2686"></A>
<KBD>M-x studlify-region</KBD> studlify-cases the region, producing
text like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>M-x stUdlIfY-RegioN stUdlIfY-CaSeS thE region.
</pre></td></tr></table></P><P>

<A NAME="IDX2687"></A>
<A NAME="IDX2688"></A>
<A NAME="IDX2689"></A>
<A NAME="IDX2690"></A>
<KBD>M-x tetris</KBD> runs an implementation of the well-known Tetris game.
Likewise, <KBD>M-x snake</KBD> provides an implementation of Snake.
</P><P>

  When you are frustrated, try the famous Eliza program.  Just do
<KBD>M-x doctor</KBD>.  End each input by typing <KBD>RET</KBD> twice.
</P><P>

<A NAME="IDX2691"></A>
  When you are feeling strange, type <KBD>M-x yow</KBD>.
</P><P>

<A NAME="IDX2692"></A>
The command <KBD>M-x zone</KBD> plays games with the display when Emacs is
idle.
<A NAME="Customization"></A>
<HR SIZE="6">
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC473"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC475"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated
on <I>April 2, 2002</I>
using <A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

</BODY>
</HTML>
