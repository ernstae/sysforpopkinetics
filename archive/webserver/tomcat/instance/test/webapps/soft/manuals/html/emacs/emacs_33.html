<HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created on April 2, 2002 by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HEAD>
<TITLE>GNU Emacs Manual: Customization</TITLE>

<META NAME="description" CONTENT="GNU Emacs Manual: Customization">
<META NAME="keywords" CONTENT="GNU Emacs Manual: Customization">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY LANG="EN" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC475"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC474"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC476"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_32.html#SEC474"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC510"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> AD. Customization </H1>
<!--docid::SEC475::-->
<P>

  This chapter talks about various topics relevant to adapting the
behavior of Emacs in minor ways.  See <CITE>The Emacs Lisp Reference
Manual</CITE> for how to make more far-reaching changes.
</P><P>

  Customization that you do within Emacs normally affects only the
particular Emacs session that you do it in--it does not persist
between sessions unless you save the customization in a file such as
<TT>`.emacs'</TT> or <TT>`.Xdefaults'</TT> that will affect future sessions.
See section <A HREF="emacs_33.html#SEC505">AD.7 The Init File, <TT>`~/.emacs'</TT></A>.  In the customization buffer, when you save
customizations for future sessions, this actually works by editing
<TT>`.emacs'</TT> for you.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC476">AD.1 Minor Modes</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Each minor mode is one feature you can turn on
			  independently of any others.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC477">AD.2 Variables</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Many Emacs commands examine Emacs variables
			  to decide what to do; by setting variables,
			  you can control their functioning.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC487">AD.3 Keyboard Macros</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">A keyboard macro records a sequence of
			  keystrokes to be replayed with a single
			  command.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC491">AD.4 Customizing Key Bindings</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">The keymaps say what command each key runs.
			  By changing them, you can "redefine keys".</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC503">AD.5 Keyboard Translations</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">If your keyboard passes an undesired code
			   for a key, you can tell Emacs to
			   substitute another code.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC504">AD.6 The Syntax Table</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">The syntax table controls how words and
			   expressions are parsed.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC505">AD.7 The Init File, <TT>`~/.emacs'</TT></A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to write common customizations in the</TD></TR>
</TABLE>
			&nbsp;&nbsp;<TT>`.emacs'</TT>&nbsp;file.&nbsp;
<br>
</BLOCKQUOTE>
<P>

<A NAME="Minor Modes"></A>
<HR SIZE="6">
<A NAME="SEC476"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC475"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC477"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC475"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC475"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC510"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AD.1 Minor Modes </H2>
<!--docid::SEC476::-->
<P>

  Minor modes are optional features which you can turn on or off.  For
example, Auto Fill mode is a minor mode in which <KBD>SPC</KBD> breaks lines
between words as you type.  All the minor modes are independent of each
other and of the selected major mode.  Most minor modes say in the mode
line when they are on; for example, <SAMP>`Fill'</SAMP> in the mode line means
that Auto Fill mode is on.
</P><P>

  Append <CODE>-mode</CODE> to the name of a minor mode to get the name of a
command function that turns the mode on or off.  Thus, the command to
enable or disable Auto Fill mode is called <KBD>M-x auto-fill-mode</KBD>.  These
commands are usually invoked with <KBD>M-x</KBD>, but you can bind keys to them
if you wish.  With no argument, the function turns the mode on if it was
off and off if it was on.  This is known as <EM>toggling</EM>.  A positive
argument always turns the mode on, and an explicit zero argument or a
negative argument always turns it off.
</P><P>

  Some minor modes are global: while enabled, they affect everything
you do in the Emacs session, in all buffers.  Other minor modes are
buffer-local; they apply only to the current buffer, so you can enable
the mode in certain buffers and not others.
</P><P>

  For most minor modes, the command name is also the name of a
variable which directly controls the mode.  The mode is enabled
whenever this variable's value is non-<CODE>nil</CODE>, and the minor-mode
command works by setting the variable.  For example, the command
<CODE>outline-minor-mode</CODE> works by setting the value of
<CODE>outline-minor-mode</CODE> as a variable; it is this variable that
directly turns Outline minor mode on and off.  To check whether a
given minor mode works this way, use <KBD>C-h v</KBD> to ask for
documentation on the variable name.
</P><P>

  These minor-mode variables provide a good way for Lisp programs to turn
minor modes on and off; they are also useful in a file's local variables
list.  But please think twice before setting minor modes with a local
variables list, because most minor modes are matter of user
preference--other users editing the same file might not want the same
minor modes you prefer.
</P><P>

  The buffer-local minor modes include Abbrev mode, Auto Fill mode,
Auto Save mode, Font-Lock mode, Glasses mode, ISO Accents mode,
Outline minor mode, Overwrite mode, and Binary Overwrite mode.
</P><P>

  Abbrev mode allows you to define abbreviations that automatically expand
as you type them.  For example, <SAMP>`amd'</SAMP> might expand to <SAMP>`abbrev
mode'</SAMP>.  See section <A HREF="emacs_27.html#SEC350">X. Abbrevs</A>, for full information.
</P><P>

  Auto Fill mode allows you to enter filled text without breaking lines
explicitly.  Emacs inserts newlines as necessary to prevent lines from
becoming too long.  See section <A HREF="emacs_23.html#SEC238">T.5 Filling Text</A>.
</P><P>

  Auto Save mode causes the contents of a buffer to be saved
periodically to reduce the amount of work you can lose in case of a
system crash.  See section <A HREF="emacs_16.html#SEC122">M.5 Auto-Saving: Protection Against Disasters</A>.
</P><P>

  Enriched mode enables editing and saving of formatted text.
See section <A HREF="emacs_23.html#SEC258">T.11 Editing Formatted Text</A>.
</P><P>

  Flyspell mode automatically highlights misspelled words.
See section <A HREF="emacs_15.html#SEC109">L.4 Checking and Correcting Spelling</A>.
</P><P>

  Font-Lock mode automatically highlights certain textual units found in
programs, such as comments, strings, and function names being defined.
This requires a window system that can display multiple fonts.
See section <A HREF="emacs_13.html#SEC78">J.1 Using Multiple Typefaces</A>.
</P><P>

  ISO Accents mode makes the characters <SAMP>``'</SAMP>, <SAMP>`''</SAMP>, <SAMP>`"'</SAMP>,
<SAMP>`^'</SAMP>, <SAMP>`/'</SAMP> and <SAMP>`~'</SAMP> combine with the following letter, to
produce an accented letter in the ISO Latin-1 character set.  The
newer and more general feature of input methods more or less
supersedes ISO Accents mode.  See section <A HREF="emacs_20.html#SEC226">Q.13 Single-byte Character Set Support</A>.
</P><P>

  Outline minor mode provides the same facilities as the major mode
called Outline mode; but since it is a minor mode instead, you can
combine it with any major mode.  See section <A HREF="emacs_23.html#SEC246">T.8 Outline Mode</A>.
</P><P>

<A NAME="IDX2693"></A>
<A NAME="IDX2694"></A>
  Overwrite mode causes ordinary printing characters to replace existing
text instead of shoving it to the right.  For example, if point is in
front of the <SAMP>`B'</SAMP> in <SAMP>`FOOBAR'</SAMP>, then in Overwrite mode typing a
<KBD>G</KBD> changes it to <SAMP>`FOOGAR'</SAMP>, instead of producing <SAMP>`FOOGBAR'</SAMP>
as usual.  In Overwrite mode, the command <KBD>C-q</KBD> inserts the next
character whatever it may be, even if it is a digit--this gives you a
way to insert a character instead of replacing an existing character.
</P><P>

<A NAME="IDX2695"></A>
<A NAME="IDX2696"></A>
  The command <CODE>overwrite-mode</CODE> is an exception to the rule that
commands which toggle minor modes are normally not bound to keys: it is
bound to the <KBD>INSERT</KBD> function key.  This is because many other
programs bind <KBD>INSERT</KBD> to similar functions.
</P><P>

<A NAME="IDX2697"></A>
  Binary Overwrite mode is a variant of Overwrite mode for editing
binary files; it treats newlines and tabs like other characters, so that
they overwrite other characters and can be overwritten by them.
In Binary Overwrite mode, digits after <KBD>C-q</KBD> specify an
octal character code, as usual.
</P><P>

  The following minor modes normally apply to all buffers at once.
Since each is enabled or disabled by the value of a variable, you
<EM>can</EM> set them differently for particular buffers, by explicitly
making the corresponding variables local in those buffers.
See section <A HREF="emacs_33.html#SEC485">AD.2.4 Local Variables</A>.
</P><P>

  Icomplete mode displays an indication of available completions when
you are in the minibuffer and completion is active.  See section <A HREF="emacs_8.html#SEC38">E.3.4 Completion Options</A>.
</P><P>

  Line Number mode enables continuous display in the mode line of the
line number of point, and Column Number mode enables display of the
column number.  See section <A HREF="emacs_5.html#SEC11">B.3 The Mode Line</A>.
</P><P>

  Scroll Bar mode gives each window a scroll bar (see section <A HREF="emacs_19.html#SEC204">P.13 Scroll Bars</A>).
Menu Bar mode gives each frame a menu bar (see section <A HREF="emacs_19.html#SEC206">P.15 Menu Bars</A>).  Both of
these modes are enabled by default when you use the X Window System.
</P><P>

  In Transient Mark mode, every change in the buffer contents
"deactivates" the mark, so that commands that operate on the region
will get an error.  This means you must either set the mark, or
explicitly "reactivate" it, before each command that uses the region.
The advantage of Transient Mark mode is that Emacs can display the
region highlighted (currently only when using X).  See section <A HREF="emacs_11.html#SEC52">H. The Mark and the Region</A>.
</P><P>

<A NAME="Variables"></A>
<HR SIZE="6">
<A NAME="SEC477"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC476"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC478"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC487"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC475"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC487"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AD.2 Variables </H2>
<!--docid::SEC477::-->
<P>

  A <EM>variable</EM> is a Lisp symbol which has a value.  The symbol's
name is also called the name of the variable.  A variable name can
contain any characters that can appear in a file, but conventionally
variable names consist of words separated by hyphens.  A variable can
have a documentation string which describes what kind of value it should
have and how the value will be used.
</P><P>

  Lisp allows any variable to have any kind of value, but most variables
that Emacs uses require a value of a certain type.  Often the value should
always be a string, or should always be a number.  Sometimes we say that a
certain feature is turned on if a variable is "non-<CODE>nil</CODE>," meaning
that if the variable's value is <CODE>nil</CODE>, the feature is off, but the
feature is on for <EM>any</EM> other value.  The conventional value to use to
turn on the feature--since you have to pick one particular value when you
set the variable--is <CODE>t</CODE>.
</P><P>

  Emacs uses many Lisp variables for internal record keeping, as any
Lisp program must, but the most interesting variables for you are the
ones that exist for the sake of customization.  Emacs does not (usually)
change the values of these variables; instead, you set the values, and
thereby alter and control the behavior of certain Emacs commands.  These
variables are called <EM>user options</EM>.  Most user options are
documented in this manual, and appear in the Variable Index
(see section <A HREF="emacs_44.html#SEC578">Variable Index</A>).
</P><P>

  One example of a variable which is a user option is <CODE>fill-column</CODE>, which
specifies the position of the right margin (as a number of characters from
the left margin) to be used by the fill commands (see section <A HREF="emacs_23.html#SEC238">T.5 Filling Text</A>).
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC478">AD.2.1 Examining and Setting Variables</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Examining or setting one variable's value.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC479">AD.2.2 Easy Customization Interface</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Convenient and easy customization of variables.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC484">AD.2.3 Hooks</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Hook variables let you specify programs for parts
		          of Emacs to run on particular occasions.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC485">AD.2.4 Local Variables</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Per-buffer values of variables.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC486">AD.2.5 Local Variables in Files</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How files can specify variable values.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Examining"></A>
<HR SIZE="6">
<A NAME="SEC478"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC477"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC479"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC487"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC477"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC487"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.2.1 Examining and Setting Variables </H3>
<!--docid::SEC478::-->
<P>

<DL COMPACT>
<DT><KBD>C-h v <VAR>var</VAR> <KBD>RET</KBD></KBD>
<DD>Display the value and documentation of variable <VAR>var</VAR>
(<CODE>describe-variable</CODE>).
<DT><KBD>M-x set-variable <KBD>RET</KBD> <VAR>var</VAR> <KBD>RET</KBD> <VAR>value</VAR> <KBD>RET</KBD></KBD>
<DD>Change the value of variable <VAR>var</VAR> to <VAR>value</VAR>.
</DL>
<P>

  To examine the value of a single variable, use <KBD>C-h v</KBD>
(<CODE>describe-variable</CODE>), which reads a variable name using the
minibuffer, with completion.  It displays both the value and the
documentation of the variable.  For example,
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>C-h v fill-column <KBD>RET</KBD>
</pre></td></tr></table></P><P>

displays something like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>fill-column's value is 70

Documentation:
*Column beyond which automatic line-wrapping should happen.
Automatically becomes buffer-local when set in any fashion.
</FONT></pre></td></tr></table></P><P>

The star at the beginning of the documentation indicates that this
variable is a user option.  <KBD>C-h v</KBD> is not restricted to user
options; it allows any variable name.
</P><P>

<A NAME="IDX2698"></A>
  The most convenient way to set a specific user option is with <KBD>M-x
set-variable</KBD>.  This reads the variable name with the minibuffer (with
completion), and then reads a Lisp expression for the new value using
the minibuffer a second time.  For example,
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>M-x set-variable <KBD>RET</KBD> fill-column <KBD>RET</KBD> 75 <KBD>RET</KBD>
</pre></td></tr></table></P><P>

sets <CODE>fill-column</CODE> to 75.
</P><P>

 <KBD>M-x set-variable</KBD> is limited to user option variables, but you can
set any variable with a Lisp expression, using the function <CODE>setq</CODE>.
Here is a <CODE>setq</CODE> expression to set <CODE>fill-column</CODE>:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq fill-column 75)
</pre></td></tr></table></P><P>

  To execute an expression like this one, go to the <SAMP>`*scratch*'</SAMP>
buffer, type in the expression, and then type <KBD>C-j</KBD>.  See section <A HREF="emacs_25.html#SEC330">V.9 Lisp Interaction Buffers</A>.
</P><P>

  Setting variables, like all means of customizing Emacs except where
otherwise stated, affects only the current Emacs session.
</P><P>

<A NAME="Easy Customization"></A>
<HR SIZE="6">
<A NAME="SEC479"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC478"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC480"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC484"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC477"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC484"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.2.2 Easy Customization Interface </H3>
<!--docid::SEC479::-->
<P>

<A NAME="IDX2699"></A>
<A NAME="IDX2700"></A>
  A convenient way to find the user option variables that you want to
change, and then change them, is with <KBD>M-x customize</KBD>.  This command
creates a <EM>customization buffer</EM> with which you can browse through
the Emacs user options in a logically organized structure, then edit and
set their values.  You can also use the customization buffer to save
settings permanently.  (Not all Emacs user options are included in this
structure as of yet, but we are adding the rest.)
</P><P>

The appearance of the example buffers in the following is typically
different under a window system where faces can be used to indicate the
active fields and other features.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC480">AD.2.2.1 Customization Groups</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How options are classified in a structure.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC481">AD.2.2.2 Changing an Option</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to edit a value and set an option.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC482">AD.2.2.3 Customizing Faces</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to edit the attributes of a face.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC483">AD.2.2.4 Customizing Specific Items</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Making a customization buffer for specific
                                options, faces, or groups.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Customization Groups"></A>
<HR SIZE="6">
<A NAME="SEC480"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC479"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC481"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC484"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC479"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC484"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> AD.2.2.1 Customization Groups </H4>
<!--docid::SEC480::-->
<P>

  For customization purposes, user options are organized into
<EM>groups</EM> to help you find them.  Groups are collected into bigger
groups, all the way up to a master group called <CODE>Emacs</CODE>.
</P><P>

  <KBD>M-x customize</KBD> creates a customization buffer that shows the
top-level <CODE>Emacs</CODE> group and the second-level groups immediately
under it.  It looks like this, in part:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>/- Emacs group: ---------------------------------------------------\
      [State]: visible group members are all at standard settings.
   Customization of the One True Editor.
   See also [Manual].

Confirm Kill Emacs: [Hide] [Value Menu] Don't confirm
   [State]: this option is unchanged from its standard setting.
How to ask for confirmation when leaving Emacs. [More]

Editing group: [Go to Group] 
Basic text editing facilities.

External group: [Go to Group] 
Interfacing to external utilities.

<VAR>more second-level groups</VAR>

\- Emacs group end ------------------------------------------------/

</FONT></pre></td></tr></table></P><P>

This says that the buffer displays the contents of the <CODE>Emacs</CODE>
group.  The other groups are listed because they are its contents.  But
they are listed differently, without indentation and dashes, because
<EM>their</EM> contents are not included.  Each group has a single-line
documentation string; the <CODE>Emacs</CODE> group also has a <SAMP>`[State]'</SAMP>
line.
</P><P>

<A NAME="IDX2701"></A>
<A NAME="IDX2702"></A>
  Most of the text in the customization buffer is read-only, but it
typically includes some <EM>editable fields</EM> that you can edit.  There
are also <EM>active fields</EM>; this means a field that does something
when you <EM>invoke</EM> it.  To invoke an active field, either click on it
with <KBD>Mouse-1</KBD>, or move point to it and type <KBD>RET</KBD>.
</P><P>

  For example, the phrase <SAMP>`[Go to Group]'</SAMP> that appears in a
second-level group is an active field.  Invoking the <SAMP>`[Go to
Group]'</SAMP> field for a group creates a new customization buffer, which
shows that group and its contents.  This field is a kind of hypertext
link to another group.
</P><P>

  The <CODE>Emacs</CODE> group includes a few user options itself, but
mainly it contains other groups, which contain more groups, which
contain the user options.  By browsing the hierarchy of groups, you
will eventually find the feature you are interested in customizing.
Then you can use the customization buffer to set the options and faces
pertaining to that feature.  You can also go straight to a particular
group by name, using the command <KBD>M-x customize-group</KBD>.
</P><P>

<A NAME="IDX2703"></A>
  You can view the structure of customization groups on a larger scale
with <KBD>M-x customize-browse</KBD>.  This command creates a special kind of
customization buffer which shows only the names of the groups (and
options and faces), and their structure.
</P><P>

  In this buffer, you can show the contents of a group by invoking
<SAMP>`[+]'</SAMP>.  When the group contents are visible, this button changes to
<SAMP>`[-]'</SAMP>; invoking that hides the group contents.
</P><P>

  Each group, option or face name in this buffer has an active field
which says <SAMP>`[Group]'</SAMP>, <SAMP>`[Option]'</SAMP> or <SAMP>`[Face]'</SAMP>.  Invoking
that active field creates an ordinary customization buffer showing just
that group and its contents, just that option, or just that face.
This is the way to set values in it.
</P><P>

<A NAME="Changing an Option"></A>
<HR SIZE="6">
<A NAME="SEC481"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC480"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC482"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC482"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC479"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC484"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> AD.2.2.2 Changing an Option </H4>
<!--docid::SEC481::-->
<P>

  Here is an example of what a user option looks like in the
customization buffer:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>Kill Ring Max: [Hide] 60
   [State]: this option is unchanged from its standard setting.
Maximum length of kill ring before oldest elements are thrown away.
</FONT></pre></td></tr></table></P><P>

  The text following <SAMP>`[Hide]'</SAMP>, <SAMP>`60'</SAMP> in this case, indicates
the current value of the option.  If you see <SAMP>`[Show]'</SAMP> instead of
<SAMP>`[Hide]'</SAMP>, it means that the value is hidden; the customization
buffer initially hides values that take up several lines.  Invoke
<SAMP>`[Show]'</SAMP> to show the value.
</P><P>

  The line after the option name indicates the <EM>customization state</EM>
of the option: in the example above, it says you have not changed the
option yet.  The word <SAMP>`[State]'</SAMP> at the beginning of this line is
active; you can get a menu of various operations by invoking it with
<KBD>Mouse-1</KBD> or <KBD>RET</KBD>.  These operations are essential for
customizing the variable.
</P><P>

  The line after the <SAMP>`[State]'</SAMP> line displays the beginning of the
option's documentation string.  If there are more lines of
documentation, this line ends with <SAMP>`[More]'</SAMP>; invoke this to show
the full documentation string.
</P><P>

  To enter a new value for <SAMP>`Kill Ring Max'</SAMP>, move point to the value
and edit it textually.  For example, you can type <KBD>M-d</KBD>, then insert
another number.
</P><P>

  When you begin to alter the text, you will see the <SAMP>`[State]'</SAMP> line
change to say that you have edited the value:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>[State]: you have edited the value as text, but not set the option.
</FONT></pre></td></tr></table></P><P>

<A NAME="IDX2704"></A>
  Editing the value does not actually set the option variable.  To do
that, you must <EM>set</EM> the option.  To do this, invoke the word
<SAMP>`[State]'</SAMP> and choose <SAMP>`Set for Current Session'</SAMP>.
</P><P>

  The state of the option changes visibly when you set it:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>[State]: you have set this option, but not saved it for future sessions.
</FONT></pre></td></tr></table></P><P>

   You don't have to worry about specifying a value that is not valid;
setting the option checks for validity and will not really install an
unacceptable value.
</P><P>

<A NAME="IDX2705"></A>
<A NAME="IDX2706"></A>
  While editing a value or field that is a file name, directory name,
command name, or anything else for which completion is defined, you can
type <KBD>M-<KBD>TAB</KBD></KBD> (<CODE>widget-complete</CODE>) to do completion.
</P><P>

  Some options have a small fixed set of possible legitimate values.
These options don't let you edit the value textually.  Instead, an
active field <SAMP>`[Value Menu]'</SAMP> appears before the value; invoke this
field to edit the value.  For a boolean "on or off" value, the active
field says <SAMP>`[Toggle]'</SAMP>, and it changes to the other value.
<SAMP>`[Value Menu]'</SAMP> and <SAMP>`[Toggle]'</SAMP> edit the buffer; the changes
take effect when you use the <SAMP>`Set for Current Session'</SAMP> operation.
</P><P>

  Some options have values with complex structure.  For example, the
value of <CODE>file-coding-system-alist</CODE> is an association list.  Here
is how it appears in the customization buffer:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>File Coding System Alist: [Hide]
[INS] [DEL] File regexp: \.elc\'
            Choice: [Value Menu] Encoding/decoding pair:
            Decoding: emacs-mule
            Encoding: emacs-mule
[INS] [DEL] File regexp: \(\`\|/\)loaddefs.el\'
            Choice: [Value Menu] Encoding/decoding pair:
            Decoding: raw-text
            Encoding: raw-text-unix
[INS] [DEL] File regexp: \.tar\'
            Choice: [Value Menu] Encoding/decoding pair:
            Decoding: no-conversion
            Encoding: no-conversion
[INS] [DEL] File regexp:
            Choice: [Value Menu] Encoding/decoding pair:
            Decoding: undecided
            Encoding: nil
[INS]
   [State]: this option is unchanged from its standard setting.
Alist to decide a coding system to use for a file I/O operation. [Hide]
The format is ((PATTERN . VAL) ...),
where PATTERN is a regular expression matching a file name,
[<small>...</small>more lines of documentation<small>...</small>]
</FONT></pre></td></tr></table></P><P>

Each association in the list appears on four lines, with several
editable or "active" fields.  You can edit the regexps and coding
systems using ordinary editing commands.  You can also invoke
<SAMP>`[Value Menu]'</SAMP> to switch to a kind of value--for instance, to
specify a function instead of a pair of coding systems.
</P><P>

To delete an association from the list, invoke the <SAMP>`[DEL]'</SAMP> button
for that item.  To add an association, invoke <SAMP>`[INS]'</SAMP> at the
position where you want to add it.  There is an <SAMP>`[INS]'</SAMP> button
between each pair of association, another at the beginning and another
at the end, so you can add the new association at any position in the
list.
</P><P>

<A NAME="IDX2707"></A>
<A NAME="IDX2708"></A>
<A NAME="IDX2709"></A>
<A NAME="IDX2710"></A>
  Two special commands, <KBD>TAB</KBD> and <KBD>S-<KBD>TAB</KBD></KBD>, are useful for
moving through the customization buffer.  <KBD>TAB</KBD>
(<CODE>widget-forward</CODE>) moves forward to the next active or editable
field; <KBD>S-<KBD>TAB</KBD></KBD> (<CODE>widget-backward</CODE>) moves backward to the
previous active or editable field.
</P><P>

  Typing <KBD>RET</KBD> on an editable field also moves forward, just like
<KBD>TAB</KBD>.  We set it up this way because people often type <KBD>RET</KBD>
when they are finished editing a field.  To insert a newline within an
editable field, use <KBD>C-o</KBD> or <KBD>C-q C-j</KBD>.
</P><P>

<A NAME="IDX2711"></A>
<A NAME="IDX2712"></A>
  Setting the option changes its value in the current Emacs session;
<EM>saving</EM> the value changes it for future sessions as well.  This
works by writing code into your <TT>`~/.emacs'</TT> file so as to set the
option variable again each time you start Emacs.  To save the option,
invoke <SAMP>`[State]'</SAMP> and select the <SAMP>`Save for Future Sessions'</SAMP>
operation.
</P><P>

  If Emacs was invoked with the <SAMP>`-q'</SAMP> or <SAMP>`--no-init-file'</SAMP>
options (see section <A HREF="emacs_34.html#SEC530">AE.2 Initial Options</A>), it will not let you save your
customizations in your <TT>`~/.emacs'</TT> init file.  This is because
saving customizations from such a session would wipe out all the other
customizations you might have on your init file.
</P><P>

  You can also restore the option to its standard value by invoking
<SAMP>`[State]'</SAMP> and selecting the <SAMP>`Erase Customization'</SAMP>
operation.  There are actually three reset operations:
</P><P>

<DL COMPACT>
<DT><SAMP>`Reset'</SAMP>
<DD>If you have made some modifications and not yet set the option,
this restores the text in the customization buffer to match
the actual value.
<P>

<DT><SAMP>`Reset to Saved'</SAMP>
<DD>This restores the value of the option to the last saved value,
and updates the text accordingly.
<P>

<DT><SAMP>`Erase Customization'</SAMP>
<DD>This sets the option to its standard value, and updates the text
accordingly.  This also eliminates any saved value for the option,
so that you will get the standard value in future Emacs sessions.
</DL>
<P>

<A NAME="IDX2713"></A>
  Sometimes it is useful to record a comment about a specific
customization.  Use the <SAMP>`Add Comment'</SAMP> item from the
<SAMP>`[State]'</SAMP> menu to create a field for entering the comment.  The
comment you enter will be saved, and displayed again if you again view
the same option in a customization buffer, even in another session.
</P><P>

  The state of a group indicates whether anything in that group has been
edited, set or saved.  You can select <SAMP>`Set for Current Session'</SAMP>,
<SAMP>`Save for Future Sessions'</SAMP> and the various kinds of <SAMP>`Reset'</SAMP>
operation for the group; these operations on the group apply to all
options in the group and its subgroups.
</P><P>

  Near the top of the customization buffer there are two lines
containing several active fields:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre> [Set for Current Session] [Save for Future Sessions]
 [Reset] [Reset to Saved] [Erase Customization]   [Finish]
</FONT></pre></td></tr></table></P><P>

<A NAME="IDX2714"></A>
Invoking <SAMP>`[Finish]'</SAMP> either buries or kills this customization
buffer according to the setting of the option
<CODE>custom-buffer-done-function</CODE>; the default is to bury the buffer.
Each of the other fields performs an operation--set, save or
reset--on each of the items in the buffer that could meaningfully be
set, saved or reset.
</P><P>

<A NAME="Face Customization"></A>
<HR SIZE="6">
<A NAME="SEC482"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC481"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC483"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC483"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC479"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC484"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> AD.2.2.3 Customizing Faces </H4>
<!--docid::SEC482::-->
<P>

  In addition to user options, some customization groups also include
faces.  When you show the contents of a group, both the user options and
the faces in the group appear in the customization buffer.  Here is an
example of how a face looks:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>Custom Changed Face: (sample) [Hide]
   [State]: this face is unchanged from its standard setting.
Parent groups: [Custom Magic Faces]
Attributes: [ ] Font family: [Value Menu] *
            [ ] Width: [Value Menu] *
            [ ] Height: [Value Menu] *
            [ ] Weight: [Value Menu] *
            [ ] Slant: [Value Menu] *
            [ ] Underline: [Value Menu] *
            [ ] Overline: [Value Menu] *
            [ ] Strike-through: [Value Menu] *
            [ ] Box around text: [Value Menu] *
            [ ] Inverse-video: [Value Menu] *
            [X] Foreground: [Value Menu] Color: white       (sample)
            [X] Background: [Value Menu] Color: blue        (sample)
            [ ] Stipple: [Value Menu] *
            [ ] Inherit:
</FONT></pre></td></tr></table></P><P>

  Each face attribute has its own line.  The <SAMP>`[<VAR>x</VAR>]'</SAMP> field
before the attribute name indicates whether the attribute is
<EM>enabled</EM>; <SAMP>`X'</SAMP> means that it is.  You can enable or disable the
attribute by invoking that field.  When the attribute is enabled, you
can change the attribute value in the usual ways.
</P><P>

  On a black-and-white display, the colors you can use for the
background are <SAMP>`black'</SAMP>, <SAMP>`white'</SAMP>, <SAMP>`gray'</SAMP>, <SAMP>`gray1'</SAMP>,
and <SAMP>`gray3'</SAMP>.  Emacs supports these shades of gray by using
background stipple patterns instead of a color.
</P><P>

  Setting, saving and resetting a face work like the same operations for
options (see section <A HREF="emacs_33.html#SEC481">AD.2.2.2 Changing an Option</A>).
</P><P>

  A face can specify different appearances for different types of
display.  For example, a face can make text red on a color display, but
use a bold font on a monochrome display.  To specify multiple
appearances for a face, select <SAMP>`Show all display specs'</SAMP> in the menu you
get from invoking <SAMP>`[State]'</SAMP>.
</P><P>

<A NAME="IDX2715"></A>
  Another more basic way to set the attributes of a specific face is
with <KBD>M-x modify-face</KBD>.  This command reads the name of a face, then
reads the attributes one by one.  For the color and stipple attributes,
the attribute's current value is the default--type just <KBD>RET</KBD> if
you don't want to change that attribute.  Type <SAMP>`none'</SAMP> if you want
to clear out the attribute.
</P><P>

<A NAME="Specific Customization"></A>
<HR SIZE="6">
<A NAME="SEC483"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC482"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC484"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC484"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC479"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC484"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H4> AD.2.2.4 Customizing Specific Items </H4>
<!--docid::SEC483::-->
<P>

  Instead of finding the options you want to change by moving down
through the structure of groups, you can specify the particular option,
face or group that you want to customize.
</P><P>

<DL COMPACT>
<DT><KBD>M-x customize-option <KBD>RET</KBD> <VAR>option</VAR> <KBD>RET</KBD></KBD>
<DD>Set up a customization buffer with just one option, <VAR>option</VAR>.
<DT><KBD>M-x customize-face <KBD>RET</KBD> <VAR>face</VAR> <KBD>RET</KBD></KBD>
<DD>Set up a customization buffer with just one face, <VAR>face</VAR>.
<DT><KBD>M-x customize-group <KBD>RET</KBD> <VAR>group</VAR> <KBD>RET</KBD></KBD>
<DD>Set up a customization buffer with just one group, <VAR>group</VAR>.
<DT><KBD>M-x customize-apropos <KBD>RET</KBD> <VAR>regexp</VAR> <KBD>RET</KBD></KBD>
<DD>Set up a customization buffer with all the options, faces and groups
that match <VAR>regexp</VAR>.
<DT><KBD>M-x customize-changed-options <KBD>RET</KBD> <VAR>version</VAR> <KBD>RET</KBD></KBD>
<DD>Set up a customization buffer with all the options, faces and groups
whose meaning has changed since Emacs version <VAR>version</VAR>.
<DT><KBD>M-x customize-saved</KBD>
<DD>Set up a customization buffer containing all options and faces that you
have saved with customization buffers.
<DT><KBD>M-x customize-customized</KBD>
<DD>Set up a customization buffer containing all options and faces that you
have customized but not saved.
</DL>
<P>

<A NAME="IDX2716"></A>
  If you want to alter a particular user option variable with the
customization buffer, and you know its name, you can use the command
<KBD>M-x customize-option</KBD> and specify the option name.  This sets up
the customization buffer with just one option--the one that you asked
for.  Editing, setting and saving the value work as described above, but
only for the specified option.
</P><P>

<A NAME="IDX2717"></A>
  Likewise, you can modify a specific face, chosen by name, using
<KBD>M-x customize-face</KBD>.
</P><P>

<A NAME="IDX2718"></A>
  You can also set up the customization buffer with a specific group,
using <KBD>M-x customize-group</KBD>.  The immediate contents of the chosen
group, including option variables, faces, and other groups, all appear
as well.  However, these subgroups' own contents start out hidden.  You
can show their contents in the usual way, by invoking <SAMP>`[Show]'</SAMP>.
</P><P>

<A NAME="IDX2719"></A>
  To control more precisely what to customize, you can use <KBD>M-x
customize-apropos</KBD>.  You specify a regular expression as argument; then
all options, faces and groups whose names match this regular expression
are set up in the customization buffer.  If you specify an empty regular
expression, this includes <EM>all</EM> groups, options and faces in the
customization buffer (but that takes a long time).
</P><P>

<A NAME="IDX2720"></A>
  When you upgrade to a new Emacs version, you might want to customize
new options and options whose meanings or default values have changed.
To do this, use <KBD>M-x customize-changed-options</KBD> and specify a
previous Emacs version number using the minibuffer.  It creates a
customization buffer which shows all the options (and groups) whose
definitions have been changed since the specified version.
</P><P>

<A NAME="IDX2721"></A>
<A NAME="IDX2722"></A>
  If you change option values and then decide the change was a mistake,
you can use two special commands to revisit your previous changes.  Use
<KBD>M-x customize-saved</KBD> to look at the options and faces that you have
saved.  Use <KBD>M-x customize-customized</KBD> to look at the options and
faces that you have set but not saved.
</P><P>

<A NAME="Hooks"></A>
<HR SIZE="6">
<A NAME="SEC484"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC483"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC485"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC485"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC477"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC487"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.2.3 Hooks </H3>
<!--docid::SEC484::-->
<P>

  <EM>Hooks</EM> are an important mechanism for customization of Emacs.  A
hook is a Lisp variable which holds a list of functions, to be called on
some well-defined occasion.  (This is called <EM>running the hook</EM>.)
The individual functions in the list are called the <EM>hook functions</EM>
of the hook.  With rare exceptions, hooks in Emacs are empty when Emacs
starts up, so the only hook functions in any given hook are the ones you
explicitly put there as customization.
</P><P>

  Most major modes run one or more <EM>mode hooks</EM> as the last step of
initialization.  This makes it easy for you to customize the behavior of
the mode, by setting up a hook function to override the local variable
assignments already made by the mode.  But hooks are also used in other
contexts.  For example, the hook <CODE>suspend-hook</CODE> runs just before
Emacs suspends itself (see section <A HREF="emacs_6.html#SEC18">C.1 Exiting Emacs</A>).
</P><P>

<A NAME="IDX2723"></A>
  Most Emacs hooks are <EM>normal hooks</EM>.  This means that running the
hook operates by calling all the hook functions, unconditionally, with
no arguments.  We have made an effort to keep most hooks normal so that
you can use them in a uniform way.  Every variable in Emacs whose name
ends in <SAMP>`-hook'</SAMP> is a normal hook.
</P><P>

<A NAME="IDX2724"></A>
  There are also a few <EM>abnormal hooks</EM>.  These variables' names end
in <SAMP>`-hooks'</SAMP> or <SAMP>`-functions'</SAMP>, instead of <SAMP>`-hook'</SAMP>.  What
makes these hooks abnormal is that there is something peculiar about the
way its functions are called--perhaps they are given arguments, or
perhaps the values they return are used in some way.  For example,
<CODE>find-file-not-found-hooks</CODE> (see section <A HREF="emacs_16.html#SEC112">M.2 Visiting Files</A>) is abnormal because
as soon as one hook function returns a non-<CODE>nil</CODE> value, the rest
are not called at all.  The documentation of each abnormal hook variable
explains in detail what is peculiar about it.
</P><P>

  The recommended way to add a hook function to a hook (either normal or
abnormal) is by calling <CODE>add-hook</CODE>.  You can use any valid Lisp
function as the hook function, provided it can handle the proper number
of arguments (zero arguments, in the case of a normal hook).  Of course,
not every Lisp function is <EM>useful</EM> in any particular hook.
</P><P>

  For example, here's how to set up a hook to turn on Auto Fill mode
when entering Text mode and other modes based on Text mode:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(add-hook 'text-mode-hook 'turn-on-auto-fill)
</pre></td></tr></table></P><P>

  The next example shows how to use a hook to customize the indentation
of C code.  (People often have strong personal preferences for one
format compared to another.)  Here the hook function is an anonymous
lambda expression.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq my-c-style
  '((c-comment-only-line-offset . 4)
    (c-cleanup-list . (scope-operator
		       empty-defun-braces
		       defun-close-semi))
    (c-offsets-alist . ((arglist-close . c-lineup-arglist)
			(substatement-open . 0)))))

(add-hook 'c-mode-common-hook
  '(lambda ()
     (c-add-style "my-style" my-c-style t)))
</pre></td></tr></table></P><P>

  It is best to design your hook functions so that the order in which
they are executed does not matter.  Any dependence on the order is
"asking for trouble."  However, the order is predictable: the most
recently added hook functions are executed first.
</P><P>

<A NAME="Locals"></A>
<HR SIZE="6">
<A NAME="SEC485"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC484"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC486"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC486"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC477"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC487"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.2.4 Local Variables </H3>
<!--docid::SEC485::-->
<P>

<DL COMPACT>
<DT><KBD>M-x make-local-variable <KBD>RET</KBD> <VAR>var</VAR> <KBD>RET</KBD></KBD>
<DD>Make variable <VAR>var</VAR> have a local value in the current buffer.
<DT><KBD>M-x kill-local-variable <KBD>RET</KBD> <VAR>var</VAR> <KBD>RET</KBD></KBD>
<DD>Make variable <VAR>var</VAR> use its global value in the current buffer.
<DT><KBD>M-x make-variable-buffer-local <KBD>RET</KBD> <VAR>var</VAR> <KBD>RET</KBD></KBD>
<DD>Mark variable <VAR>var</VAR> so that setting it will make it local to the
buffer that is current at that time.
</DL>
<P>

<A NAME="IDX2725"></A>
  Almost any variable can be made <EM>local</EM> to a specific Emacs
buffer.  This means that its value in that buffer is independent of its
value in other buffers.  A few variables are always local in every
buffer.  Every other Emacs variable has a <EM>global</EM> value which is in
effect in all buffers that have not made the variable local.
</P><P>

<A NAME="IDX2726"></A>
  <KBD>M-x make-local-variable</KBD> reads the name of a variable and makes it
local to the current buffer.  Further changes in this buffer will not
affect others, and further changes in the global value will not affect this
buffer.
</P><P>

<A NAME="IDX2727"></A>
<A NAME="IDX2728"></A>
  <KBD>M-x make-variable-buffer-local</KBD> reads the name of a variable and
changes the future behavior of the variable so that it will become local
automatically when it is set.  More precisely, once a variable has been
marked in this way, the usual ways of setting the variable automatically
do <CODE>make-local-variable</CODE> first.  We call such variables
<EM>per-buffer</EM> variables.
</P><P>

  Major modes (see section <A HREF="emacs_21.html#SEC227">R. Major Modes</A>) always make variables local to the
buffer before setting the variables.  This is why changing major modes
in one buffer has no effect on other buffers.  Minor modes also work by
setting variables--normally, each minor mode has one controlling
variable which is non-<CODE>nil</CODE> when the mode is enabled (see section <A HREF="emacs_33.html#SEC476">AD.1 Minor Modes</A>).  For most minor modes, the controlling variable is per buffer.
</P><P>

  Emacs contains a number of variables that are always per-buffer.
These include <CODE>abbrev-mode</CODE>, <CODE>auto-fill-function</CODE>,
<CODE>case-fold-search</CODE>, <CODE>comment-column</CODE>, <CODE>ctl-arrow</CODE>,
<CODE>fill-column</CODE>, <CODE>fill-prefix</CODE>, <CODE>indent-tabs-mode</CODE>,
<CODE>left-margin</CODE>, <CODE>mode-line-format</CODE>, <CODE>overwrite-mode</CODE>,
<CODE>selective-display-ellipses</CODE>, <CODE>selective-display</CODE>,
<CODE>tab-width</CODE>, and <CODE>truncate-lines</CODE>.  Some other variables are
always local in every buffer, but they are used for internal
purposes.</P><P>

  A few variables cannot be local to a buffer because they are always
local to each display instead (see section <A HREF="emacs_19.html#SEC201">P.10 Multiple Displays</A>).  If you try to
make one of these variables buffer-local, you'll get an error message.
</P><P>

<A NAME="IDX2729"></A>
  <KBD>M-x kill-local-variable</KBD> reads the name of a variable and makes
it cease to be local to the current buffer.  The global value of the
variable henceforth is in effect in this buffer.  Setting the major mode
kills all the local variables of the buffer except for a few variables
specially marked as <EM>permanent locals</EM>.
</P><P>

<A NAME="IDX2730"></A>
  To set the global value of a variable, regardless of whether the
variable has a local value in the current buffer, you can use the Lisp
construct <CODE>setq-default</CODE>.  This construct is used just like
<CODE>setq</CODE>, but it sets variables' global values instead of their local
values (if any).  When the current buffer does have a local value, the
new global value may not be visible until you switch to another buffer.
Here is an example:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq-default fill-column 75)
</pre></td></tr></table></P><P>

<CODE>setq-default</CODE> is the only way to set the global value of a variable
that has been marked with <CODE>make-variable-buffer-local</CODE>.
</P><P>

<A NAME="IDX2731"></A>
  Lisp programs can use <CODE>default-value</CODE> to look at a variable's
default value.  This function takes a symbol as argument and returns its
default value.  The argument is evaluated; usually you must quote it
explicitly.  For example, here's how to obtain the default value of
<CODE>fill-column</CODE>:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(default-value 'fill-column)
</pre></td></tr></table></P><P>

<A NAME="File Variables"></A>
<HR SIZE="6">
<A NAME="SEC486"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC485"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC487"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC487"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC477"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC487"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.2.5 Local Variables in Files </H3>
<!--docid::SEC486::-->
<P>

  A file can specify local variable values for use when you edit the
file with Emacs.  Visiting the file checks for local variable
specifications; it automatically makes these variables local to the
buffer, and sets them to the values specified in the file.
</P><P>

  There are two ways to specify local variable values: in the first
line, or with a local variables list.  Here's how to specify them in the
first line:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>-*- mode: <VAR>modename</VAR>; <VAR>var</VAR>: <VAR>value</VAR>; <small>...</small> -*-
</pre></td></tr></table></P><P>

You can specify any number of variables/value pairs in this way, each
pair with a colon and semicolon as shown above.  <CODE>mode:
<VAR>modename</VAR>;</CODE> specifies the major mode; this should come first in the
line.  The <VAR>value</VAR>s are not evaluated; they are used literally.
Here is an example that specifies Lisp mode and sets two variables with
numeric values:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>;; -*- mode: Lisp; fill-column: 75; comment-column: 50; -*-
</FONT></pre></td></tr></table></P><P>

  You can also specify the coding system for a file in this way: just
specify a value for the "variable" named <CODE>coding</CODE>.  The "value"
must be a coding system name that Emacs recognizes.  See section <A HREF="emacs_20.html#SEC220">Q.7 Coding Systems</A>.
</P><P>

  The <CODE>eval</CODE> pseudo-variable, described below, can be specified in
the first line as well.
</P><P>

<A NAME="IDX2732"></A>
  In shell scripts, the first line is used to identify the script
interpreter, so you cannot put any local variables there.  To accommodate
for this, when Emacs visits a shell script, it looks for local variable
specifications in the <EM>second</EM> line.
</P><P>

  A <EM>local variables list</EM> goes near the end of the file, in the
last page.  (It is often best to put it on a page by itself.)  The local
variables list starts with a line containing the string <SAMP>`Local
Variables:'</SAMP>, and ends with a line containing the string <SAMP>`End:'</SAMP>.  In
between come the variable names and values, one set per line, as
<SAMP>`<VAR>variable</VAR>: <VAR>value</VAR>'</SAMP>.  The <VAR>value</VAR>s are not
evaluated; they are used literally.  If a file has both a local
variables list and a <SAMP>`-*-'</SAMP> line, Emacs processes <EM>everything</EM>
in the <SAMP>`-*-'</SAMP> line first, and <EM>everything</EM> in the local
variables list afterward.
</P><P>

Here is an example of a local variables list:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>;;; Local Variables: ***
;;; mode:lisp ***
;;; comment-column:0 ***
;;; comment-start: ";;; "  ***
;;; comment-end:"***" ***
;;; End: ***
</pre></td></tr></table></P><P>

  As you see, each line starts with the prefix <SAMP>`;;; '</SAMP> and each line
ends with the suffix <SAMP>` ***'</SAMP>.  Emacs recognizes these as the prefix
and suffix based on the first line of the list, by finding them
surrounding the magic string <SAMP>`Local Variables:'</SAMP>; then it
automatically discards them from the other lines of the list.
</P><P>

  The usual reason for using a prefix and/or suffix is to embed the
local variables list in a comment, so it won't confuse other programs
that the file is intended as input for.  The example above is for a
language where comment lines start with <SAMP>`;;; '</SAMP> and end with
<SAMP>`***'</SAMP>; the local values for <CODE>comment-start</CODE> and
<CODE>comment-end</CODE> customize the rest of Emacs for this unusual syntax.
Don't use a prefix (or a suffix) if you don't need one.
</P><P>

  Two "variable names" have special meanings in a local variables
list: a value for the variable <CODE>mode</CODE> really sets the major mode,
and a value for the variable <CODE>eval</CODE> is simply evaluated as an
expression and the value is ignored.  <CODE>mode</CODE> and <CODE>eval</CODE> are
not real variables; setting variables named <CODE>mode</CODE> and <CODE>eval</CODE>
in any other context has no special meaning.  <EM>If <CODE>mode</CODE> is
used to set a major mode, it should be the first "variable" in the
list.</EM>  Otherwise, the entries that precede it in the list of the local
variables are likely to be ignored, since most modes kill all local
variables as part of their initialization.
</P><P>

  You can use the <CODE>mode</CODE> "variable" to set minor modes as well as
major modes; in fact, you can use it more than once, first to set the
major mode and then to set minor modes which are specific to particular
buffers.  But most minor modes should not be specified in the file in
any fashion, because they represent user preferences.
</P><P>

  For example, you may be tempted to try to turn on Auto Fill mode with
a local variable list.  That is a mistake.  The choice of Auto Fill mode
or not is a matter of individual taste, not a matter of the contents of
particular files.  If you want to use Auto Fill, set up major mode hooks
with your <TT>`.emacs'</TT> file to turn it on (when appropriate) for you
alone (see section <A HREF="emacs_33.html#SEC505">AD.7 The Init File, <TT>`~/.emacs'</TT></A>).  Don't use a local variable list to impose
your taste on everyone.
</P><P>

  The start of the local variables list must be no more than 3000
characters from the end of the file, and must be in the last page if the
file is divided into pages.  Otherwise, Emacs will not notice it is
there.  The purpose of this rule is so that a stray <SAMP>`Local
Variables:'</SAMP> not in the last page does not confuse Emacs, and so that
visiting a long file that is all one page and has no local variables
list need not take the time to search the whole file.
</P><P>

  Use the command <CODE>normal-mode</CODE> to reset the local variables and
major mode of a buffer according to the file name and contents,
including the local variables list if any.  See section <A HREF="emacs_21.html#SEC228">R.1 How Major Modes are Chosen</A>.
</P><P>

<A NAME="IDX2733"></A>
  The variable <CODE>enable-local-variables</CODE> controls whether to process
local variables in files, and thus gives you a chance to override them.
Its default value is <CODE>t</CODE>, which means do process local variables in
files.  If you set the value to <CODE>nil</CODE>, Emacs simply ignores local
variables in files.  Any other value says to query you about each file
that has local variables, showing you the local variable specifications
so you can judge.
</P><P>

<A NAME="IDX2734"></A>
  The <CODE>eval</CODE> "variable," and certain actual variables, create a
special risk; when you visit someone else's file, local variable
specifications for these could affect your Emacs in arbitrary ways.
Therefore, the option <CODE>enable-local-eval</CODE> controls whether Emacs
processes <CODE>eval</CODE> variables, as well variables with names that end
in <SAMP>`-hook'</SAMP>, <SAMP>`-hooks'</SAMP>, <SAMP>`-function'</SAMP> or <SAMP>`-functions'</SAMP>,
and certain other variables.  The three possibilities for the option's
value are <CODE>t</CODE>, <CODE>nil</CODE>, and anything else, just as for
<CODE>enable-local-variables</CODE>.  The default is <CODE>maybe</CODE>, which is
neither <CODE>t</CODE> nor <CODE>nil</CODE>, so normally Emacs does ask for
confirmation about file settings for these variables.
</P><P>

<A NAME="Keyboard Macros"></A>
<HR SIZE="6">
<A NAME="SEC487"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC486"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC488"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC491"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC475"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC491"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AD.3 Keyboard Macros </H2>
<!--docid::SEC487::-->
<P>

<A NAME="IDX2735"></A>
<A NAME="IDX2736"></A>
  A <EM>keyboard macro</EM> is a command defined by the user to stand for
another sequence of keys.  For example, if you discover that you are
about to type <KBD>C-n C-d</KBD> forty times, you can speed your work by
defining a keyboard macro to do <KBD>C-n C-d</KBD> and calling it with a
repeat count of forty.
</P><P>

<DL COMPACT>
<DT><KBD>C-x (</KBD>
<DD>Start defining a keyboard macro (<CODE>start-kbd-macro</CODE>).
<DT><KBD>C-x )</KBD>
<DD>End the definition of a keyboard macro (<CODE>end-kbd-macro</CODE>).
<DT><KBD>C-x e</KBD>
<DD>Execute the most recent keyboard macro (<CODE>call-last-kbd-macro</CODE>).
<DT><KBD>C-u C-x (</KBD>
<DD>Re-execute last keyboard macro, then add more keys to its definition.
<DT><KBD>C-x q</KBD>
<DD>When this point is reached during macro execution, ask for confirmation
(<CODE>kbd-macro-query</CODE>).
<DT><KBD>M-x name-last-kbd-macro</KBD>
<DD>Give a command name (for the duration of the session) to the most
recently defined keyboard macro.
<DT><KBD>M-x insert-kbd-macro</KBD>
<DD>Insert in the buffer a keyboard macro's definition, as Lisp code.
<DT><KBD>C-x C-k</KBD>
<DD>Edit a previously defined keyboard macro (<CODE>edit-kbd-macro</CODE>).
<DT><KBD>M-x apply-macro-to-region-lines</KBD>
<DD>Run the last keyboard macro on each complete line in the region.
</DL>
<P>

  Keyboard macros differ from ordinary Emacs commands in that they are
written in the Emacs command language rather than in Lisp.  This makes it
easier for the novice to write them, and makes them more convenient as
temporary hacks.  However, the Emacs command language is not powerful
enough as a programming language to be useful for writing anything
intelligent or general.  For such things, Lisp must be used.
</P><P>

  You define a keyboard macro while executing the commands which are the
definition.  Put differently, as you define a keyboard macro, the
definition is being executed for the first time.  This way, you can see
what the effects of your commands are, so that you don't have to figure
them out in your head.  When you are finished, the keyboard macro is
defined and also has been, in effect, executed once.  You can then do the
whole thing over again by invoking the macro.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC488">AD.3.1 Basic Use</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Defining and running keyboard macros.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC489">AD.3.2 Naming and Saving Keyboard Macros</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Giving keyboard macros names; saving them in files.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC490">AD.3.3 Executing Macros with Variations</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Making keyboard macros do different things each time.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Basic Kbd Macro"></A>
<HR SIZE="6">
<A NAME="SEC488"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC487"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC489"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC491"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC487"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC491"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.3.1 Basic Use </H3>
<!--docid::SEC488::-->
<P>

<A NAME="IDX2737"></A>
<A NAME="IDX2738"></A>
<A NAME="IDX2739"></A>
<A NAME="IDX2740"></A>
<A NAME="IDX2741"></A>
<A NAME="IDX2742"></A>
  To start defining a keyboard macro, type the <KBD>C-x (</KBD> command
(<CODE>start-kbd-macro</CODE>).  From then on, your keys continue to be
executed, but also become part of the definition of the macro.  <SAMP>`Def'</SAMP>
appears in the mode line to remind you of what is going on.  When you are
finished, the <KBD>C-x )</KBD> command (<CODE>end-kbd-macro</CODE>) terminates the
definition (without becoming part of it!).  For example,
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>C-x ( M-f foo C-x )
</pre></td></tr></table></P><P>

defines a macro to move forward a word and then insert <SAMP>`foo'</SAMP>.
</P><P>

  The macro thus defined can be invoked again with the <KBD>C-x e</KBD>
command (<CODE>call-last-kbd-macro</CODE>), which may be given a repeat count
as a numeric argument to execute the macro many times.  <KBD>C-x )</KBD> can
also be given a repeat count as an argument, in which case it repeats
the macro that many times right after defining it, but defining the
macro counts as the first repetition (since it is executed as you define
it).  Therefore, giving <KBD>C-x )</KBD> an argument of 4 executes the macro
immediately 3 additional times.  An argument of zero to <KBD>C-x e</KBD> or
<KBD>C-x )</KBD> means repeat the macro indefinitely (until it gets an error
or you type <KBD>C-g</KBD> or, on MS-DOS, <KBD>C-<KBD>BREAK</KBD></KBD>).
</P><P>

  If you wish to repeat an operation at regularly spaced places in the
text, define a macro and include as part of the macro the commands to move
to the next place you want to use it.  For example, if you want to change
each line, you should position point at the start of a line, and define a
macro to change that line and leave point at the start of the next line.
Then repeating the macro will operate on successive lines.
</P><P>

  When a command reads an argument with the minibuffer, your
minibuffer input becomes part of the macro along with the command.  So
when you replay the macro, the command gets the same argument as
when you entered the macro.  For example,
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>C-x ( C-a C-<KBD>SPC</KBD> C-n M-w C-x b f o o <KBD>RET</KBD> C-y C-x b <KBD>RET</KBD> C-x )
</pre></td></tr></table></P><P>

defines a macro that copies the current line into the buffer
<SAMP>`foo'</SAMP>, then returns to the original buffer.
</P><P>

  You can use function keys in a keyboard macro, just like keyboard
keys.  You can even use mouse events, but be careful about that: when
the macro replays the mouse event, it uses the original mouse position
of that event, the position that the mouse had while you were defining
the macro.  The effect of this may be hard to predict.  (Using the
current mouse position would be even less predictable.)
</P><P>

  One thing that doesn't always work well in a keyboard macro is the
command <KBD>C-M-c</KBD> (<CODE>exit-recursive-edit</CODE>).  When this command
exits a recursive edit that started within the macro, it works as you'd
expect.  But if it exits a recursive edit that started before you
invoked the keyboard macro, it also necessarily exits the keyboard macro
as part of the process.
</P><P>

  After you have terminated the definition of a keyboard macro, you can add
to the end of its definition by typing <KBD>C-u C-x (</KBD>.  This is equivalent
to plain <KBD>C-x (</KBD> followed by retyping the whole definition so far.  As
a consequence it re-executes the macro as previously defined.
</P><P>

<A NAME="IDX2743"></A>
<A NAME="IDX2744"></A>
  You can edit a keyboard macro already defined by typing <KBD>C-x C-k</KBD>
(<CODE>edit-kbd-macro</CODE>).  Follow that with the keyboard input that you
would use to invoke the macro---<KBD>C-x e</KBD> or <KBD>M-x <VAR>name</VAR></KBD> or
some other key sequence.  This formats the macro definition in a buffer
and enters a specialized major mode for editing it.  Type <KBD>C-h m</KBD>
once in that buffer to display details of how to edit the macro.  When
you are finished editing, type <KBD>C-c C-c</KBD>.
</P><P>

<A NAME="IDX2745"></A>
  The command <KBD>M-x apply-macro-to-region-lines</KBD> repeats the last
defined keyboard macro on each complete line within the current region.
It does this line by line, by moving point to the beginning of the line
and then executing the macro.
</P><P>

<A NAME="Save Kbd Macro"></A>
<HR SIZE="6">
<A NAME="SEC489"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC488"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC490"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC490"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC487"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC491"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.3.2 Naming and Saving Keyboard Macros </H3>
<!--docid::SEC489::-->
<P>

<A NAME="IDX2746"></A>
<A NAME="IDX2747"></A>
  If you wish to save a keyboard macro for longer than until you define the
next one, you must give it a name using <KBD>M-x name-last-kbd-macro</KBD>.
This reads a name as an argument using the minibuffer and defines that name
to execute the macro.  The macro name is a Lisp symbol, and defining it in
this way makes it a valid command name for calling with <KBD>M-x</KBD> or for
binding a key to with <CODE>global-set-key</CODE> (see section <A HREF="emacs_33.html#SEC492">AD.4.1 Keymaps</A>).  If you
specify a name that has a prior definition other than another keyboard
macro, an error message is shown and nothing is changed.
</P><P>

<A NAME="IDX2748"></A>
  Once a macro has a command name, you can save its definition in a file.
Then it can be used in another editing session.  First, visit the file
you want to save the definition in.  Then use this command:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>M-x insert-kbd-macro <KBD>RET</KBD> <VAR>macroname</VAR> <KBD>RET</KBD>
</pre></td></tr></table></P><P>

This inserts some Lisp code that, when executed later, will define the
same macro with the same definition it has now.  (You need not
understand Lisp code to do this, because <CODE>insert-kbd-macro</CODE> writes
the Lisp code for you.)  Then save the file.  You can load the file
later with <CODE>load-file</CODE> (see section <A HREF="emacs_25.html#SEC328">V.7 Libraries of Lisp Code for Emacs</A>).  If the file you
save in is your init file <TT>`~/.emacs'</TT> (see section <A HREF="emacs_33.html#SEC505">AD.7 The Init File, <TT>`~/.emacs'</TT></A>) then the
macro will be defined each time you run Emacs.
</P><P>

  If you give <CODE>insert-kbd-macro</CODE> a numeric argument, it makes
additional Lisp code to record the keys (if any) that you have bound to the
keyboard macro, so that the macro will be reassigned the same keys when you
load the file.
</P><P>

<A NAME="Kbd Macro Query"></A>
<HR SIZE="6">
<A NAME="SEC490"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC489"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC491"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC491"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC487"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC491"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.3.3 Executing Macros with Variations </H3>
<!--docid::SEC490::-->
<P>

<A NAME="IDX2749"></A>
<A NAME="IDX2750"></A>
  Using <KBD>C-x q</KBD> (<CODE>kbd-macro-query</CODE>), you can get an effect
similar to that of <CODE>query-replace</CODE>, where the macro asks you each
time around whether to make a change.  While defining the macro,
type <KBD>C-x q</KBD> at the point where you want the query to occur.  During
macro definition, the <KBD>C-x q</KBD> does nothing, but when you run the
macro later, <KBD>C-x q</KBD> asks you interactively whether to continue.
</P><P>

  The valid responses when <KBD>C-x q</KBD> asks are <KBD>SPC</KBD> (or <KBD>y</KBD>),
<KBD>DEL</KBD> (or <KBD>n</KBD>), <KBD>RET</KBD> (or <KBD>q</KBD>), <KBD>C-l</KBD> and <KBD>C-r</KBD>.
The answers are the same as in <CODE>query-replace</CODE>, though not all of
the <CODE>query-replace</CODE> options are meaningful.
</P><P>

  These responses include <KBD>SPC</KBD> to continue, and <KBD>DEL</KBD> to skip
the remainder of this repetition of the macro and start right away with
the next repetition.  <KBD>RET</KBD> means to skip the remainder of this
repetition and cancel further repetitions.  <KBD>C-l</KBD> redraws the screen
and asks you again for a character to say what to do.
</P><P>

  <KBD>C-r</KBD> enters a recursive editing level, in which you can perform
editing which is not part of the macro.  When you exit the recursive
edit using <KBD>C-M-c</KBD>, you are asked again how to continue with the
keyboard macro.  If you type a <KBD>SPC</KBD> at this time, the rest of the
macro definition is executed.  It is up to you to leave point and the
text in a state such that the rest of the macro will do what you
want.</P><P>

  <KBD>C-u C-x q</KBD>, which is <KBD>C-x q</KBD> with a numeric argument,
performs a completely different function.  It enters a recursive edit
reading input from the keyboard, both when you type it during the
definition of the macro, and when it is executed from the macro.  During
definition, the editing you do inside the recursive edit does not become
part of the macro.  During macro execution, the recursive edit gives you
a chance to do some particularized editing on each repetition.
See section <A HREF="emacs_32.html#SEC466">AC.26 Recursive Editing Levels</A>.
</P><P>

  Another way to vary the behavior of a keyboard macro is to use a
register as a counter, incrementing it on each repetition of the macro.
See section <A HREF="emacs_12.html#SEC74">I.5 Keeping Numbers in Registers</A>.
</P><P>

<A NAME="Key Bindings"></A>
<HR SIZE="6">
<A NAME="SEC491"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC490"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC492"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC503"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC475"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC503"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AD.4 Customizing Key Bindings </H2>
<!--docid::SEC491::-->
<P>

  This section describes <EM>key bindings</EM>, which map keys to commands,
and <EM>keymaps</EM>, which record key bindings.  It also explains how
to customize key bindings.
</P><P>

  Recall that a command is a Lisp function whose definition provides for
interactive use.  Like every Lisp function, a command has a function
name which usually consists of lower-case letters and hyphens.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC492">AD.4.1 Keymaps</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Generalities.  The global keymap.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC493">AD.4.2 Prefix Keymaps</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Keymaps for prefix keys.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC494">AD.4.3 Local Keymaps</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Major and minor modes have their own keymaps.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC495">AD.4.4 Minibuffer Keymaps</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">The minibuffer uses its own local keymaps.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC496">AD.4.5 Changing Key Bindings Interactively</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to redefine one key's meaning conveniently.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC497">AD.4.6 Rebinding Keys in Your Init File</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Rebinding keys with your init file, <TT>`.emacs'</TT>.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC498">AD.4.7 Rebinding Function Keys</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Rebinding terminal function keys.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC499">AD.4.8 Named ASCII Control Characters</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Distinguishing <KBD>TAB</KBD> from <KBD>C-i</KBD>, and so on.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC500">AD.4.9 Non-ASCII Characters on the Keyboard</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Rebinding non-ASCII characters such as Latin-1.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC501">AD.4.10 Rebinding Mouse Buttons</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Rebinding mouse buttons in Emacs.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC502">AD.4.11 Disabling Commands</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Disabling a command means confirmation is required
                          before it can be executed.  This is done to protect
                          beginners from surprises.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Keymaps"></A>
<HR SIZE="6">
<A NAME="SEC492"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC491"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC493"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC503"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC491"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC503"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.4.1 Keymaps </H3>
<!--docid::SEC492::-->
<P>

  The bindings between key sequences and command functions are recorded
in data structures called <EM>keymaps</EM>.  Emacs has many of these, each
used on particular occasions.
</P><P>

  Recall that a <EM>key sequence</EM> (<EM>key</EM>, for short) is a sequence
of <EM>input events</EM> that have a meaning as a unit.  Input events
include characters, function keys and mouse buttons--all the inputs
that you can send to the computer with your terminal.  A key sequence
gets its meaning from its <EM>binding</EM>, which says what command it
runs.  The function of keymaps is to record these bindings.
</P><P>

<A NAME="IDX2751"></A>
  The <EM>global</EM> keymap is the most important keymap because it is
always in effect.  The global keymap defines keys for Fundamental mode;
most of these definitions are common to most or all major modes.  Each
major or minor mode can have its own keymap which overrides the global
definitions of some keys.
</P><P>

  For example, a self-inserting character such as <KBD>g</KBD> is
self-inserting because the global keymap binds it to the command
<CODE>self-insert-command</CODE>.  The standard Emacs editing characters such
as <KBD>C-a</KBD> also get their standard meanings from the global keymap.
Commands to rebind keys, such as <KBD>M-x global-set-key</KBD>, actually work
by storing the new binding in the proper place in the global map.
See section <A HREF="emacs_33.html#SEC496">AD.4.5 Changing Key Bindings Interactively</A>.
</P><P>

   Meta characters work differently; Emacs translates each Meta
character into a pair of characters starting with <KBD>ESC</KBD>.  When you
type the character <KBD>M-a</KBD> in a key sequence, Emacs replaces it with
<KBD><KBD>ESC</KBD> a</KBD>.  A meta key comes in as a single input event, but
becomes two events for purposes of key bindings.  The reason for this is
historical, and we might change it someday.
</P><P>

<A NAME="IDX2752"></A>
  Most modern keyboards have function keys as well as character keys.
Function keys send input events just as character keys do, and keymaps
can have bindings for them.
</P><P>

  On many terminals, typing a function key actually sends the computer a
sequence of characters; the precise details of the sequence depends on
which function key and on the model of terminal you are using.  (Often
the sequence starts with <KBD><KBD>ESC</KBD> [</KBD>.)  If Emacs understands your
terminal type properly, it recognizes the character sequences forming
function keys wherever they occur in a key sequence (not just at the
beginning).  Thus, for most purposes, you can pretend the function keys
reach Emacs directly and ignore their encoding as character sequences.
</P><P>

<A NAME="IDX2753"></A>
  Mouse buttons also produce input events.  These events come with other
data--the window and position where you pressed or released the button,
and a time stamp.  But only the choice of button matters for key
bindings; the other data matters only if a command looks at it.
(Commands designed for mouse invocation usually do look at the other
data.)
</P><P>

  A keymap records definitions for single events.  Interpreting a key
sequence of multiple events involves a chain of keymaps.  The first
keymap gives a definition for the first event; this definition is
another keymap, which is used to look up the second event in the
sequence, and so on.
</P><P>

  Key sequences can mix function keys and characters.  For example,
<KBD>C-x <KBD>SELECT</KBD></KBD> is meaningful.  If you make <KBD>SELECT</KBD> a prefix
key, then <KBD><KBD>SELECT</KBD> C-n</KBD> makes sense.  You can even mix mouse
events with keyboard events, but we recommend against it, because such
key sequences are inconvenient to use.
</P><P>

  As a user, you can redefine any key; but it is usually best to stick
to key sequences that consist of <KBD>C-c</KBD> followed by a letter.
These keys are "reserved for users," so they won't conflict with any
properly designed Emacs extension.  The function keys <KBD>F5</KBD> through
<KBD>F9</KBD> are also reserved for users.  If you redefine some other key,
your definition may be overridden by certain extensions or major modes
which redefine the same key.
</P><P>

<A NAME="Prefix Keymaps"></A>
<HR SIZE="6">
<A NAME="SEC493"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC492"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC494"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC494"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC491"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC503"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.4.2 Prefix Keymaps </H3>
<!--docid::SEC493::-->
<P>

  A prefix key such as <KBD>C-x</KBD> or <KBD>ESC</KBD> has its own keymap,
which holds the definition for the event that immediately follows
that prefix.
</P><P>

  The definition of a prefix key is usually the keymap to use for
looking up the following event.  The definition can also be a Lisp
symbol whose function definition is the following keymap; the effect is
the same, but it provides a command name for the prefix key that can be
used as a description of what the prefix key is for.  Thus, the binding
of <KBD>C-x</KBD> is the symbol <CODE>Ctl-X-Prefix</CODE>, whose function
definition is the keymap for <KBD>C-x</KBD> commands.  The definitions of
<KBD>C-c</KBD>, <KBD>C-x</KBD>, <KBD>C-h</KBD> and <KBD>ESC</KBD> as prefix keys appear in
the global map, so these prefix keys are always available.
</P><P>

  Aside from ordinary prefix keys, there is a fictitious "prefix key"
which represents the menu bar; see section `Menu Bar' in <CITE>The Emacs Lisp Reference Manual</CITE>, for special information about menu bar key bindings.
Mouse button events that invoke pop-up menus are also prefix keys; see
section `Menu Keymaps' in <CITE>The Emacs Lisp Reference Manual</CITE>, for more
details.
</P><P>

  Some prefix keymaps are stored in variables with names:
</P><P>

<UL>
<LI>
<A NAME="IDX2754"></A>
<CODE>ctl-x-map</CODE> is the variable name for the map used for characters that
follow <KBD>C-x</KBD>.
<LI>
<A NAME="IDX2755"></A>
<CODE>help-map</CODE> is for characters that follow <KBD>C-h</KBD>.
<LI>
<A NAME="IDX2756"></A>
<CODE>esc-map</CODE> is for characters that follow <KBD>ESC</KBD>.  Thus, all Meta
characters are actually defined by this map.
<LI>
<A NAME="IDX2757"></A>
<CODE>ctl-x-4-map</CODE> is for characters that follow <KBD>C-x 4</KBD>.
<LI>
<A NAME="IDX2758"></A>
<CODE>mode-specific-map</CODE> is for characters that follow <KBD>C-c</KBD>.
</UL>
<P>

<A NAME="Local Keymaps"></A>
<HR SIZE="6">
<A NAME="SEC494"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC493"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC495"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC495"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC491"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC503"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.4.3 Local Keymaps </H3>
<!--docid::SEC494::-->
<P>

<A NAME="IDX2759"></A>
  So far we have explained the ins and outs of the global map.  Major
modes customize Emacs by providing their own key bindings in <EM>local
keymaps</EM>.  For example, C mode overrides <KBD>TAB</KBD> to make it indent the
current line for C code.  Portions of text in the buffer can specify
their own keymaps to substitute for the keymap of the buffer's major
mode.
</P><P>

<A NAME="IDX2760"></A>
  Minor modes can also have local keymaps.  Whenever a minor mode is
in effect, the definitions in its keymap override both the major
mode's local keymap and the global keymap.
</P><P>

<A NAME="IDX2761"></A>
<A NAME="IDX2762"></A>
  The local keymaps for Lisp mode and several other major modes always
exist even when not in use.  These are kept in variables named
<CODE>lisp-mode-map</CODE> and so on.  For major modes less often used, the
local keymap is normally constructed only when the mode is used for the
first time in a session.  This is to save space.  If you wish to change
one of these keymaps, you must use the major mode's <EM>mode
hook</EM>---see below.
</P><P>

  All minor mode keymaps are created in advance.  There is no way to
defer their creation until the first time the minor mode is enabled.
</P><P>

  A local keymap can locally redefine a key as a prefix key by defining
it as a prefix keymap.  If the key is also defined globally as a prefix,
then its local and global definitions (both keymaps) effectively
combine: both of them are used to look up the event that follows the
prefix key.  Thus, if the mode's local keymap defines <KBD>C-c</KBD> as
another keymap, and that keymap defines <KBD>C-z</KBD> as a command, this
provides a local meaning for <KBD>C-c C-z</KBD>.  This does not affect other
sequences that start with <KBD>C-c</KBD>; if those sequences don't have their
own local bindings, their global bindings remain in effect.
</P><P>

  Another way to think of this is that Emacs handles a multi-event key
sequence by looking in several keymaps, one by one, for a binding of the
whole key sequence.  First it checks the minor mode keymaps for minor
modes that are enabled, then it checks the major mode's keymap, and then
it checks the global keymap.  This is not precisely how key lookup
works, but it's good enough for understanding ordinary circumstances.
</P><P>

<A NAME="IDX2763"></A>
<A NAME="IDX2764"></A>
  To change the local bindings of a major mode, you must change the
mode's local keymap.  Normally you must wait until the first time the
mode is used, because most major modes don't create their keymaps until
then.  If you want to specify something in your <TT>`~/.emacs'</TT> file to
change a major mode's bindings, you must use the mode's mode hook to
delay the change until the mode is first used.
</P><P>

  For example, the command <CODE>texinfo-mode</CODE> to select Texinfo mode
runs the hook <CODE>texinfo-mode-hook</CODE>.  Here's how you can use the hook
to add local bindings (not very useful, we admit) for <KBD>C-c n</KBD> and
<KBD>C-c p</KBD> in Texinfo mode:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(add-hook 'texinfo-mode-hook
          '(lambda ()
             (define-key texinfo-mode-map "\C-cp"
                         'backward-paragraph)
             (define-key texinfo-mode-map "\C-cn"
                         'forward-paragraph)))
</pre></td></tr></table></P><P>

  See section <A HREF="emacs_33.html#SEC484">AD.2.3 Hooks</A>.
</P><P>

<A NAME="Minibuffer Maps"></A>
<HR SIZE="6">
<A NAME="SEC495"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC494"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC496"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC496"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC491"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC503"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.4.4 Minibuffer Keymaps </H3>
<!--docid::SEC495::-->
<P>

<A NAME="IDX2765"></A>
<A NAME="IDX2766"></A>
<A NAME="IDX2767"></A>
<A NAME="IDX2768"></A>
<A NAME="IDX2769"></A>
  The minibuffer has its own set of local keymaps; they contain various
completion and exit commands.
</P><P>

<UL>
<LI>
<CODE>minibuffer-local-map</CODE> is used for ordinary input (no completion).
<LI>
<CODE>minibuffer-local-ns-map</CODE> is similar, except that <KBD>SPC</KBD> exits
just like <KBD>RET</KBD>.  This is used mainly for Mocklisp compatibility.
<LI>
<CODE>minibuffer-local-completion-map</CODE> is for permissive completion.
<LI>
<CODE>minibuffer-local-must-match-map</CODE> is for strict completion and
for cautious completion.
</UL>
<P>

<A NAME="Rebinding"></A>
<HR SIZE="6">
<A NAME="SEC496"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC495"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC497"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC497"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC491"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC503"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.4.5 Changing Key Bindings Interactively </H3>
<!--docid::SEC496::-->
<P>

  The way to redefine an Emacs key is to change its entry in a keymap.
You can change the global keymap, in which case the change is effective in
all major modes (except those that have their own overriding local
definitions for the same key).  Or you can change the current buffer's
local map, which affects all buffers using the same major mode.
</P><P>

<A NAME="IDX2770"></A>
<A NAME="IDX2771"></A>
<A NAME="IDX2772"></A>
<A NAME="IDX2773"></A>
<DL COMPACT>
<DT><KBD>M-x global-set-key <KBD>RET</KBD> <VAR>key</VAR> <VAR>cmd</VAR> <KBD>RET</KBD></KBD>
<DD>Define <VAR>key</VAR> globally to run <VAR>cmd</VAR>.
<DT><KBD>M-x local-set-key <KBD>RET</KBD> <VAR>key</VAR> <VAR>cmd</VAR> <KBD>RET</KBD></KBD>
<DD>Define <VAR>key</VAR> locally (in the major mode now in effect) to run
<VAR>cmd</VAR>.
<DT><KBD>M-x global-unset-key <KBD>RET</KBD> <VAR>key</VAR></KBD>
<DD>Make <VAR>key</VAR> undefined in the global map.
<DT><KBD>M-x local-unset-key <KBD>RET</KBD> <VAR>key</VAR></KBD>
<DD>Make <VAR>key</VAR> undefined locally (in the major mode now in effect).
</DL>
<P>

  For example, suppose you like to execute commands in a subshell within
an Emacs buffer, instead of suspending Emacs and executing commands in
your login shell.  Normally, <KBD>C-z</KBD> is bound to the function
<CODE>suspend-emacs</CODE> (when not using the X Window System), but you can
change <KBD>C-z</KBD> to invoke an interactive subshell within Emacs, by
binding it to <CODE>shell</CODE> as follows:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>M-x global-set-key <KBD>RET</KBD> C-z shell <KBD>RET</KBD>
</pre></td></tr></table></P><P>

<CODE>global-set-key</CODE> reads the command name after the key.   After you
press the key, a message like this appears so that you can confirm that
you are binding the key you want:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>Set key C-z to command: 
</pre></td></tr></table></P><P>

  You can redefine function keys and mouse events in the same way; just
type the function key or click the mouse when it's time to specify the
key to rebind.
</P><P>

  You can rebind a key that contains more than one event in the same
way.  Emacs keeps reading the key to rebind until it is a complete key
(that is, not a prefix key).  Thus, if you type <KBD>C-f</KBD> for
<VAR>key</VAR>, that's the end; the minibuffer is entered immediately to
read <VAR>cmd</VAR>.  But if you type <KBD>C-x</KBD>, another character is read;
if that is <KBD>4</KBD>, another character is read, and so on.  For
example,
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>M-x global-set-key <KBD>RET</KBD> C-x 4 $ spell-other-window <KBD>RET</KBD>
</pre></td></tr></table></P><P>

redefines <KBD>C-x 4 $</KBD> to run the (fictitious) command
<CODE>spell-other-window</CODE>.
</P><P>

  The two-character keys consisting of <KBD>C-c</KBD> followed by a letter
are reserved for user customizations.  Lisp programs are not supposed to
define these keys, so the bindings you make for them will be available
in all major modes and will never get in the way of anything.
</P><P>

  You can remove the global definition of a key with
<CODE>global-unset-key</CODE>.  This makes the key <EM>undefined</EM>; if you
type it, Emacs will just beep.  Similarly, <CODE>local-unset-key</CODE> makes
a key undefined in the current major mode keymap, which makes the global
definition (or lack of one) come back into effect in that major mode.
</P><P>

  If you have redefined (or undefined) a key and you subsequently wish
to retract the change, undefining the key will not do the job--you need
to redefine the key with its standard definition.  To find the name of
the standard definition of a key, go to a Fundamental mode buffer and
use <KBD>C-h c</KBD>.  The documentation of keys in this manual also lists
their command names.
</P><P>

  If you want to prevent yourself from invoking a command by mistake, it
is better to disable the command than to undefine the key.  A disabled
command is less work to invoke when you really want to.
See section <A HREF="emacs_33.html#SEC502">AD.4.11 Disabling Commands</A>.
</P><P>

<A NAME="Init Rebinding"></A>
<HR SIZE="6">
<A NAME="SEC497"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC496"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC498"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC498"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC491"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC503"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.4.6 Rebinding Keys in Your Init File </H3>
<!--docid::SEC497::-->
<P>

  If you have a set of key bindings that you like to use all the time,
you can specify them in your <TT>`.emacs'</TT> file by using their Lisp
syntax.  (See section <A HREF="emacs_33.html#SEC505">AD.7 The Init File, <TT>`~/.emacs'</TT></A>.)
</P><P>

  The simplest method for doing this works for ASCII characters and
Meta-modified ASCII characters only.  This method uses a string to
represent the key sequence you want to rebind.  For example, here's how
to bind <KBD>C-z</KBD> to <CODE>shell</CODE>:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(global-set-key "\C-z" 'shell)
</pre></td></tr></table></P><P>

This example uses a string constant containing one character, <KBD>C-z</KBD>.
The single-quote before the command name, <CODE>shell</CODE>, marks it as a
constant symbol rather than a variable.  If you omit the quote, Emacs
would try to evaluate <CODE>shell</CODE> immediately as a variable.  This
probably causes an error; it certainly isn't what you want.
</P><P>

  Here is another example that binds a key sequence two characters long:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(global-set-key "\C-xl" 'make-symbolic-link)
</pre></td></tr></table></P><P>

  To put <KBD>TAB</KBD>, <KBD>RET</KBD>, <KBD>ESC</KBD>, or <KBD>DEL</KBD> in the
string, you can use the Emacs Lisp escape sequences, <SAMP>`\t'</SAMP>,
<SAMP>`\r'</SAMP>, <SAMP>`\e'</SAMP>, and <SAMP>`\d'</SAMP>.  Here is an example which binds
<KBD>C-x <KBD>TAB</KBD></KBD>:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(global-set-key "\C-x\t" 'indent-rigidly)
</pre></td></tr></table></P><P>

  These examples show how to write some other special ASCII characters
in strings for key bindings:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(global-set-key "\r" 'newline)               ;; <KBD>RET</KBD>
(global-set-key "\d" 'delete-backward-char)  ;; <KBD>DEL</KBD>
(global-set-key "\C-x\e\e" 'repeat-complex-command)  ;; <KBD>ESC</KBD>
</pre></td></tr></table></P><P>

  When the key sequence includes function keys or mouse button events,
or non-ASCII characters such as <CODE>C-=</CODE> or <CODE>H-a</CODE>, you must use
the more general method of rebinding, which uses a vector to specify the
key sequence.
</P><P>

  The way to write a vector in Emacs Lisp is with square brackets around
the vector elements.  Use spaces to separate the elements.  If an
element is a symbol, simply write the symbol's name--no other
delimiters or punctuation are needed.  If a vector element is a
character, write it as a Lisp character constant: <SAMP>`?'</SAMP> followed by
the character as it would appear in a string.
</P><P>

  Here are examples of using vectors to rebind <KBD>C-=</KBD> (a control
character not in ASCII), <KBD>C-M-=</KBD> (not in ASCII because <KBD>C-=</KBD>
is not), <KBD>H-a</KBD> (a Hyper character; ASCII doesn't have Hyper at
all), <KBD>F7</KBD> (a function key), and <KBD>C-Mouse-1</KBD> (a
keyboard-modified mouse button):
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(global-set-key [?\C-=] 'make-symbolic-link)
(global-set-key [?\M-\C-=] 'make-symbolic-link)
(global-set-key [?\H-a] 'make-symbolic-link)
(global-set-key [f7] 'make-symbolic-link)
(global-set-key [C-mouse-1] 'make-symbolic-link)
</pre></td></tr></table></P><P>

  You can use a vector for the simple cases too.  Here's how to
rewrite the first three examples above, using vectors to bind
<KBD>C-z</KBD>, <KBD>C-x l</KBD>, and <KBD>C-x <KBD>TAB</KBD></KBD>:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(global-set-key [?\C-z] 'shell)
(global-set-key [?\C-x ?l] 'make-symbolic-link)
(global-set-key [?\C-x ?\t] 'indent-rigidly)
(global-set-key [?\r] 'newline)
(global-set-key [?\d] 'delete-backward-char)
(global-set-key [?\C-x ?\e ?\e] 'repeat-complex-command)
</pre></td></tr></table></P><P>

As you see, you represent a multi-character key sequence with a vector
by listing each of the characters within the square brackets that
delimit the vector.
</P><P>

<A NAME="Function Keys"></A>
<HR SIZE="6">
<A NAME="SEC498"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC497"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC499"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC499"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC491"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC503"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.4.7 Rebinding Function Keys </H3>
<!--docid::SEC498::-->
<P>

  Key sequences can contain function keys as well as ordinary
characters.  Just as Lisp characters (actually integers) represent
keyboard characters, Lisp symbols represent function keys.  If the
function key has a word as its label, then that word is also the name of
the corresponding Lisp symbol.  Here are the conventional Lisp names for
common function keys:
</P><P>

<DL COMPACT>
<DT><CODE>left</CODE>, <CODE>up</CODE>, <CODE>right</CODE>, <CODE>down</CODE>
<DD>Cursor arrow keys.
<P>

<DT><CODE>begin</CODE>, <CODE>end</CODE>, <CODE>home</CODE>, <CODE>next</CODE>, <CODE>prior</CODE>
<DD>Other cursor repositioning keys.
<P>

<DT><CODE>select</CODE>, <CODE>print</CODE>, <CODE>execute</CODE>, <CODE>backtab</CODE>
<DD><DT><CODE>insert</CODE>, <CODE>undo</CODE>, <CODE>redo</CODE>, <CODE>clearline</CODE>
<DD><DT><CODE>insertline</CODE>, <CODE>deleteline</CODE>, <CODE>insertchar</CODE>, <CODE>deletechar</CODE>
<DD>Miscellaneous function keys.
<P>

<DT><CODE>f1</CODE>, <CODE>f2</CODE>, <small>...</small> <CODE>f35</CODE>
<DD>Numbered function keys (across the top of the keyboard).
<P>

<DT><CODE>kp-add</CODE>, <CODE>kp-subtract</CODE>, <CODE>kp-multiply</CODE>, <CODE>kp-divide</CODE>
<DD><DT><CODE>kp-backtab</CODE>, <CODE>kp-space</CODE>, <CODE>kp-tab</CODE>, <CODE>kp-enter</CODE>
<DD><DT><CODE>kp-separator</CODE>, <CODE>kp-decimal</CODE>, <CODE>kp-equal</CODE>
<DD>Keypad keys (to the right of the regular keyboard), with names or punctuation.
<P>

<DT><CODE>kp-0</CODE>, <CODE>kp-1</CODE>, <small>...</small> <CODE>kp-9</CODE>
<DD>Keypad keys with digits.
<P>

<DT><CODE>kp-f1</CODE>, <CODE>kp-f2</CODE>, <CODE>kp-f3</CODE>, <CODE>kp-f4</CODE>
<DD>Keypad PF keys.
</DL>
<P>

  These names are conventional, but some systems (especially when using
X) may use different names.  To make certain what symbol is used for a
given function key on your terminal, type <KBD>C-h c</KBD> followed by that
key.
</P><P>

  A key sequence which contains function key symbols (or anything but
ASCII characters) must be a vector rather than a string.  The vector
syntax uses spaces between the elements, and square brackets around the
whole vector.  Thus, to bind function key <SAMP>`f1'</SAMP> to the command
<CODE>rmail</CODE>, write the following:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(global-set-key [f1] 'rmail)
</pre></td></tr></table></P><P>

To bind the right-arrow key to the command <CODE>forward-char</CODE>, you can
use this expression:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(global-set-key [right] 'forward-char)
</pre></td></tr></table></P><P>

This uses the Lisp syntax for a vector containing the symbol
<CODE>right</CODE>.  (This binding is present in Emacs by default.)
</P><P>

  See section <A HREF="emacs_33.html#SEC497">AD.4.6 Rebinding Keys in Your Init File</A>, for more information about using vectors for
rebinding.
</P><P>

  You can mix function keys and characters in a key sequence.  This
example binds <KBD>C-x <KBD>NEXT</KBD></KBD> to the command <CODE>forward-page</CODE>.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(global-set-key [?\C-x next] 'forward-page)
</pre></td></tr></table></P><P>

where <CODE>?\C-x</CODE> is the Lisp character constant for the character
<KBD>C-x</KBD>.  The vector element <CODE>next</CODE> is a symbol and therefore
does not take a question mark.
</P><P>

  You can use the modifier keys <KBD>CTRL</KBD>, <KBD>META</KBD>, <KBD>HYPER</KBD>,
<KBD>SUPER</KBD>, <KBD>ALT</KBD> and <KBD>SHIFT</KBD> with function keys.  To represent
these modifiers, add the strings <SAMP>`C-'</SAMP>, <SAMP>`M-'</SAMP>, <SAMP>`H-'</SAMP>,
<SAMP>`s-'</SAMP>, <SAMP>`A-'</SAMP> and <SAMP>`S-'</SAMP> at the front of the symbol name.
Thus, here is how to make <KBD>Hyper-Meta-<KBD>RIGHT</KBD></KBD> move forward a
word:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(global-set-key [H-M-right] 'forward-word)
</pre></td></tr></table></P><P>

<A NAME="Named ASCII Chars"></A>
<HR SIZE="6">
<A NAME="SEC499"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC498"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC500"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC500"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC491"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC503"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.4.8 Named ASCII Control Characters </H3>
<!--docid::SEC499::-->
<P>

  <KBD>TAB</KBD>, <KBD>RET</KBD>, <KBD>BS</KBD>, <KBD>LFD</KBD>, <KBD>ESC</KBD> and <KBD>DEL</KBD>
started out as names for certain ASCII control characters, used so often
that they have special keys of their own.  Later, users found it
convenient to distinguish in Emacs between these keys and the "same"
control characters typed with the <KBD>CTRL</KBD> key.
</P><P>

  Emacs distinguishes these two kinds of input, when the keyboard
reports these keys to Emacs.  It treats the "special" keys as function
keys named <CODE>tab</CODE>, <CODE>return</CODE>, <CODE>backspace</CODE>, <CODE>linefeed</CODE>,
<CODE>escape</CODE>, and <CODE>delete</CODE>.  These function keys translate
automatically into the corresponding ASCII characters <EM>if</EM> they
have no bindings of their own.  As a result, neither users nor Lisp
programs need to pay attention to the distinction unless they care to.
</P><P>

  If you do not want to distinguish between (for example) <KBD>TAB</KBD> and
<KBD>C-i</KBD>, make just one binding, for the ASCII character <KBD>TAB</KBD>
(octal code 011).  If you do want to distinguish, make one binding for
this ASCII character, and another for the "function key" <CODE>tab</CODE>.
</P><P>

  With an ordinary ASCII terminal, there is no way to distinguish
between <KBD>TAB</KBD> and <KBD>C-i</KBD> (and likewise for other such pairs),
because the terminal sends the same character in both cases.
</P><P>

<A NAME="Non-ASCII Rebinding"></A>
<HR SIZE="6">
<A NAME="SEC500"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC499"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC501"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC503"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC491"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC503"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.4.9 Non-ASCII Characters on the Keyboard </H3>
<!--docid::SEC500::-->
<P>

If your keyboard has keys that send non-ASCII characters, such as
accented letters, rebinding these keys is a bit tricky.  There are two
solutions you can use.  One is to specify a keyboard coding system,
using <CODE>set-keyboard-coding-system</CODE> (see section <A HREF="emacs_20.html#SEC222">Q.9 Specifying a Coding System</A>).
Then you can bind these keys in the usual way<A NAME="DOCF16" HREF="emacs_fot.html#FOOT16">(16)</A>, like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(global-set-key [?<VAR>char</VAR>] 'some-function)
</pre></td></tr></table></P><P>

Type <KBD>C-q</KBD> followed by the key you want to bind, to insert <VAR>char</VAR>.
</P><P>

If you don't specify the keyboard coding system, that approach won't
work.  Instead, you need to find out the actual code that the terminal
sends.  The easiest way to do this in Emacs is to create an empty buffer
with <KBD>C-x b temp <KBD>RET</KBD></KBD>, make it unibyte with <KBD>M-x
toggle-enable-multibyte-characters <KBD>RET</KBD></KBD>, then type the key to
insert the character into this buffer.
</P><P>

Move point before the character, then type <KBD>C-x =</KBD>.  This
displays a message in the minibuffer, showing the character code in
three ways, octal, decimal and hexadecimal, all within a set of
parentheses.  Use the second of the three numbers, the decimal one,
inside the vector to bind:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(global-set-key [<VAR>decimal-code</VAR>] 'some-function)
</pre></td></tr></table></P><P>

If you bind 8-bit characters like this in your init file, you may find it
convenient to specify that it is unibyte.  See section <A HREF="emacs_20.html#SEC215">Q.2 Enabling Multibyte Characters</A>.
</P><P>

<A NAME="Mouse Buttons"></A>
<HR SIZE="6">
<A NAME="SEC501"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC500"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC502"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC493"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC491"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC503"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.4.10 Rebinding Mouse Buttons </H3>
<!--docid::SEC501::-->
<P>

  Emacs uses Lisp symbols to designate mouse buttons, too.  The ordinary
mouse events in Emacs are <EM>click</EM> events; these happen when you
press a button and release it without moving the mouse.  You can also
get <EM>drag</EM> events, when you move the mouse while holding the button
down.  Drag events happen when you finally let go of the button.
</P><P>

  The symbols for basic click events are <CODE>mouse-1</CODE> for the leftmost
button, <CODE>mouse-2</CODE> for the next, and so on.  Here is how you can
redefine the second mouse button to split the current window:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(global-set-key [mouse-2] 'split-window-vertically)
</pre></td></tr></table></P><P>

  The symbols for drag events are similar, but have the prefix
<SAMP>`drag-'</SAMP> before the word <SAMP>`mouse'</SAMP>.  For example, dragging the
first button generates a <CODE>drag-mouse-1</CODE> event.
</P><P>

  You can also define bindings for events that occur when a mouse button
is pressed down.  These events start with <SAMP>`down-'</SAMP> instead of
<SAMP>`drag-'</SAMP>.  Such events are generated only if they have key bindings.
When you get a button-down event, a corresponding click or drag event
will always follow.
</P><P>

<A NAME="IDX2774"></A>
<A NAME="IDX2775"></A>
  If you wish, you can distinguish single, double, and triple clicks.  A
double click means clicking a mouse button twice in approximately the
same place.  The first click generates an ordinary click event.  The
second click, if it comes soon enough, generates a double-click event
instead.  The event type for a double-click event starts with
<SAMP>`double-'</SAMP>: for example, <CODE>double-mouse-3</CODE>.
</P><P>

  This means that you can give a special meaning to the second click at
the same place, but it must act on the assumption that the ordinary
single click definition has run when the first click was received.
</P><P>

  This constrains what you can do with double clicks, but user interface
designers say that this constraint ought to be followed in any case.  A
double click should do something similar to the single click, only
"more so."  The command for the double-click event should perform the
extra work for the double click.
</P><P>

  If a double-click event has no binding, it changes to the
corresponding single-click event.  Thus, if you don't define a
particular double click specially, it executes the single-click command
twice.
</P><P>

  Emacs also supports triple-click events whose names start with
<SAMP>`triple-'</SAMP>.  Emacs does not distinguish quadruple clicks as event
types; clicks beyond the third generate additional triple-click events.
However, the full number of clicks is recorded in the event list, so you
can distinguish if you really want to.  We don't recommend distinct
meanings for more than three clicks, but sometimes it is useful for
subsequent clicks to cycle through the same set of three meanings, so
that four clicks are equivalent to one click, five are equivalent to
two, and six are equivalent to three.
</P><P>

  Emacs also records multiple presses in drag and button-down events.
For example, when you press a button twice, then move the mouse while
holding the button, Emacs gets a <SAMP>`double-drag-'</SAMP> event.  And at the
moment when you press it down for the second time, Emacs gets a
<SAMP>`double-down-'</SAMP> event (which is ignored, like all button-down
events, if it has no binding).
</P><P>

<A NAME="IDX2776"></A>
  The variable <CODE>double-click-time</CODE> specifies how much time can
elapse between clicks and still allow them to be grouped as a multiple
click.  Its value is in units of milliseconds.  If the value is
<CODE>nil</CODE>, double clicks are not detected at all.  If the value is
<CODE>t</CODE>, then there is no time limit.  The default is 500.
</P><P>

<A NAME="IDX2777"></A>
  The variable <CODE>double-click-fuzz</CODE> specifies how much the mouse
can move between clicks still allow them to be grouped as a multiple
click.  Its value is in units of pixels on windowed displays and in
units of 1/8 of a character cell on text-mode terminals; the default is
3.
</P><P>

  The symbols for mouse events also indicate the status of the modifier
keys, with the usual prefixes <SAMP>`C-'</SAMP>, <SAMP>`M-'</SAMP>, <SAMP>`H-'</SAMP>,
<SAMP>`s-'</SAMP>, <SAMP>`A-'</SAMP> and <SAMP>`S-'</SAMP>.  These always precede <SAMP>`double-'</SAMP>
or <SAMP>`triple-'</SAMP>, which always precede <SAMP>`drag-'</SAMP> or <SAMP>`down-'</SAMP>.
</P><P>

  A frame includes areas that don't show text from the buffer, such as
the mode line and the scroll bar.  You can tell whether a mouse button
comes from a special area of the screen by means of dummy "prefix
keys."  For example, if you click the mouse in the mode line, you get
the prefix key <CODE>mode-line</CODE> before the ordinary mouse-button symbol.
Thus, here is how to define the command for clicking the first button in
a mode line to run <CODE>scroll-up</CODE>:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(global-set-key [mode-line mouse-1] 'scroll-up)
</pre></td></tr></table></P><P>

  Here is the complete list of these dummy prefix keys and their
meanings:
</P><P>

<DL COMPACT>
<DT><CODE>mode-line</CODE>
<DD>The mouse was in the mode line of a window.
<DT><CODE>vertical-line</CODE>
<DD>The mouse was in the vertical line separating side-by-side windows.  (If
you use scroll bars, they appear in place of these vertical lines.)
<DT><CODE>vertical-scroll-bar</CODE>
<DD>The mouse was in a vertical scroll bar.  (This is the only kind of
scroll bar Emacs currently supports.)
</DL>
<P>

  You can put more than one mouse button in a key sequence, but it isn't
usual to do so.
</P><P>

<A NAME="Disabling"></A>
<HR SIZE="6">
<A NAME="SEC502"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC501"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC503"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC493"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC491"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC503"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.4.11 Disabling Commands </H3>
<!--docid::SEC502::-->
<P>

  Disabling a command marks the command as requiring confirmation before it
can be executed.  The purpose of disabling a command is to prevent
beginning users from executing it by accident and being confused.
</P><P>

  An attempt to invoke a disabled command interactively in Emacs
displays a window containing the command's name, its documentation, and
some instructions on what to do immediately; then Emacs asks for input
saying whether to execute the command as requested, enable it and
execute it, or cancel.  If you decide to enable the command, you are
asked whether to do this permanently or just for the current session.
(Enabling permanently works by automatically editing your <TT>`.emacs'</TT>
file.)  You can also type <KBD>!</KBD> to enable <EM>all</EM> commands,
for the current session only.
</P><P>

  The direct mechanism for disabling a command is to put a
non-<CODE>nil</CODE> <CODE>disabled</CODE> property on the Lisp symbol for the
command.  Here is the Lisp program to do this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(put 'delete-region 'disabled t)
</pre></td></tr></table></P><P>

  If the value of the <CODE>disabled</CODE> property is a string, that string
is included in the message displayed when the command is used:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(put 'delete-region 'disabled
     "It's better to use `kill-region' instead.\n")
</pre></td></tr></table></P><P>

<A NAME="IDX2778"></A>
<A NAME="IDX2779"></A>
  You can make a command disabled either by editing the <TT>`.emacs'</TT>
file directly or with the command <KBD>M-x disable-command</KBD>, which edits
the <TT>`.emacs'</TT> file for you.  Likewise, <KBD>M-x enable-command</KBD>
edits <TT>`.emacs'</TT> to enable a command permanently.  See section <A HREF="emacs_33.html#SEC505">AD.7 The Init File, <TT>`~/.emacs'</TT></A>.
</P><P>

  Whether a command is disabled is independent of what key is used to
invoke it; disabling also applies if the command is invoked using
<KBD>M-x</KBD>.  Disabling a command has no effect on calling it as a
function from Lisp programs.
</P><P>

<A NAME="Keyboard Translations"></A>
<HR SIZE="6">
<A NAME="SEC503"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC502"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC504"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC504"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC475"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC510"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AD.5 Keyboard Translations </H2>
<!--docid::SEC503::-->
<P>

  Some keyboards do not make it convenient to send all the special
characters that Emacs uses.  The most common problem case is the
<KBD>DEL</KBD> character.  Some keyboards provide no convenient way to type
this very important character--usually because they were designed to
expect the character <KBD>C-h</KBD> to be used for deletion.  On these
keyboards, if you press the key normally used for deletion, Emacs handles
the <KBD>C-h</KBD> as a prefix character and offers you a list of help
options, which is not what you want.
</P><P>

<A NAME="IDX2780"></A>
<A NAME="IDX2781"></A>
  You can work around this problem within Emacs by setting up keyboard
translations to turn <KBD>C-h</KBD> into <KBD>DEL</KBD> and <KBD>DEL</KBD> into
<KBD>C-h</KBD>, as follows:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>;; Translate <KBD>C-h</KBD> to <KBD>DEL</KBD>.
(keyboard-translate ?\C-h ?\C-?)

;; Translate <KBD>DEL</KBD> to <KBD>C-h</KBD>.
(keyboard-translate ?\C-? ?\C-h)
</pre></td></tr></table></P><P>

  Keyboard translations are not the same as key bindings in keymaps
(see section <A HREF="emacs_33.html#SEC492">AD.4.1 Keymaps</A>).  Emacs contains numerous keymaps that apply in
different situations, but there is only one set of keyboard
translations, and it applies to every character that Emacs reads from
the terminal.  Keyboard translations take place at the lowest level of
input processing; the keys that are looked up in keymaps contain the
characters that result from keyboard translation.
</P><P>

  On a window system, the keyboard key named <KBD>DELETE</KBD> is a function
key and is distinct from the ASCII character named <KBD>DEL</KBD>.
See section <A HREF="emacs_33.html#SEC499">AD.4.8 Named ASCII Control Characters</A>.  Keyboard translations affect only ASCII
character input, not function keys; thus, the above example used on a
window system does not affect the <KBD>DELETE</KBD> key.  However, the
translation above isn't necessary on window systems, because Emacs can
also distinguish between the <KBD>BACKSPACE</KBD> key and <KBD>C-h</KBD>; and it
normally treats <KBD>BACKSPACE</KBD> as <KBD>DEL</KBD>.
</P><P>

  For full information about how to use keyboard translations, see
section `Translating Input' in <CITE>The Emacs Lisp Reference Manual</CITE>.
</P><P>

<A NAME="Syntax"></A>
<HR SIZE="6">
<A NAME="SEC504"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC503"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC505"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC505"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC475"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC510"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AD.6 The Syntax Table </H2>
<!--docid::SEC504::-->
<P>

  All the Emacs commands which parse words or balance parentheses are
controlled by the <EM>syntax table</EM>.  The syntax table says which
characters are opening delimiters, which are parts of words, which are
string quotes, and so on.  It does this by assigning each character to
one of fifteen-odd <EM>syntax classes</EM>.  In some cases it specifies
some additional information also.
</P><P>

  Each major mode has its own syntax table (though related major modes
sometimes share one syntax table) which it installs in each buffer
that uses the mode.  The syntax table installed in the current buffer
is the one that all commands use, so we call it "the" syntax table.
</P><P>

<A NAME="IDX2782"></A>
<A NAME="IDX2783"></A>
  To display a description of the contents of the current syntax
table, type <KBD>C-h s</KBD> (<CODE>describe-syntax</CODE>).  The description of
each character includes both the string you would have to give to
<CODE>modify-syntax-entry</CODE> to set up that character's current syntax,
starting with the character which designates its syntax class, plus
some English text to explain its meaning.
</P><P>

  A syntax table is actually a Lisp object, a char-table, whose
elements are cons cells.  For full information on the syntax table,
see section `Syntax Tables' in <CITE>The Emacs Lisp Reference Manual</CITE>.
</P><P>

<A NAME="Init File"></A>
<HR SIZE="6">
<A NAME="SEC505"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC504"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC506"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC510"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC475"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC510"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AD.7 The Init File, <TT>`~/.emacs'</TT> </H2>
<!--docid::SEC505::-->
<P>

  When Emacs is started, it normally loads a Lisp program from the file
<TT>`.emacs'</TT> or <TT>`.emacs.el'</TT> in your home directory.  We call this
file your <EM>init file</EM> because it specifies how to initialize Emacs
for you.  You can use the command line switch <SAMP>`-q'</SAMP> to prevent
loading your init file, and <SAMP>`-u'</SAMP> (or <SAMP>`--user'</SAMP>) to specify a
different user's init file (see section <A HREF="emacs_6.html#SEC17">C. Entering and Exiting Emacs</A>).
</P><P>

<A NAME="IDX2784"></A>
  There can also be a <EM>default init file</EM>, which is the library
named <TT>`default.el'</TT>, found via the standard search path for
libraries.  The Emacs distribution contains no such library; your site
may create one for local customizations.  If this library exists, it is
loaded whenever you start Emacs (except when you specify <SAMP>`-q'</SAMP>).
But your init file, if any, is loaded first; if it sets
<CODE>inhibit-default-init</CODE> non-<CODE>nil</CODE>, then <TT>`default'</TT> is not
loaded.
</P><P>

<A NAME="IDX2785"></A>
<A NAME="IDX2786"></A>
  Your site may also have a <EM>site startup file</EM>; this is named
<TT>`site-start.el'</TT>, if it exists.  Like <TT>`default.el'</TT>, Emacs
finds this file via the standard search path for Lisp libraries.
Emacs loads this library before it loads your init file.  To inhibit
loading of this library, use the option <SAMP>`-no-site-file'</SAMP>.
See section <A HREF="emacs_34.html#SEC530">AE.2 Initial Options</A>.
</P><P>

  You can place <TT>`default.el'</TT> and <TT>`site-start.el'</TT> in any of
the directories which Emacs searches for Lisp libraries.  The variable
<CODE>load-path</CODE> (see section <A HREF="emacs_25.html#SEC328">V.7 Libraries of Lisp Code for Emacs</A>) specifies these directories.
Many sites put these files in the <TT>`site-lisp'</TT> subdirectory of the
Emacs installation directory, typically
<TT>`/usr/local/share/emacs/site-lisp'</TT>.
</P><P>

  If you have a large amount of code in your <TT>`.emacs'</TT> file, you
should rename it to <TT>`~/.emacs.el'</TT>, and byte-compile it.  See section `Byte Compilation' in <CITE>the Emacs Lisp Reference Manual</CITE>,
for more information about compiling Emacs Lisp programs.
</P><P>

  If you are going to write actual Emacs Lisp programs that go beyond
minor customization, you should read the <CITE>Emacs Lisp Reference Manual</CITE>.
See section `Emacs Lisp' in <CITE>the Emacs Lisp Reference Manual</CITE>.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC506">AD.7.1 Init File Syntax</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Syntax of constants in Emacs Lisp.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC507">AD.7.2 Init File Examples</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to do some things with an init file.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC508">AD.7.3 Terminal-specific Initialization</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Each terminal type can have an init file.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC509">AD.7.4 How Emacs Finds Your Init File</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How Emacs finds the init file.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Init Syntax"></A>
<HR SIZE="6">
<A NAME="SEC506"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC505"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC507"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC510"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC505"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC510"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.7.1 Init File Syntax </H3>
<!--docid::SEC506::-->
<P>

  The <TT>`.emacs'</TT> file contains one or more Lisp function call
expressions.  Each of these consists of a function name followed by
arguments, all surrounded by parentheses.  For example, <CODE>(setq
fill-column 60)</CODE> calls the function <CODE>setq</CODE> to set the variable
<CODE>fill-column</CODE> (see section <A HREF="emacs_23.html#SEC238">T.5 Filling Text</A>) to 60.
</P><P>

  The second argument to <CODE>setq</CODE> is an expression for the new value of
the variable.  This can be a constant, a variable, or a function call
expression.  In <TT>`.emacs'</TT>, constants are used most of the time.  They can be:
</P><P>

<DL COMPACT>
<DT>Numbers:
<DD>Numbers are written in decimal, with an optional initial minus sign.
<P>

<DT>Strings:
<DD><A NAME="IDX2787"></A>
<A NAME="IDX2788"></A>
Lisp string syntax is the same as C string syntax with a few extra
features.  Use a double-quote character to begin and end a string constant.
<P>

In a string, you can include newlines and special characters literally.
But often it is cleaner to use backslash sequences for them: <SAMP>`\n'</SAMP>
for newline, <SAMP>`\b'</SAMP> for backspace, <SAMP>`\r'</SAMP> for carriage return,
<SAMP>`\t'</SAMP> for tab, <SAMP>`\f'</SAMP> for formfeed (control-L), <SAMP>`\e'</SAMP> for
escape, <SAMP>`\\'</SAMP> for a backslash, <SAMP>`\"'</SAMP> for a double-quote, or
<SAMP>`\<VAR>ooo</VAR>'</SAMP> for the character whose octal code is <VAR>ooo</VAR>.
Backslash and double-quote are the only characters for which backslash
sequences are mandatory.
</P><P>

<SAMP>`\C-'</SAMP> can be used as a prefix for a control character, as in
<SAMP>`\C-s'</SAMP> for ASCII control-S, and <SAMP>`\M-'</SAMP> can be used as a prefix for
a Meta character, as in <SAMP>`\M-a'</SAMP> for <KBD>Meta-A</KBD> or <SAMP>`\M-\C-a'</SAMP> for
<KBD>Control-Meta-A</KBD>.</P><P>

<A NAME="IDX2789"></A>
<A NAME="IDX2790"></A>
If you want to include non-ASCII characters in strings in your init
file, you should consider putting a <SAMP>`-*-coding:
<VAR>coding-system</VAR>-*-'</SAMP> tag on the first line which states the coding
system used to save your <TT>`.emacs'</TT>, as explained in <A HREF="emacs_20.html#SEC221">Q.8 Recognizing Coding Systems</A>.  This is because the defaults for decoding non-ASCII text might
not yet be set up by the time Emacs reads those parts of your init file
which use such strings, possibly leading Emacs to decode those strings
incorrectly.
</P><P>

<DT>Characters:
<DD>Lisp character constant syntax consists of a <SAMP>`?'</SAMP> followed by
either a character or an escape sequence starting with <SAMP>`\'</SAMP>.
Examples: <CODE>?x</CODE>, <CODE>?\n</CODE>, <CODE>?\"</CODE>, <CODE>?\)</CODE>.  Note that
strings and characters are not interchangeable in Lisp; some contexts
require one and some contexts require the other.
<P>

See section <A HREF="emacs_33.html#SEC500">AD.4.9 Non-ASCII Characters on the Keyboard</A>, for information about binding commands to
keys which send non-ASCII characters.
</P><P>

<DT>True:
<DD><CODE>t</CODE> stands for `true'.
<P>

<DT>False:
<DD><CODE>nil</CODE> stands for `false'.
<P>

<DT>Other Lisp objects:
<DD>Write a single-quote (<CODE>'</CODE>) followed by the Lisp object you want.
</DL>
<P>

<A NAME="Init Examples"></A>
<HR SIZE="6">
<A NAME="SEC507"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC506"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC508"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC508"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC505"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC510"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.7.2 Init File Examples </H3>
<!--docid::SEC507::-->
<P>

  Here are some examples of doing certain commonly desired things with
Lisp expressions:
</P><P>

<UL>
<LI>
Make <KBD>TAB</KBD> in C mode just insert a tab if point is in the middle of a
line.
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq c-tab-always-indent nil)
</pre></td></tr></table></P><P>

Here we have a variable whose value is normally <CODE>t</CODE> for `true'
and the alternative is <CODE>nil</CODE> for `false'.
</P><P>

<LI>
Make searches case sensitive by default (in all buffers that do not
override this).
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq-default case-fold-search nil)
</pre></td></tr></table></P><P>

This sets the default value, which is effective in all buffers that do
not have local values for the variable.  Setting <CODE>case-fold-search</CODE>
with <CODE>setq</CODE> affects only the current buffer's local value, which
is not what you probably want to do in an init file.
</P><P>

<LI>
<A NAME="IDX2791"></A>
Specify your own email address, if Emacs can't figure it out correctly.
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq user-mail-address "coon@yoyodyne.com")
</pre></td></tr></table></P><P>

Various Emacs packages that need your own email address use the value of
<CODE>user-mail-address</CODE>.
</P><P>

<LI>
Make Text mode the default mode for new buffers.
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(setq default-major-mode 'text-mode)
</pre></td></tr></table></P><P>

Note that <CODE>text-mode</CODE> is used because it is the command for
entering Text mode.  The single-quote before it makes the symbol a
constant; otherwise, <CODE>text-mode</CODE> would be treated as a variable
name.
</P><P>

<LI>
Set up defaults for the Latin-1 character set
which supports most of the languages of Western Europe.
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(set-language-environment "Latin-1")
</pre></td></tr></table></P><P>

<LI>
Turn on Auto Fill mode automatically in Text mode and related modes.
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(add-hook 'text-mode-hook
  '(lambda () (auto-fill-mode 1)))
</pre></td></tr></table></P><P>

This shows how to add a hook function to a normal hook variable
(see section <A HREF="emacs_33.html#SEC484">AD.2.3 Hooks</A>).  The function we supply is a list starting with
<CODE>lambda</CODE>, with a single-quote in front of it to make it a list
constant rather than an expression.
</P><P>

It's beyond the scope of this manual to explain Lisp functions, but for
this example it is enough to know that the effect is to execute
<CODE>(auto-fill-mode 1)</CODE> when Text mode is entered.  You can replace
that with any other expression that you like, or with several
expressions in a row.
</P><P>

Emacs comes with a function named <CODE>turn-on-auto-fill</CODE> whose
definition is <CODE>(lambda () (auto-fill-mode 1))</CODE>.  Thus, a simpler
way to write the above example is as follows:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(add-hook 'text-mode-hook 'turn-on-auto-fill)
</pre></td></tr></table></P><P>

<LI>
Load the installed Lisp library named <TT>`foo'</TT> (actually a file
<TT>`foo.elc'</TT> or <TT>`foo.el'</TT> in a standard Emacs directory).
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(load "foo")
</pre></td></tr></table></P><P>

When the argument to <CODE>load</CODE> is a relative file name, not starting
with <SAMP>`/'</SAMP> or <SAMP>`~'</SAMP>, <CODE>load</CODE> searches the directories in
<CODE>load-path</CODE> (see section <A HREF="emacs_25.html#SEC328">V.7 Libraries of Lisp Code for Emacs</A>).
</P><P>

<LI>
Load the compiled Lisp file <TT>`foo.elc'</TT> from your home directory.
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(load "~/foo.elc")
</pre></td></tr></table></P><P>

Here an absolute file name is used, so no searching is done.
</P><P>

<LI>
<A NAME="IDX2792"></A>
<A NAME="IDX2793"></A>
Tell Emacs to find the definition for the function <CODE>myfunction</CODE>
by loading a Lisp library named <TT>`mypackage'</TT> (i.e. a file
<TT>`mypackage.elc'</TT> or <TT>`mypackage.el'</TT>):
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(autoload 'myfunction "mypackage" "Do what I say." t)
</pre></td></tr></table></P><P>

Here the string <CODE>"Do what I say."</CODE> is the function's
documentation string.  You specify it in the <CODE>autoload</CODE>
definition so it will be available for help commands even when the
package is not loaded.  The last argument, <CODE>t</CODE>, indicates that
this function is interactive; that is, it can be invoked interactively
by typing <KBD>M-x myfunction <KBD>RET</KBD></KBD> or by binding it to a key.
If the function is not interactive, omit the <CODE>t</CODE> or use
<CODE>nil</CODE>.
</P><P>

<LI>
Rebind the key <KBD>C-x l</KBD> to run the function <CODE>make-symbolic-link</CODE>.
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(global-set-key "\C-xl" 'make-symbolic-link)
</pre></td></tr></table></P><P>

or
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(define-key global-map "\C-xl" 'make-symbolic-link)
</pre></td></tr></table></P><P>

Note once again the single-quote used to refer to the symbol
<CODE>make-symbolic-link</CODE> instead of its value as a variable.
</P><P>

<LI>
Do the same thing for Lisp mode only.
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(define-key lisp-mode-map "\C-xl" 'make-symbolic-link)
</pre></td></tr></table></P><P>

<LI>
Redefine all keys which now run <CODE>next-line</CODE> in Fundamental mode
so that they run <CODE>forward-line</CODE> instead.
<P>

<A NAME="IDX2794"></A>
<TABLE><tr><td>&nbsp;</td><td class=example><pre>(substitute-key-definition 'next-line 'forward-line
                           global-map)
</pre></td></tr></table></P><P>

<LI>
Make <KBD>C-x C-v</KBD> undefined.
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(global-unset-key "\C-x\C-v")
</pre></td></tr></table></P><P>

One reason to undefine a key is so that you can make it a prefix.
Simply defining <KBD>C-x C-v <VAR>anything</VAR></KBD> will make <KBD>C-x C-v</KBD> a
prefix, but <KBD>C-x C-v</KBD> must first be freed of its usual non-prefix
definition.
</P><P>

<LI>
Make <SAMP>`$'</SAMP> have the syntax of punctuation in Text mode.
Note the use of a character constant for <SAMP>`$'</SAMP>.
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(modify-syntax-entry ?\$ "." text-mode-syntax-table)
</pre></td></tr></table></P><P>

<LI>
Enable the use of the command <CODE>narrow-to-region</CODE> without confirmation.
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(put 'narrow-to-region 'disabled nil)
</pre></td></tr></table></UL>
<P>

<A NAME="Terminal Init"></A>
<HR SIZE="6">
<A NAME="SEC508"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC507"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC509"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC509"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC505"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC510"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.7.3 Terminal-specific Initialization </H3>
<!--docid::SEC508::-->
<P>

  Each terminal type can have a Lisp library to be loaded into Emacs when
it is run on that type of terminal.  For a terminal type named
<VAR>termtype</VAR>, the library is called <TT>`term/<VAR>termtype</VAR>'</TT> and it is
found by searching the directories <CODE>load-path</CODE> as usual and trying the
suffixes <SAMP>`.elc'</SAMP> and <SAMP>`.el'</SAMP>.  Normally it appears in the
subdirectory <TT>`term'</TT> of the directory where most Emacs libraries are
kept.</P><P>

  The usual purpose of the terminal-specific library is to map the
escape sequences used by the terminal's function keys onto more
meaningful names, using <CODE>function-key-map</CODE>.  See the file
<TT>`term/lk201.el'</TT> for an example of how this is done.  Many function
keys are mapped automatically according to the information in the
Termcap data base; the terminal-specific library needs to map only the
function keys that Termcap does not specify.
</P><P>

  When the terminal type contains a hyphen, only the part of the name
before the first hyphen is significant in choosing the library name.
Thus, terminal types <SAMP>`aaa-48'</SAMP> and <SAMP>`aaa-30-rv'</SAMP> both use
the library <TT>`term/aaa'</TT>.  The code in the library can use
<CODE>(getenv "TERM")</CODE> to find the full terminal type name.</P><P>

<A NAME="IDX2795"></A>
  The library's name is constructed by concatenating the value of the
variable <CODE>term-file-prefix</CODE> and the terminal type.  Your <TT>`.emacs'</TT>
file can prevent the loading of the terminal-specific library by setting
<CODE>term-file-prefix</CODE> to <CODE>nil</CODE>.
</P><P>

<A NAME="IDX2796"></A>
  Emacs runs the hook <CODE>term-setup-hook</CODE> at the end of
initialization, after both your <TT>`.emacs'</TT> file and any
terminal-specific library have been read in.  Add hook functions to this
hook if you wish to override part of any of the terminal-specific
libraries and to define initializations for terminals that do not have a
library.  See section <A HREF="emacs_33.html#SEC484">AD.2.3 Hooks</A>.
</P><P>

<A NAME="Find Init"></A>
<HR SIZE="6">
<A NAME="SEC509"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC508"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC510"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC510"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC505"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC510"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.7.4 How Emacs Finds Your Init File </H3>
<!--docid::SEC509::-->
<P>

  Normally Emacs uses the environment variable <CODE>HOME</CODE> to find
<TT>`.emacs'</TT>; that's what <SAMP>`~'</SAMP> means in a file name.  But if you
run Emacs from a shell started by <CODE>su</CODE>, Emacs tries to find your
own <TT>`.emacs'</TT>, not that of the user you are currently pretending
to be.  The idea is that you should get your own editor customizations
even if you are running as the super user.
</P><P>

  More precisely, Emacs first determines which user's init file to use.
It gets the user name from the environment variables <CODE>LOGNAME</CODE> and
<CODE>USER</CODE>; if neither of those exists, it uses effective user-ID.
If that user name matches the real user-ID, then Emacs uses <CODE>HOME</CODE>;
otherwise, it looks up the home directory corresponding to that user
name in the system's data base of users.
</P><P>

<A NAME="Quitting"></A>
<HR SIZE="6">
<A NAME="SEC510"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC509"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC511"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC475"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC511"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AD.8 Quitting and Aborting </H2>
<!--docid::SEC510::-->
<P>

<DL COMPACT>
<DT><KBD>C-g</KBD>
<DD><DT><KBD>C-<KBD>BREAK</KBD> (MS-DOS only)</KBD>
<DD>Quit: cancel running or partially typed command.
<DT><KBD>C-]</KBD>
<DD>Abort innermost recursive editing level and cancel the command which
invoked it (<CODE>abort-recursive-edit</CODE>).
<DT><KBD><KBD>ESC</KBD> <KBD>ESC</KBD> <KBD>ESC</KBD></KBD>
<DD>Either quit or abort, whichever makes sense (<CODE>keyboard-escape-quit</CODE>).
<DT><KBD>M-x top-level</KBD>
<DD>Abort all recursive editing levels that are currently executing.
<DT><KBD>C-x u</KBD>
<DD>Cancel a previously made change in the buffer contents (<CODE>undo</CODE>).
</DL>
<P>

  There are two ways of canceling commands which are not finished
executing: <EM>quitting</EM> with <KBD>C-g</KBD>, and <EM>aborting</EM> with
<KBD>C-]</KBD> or <KBD>M-x top-level</KBD>.  Quitting cancels a partially typed
command or one which is already running.  Aborting exits a recursive
editing level and cancels the command that invoked the recursive edit.
(See section <A HREF="emacs_32.html#SEC466">AC.26 Recursive Editing Levels</A>.)
</P><P>

<A NAME="IDX2797"></A>
<A NAME="IDX2798"></A>
  Quitting with <KBD>C-g</KBD> is used for getting rid of a partially typed
command, or a numeric argument that you don't want.  It also stops a
running command in the middle in a relatively safe way, so you can use
it if you accidentally give a command which takes a long time.  In
particular, it is safe to quit out of killing; either your text will
<EM>all</EM> still be in the buffer, or it will <EM>all</EM> be in the kill
ring (or maybe both).  Quitting an incremental search does special
things documented under searching; in general, it may take two
successive <KBD>C-g</KBD> characters to get out of a search
(see section <A HREF="emacs_14.html#SEC92">K.1 Incremental Search</A>).
</P><P>

  On MS-DOS, the character <KBD>C-<KBD>BREAK</KBD></KBD> serves as a quit character
like <KBD>C-g</KBD>.  The reason is that it is not feasible, on MS-DOS, to
recognize <KBD>C-g</KBD> while a command is running, between interactions
with the user.  By contrast, it <EM>is</EM> feasible to recognize
<KBD>C-<KBD>BREAK</KBD></KBD> at all times.  See section <A HREF="emacs_37.html#SEC555">AH.1 Keyboard and Mouse on MS-DOS</A>.
</P><P>

<A NAME="IDX2799"></A>
  <KBD>C-g</KBD> works by setting the variable <CODE>quit-flag</CODE> to <CODE>t</CODE>
the instant <KBD>C-g</KBD> is typed; Emacs Lisp checks this variable
frequently and quits if it is non-<CODE>nil</CODE>.  <KBD>C-g</KBD> is only
actually executed as a command if you type it while Emacs is waiting for
input.  In that case, the command it runs is <CODE>keyboard-quit</CODE>.
</P><P>

  If you quit with <KBD>C-g</KBD> a second time before the first <KBD>C-g</KBD> is
recognized, you activate the "emergency escape" feature and return to
the shell.  See section <A HREF="emacs_33.html#SEC519">AD.9.8 Emergency Escape</A>.
</P><P>

<A NAME="IDX2800"></A>
  There may be times when you cannot quit.  When Emacs is waiting for
the operating system to do something, quitting is impossible unless
special pains are taken for the particular system call within Emacs
where the waiting occurs.  We have done this for the system calls that
users are likely to want to quit from, but it's possible you will find
another.  In one very common case--waiting for file input or output
using NFS--Emacs itself knows how to quit, but many NFS implementations
simply do not allow user programs to stop waiting for NFS when the NFS
server is hung.
</P><P>

<A NAME="IDX2801"></A>
<A NAME="IDX2802"></A>
<A NAME="IDX2803"></A>
  Aborting with <KBD>C-]</KBD> (<CODE>abort-recursive-edit</CODE>) is used to get
out of a recursive editing level and cancel the command which invoked
it.  Quitting with <KBD>C-g</KBD> does not do this, and could not do this,
because it is used to cancel a partially typed command <EM>within</EM> the
recursive editing level.  Both operations are useful.  For example, if
you are in a recursive edit and type <KBD>C-u 8</KBD> to enter a numeric
argument, you can cancel that argument with <KBD>C-g</KBD> and remain in the
recursive edit.
</P><P>

<A NAME="IDX2804"></A>
<A NAME="IDX2805"></A>
  The command <KBD><KBD>ESC</KBD> <KBD>ESC</KBD> <KBD>ESC</KBD></KBD>
(<CODE>keyboard-escape-quit</CODE>) can either quit or abort.  This key was
defined because <KBD>ESC</KBD> is used to "get out" in many PC programs.
It can cancel a prefix argument, clear a selected region, or get out of
a Query Replace, like <KBD>C-g</KBD>.  It can get out of the minibuffer or a
recursive edit, like <KBD>C-]</KBD>.  It can also get out of splitting the
frame into multiple windows, like <KBD>C-x 1</KBD>.  One thing it cannot do,
however, is stop a command that is running.  That's because it executes
as an ordinary command, and Emacs doesn't notice it until it is ready
for a command.
</P><P>

<A NAME="IDX2806"></A>
  The command <KBD>M-x top-level</KBD> is equivalent to "enough" <KBD>C-]</KBD>
commands to get you out of all the levels of recursive edits that you
are in.  <KBD>C-]</KBD> gets you out one level at a time, but <KBD>M-x
top-level</KBD> goes out all levels at once.  Both <KBD>C-]</KBD> and <KBD>M-x
top-level</KBD> are like all other commands, and unlike <KBD>C-g</KBD>, in that
they take effect only when Emacs is ready for a command.  <KBD>C-]</KBD> is
an ordinary key and has its meaning only because of its binding in the
keymap.  See section <A HREF="emacs_32.html#SEC466">AC.26 Recursive Editing Levels</A>.
</P><P>

  <KBD>C-x u</KBD> (<CODE>undo</CODE>) is not strictly speaking a way of canceling
a command, but you can think of it as canceling a command that already
finished executing.  See section <A HREF="emacs_7.html#SEC23">D.4 Undoing Changes</A>, for more information
about the undo facility.
</P><P>

<A NAME="Lossage"></A>
<HR SIZE="6">
<A NAME="SEC511"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC510"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC512"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC510"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC521"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AD.9 Dealing with Emacs Trouble </H2>
<!--docid::SEC511::-->
<P>

  This section describes various conditions in which Emacs fails to work
normally, and how to recognize them and correct them.  For a list of
additional problems you might encounter, see section `Bugs and problems' in <CITE>GNU Emacs FAQ</CITE>, and the file <TT>`etc/PROBLEMS'</TT>
in the Emacs distribution.  Type <KBD>C-h F</KBD> to read the FAQ; type
<KBD>C-h P</KBD> to read the <TT>`PROBLEMS'</TT> file.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC512">AD.9.1 If <KBD>DEL</KBD> Fails to Delete</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">What to do if <KBD>DEL</KBD> doesn't delete.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC513">AD.9.2 Recursive Editing Levels</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">`[...]' in mode line around the parentheses.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC514">AD.9.3 Garbage on the Screen</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Garbage on the screen.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC515">AD.9.4 Garbage in the Text</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Garbage in the text.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC516">AD.9.5 Spontaneous Entry to Incremental Search</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Spontaneous entry to incremental search.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC517">AD.9.6 Running out of Memory</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to cope when you run out of memory.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC518">AD.9.7 Recovery After a Crash</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Recovering editing in an Emacs session that crashed.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC519">AD.9.8 Emergency Escape</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Emergency escape---
                            What to do if Emacs stops responding.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC520">AD.9.9 Help for Total Frustration</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">When you are at your wits' end.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="DEL Does Not Delete"></A>
<HR SIZE="6">
<A NAME="SEC512"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC511"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC513"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC511"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC511"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC521"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.9.1 If <KBD>DEL</KBD> Fails to Delete </H3>
<!--docid::SEC512::-->
<P>

  Every keyboard has a large key, a little ways above the <KBD>RET</KBD> or
<KBD>ENTER</KBD> key, which you normally use outside Emacs to erase the
last character that you typed.  We call this key <EM>the usual
erasure key</EM>.  In Emacs, it is supposed to be equivalent to <KBD>DEL</KBD>,
and when Emacs is properly configured for your terminal, it translates
that key into the character <KBD>DEL</KBD>.
</P><P>

  When Emacs starts up using a window system, it determines
automatically which key should be <KBD>DEL</KBD>.  In some unusual cases
Emacs gets the wrong information from the system.  If the usual
erasure key deletes forwards instead of backwards, that is probably
what happened--Emacs ought to be treating the <KBD>DELETE</KBD> key as
<KBD>DEL</KBD>, but it isn't.
</P><P>

  With a window system, if the usual erasure key is labeled
<KBD>BACKSPACE</KBD> and there is a <KBD>DELETE</KBD> key elsewhere, but the
<KBD>DELETE</KBD> key deletes backward instead of forward, that too
suggests Emacs got the wrong information--but in the opposite sense.
It ought to be treating the <KBD>BACKSPACE</KBD> key as <KBD>DEL</KBD>, and
treating <KBD>DELETE</KBD> differently, but it isn't.
</P><P>

  On a text-only terminal, if you find the usual erasure key prompts
for a Help command, like <KBD>Control-h</KBD>, instead of deleting a
character, it means that key is actually sending the <KBD>BS</KBD>
character.  Emacs ought to be treating <KBD>BS</KBD> as <KBD>DEL</KBD>, but it
isn't.
</P><P>

  In all of those cases, the immediate remedy is the same: use the
command <KBD>M-x normal-erase-is-backspace-mode</KBD>.  This toggles
between the two modes that Emacs supports for handling <KBD>DEL</KBD>, so
if Emacs starts in the wrong mode, it should switch to the right mode.
On a text-only terminal, if you want to ask for help when <KBD>BS</KBD> is
treated as <KBD>DEL</KBD>, use <KBD>F1</KBD>; <KBD>C-?</KBD> may also work, if it
sends character code 127.
</P><P>

<A NAME="IDX2807"></A>
  To fix the problem automatically for every Emacs session, you can
put one of the following lines into your <TT>`.emacs'</TT> file
(see section <A HREF="emacs_33.html#SEC505">AD.7 The Init File, <TT>`~/.emacs'</TT></A>).  For the first case above, where <KBD>DELETE</KBD>
deletes forwards instead of backwards, use this line to make
<KBD>DELETE</KBD> act as <KBD>DEL</KBD> (resulting in behavior compatible
with Emacs 20 and previous versions):
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(normal-erase-is-backspace-mode 0)
</pre></td></tr></table></P><P>

For the other two cases, where <KBD>BACKSPACE</KBD> ought to act as
<KBD>DEL</KBD>, use this line:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(normal-erase-is-backspace-mode 1)
</pre></td></tr></table></P><P>

<A NAME="IDX2808"></A>
  Another way to fix the problem for every Emacs session is to
customize the variable <CODE>normal-erase-is-backspace</CODE>: the value
<CODE>t</CODE> specifies the mode where <KBD>BS</KBD> or <KBD>BACKSPACE</KBD> is
<KBD>DEL</KBD>, and <CODE>nil</CODE> specifies the other mode.  See section <A HREF="emacs_33.html#SEC479">AD.2.2 Easy Customization Interface</A>.
</P><P>

  With a window system, it can also happen that the usual erasure key
is labeled <KBD>BACKSPACE</KBD>, there is a <KBD>DELETE</KBD> key elsewhere, and
both keys delete forward.  This probably means that someone has
redefined your <KBD>BACKSPACE</KBD> key as a <KBD>DELETE</KBD> key.  With X,
this is typically done with a command to the <CODE>xmodmap</CODE> program
when you start the server or log in.  The most likely motive for this
customization was to support old versions of Emacs, so we recommend
you simply remove it now.
</P><P>

<A NAME="Stuck Recursive"></A>
<HR SIZE="6">
<A NAME="SEC513"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC512"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC514"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC514"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC511"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC521"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.9.2 Recursive Editing Levels </H3>
<!--docid::SEC513::-->
<P>

  Recursive editing levels are important and useful features of Emacs, but
they can seem like malfunctions to the user who does not understand them.
</P><P>

  If the mode line has square brackets <SAMP>`[<small>...</small>]'</SAMP> around the parentheses
that contain the names of the major and minor modes, you have entered a
recursive editing level.  If you did not do this on purpose, or if you
don't understand what that means, you should just get out of the recursive
editing level.  To do so, type <KBD>M-x top-level</KBD>.  This is called getting
back to top level.  See section <A HREF="emacs_32.html#SEC466">AC.26 Recursive Editing Levels</A>.
</P><P>

<A NAME="Screen Garbled"></A>
<HR SIZE="6">
<A NAME="SEC514"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC513"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC515"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC515"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC511"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC521"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.9.3 Garbage on the Screen </H3>
<!--docid::SEC514::-->
<P>

  If the data on the screen looks wrong, the first thing to do is see
whether the text is really wrong.  Type <KBD>C-l</KBD> to redisplay the
entire screen.  If the screen appears correct after this, the problem
was entirely in the previous screen update.  (Otherwise, see the following
section.)
</P><P>

  Display updating problems often result from an incorrect termcap entry
for the terminal you are using.  The file <TT>`etc/TERMS'</TT> in the Emacs
distribution gives the fixes for known problems of this sort.
<TT>`INSTALL'</TT> contains general advice for these problems in one of its
sections.  Very likely there is simply insufficient padding for certain
display operations.  To investigate the possibility that you have this sort
of problem, try Emacs on another terminal made by a different manufacturer.
If problems happen frequently on one kind of terminal but not another kind,
it is likely to be a bad termcap entry, though it could also be due to a
bug in Emacs that appears for terminals that have or that lack specific
features.
</P><P>

<A NAME="Text Garbled"></A>
<HR SIZE="6">
<A NAME="SEC515"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC514"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC516"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC516"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC511"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC521"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.9.4 Garbage in the Text </H3>
<!--docid::SEC515::-->
<P>

  If <KBD>C-l</KBD> shows that the text is wrong, try undoing the changes to it
using <KBD>C-x u</KBD> until it gets back to a state you consider correct.  Also
try <KBD>C-h l</KBD> to find out what command you typed to produce the observed
results.
</P><P>

  If a large portion of text appears to be missing at the beginning or
end of the buffer, check for the word <SAMP>`Narrow'</SAMP> in the mode line.
If it appears, the text you don't see is probably still present, but
temporarily off-limits.  To make it accessible again, type <KBD>C-x n
w</KBD>.  See section <A HREF="emacs_32.html#SEC462">AC.22 Narrowing</A>.
</P><P>

<A NAME="Unasked-for Search"></A>
<HR SIZE="6">
<A NAME="SEC516"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC515"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC517"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC517"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC511"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC521"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.9.5 Spontaneous Entry to Incremental Search </H3>
<!--docid::SEC516::-->
<P>

  If Emacs spontaneously displays <SAMP>`I-search:'</SAMP> at the bottom of the
screen, it means that the terminal is sending <KBD>C-s</KBD> and <KBD>C-q</KBD>
according to the poorly designed xon/xoff "flow control" protocol.
</P><P>

  If this happens to you, your best recourse is to put the terminal in a
mode where it will not use flow control, or give it so much padding that
it will never send a <KBD>C-s</KBD>.  (One way to increase the amount of
padding is to set the variable <CODE>baud-rate</CODE> to a larger value.  Its
value is the terminal output speed, measured in the conventional units
of baud.)
</P><P>

<A NAME="IDX2809"></A>
<A NAME="IDX2810"></A>
<A NAME="IDX2811"></A>
  If you don't succeed in turning off flow control, the next best thing
is to tell Emacs to cope with it.  To do this, call the function
<CODE>enable-flow-control</CODE>.
</P><P>

<A NAME="IDX2812"></A>
  Typically there are particular terminal types with which you must use
flow control.  You can conveniently ask for flow control on those
terminal types only, using <CODE>enable-flow-control-on</CODE>.  For example,
if you find you must use flow control on VT-100 and H19 terminals, put
the following in your <TT>`.emacs'</TT> file:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(enable-flow-control-on "vt100" "h19")
</pre></td></tr></table></P><P>

  When flow control is enabled, you must type <KBD>C-\</KBD> to get the
effect of a <KBD>C-s</KBD>, and type <KBD>C-^</KBD> to get the effect of a
<KBD>C-q</KBD>.  (These aliases work by means of keyboard translations; see
<A HREF="emacs_33.html#SEC503">AD.5 Keyboard Translations</A>.)
</P><P>

<A NAME="Memory Full"></A>
<HR SIZE="6">
<A NAME="SEC517"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC516"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC518"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC518"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC511"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC521"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.9.6 Running out of Memory </H3>
<!--docid::SEC517::-->
<P>

  If you get the error message <SAMP>`Virtual memory exceeded'</SAMP>, save your
modified buffers with <KBD>C-x s</KBD>.  This method of saving them has the
smallest need for additional memory.  Emacs keeps a reserve of memory
which it makes available when this error happens; that should be enough
to enable <KBD>C-x s</KBD> to complete its work.
</P><P>

  Once you have saved your modified buffers, you can exit this Emacs job
and start another, or you can use <KBD>M-x kill-some-buffers</KBD> to free
space in the current Emacs job.  If you kill buffers containing a
substantial amount of text, you can safely go on editing.  Emacs refills
its memory reserve automatically when it sees sufficient free space
available, in case you run out of memory another time.
</P><P>

  Do not use <KBD>M-x buffer-menu</KBD> to save or kill buffers when you run
out of memory, because the buffer menu needs a fair amount of memory
itself, and the reserve supply may not be enough.
</P><P>

<A NAME="After a Crash"></A>
<HR SIZE="6">
<A NAME="SEC518"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC517"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC519"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC519"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC511"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC521"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.9.7 Recovery After a Crash </H3>
<!--docid::SEC518::-->
<P>

  If Emacs or the computer crashes, you can recover the files you were
editing at the time of the crash from their auto-save files.  To do
this, start Emacs again and type the command <KBD>M-x recover-session</KBD>.
</P><P>

  This command initially displays a buffer which lists interrupted
session files, each with its date.  You must choose which session to
recover from.  Typically the one you want is the most recent one.  Move
point to the one you choose, and type <KBD>C-c C-c</KBD>.
</P><P>

  Then <CODE>recover-session</CODE> asks about each of the files that you were
editing during that session; it asks whether to recover that file.  If
you answer <KBD>y</KBD> for a file, it shows the dates of that file and its
auto-save file, then asks once again whether to recover that file.  For
the second question, you must confirm with <KBD>yes</KBD>.  If you do, Emacs
visits the file but gets the text from the auto-save file.
</P><P>

  When <CODE>recover-session</CODE> is done, the files you've chosen to
recover are present in Emacs buffers.  You should then save them.  Only
this--saving them--updates the files themselves.
</P><P>

<A NAME="Emergency Escape"></A>
<HR SIZE="6">
<A NAME="SEC519"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC518"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC520"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC520"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC511"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC521"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.9.8 Emergency Escape </H3>
<!--docid::SEC519::-->
<P>

  Because at times there have been bugs causing Emacs to loop without
checking <CODE>quit-flag</CODE>, a special feature causes Emacs to be suspended
immediately if you type a second <KBD>C-g</KBD> while the flag is already set,
so you can always get out of GNU Emacs.  Normally Emacs recognizes and
clears <CODE>quit-flag</CODE> (and quits!) quickly enough to prevent this from
happening.  (On MS-DOS and compatible systems, type <KBD>C-<KBD>BREAK</KBD></KBD>
twice.)
</P><P>

  When you resume Emacs after a suspension caused by multiple <KBD>C-g</KBD>, it
asks two questions before going back to what it had been doing:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>Auto-save? (y or n)
Abort (and dump core)? (y or n)
</pre></td></tr></table></P><P>

Answer each one with <KBD>y</KBD> or <KBD>n</KBD> followed by <KBD>RET</KBD>.
</P><P>

  Saying <KBD>y</KBD> to <SAMP>`Auto-save?'</SAMP> causes immediate auto-saving of all
modified buffers in which auto-saving is enabled.
</P><P>

  Saying <KBD>y</KBD> to <SAMP>`Abort (and dump core)?'</SAMP> causes an illegal instruction to be
executed, dumping core.  This is to enable a wizard to figure out why Emacs
was failing to quit in the first place.  Execution does not continue
after a core dump.  If you answer <KBD>n</KBD>, execution does continue.  With
luck, GNU Emacs will ultimately check <CODE>quit-flag</CODE> and quit normally.
If not, and you type another <KBD>C-g</KBD>, it is suspended again.
</P><P>

  If Emacs is not really hung, just slow, you may invoke the double
<KBD>C-g</KBD> feature without really meaning to.  Then just resume and answer
<KBD>n</KBD> to both questions, and you will arrive at your former state.
Presumably the quit you requested will happen soon.
</P><P>

  The double <KBD>C-g</KBD> feature is turned off when Emacs is running under
the X Window System, since you can use the window manager to kill Emacs
or to create another window and run another program.
</P><P>

  On MS-DOS and compatible systems, the emergency escape feature is
sometimes unavailable, even if you press <KBD>C-<KBD>BREAK</KBD></KBD> twice, when
some system call (MS-DOS or BIOS) hangs, or when Emacs is stuck in a
very tight endless loop (in C code, <STRONG>not</STRONG> in Lisp code).
</P><P>

<A NAME="Total Frustration"></A>
<HR SIZE="6">
<A NAME="SEC520"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC519"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC521"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC511"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC511"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC521"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.9.9 Help for Total Frustration </H3>
<!--docid::SEC520::-->
<P>

  If using Emacs (or something else) becomes terribly frustrating and none
of the techniques described above solve the problem, Emacs can still help
you.
</P><P>

  First, if the Emacs you are using is not responding to commands, type
<KBD>C-g C-g</KBD> to get out of it and then start a new one.
</P><P>

<A NAME="IDX2813"></A>
  Second, type <KBD>M-x doctor <KBD>RET</KBD></KBD>.
</P><P>

  The doctor will help you feel better.  Each time you say something to
the doctor, you must end it by typing <KBD>RET</KBD> <KBD>RET</KBD>.  This lets
the doctor know you are finished.
</P><P>

<A NAME="Bugs"></A>
<HR SIZE="6">
<A NAME="SEC521"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC520"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC522"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC511"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC526"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AD.10 Reporting Bugs </H2>
<!--docid::SEC521::-->
<P>

<A NAME="IDX2814"></A>
  Sometimes you will encounter a bug in Emacs.  Although we cannot
promise we can or will fix the bug, and we might not even agree that it
is a bug, we want to hear about problems you encounter.  Often we agree
they are bugs and want to fix them.
</P><P>

  To make it possible for us to fix a bug, you must report it.  In order
to do so effectively, you must know when and how to do it.
</P><P>

  Before reporting a bug, it is a good idea to see if it is already
known.  You can find the list of known problems in the file
<TT>`etc/PROBLEMS'</TT> in the Emacs distribution; type <KBD>C-h P</KBD> to read
it.  Some additional user-level problems can be found in section `Bugs and problems' in <CITE>GNU Emacs FAQ</CITE>.  Looking up your
problem in these two documents might provide you with a solution or a
work-around, or give you additional information about related issues.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC522">AD.10.1 When Is There a Bug</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Have you really found a bug?</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC523">AD.10.2 Understanding Bug Reporting</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to report a bug effectively.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC524">AD.10.3 Checklist for Bug Reports</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Steps to follow for a good bug report.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="emacs_33.html#SEC525">AD.10.4 Sending Patches for GNU Emacs</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How to send a patch for GNU Emacs.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Bug Criteria"></A>
<HR SIZE="6">
<A NAME="SEC522"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC521"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC523"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC521"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC521"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC526"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.10.1 When Is There a Bug </H3>
<!--docid::SEC522::-->
<P>

  If Emacs executes an illegal instruction, or dies with an operating
system error message that indicates a problem in the program (as opposed to
something like "disk full"), then it is certainly a bug.
</P><P>

  If Emacs updates the display in a way that does not correspond to what is
in the buffer, then it is certainly a bug.  If a command seems to do the
wrong thing but the problem corrects itself if you type <KBD>C-l</KBD>, it is a
case of incorrect display updating.
</P><P>

  Taking forever to complete a command can be a bug, but you must make
certain that it was really Emacs's fault.  Some commands simply take a
long time.  Type <KBD>C-g</KBD> (<KBD>C-<KBD>BREAK</KBD></KBD> on MS-DOS) and then <KBD>C-h l</KBD>
to see whether the input Emacs received was what you intended to type;
if the input was such that you <EM>know</EM> it should have been processed
quickly, report a bug.  If you don't know whether the command should
take a long time, find out by looking in the manual or by asking for
assistance.
</P><P>

  If a command you are familiar with causes an Emacs error message in a
case where its usual definition ought to be reasonable, it is probably a
bug.
</P><P>

  If a command does the wrong thing, that is a bug.  But be sure you know
for certain what it ought to have done.  If you aren't familiar with the
command, or don't know for certain how the command is supposed to work,
then it might actually be working right.  Rather than jumping to
conclusions, show the problem to someone who knows for certain.
</P><P>

  Finally, a command's intended definition may not be the best
possible definition for editing with.  This is a very important sort
of problem, but it is also a matter of judgment.  Also, it is easy to
come to such a conclusion out of ignorance of some of the existing
features.  It is probably best not to complain about such a problem
until you have checked the documentation in the usual ways, feel
confident that you understand it, and know for certain that what you
want is not available.  If you are not sure what the command is
supposed to do after a careful reading of the manual, check the index
and glossary for any terms that may be unclear.
</P><P>

  If after careful rereading of the manual you still do not understand
what the command should do, that indicates a bug in the manual, which
you should report.  The manual's job is to make everything clear to
people who are not Emacs experts--including you.  It is just as
important to report documentation bugs as program bugs.
</P><P>

  If the on-line documentation string of a function or variable disagrees
with the manual, one of them must be wrong; that is a bug.
</P><P>

<A NAME="Understanding Bug Reporting"></A>
<HR SIZE="6">
<A NAME="SEC523"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC522"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC524"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC524"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC521"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC526"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.10.2 Understanding Bug Reporting </H3>
<!--docid::SEC523::-->
<P>

<A NAME="IDX2815"></A>
  When you decide that there is a bug, it is important to report it and to
report it in a way which is useful.  What is most useful is an exact
description of what commands you type, starting with the shell command to
run Emacs, until the problem happens.
</P><P>

  The most important principle in reporting a bug is to report
<EM>facts</EM>.  Hypotheses and verbal descriptions are no substitute for
the detailed raw data.  Reporting the facts is straightforward, but many
people strain to posit explanations and report them instead of the
facts.  If the explanations are based on guesses about how Emacs is
implemented, they will be useless; meanwhile, lacking the facts, we will
have no real information about the bug.
</P><P>

  For example, suppose that you type <KBD>C-x C-f /glorp/baz.ugh
<KBD>RET</KBD></KBD>, visiting a file which (you know) happens to be rather large,
and Emacs displayed <SAMP>`I feel pretty today'</SAMP>.  The best way to report
the bug is with a sentence like the preceding one, because it gives all
the facts.
</P><P>

  A bad way would be to assume that the problem is due to the size of
the file and say, "I visited a large file, and Emacs displayed <SAMP>`I
feel pretty today'</SAMP>."  This is what we mean by "guessing
explanations."  The problem is just as likely to be due to the fact
that there is a <SAMP>`z'</SAMP> in the file name.  If this is so, then when we
got your report, we would try out the problem with some "large file,"
probably with no <SAMP>`z'</SAMP> in its name, and not see any problem.  There
is no way in the world that we could guess that we should try visiting a
file with a <SAMP>`z'</SAMP> in its name.
</P><P>

  Alternatively, the problem might be due to the fact that the file starts
with exactly 25 spaces.  For this reason, you should make sure that you
inform us of the exact contents of any file that is needed to reproduce the
bug.  What if the problem only occurs when you have typed the <KBD>C-x C-a</KBD>
command previously?  This is why we ask you to give the exact sequence of
characters you typed since starting the Emacs session.
</P><P>

  You should not even say "visit a file" instead of <KBD>C-x C-f</KBD> unless
you <EM>know</EM> that it makes no difference which visiting command is used.
Similarly, rather than saying "if I have three characters on the line,"
say "after I type <KBD><KBD>RET</KBD> A B C <KBD>RET</KBD> C-p</KBD>," if that is
the way you entered the text.</P><P>

  So please don't guess any explanations when you report a bug.  If you
want to actually <EM>debug</EM> the problem, and report explanations that
are more than guesses, that is useful--but please include the facts as
well.
</P><P>

<A NAME="Checklist"></A>
<HR SIZE="6">
<A NAME="SEC524"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC523"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC525"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC525"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC521"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC526"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.10.3 Checklist for Bug Reports </H3>
<!--docid::SEC524::-->
<P>

<A NAME="IDX2816"></A>
  The best way to send a bug report is to mail it electronically to the
Emacs maintainers at <A HREF="mailto:bug-gnu-emacs@gnu.org">bug-gnu-emacs@gnu.org</A>, or to
<A HREF="mailto:emacs-pretest-bug@gnu.org">emacs-pretest-bug@gnu.org</A> if you are pretesting an Emacs beta
release.  (If you want to suggest a change as an improvement, use the
same address.)
</P><P>

  If you'd like to read the bug reports, you can find them on the
newsgroup <SAMP>`gnu.emacs.bug'</SAMP>; keep in mind, however, that as a
spectator you should not criticize anything about what you see there.
The purpose of bug reports is to give information to the Emacs
maintainers.  Spectators are welcome only as long as they do not
interfere with this.  In particular, some bug reports contain fairly
large amounts of data; spectators should not complain about this.
</P><P>

  Please do not post bug reports using netnews; mail is more reliable
than netnews about reporting your correct address, which we may need
in order to ask you for more information.  If your data is more than
500,000 bytes, please don't include it directly in the bug report;
instead, offer to send it on request, or make it available by ftp and
say where.
</P><P>

  If you can't send electronic mail, then mail the bug report on paper
or machine-readable media to this address:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=display><pre style="font-family: serif">GNU Emacs Bugs
Free Software Foundation
59 Temple Place, Suite 330
Boston, MA 02111-1307 USA
</pre></td></tr></table></P><P>

  We do not promise to fix the bug; but if the bug is serious,
or ugly, or easy to fix, chances are we will want to.
</P><P>

<A NAME="IDX2817"></A>
  A convenient way to send a bug report for Emacs is to use the command
<KBD>M-x report-emacs-bug</KBD>.  This sets up a mail buffer (see section <A HREF="emacs_29.html#SEC363">Z. Sending Mail</A>) and automatically inserts <EM>some</EM> of the essential
information.  However, it cannot supply all the necessary information;
you should still read and follow the guidelines below, so you can enter
the other crucial information by hand before you send the message.
</P><P>

  To enable maintainers to investigate a bug, your report
should include all these things:
</P><P>

<UL>
<LI>
The version number of Emacs.  Without this, we won't know whether there
is any point in looking for the bug in the current version of GNU
Emacs.
<P>

You can get the version number by typing <KBD>M-x emacs-version
<KBD>RET</KBD></KBD>.  If that command does not work, you probably have something
other than GNU Emacs, so you will have to report the bug somewhere
else.
</P><P>

<LI>
The type of machine you are using, and the operating system name and
version number.  <KBD>M-x emacs-version <KBD>RET</KBD></KBD> provides this
information too.  Copy its output from the <SAMP>`*Messages*'</SAMP> buffer, so
that you get it all and get it accurately.
<P>

<LI>
The operands given to the <CODE>configure</CODE> command when Emacs was
installed.
<P>

<LI>
A complete list of any modifications you have made to the Emacs source.
(We may not have time to investigate the bug unless it happens in an
unmodified Emacs.  But if you've made modifications and you don't tell
us, you are sending us on a wild goose chase.)
<P>

Be precise about these changes.  A description in English is not
enough--send a context diff for them.
</P><P>

Adding files of your own, or porting to another machine, is a
modification of the source.
</P><P>

<LI>
Details of any other deviations from the standard procedure for installing
GNU Emacs.
<P>

<LI>
The complete text of any files needed to reproduce the bug.
<P>

  If you can tell us a way to cause the problem without visiting any files,
please do so.  This makes it much easier to debug.  If you do need files,
make sure you arrange for us to see their exact contents.  For example, it
can often matter whether there are spaces at the ends of lines, or a
newline after the last line in the buffer (nothing ought to care whether
the last line is terminated, but try telling the bugs that).
</P><P>

<LI>
The precise commands we need to type to reproduce the bug.
<P>

<A NAME="IDX2818"></A>
<A NAME="IDX2819"></A>
<A NAME="IDX2820"></A>
  The easy way to record the input to Emacs precisely is to write a
dribble file.  To start the file, execute the Lisp expression
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(open-dribble-file "~/dribble")
</pre></td></tr></table></P><P>

using <KBD>M-:</KBD> or from the <SAMP>`*scratch*'</SAMP> buffer just after
starting Emacs.  From then on, Emacs copies all your input to the
specified dribble file until the Emacs process is killed.
</P><P>

<LI>
<A NAME="IDX2821"></A>
<A NAME="IDX2822"></A>
<A NAME="IDX2823"></A>
For possible display bugs, the terminal type (the value of environment
variable <CODE>TERM</CODE>), the complete termcap entry for the terminal from
<TT>`/etc/termcap'</TT> (since that file is not identical on all machines),
and the output that Emacs actually sent to the terminal.
<P>

The way to collect the terminal output is to execute the Lisp expression
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>(open-termscript "~/termscript")
</pre></td></tr></table></P><P>

using <KBD>M-:</KBD> or from the <SAMP>`*scratch*'</SAMP> buffer just after
starting Emacs.  From then on, Emacs copies all terminal output to the
specified termscript file as well, until the Emacs process is killed.
If the problem happens when Emacs starts up, put this expression into
your <TT>`.emacs'</TT> file so that the termscript file will be open when
Emacs displays the screen for the first time.
</P><P>

Be warned: it is often difficult, and sometimes impossible, to fix a
terminal-dependent bug without access to a terminal of the type that
stimulates the bug.</P><P>

<LI>
If non-ASCII text or internationalization is relevant, the locale that
was current when you started Emacs.  On GNU/Linux and Unix systems, or
if you use a Posix-style shell such as Bash, you can use this shell
command to view the relevant values:
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>echo LC_ALL=$LC_ALL LC_COLLATE=$LC_COLLATE LC_TYPE=$LC_TYPE \
  LC_MESSAGES=$LC_MESSAGES LC_TIME=$LC_TIME LANG=$LANG
</FONT></pre></td></tr></table></P><P>

Alternatively, use the <CODE>locale</CODE> command, if your system has it,
to display your locale settings.
</P><P>

You can use the <KBD>M-!</KBD> command to execute these commands from
Emacs, and then copy the output from the <SAMP>`*Messages*'</SAMP> buffer into
the bug report.  Alternatively, <KBD>M-x getenv <KBD>RET</KBD> LC_ALL
<KBD>RET</KBD></KBD> will display the value of <CODE>LC_ALL</CODE> in the echo area, and
you can copy its output from the <SAMP>`*Messages*'</SAMP> buffer.
</P><P>

<LI>
A description of what behavior you observe that you believe is
incorrect.  For example, "The Emacs process gets a fatal signal," or,
"The resulting text is as follows, which I think is wrong."
<P>

Of course, if the bug is that Emacs gets a fatal signal, then one can't
miss it.  But if the bug is incorrect text, the maintainer might fail to
notice what is wrong.  Why leave it to chance?
</P><P>

Even if the problem you experience is a fatal signal, you should still
say so explicitly.  Suppose something strange is going on, such as, your
copy of the source is out of sync, or you have encountered a bug in the
C library on your system.  (This has happened!)  Your copy might crash
and the copy here might not.  If you <EM>said</EM> to expect a crash, then
when Emacs here fails to crash, we would know that the bug was not
happening.  If you don't say to expect a crash, then we would not know
whether the bug was happening--we would not be able to draw any
conclusion from our observations.
</P><P>

<LI>
If the bug is that the Emacs Manual or the Emacs Lisp Reference Manual
fails to describe the actual behavior of Emacs, or that the text is
confusing, copy in the text from the online manual which you think is
at fault.  If the section is small, just the section name is enough.
<P>

<LI>
If the manifestation of the bug is an Emacs error message, it is
important to report the precise text of the error message, and a
backtrace showing how the Lisp program in Emacs arrived at the error.
<P>

To get the error message text accurately, copy it from the
<SAMP>`*Messages*'</SAMP> buffer into the bug report.  Copy all of it, not just
part.
</P><P>

<A NAME="IDX2824"></A>
<A NAME="IDX2825"></A>
To make a backtrace for the error, use <KBD>M-x toggle-debug-on-error</KBD>
before the error happens (that is to say, you must give that command
and then make the bug happen).  This causes the error to run the Lisp
debugger, which shows you a backtrace.  Copy the text of the
debugger's backtrace into the bug report.  See section `The Lisp Debugger' in <CITE>the Emacs Lisp Reference Manual</CITE>, for information on
debugging Emacs Lisp programs with the Edebug package.
</P><P>

This use of the debugger is possible only if you know how to make the
bug happen again.  If you can't make it happen again, at least copy
the whole error message.
</P><P>

<LI>
Check whether any programs you have loaded into the Lisp world,
including your <TT>`.emacs'</TT> file, set any variables that may affect the
functioning of Emacs.  Also, see whether the problem happens in a
freshly started Emacs without loading your <TT>`.emacs'</TT> file (start
Emacs with the <CODE>-q</CODE> switch to prevent loading the init file).  If
the problem does <EM>not</EM> occur then, you must report the precise
contents of any programs that you must load into the Lisp world in order
to cause the problem to occur.
<P>

<LI>
If the problem does depend on an init file or other Lisp programs that
are not part of the standard Emacs system, then you should make sure it
is not a bug in those programs by complaining to their maintainers
first.  After they verify that they are using Emacs in a way that is
supposed to work, they should report the bug.
<P>

<LI>
If you wish to mention something in the GNU Emacs source, show the line
of code with a few lines of context.  Don't just give a line number.
<P>

The line numbers in the development sources don't match those in your
sources.  It would take extra work for the maintainers to determine what
code is in your version at a given line number, and we could not be
certain.
</P><P>

<LI>
Additional information from a C debugger such as GDB might enable
someone to find a problem on a machine which he does not have available.
If you don't know how to use GDB, please read the GDB manual--it is not
very long, and using GDB is easy.  You can find the GDB distribution,
including the GDB manual in online form, in most of the same places you
can find the Emacs distribution.  To run Emacs under GDB, you should
switch to the <TT>`src'</TT> subdirectory in which Emacs was compiled, then
do <SAMP>`gdb emacs'</SAMP>.  It is important for the directory <TT>`src'</TT> to be
current so that GDB will read the <TT>`.gdbinit'</TT> file in this
directory.
<P>

However, you need to think when you collect the additional information
if you want it to show what causes the bug.
</P><P>

<A NAME="IDX2826"></A>
For example, many people send just a backtrace, but that is not very
useful by itself.  A simple backtrace with arguments often conveys
little about what is happening inside GNU Emacs, because most of the
arguments listed in the backtrace are pointers to Lisp objects.  The
numeric values of these pointers have no significance whatever; all that
matters is the contents of the objects they point to (and most of the
contents are themselves pointers).
</P><P>

<A NAME="IDX2827"></A>
To provide useful information, you need to show the values of Lisp
objects in Lisp notation.  Do this for each variable which is a Lisp
object, in several stack frames near the bottom of the stack.  Look at
the source to see which variables are Lisp objects, because the debugger
thinks of them as integers.
</P><P>

To show a variable's value in Lisp syntax, first print its value, then
use the user-defined GDB command <CODE>pr</CODE> to print the Lisp object in
Lisp syntax.  (If you must use another debugger, call the function
<CODE>debug_print</CODE> with the object as an argument.)  The <CODE>pr</CODE>
command is defined by the file <TT>`.gdbinit'</TT>, and it works only if you
are debugging a running process (not with a core dump).
</P><P>

To make Lisp errors stop Emacs and return to GDB, put a breakpoint at
<CODE>Fsignal</CODE>.
</P><P>

For a short listing of Lisp functions running, type the GDB
command <CODE>xbacktrace</CODE>.  
</P><P>

The file <TT>`.gdbinit'</TT> defines several other commands that are useful
for examining the data types and contents of Lisp objects.  Their names
begin with <SAMP>`x'</SAMP>.  These commands work at a lower level than
<CODE>pr</CODE>, and are less convenient, but they may work even when
<CODE>pr</CODE> does not, such as when debugging a core dump or when Emacs has
had a fatal signal.
</P><P>

<A NAME="IDX2828"></A>
More detailed advice and other useful techniques for debugging Emacs
are available in the file <TT>`etc/DEBUG'</TT> in the Emacs distribution.
That file also includes instructions for investigating problems
whereby Emacs stops responding (many people assume that Emacs is
"hung," whereas in fact it might be in an infinite loop).
</P><P>

To find the file <TT>`etc/DEBUG'</TT> in your Emacs installation, use the
directory name stored in the variable <CODE>data-directory</CODE>.
</UL>
<P>

Here are some things that are not necessary in a bug report:
</P><P>

<UL>
<LI>
A description of the envelope of the bug--this is not necessary for a
reproducible bug.
<P>

Often people who encounter a bug spend a lot of time investigating
which changes to the input file will make the bug go away and which
changes will not affect it.
</P><P>

This is often time-consuming and not very useful, because the way we
will find the bug is by running a single example under the debugger
with breakpoints, not by pure deduction from a series of examples.
You might as well save time by not searching for additional examples.
It is better to send the bug report right away, go back to editing,
and find another bug to report.
</P><P>

Of course, if you can find a simpler example to report <EM>instead</EM> of
the original one, that is a convenience.  Errors in the output will be
easier to spot, running under the debugger will take less time, etc.
</P><P>

However, simplification is not vital; if you can't do this or don't have
time to try, please report the bug with your original test case.
</P><P>

<LI>
A core dump file.
<P>

Debugging the core dump might be useful, but it can only be done on
your machine, with your Emacs executable.  Therefore, sending the core
dump file to the Emacs maintainers won't be useful.  Above all, don't
include the core file in an email bug report!  Such a large message
can be extremely inconvenient.
</P><P>

<LI>
A system-call trace of Emacs execution.
<P>

System-call traces are very useful for certain special kinds of
debugging, but in most cases they give little useful information.  It is
therefore strange that many people seem to think that <EM>the</EM> way to
report information about a crash is to send a system-call trace.  Perhaps
this is a habit formed from experience debugging programs that don't
have source code or debugging symbols.
</P><P>

In most programs, a backtrace is normally far, far more informative than
a system-call trace.  Even in Emacs, a simple backtrace is generally
more informative, though to give full information you should supplement
the backtrace by displaying variable values and printing them as Lisp
objects with <CODE>pr</CODE> (see above).
</P><P>

<LI>
A patch for the bug.
<P>

A patch for the bug is useful if it is a good one.  But don't omit the
other information that a bug report needs, such as the test case, on the
assumption that a patch is sufficient.  We might see problems with your
patch and decide to fix the problem another way, or we might not
understand it at all.  And if we can't understand what bug you are
trying to fix, or why your patch should be an improvement, we mustn't
install it.
</P><P>

See section <A HREF="emacs_33.html#SEC525">AD.10.4 Sending Patches for GNU Emacs</A>, for guidelines on how to make it easy for us to
understand and install your patches.
</P><P>

<LI>
A guess about what the bug is or what it depends on.
<P>

Such guesses are usually wrong.  Even experts can't guess right about
such things without first using the debugger to find the facts.
</UL>
<P>

<A NAME="Sending Patches"></A>
<HR SIZE="6">
<A NAME="SEC525"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC524"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC526"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC521"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC521"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC526"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> AD.10.4 Sending Patches for GNU Emacs </H3>
<!--docid::SEC525::-->
<P>

<A NAME="IDX2829"></A>
<A NAME="IDX2830"></A>
  If you would like to write bug fixes or improvements for GNU Emacs,
that is very helpful.  When you send your changes, please follow these
guidelines to make it easy for the maintainers to use them.  If you
don't follow these guidelines, your information might still be useful,
but using it will take extra work.  Maintaining GNU Emacs is a lot of
work in the best of circumstances, and we can't keep up unless you do
your best to help.
</P><P>

<UL>
<LI>
Send an explanation with your changes of what problem they fix or what
improvement they bring about.  For a bug fix, just include a copy of the
bug report, and explain why the change fixes the bug.
<P>

(Referring to a bug report is not as good as including it, because then
we will have to look it up, and we have probably already deleted it if
we've already fixed the bug.)
</P><P>

<LI>
Always include a proper bug report for the problem you think you have
fixed.  We need to convince ourselves that the change is right before
installing it.  Even if it is correct, we might have trouble
understanding it if we don't have a way to reproduce the problem.
<P>

<LI>
Include all the comments that are appropriate to help people reading the
source in the future understand why this change was needed.
<P>

<LI>
Don't mix together changes made for different reasons.
Send them <EM>individually</EM>.
<P>

If you make two changes for separate reasons, then we might not want to
install them both.  We might want to install just one.  If you send them
all jumbled together in a single set of diffs, we have to do extra work
to disentangle them--to figure out which parts of the change serve
which purpose.  If we don't have time for this, we might have to ignore
your changes entirely.
</P><P>

If you send each change as soon as you have written it, with its own
explanation, then two changes never get tangled up, and we can consider
each one properly without any extra work to disentangle them.
</P><P>

<LI>
Send each change as soon as that change is finished.  Sometimes people
think they are helping us by accumulating many changes to send them all
together.  As explained above, this is absolutely the worst thing you
could do.
<P>

Since you should send each change separately, you might as well send it
right away.  That gives us the option of installing it immediately if it
is important.
</P><P>

<LI>
Use <SAMP>`diff -c'</SAMP> to make your diffs.  Diffs without context are hard
to install reliably.  More than that, they are hard to study; we must
always study a patch to decide whether we want to install it.  Unidiff
format is better than contextless diffs, but not as easy to read as
<SAMP>`-c'</SAMP> format.
<P>

If you have GNU diff, use <SAMP>`diff -c -F'^[_a-zA-Z0-9$]+ *(''</SAMP> when
making diffs of C code.  This shows the name of the function that each
change occurs in.
</P><P>

<LI>
Avoid any ambiguity as to which is the old version and which is the new.
Please make the old version the first argument to diff, and the new
version the second argument.  And please give one version or the other a
name that indicates whether it is the old version or your new changed
one.
<P>

<LI>
Write the change log entries for your changes.  This is both to save us
the extra work of writing them, and to help explain your changes so we
can understand them.
<P>

The purpose of the change log is to show people where to find what was
changed.  So you need to be specific about what functions you changed;
in large functions, it's often helpful to indicate where within the
function the change was.
</P><P>

On the other hand, once you have shown people where to find the change,
you need not explain its purpose in the change log.  Thus, if you add a
new function, all you need to say about it is that it is new.  If you
feel that the purpose needs explaining, it probably does--but put the
explanation in comments in the code.  It will be more useful there.
</P><P>

Please read the <TT>`ChangeLog'</TT> files in the <TT>`src'</TT> and <TT>`lisp'</TT>
directories to see what sorts of information to put in, and to learn the
style that we use.  If you would like your name to appear in the header
line, showing who made the change, send us the header line.
See section <A HREF="emacs_26.html#SEC333">W.1 Change Logs</A>.
</P><P>

<LI>
When you write the fix, keep in mind that we can't install a change that
would break other systems.  Please think about what effect your change
will have if compiled on another type of system.
<P>

Sometimes people send fixes that <EM>might</EM> be an improvement in
general--but it is hard to be sure of this.  It's hard to install
such changes because we have to study them very carefully.  Of course,
a good explanation of the reasoning by which you concluded the change
was correct can help convince us.
</P><P>

The safest changes are changes to the configuration files for a
particular machine.  These are safe because they can't create new bugs
on other machines.
</P><P>

Please help us keep up with the workload by designing the patch in a
form that is clearly safe to install.
</UL>
<P>

<A NAME="Contributing"></A>
<HR SIZE="6">
<A NAME="SEC526"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC525"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC527"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC521"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC527"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AD.11 Contributing to Emacs Development </H2>
<!--docid::SEC526::-->
<P>

If you would like to help pretest Emacs releases to assure they work
well, or if you would like to work on improving Emacs, please contact
the maintainers at <A HREF="mailto:bug-gnu-emacs@gnu.org">bug-gnu-emacs@gnu.org</A>.  A pretester
should be prepared to investigate bugs as well as report them.  If you'd
like to work on improving Emacs, please ask for suggested projects or
suggest your own ideas.
</P><P>

If you have already written an improvement, please tell us about it.  If
you have not yet started work, it is useful to contact
<A HREF="mailto:bug-gnu-emacs@gnu.org">bug-gnu-emacs@gnu.org</A> before you start; it might be
possible to suggest ways to make your extension fit in better with the
rest of Emacs.
</P><P>

<A NAME="Service"></A>
<HR SIZE="6">
<A NAME="SEC527"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC526"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_34.html#SEC528"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC526"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_34.html#SEC528"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> AD.12 How To Get Help with GNU Emacs </H2>
<!--docid::SEC527::-->
<P>

If you need help installing, using or changing GNU Emacs, there are two
ways to find it:
</P><P>

<UL>
<LI>
Send a message to the mailing list
<A HREF="mailto:help-gnu-emacs@gnu.org">help-gnu-emacs@gnu.org</A>, or post your request on
newsgroup <CODE>gnu.emacs.help</CODE>.  (This mailing list and newsgroup
interconnect, so it does not matter which one you use.)
<P>

<LI>
Look in the service directory for someone who might help you for a fee.
The service directory is found in the file named <TT>`etc/SERVICE'</TT> in the
Emacs distribution.
</UL>
<A NAME="Command Arguments"></A>
<HR SIZE="6">
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_33.html#SEC526"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_34.html#SEC528"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="emacs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated
on <I>April 2, 2002</I>
using <A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

</BODY>
</HTML>
