<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html40/loose.dtd">
<HTML>
<!-- Created on April, 18 2002 by texi2html 1.66 -->
<!--
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people <dev@texi2html.cvshome.org>
Send bugs and suggestions to <users@texi2html.cvshome.org>

-->
<HEAD>
<TITLE>CVS--Concurrent Versions System v1.11.2: Adding and removing</TITLE>

<META NAME="description" CONTENT="CVS--Concurrent Versions System v1.11.2: Adding and removing">
<META NAME="keywords" CONTENT="CVS--Concurrent Versions System v1.11.2: Adding and removing">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.66">

</HEAD>

<BODY LANG="en" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC66"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_6.html#SEC65"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC67"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_6.html#SEC65"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_8.html#SEC75"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_24.html#SEC188">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> 7. Adding, removing, and renaming files and directories </H1>
<!--docid::SEC66::-->
<P>

In the course of a project, one will often add new
files.  Likewise with removing or renaming, or with
directories.  The general concept to keep in mind in
all these cases is that instead of making an
irreversible change you want CVS to record the
fact that a change has taken place, just as with
modifying an existing file.  The exact mechanisms to do
this in CVS vary depending on the situation.
</P>
<P>

<TABLE BORDER="0" CELLSPACING="0">
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="cvs_7.html#SEC67">7.1 Adding files to a directory</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Adding files</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="cvs_7.html#SEC68">7.2 Removing files</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="cvs_7.html#SEC69">7.3 Removing directories</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="cvs_7.html#SEC70">7.4 Moving and renaming files</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="cvs_7.html#SEC74">7.5 Moving and renaming directories</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP"></TD></TR>
</TABLE>
<P>

<A NAME="Adding files"></A>
<HR SIZE="6">
<A NAME="SEC67"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC66"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC68"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC66"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC66"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_8.html#SEC75"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_24.html#SEC188">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.1 Adding files to a directory </H2>
<!--docid::SEC67::-->
<P>

To add a new file to a directory, follow these steps.
</P>
<P>

<UL>
<LI>
You must have a working copy of the directory.
See section <A HREF="cvs_1.html#SEC5">1.3.1 Getting the source</A>.
<P>

</P>
<LI>
Create the new file inside your working copy of the directory.
<P>

</P>
<LI>
Use `<SAMP>cvs add <VAR>filename</VAR></SAMP>' to tell CVS that you
want to version control the file.  If the file contains
binary data, specify `<SAMP>-kb</SAMP>' (see section <A HREF="cvs_9.html#SEC80">9. Handling binary files</A>).
<P>

</P>
<LI>
Use `<SAMP>cvs commit <VAR>filename</VAR></SAMP>' to actually check
in the file into the repository.  Other developers
cannot see the file until you perform this step.
</UL>
<P>

You can also use the <CODE>add</CODE> command to add a new
directory.
</P>
<P>

Unlike most other commands, the <CODE>add</CODE> command is
not recursive.  You cannot even type `<SAMP>cvs add
foo/bar</SAMP>'!  Instead, you have to
</P>
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>$ cd foo
$ cvs add bar
</pre></td></tr></table><P>

<A NAME="IDX151"></A>
<A NAME="IDX152"></A>
</P>
<DL>
<DT><U>Command:</U> <B>cvs add</B> <I>[<CODE>-k</CODE> kflag] [<CODE>-m</CODE> message] files <small>...</small></I>
<DD><P>

Schedule <VAR>files</VAR> to be added to the repository.
The files or directories specified with <CODE>add</CODE> must
already exist in the current directory.  To add a whole
new directory hierarchy to the source repository (for
example, files received from a third-party vendor), use
the <CODE>import</CODE> command instead.  See section <A HREF="cvs_16.html#SEC138">A.12 import--Import sources into CVS, using vendor branches</A>.
</P>
<P>

The added files are not placed in the source repository
until you use <CODE>commit</CODE> to make the change
permanent.  Doing an <CODE>add</CODE> on a file that was
removed with the <CODE>remove</CODE> command will undo the
effect of the <CODE>remove</CODE>, unless a <CODE>commit</CODE>
command intervened.  See section <A HREF="cvs_7.html#SEC68">7.2 Removing files</A>, for an
example.
</P>
<P>

The `<SAMP>-k</SAMP>' option specifies the default way that
this file will be checked out; for more information see
<A HREF="cvs_12.html#SEC102">12.4 Substitution modes</A>.
</P>
<P>

The `<SAMP>-m</SAMP>' option specifies a description for the
file.  This description appears in the history log (if
it is enabled, see section <A HREF="cvs_18.html#SEC177">C.7 The history file</A>).  It will also be
saved in the version history inside the repository when
the file is committed.  The <CODE>log</CODE> command displays
this description.  The description can be changed using
`<SAMP>admin -t</SAMP>'.  See section <A HREF="cvs_16.html#SEC119">A.6 admin--Administration</A>.  If you omit the
`<SAMP>-m <VAR>description</VAR></SAMP>' flag, an empty string will
be used.  You will not be prompted for a description.
</P>
</DL>
<P>

For example, the following commands add the file
`<TT>backend.c</TT>' to the repository:
</P>
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>$ cvs add backend.c
$ cvs commit -m &quot;Early version. Not yet compilable.&quot; backend.c
</pre></td></tr></table><P>

When you add a file it is added only on the branch
which you are working on (see section <A HREF="cvs_5.html#SEC54">5. Branching and merging</A>).  You can
later merge the additions to another branch if you want
(see section <A HREF="cvs_5.html#SEC63">5.9 Merging can add or remove files</A>).
</P>
<P>

<A NAME="Removing files"></A>
<HR SIZE="6">
<A NAME="SEC68"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC67"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC69"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC66"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC66"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_8.html#SEC75"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_24.html#SEC188">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.2 Removing files </H2>
<!--docid::SEC68::-->
<P>

Directories change.  New files are added, and old files
disappear.  Still, you want to be able to retrieve an
exact copy of old releases.
</P>
<P>

Here is what you can do to remove a file,
but remain able to retrieve old revisions:
</P>
<P>

<UL>
<LI>
Make sure that you have not made any uncommitted
modifications to the file.  See section <A HREF="cvs_1.html#SEC8">1.3.4 Viewing differences</A>,
for one way to do that.  You can also use the
<CODE>status</CODE> or <CODE>update</CODE> command.  If you remove
the file without committing your changes, you will of
course not be able to retrieve the file as it was
immediately before you deleted it.
<P>

</P>
<LI>
Remove the file from your working copy of the directory.
You can for instance use <CODE>rm</CODE>.
<P>

</P>
<LI>
Use `<SAMP>cvs remove <VAR>filename</VAR></SAMP>' to tell CVS that
you really want to delete the file.
<P>

</P>
<LI>
Use `<SAMP>cvs commit <VAR>filename</VAR></SAMP>' to actually
perform the removal of the file from the repository.
</UL>
<P>

When you commit the removal of the file, CVS
records the fact that the file no longer exists.  It is
possible for a file to exist on only some branches and
not on others, or to re-add another file with the same
name later.  CVS will correctly create or not create
the file, based on the `<SAMP>-r</SAMP>' and `<SAMP>-D</SAMP>' options
specified to <CODE>checkout</CODE> or <CODE>update</CODE>.
</P>
<P>

<A NAME="IDX153"></A>
<A NAME="IDX154"></A>
</P>
<DL>
<DT><U>Command:</U> <B>cvs remove</B> <I>[options] files <small>...</small></I>
<DD><P>

Schedule file(s) to be removed from the repository
(files which have not already been removed from the
working directory are not processed).  This command
does not actually remove the file from the repository
until you commit the removal.  For a full list of
options, see <A HREF="cvs_17.html#SEC155">B. Quick reference to CVS commands</A>.
</P>
</DL>
<P>

Here is an example of removing several files:
</P>
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>$ cd test
$ rm *.c
$ cvs remove
cvs remove: Removing .
cvs remove: scheduling a.c for removal
cvs remove: scheduling b.c for removal
cvs remove: use 'cvs commit' to remove these files permanently
$ cvs ci -m &quot;Removed unneeded files&quot;
cvs commit: Examining .
cvs commit: Committing .
</pre></td></tr></table><P>

As a convenience you can remove the file and <CODE>cvs
remove</CODE> it in one step, by specifying the `<SAMP>-f</SAMP>'
option.  For example, the above example could also be
done like this:
</P>
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>$ cd test
$ cvs remove -f *.c
cvs remove: scheduling a.c for removal
cvs remove: scheduling b.c for removal
cvs remove: use 'cvs commit' to remove these files permanently
$ cvs ci -m &quot;Removed unneeded files&quot;
cvs commit: Examining .
cvs commit: Committing .
</pre></td></tr></table><P>

If you execute <CODE>remove</CODE> for a file, and then
change your mind before you commit, you can undo the
<CODE>remove</CODE> with an <CODE>add</CODE> command.
</P>
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>$ ls
CVS   ja.h  oj.c
$ rm oj.c
$ cvs remove oj.c
cvs remove: scheduling oj.c for removal
cvs remove: use 'cvs commit' to remove this file permanently
$ cvs add oj.c
U oj.c
cvs add: oj.c, version 1.1.1.1, resurrected
</pre></td></tr></table><P>

If you realize your mistake before you run the
<CODE>remove</CODE> command you can use <CODE>update</CODE> to
resurrect the file:
</P>
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>$ rm oj.c
$ cvs update oj.c
cvs update: warning: oj.c was lost
U oj.c
</pre></td></tr></table><P>

When you remove a file it is removed only on the branch
which you are working on (see section <A HREF="cvs_5.html#SEC54">5. Branching and merging</A>).  You can
later merge the removals to another branch if you want
(see section <A HREF="cvs_5.html#SEC63">5.9 Merging can add or remove files</A>).
</P>
<P>

<A NAME="Removing directories"></A>
<HR SIZE="6">
<A NAME="SEC69"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC68"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC70"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC66"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC66"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_8.html#SEC75"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_24.html#SEC188">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.3 Removing directories </H2>
<!--docid::SEC69::-->
<P>

In concept removing directories is somewhat similar to
removing files--you want the directory to not exist in
your current working directories, but you also want to
be able to retrieve old releases in which the directory
existed.
</P>
<P>

The way that you remove a directory is to remove all
the files in it.  You don't remove the directory
itself; there is no way to do that.
Instead you specify the `<SAMP>-P</SAMP>' option to
<CODE>cvs update</CODE> or <CODE>cvs checkout</CODE>,
which will cause CVS to remove empty
directories from working directories.
(Note that <CODE>cvs export</CODE> always removes empty directories.)
Probably the
best way to do this is to always specify `<SAMP>-P</SAMP>'; if
you want an empty directory then put a dummy file (for
example `<TT>.keepme</TT>') in it to prevent `<SAMP>-P</SAMP>' from
removing it.
</P>
<P>

Note that `<SAMP>-P</SAMP>' is implied by the `<SAMP>-r</SAMP>' or `<SAMP>-D</SAMP>'
options of <CODE>checkout</CODE>.  This way
CVS will be able to correctly create the directory
or not depending on whether the particular version you
are checking out contains any files in that directory.
</P>
<P>

<A NAME="Moving files"></A>
<HR SIZE="6">
<A NAME="SEC70"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC69"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC71"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC66"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC66"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_8.html#SEC75"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_24.html#SEC188">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.4 Moving and renaming files </H2>
<!--docid::SEC70::-->
<P>

Moving files to a different directory or renaming them
is not difficult, but some of the ways in which this
works may be non-obvious.  (Moving or renaming a
directory is even harder.  See section <A HREF="cvs_7.html#SEC74">7.5 Moving and renaming directories</A>.).
</P>
<P>

The examples below assume that the file <VAR>old</VAR> is renamed to
<VAR>new</VAR>.
</P>
<P>

<TABLE BORDER="0" CELLSPACING="0">
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="cvs_7.html#SEC71">7.4.1 The Normal way to Rename</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">The normal way to Rename</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="cvs_7.html#SEC72">7.4.2 Moving the history file</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">A tricky, alternative way</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="cvs_7.html#SEC73">7.4.3 Copying the history file</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Another tricky, alternative way</TD></TR>
</TABLE>
<P>

<A NAME="Outside"></A>
<HR SIZE="6">
<A NAME="SEC71"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC70"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC72"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC66"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC70"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_8.html#SEC75"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_24.html#SEC188">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 7.4.1 The Normal way to Rename </H3>
<!--docid::SEC71::-->
<P>

The normal way to move a file is to copy <VAR>old</VAR> to
<VAR>new</VAR>, and then issue the normal CVS commands
to remove <VAR>old</VAR> from the repository, and add
<VAR>new</VAR> to it.
</P>
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>$ mv <VAR>old</VAR> <VAR>new</VAR>
$ cvs remove <VAR>old</VAR>
$ cvs add <VAR>new</VAR>
$ cvs commit -m &quot;Renamed <VAR>old</VAR> to <VAR>new</VAR>&quot; <VAR>old</VAR> <VAR>new</VAR>
</pre></td></tr></table><P>

This is the simplest way to move a file, it is not
error-prone, and it preserves the history of what was
done.  Note that to access the history of the file you
must specify the old or the new name, depending on what
portion of the history you are accessing.  For example,
<CODE>cvs log <VAR>old</VAR></CODE> will give the log up until the
time of the rename.
</P>
<P>

When <VAR>new</VAR> is committed its revision numbers will
start again, usually at 1.1, so if that bothers you,
use the `<SAMP>-r rev</SAMP>' option to commit.  For more
information see <A HREF="cvs_4.html#SEC47">4.3 Assigning revisions</A>.
</P>
<P>

<A NAME="Inside"></A>
<HR SIZE="6">
<A NAME="SEC72"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC71"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC73"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC66"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC70"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_8.html#SEC75"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_24.html#SEC188">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 7.4.2 Moving the history file </H3>
<!--docid::SEC72::-->
<P>

This method is more dangerous, since it involves moving
files inside the repository.  Read this entire section
before trying it out!
</P>
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>$ cd $CVSROOT/<VAR>dir</VAR>
$ mv <VAR>old</VAR>,v <VAR>new</VAR>,v
</pre></td></tr></table><P>

Advantages:
</P>
<P>

<UL>
<LI>
The log of changes is maintained intact.
<P>

</P>
<LI>
The revision numbers are not affected.
</UL>
<P>

Disadvantages:
</P>
<P>

<UL>
<LI>
Old releases cannot easily be fetched from the
repository.  (The file will show up as <VAR>new</VAR> even
in revisions from the time before it was renamed).
<P>

</P>
<LI>
There is no log information of when the file was renamed.
<P>

</P>
<LI>
Nasty things might happen if someone accesses the history file
while you are moving it.  Make sure no one else runs any of the CVS
commands while you move it.
</UL>
<P>

<A NAME="Rename by copying"></A>
<HR SIZE="6">
<A NAME="SEC73"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC72"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC74"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC66"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC70"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_8.html#SEC75"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_24.html#SEC188">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H3> 7.4.3 Copying the history file </H3>
<!--docid::SEC73::-->
<P>

This way also involves direct modifications to the
repository.  It is safe, but not without drawbacks.
</P>
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre># Copy the RCS file inside the repository
$ cd $CVSROOT/<VAR>dir</VAR>
$ cp <VAR>old</VAR>,v <VAR>new</VAR>,v
# Remove the old file
$ cd ~/<VAR>dir</VAR>
$ rm <VAR>old</VAR>
$ cvs remove <VAR>old</VAR>
$ cvs commit <VAR>old</VAR>
# Remove all tags from <VAR>new</VAR>
$ cvs update <VAR>new</VAR>
$ cvs log <VAR>new</VAR>             # Remember the non-branch tag names
$ cvs tag -d <VAR>tag1</VAR> <VAR>new</VAR>
$ cvs tag -d <VAR>tag2</VAR> <VAR>new</VAR>
<small>...</small>
</pre></td></tr></table><P>

By removing the tags you will be able to check out old
revisions.
</P>
<P>

Advantages:
</P>
<P>

<UL>
<LI>
Checking out old revisions works correctly, as long as
you use `<SAMP>-r<VAR>tag</VAR></SAMP>' and not `<SAMP>-D<VAR>date</VAR></SAMP>'
to retrieve the revisions.
<P>

</P>
<LI>
The log of changes is maintained intact.
<P>

</P>
<LI>
The revision numbers are not affected.
</UL>
<P>

Disadvantages:
</P>
<P>

<UL>
<LI>
You cannot easily see the history of the file across the rename.
<P>

</UL>
<P>

<A NAME="Moving directories"></A>
<HR SIZE="6">
<A NAME="SEC74"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC73"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_8.html#SEC75"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC66"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC66"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_8.html#SEC75"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_24.html#SEC188">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 7.5 Moving and renaming directories </H2>
<!--docid::SEC74::-->
<P>

The normal way to rename or move a directory is to
rename or move each file within it as described in
<A HREF="cvs_7.html#SEC71">7.4.1 The Normal way to Rename</A>.  Then check out with the `<SAMP>-P</SAMP>'
option, as described in <A HREF="cvs_7.html#SEC69">7.3 Removing directories</A>.
</P>
<P>

If you really want to hack the repository to rename or
delete a directory in the repository, you can do it
like this:
</P>
<P>

<OL>
<LI>
Inform everyone who has a checked out copy of the directory that the
directory will be renamed.  They should commit all
their changes, and remove their working copies,
before you take the steps below.
<P>

</P>
<LI>
Rename the directory inside the repository.
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>$ cd $CVSROOT/<VAR>parent-dir</VAR>
$ mv <VAR>old-dir</VAR> <VAR>new-dir</VAR>
</pre></td></tr></table><P>

</P>
<LI>
Fix the CVS administrative files, if necessary (for
instance if you renamed an entire module).
<P>

</P>
<LI>
Tell everyone that they can check out again and continue
working.
<P>

</OL>
<P>

If someone had a working copy the CVS commands will
cease to work for him, until he removes the directory
that disappeared inside the repository.
</P>
<P>

It is almost always better to move the files in the
directory instead of moving the directory.  If you move the
directory you are unlikely to be able to retrieve old
releases correctly, since they probably depend on the
name of the directories.
</P>
<P>

<A NAME="History browsing"></A>
<HR SIZE="6">
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_7.html#SEC66"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_8.html#SEC75"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_24.html#SEC188">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cvs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>
<FONT SIZE="-1">
This document was generated
by <I>Derek Robert Price</I> on <I>April, 18 2002</I>
using <A HREF="http://texi2html.cvshome.org"><I>texi2html</I></A>
</FONT>

</BODY>
</HTML>
