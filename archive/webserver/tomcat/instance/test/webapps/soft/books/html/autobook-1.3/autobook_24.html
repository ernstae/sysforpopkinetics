<HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created on May, 24  2001 by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HEAD>
<TITLE>Autoconf, Automake, and Libtool: User-Provided Input Files</TITLE>

<META NAME="description" CONTENT="Autoconf, Automake, and Libtool: User-Provided Input Files">
<META NAME="keywords" CONTENT="Autoconf, Automake, and Libtool: User-Provided Input Files">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">
<script language="Javascript">
<!--    
// Check the browser version.

    function checkVersion() {
      if (navigator.appVersion.charAt(0)>=3) return true;
      if (navigator.appVersion.charAt(0)>=4) return true;
      else return false;
    }

      if (checkVersion()) {
             homeon = new Image();
             homeon.src = "homeon.png";

             homeoff = new Image();
             homeoff.src = "home.png";

             tocon = new Image();
             tocon.src = "tocon.png";

             tocoff = new Image();
             tocoff.src = "toc.png";

             indexon = new Image();
             indexon.src = "indexon.png";

             indexoff = new Image();
             indexoff.src = "index.png";

             helpon = new Image();
             helpon.src = "helpon.png";

             helpoff = new Image();
             helpoff.src = "help.png";

             backon = new Image();
             backon.src = "backon.png";

             backoff = new Image();
             backoff.src = "back.png";

             forwardon = new Image();
             forwardon.src = "forwardon.png";

             forwardoff = new Image();
             forwardoff.src = "forward.png";

             prevon = new Image();
             prevon.src = "prevon.png";

             prevoff = new Image();
             prevoff.src = "prev.png";

             nexton = new Image();
             nexton.src = "nexton.png";

             nextoff = new Image();
             nextoff.src = "next.png";

             upon = new Image();
             upon.src = "upon.png";

             upoff = new Image();
             upoff.src = "up.png";
         }

     function img_act(imgName) {
             if (checkVersion()) {
             imgOn = eval(imgName + "on.src");
             document [imgName].src = imgOn;
             }
     }

     function img_inact(imgName) {
             if (checkVersion()) {
             imgOff = eval(imgName + "off.src");
             document [imgName].src = imgOff;
             }
     }
// -->
</SCRIPT>

</HEAD>

<BODY LANG="EN" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#6688AA" VLINK="#336688" ALINK="#808080">

<A NAME="SEC24"></A>
<TABLE BORDER=0 CELLPADDING=0 CELLSPACING=10>
<TR VALIGN="TOP">
<TD ALIGN="MIDDLE" WIDTH=50 BGCOLOR="#e6e6e6">
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="MIDDLE" ALIGN="LEFT"><A HREF="autobook_23.html#SEC23" onMouseover="img_act('prev')" onMouseout="img_inact('prev')"><IMG SRC="prev.png" BORDER="0" ALT="Back: A Minimal GNU Autotools Project" ALIGN="MIDDLE" NAME="prev"></A></TD>
</TR>
<TR VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="MIDDLE" ALIGN="LEFT"><A HREF="autobook_25.html#SEC25" onMouseover="img_act('next')" onMouseout="img_inact('next')"><IMG SRC="next.png" BORDER="0" ALT="Forward: Generated Output Files" ALIGN="MIDDLE" NAME="next"></A></TD>
</TR>
<TR VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TR VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="MIDDLE" ALIGN="LEFT"><A HREF="autobook_23.html#SEC23" onMouseover="img_act('back')" onMouseout="img_inact('back')"><IMG SRC="back.png" BORDER="0" ALT="FastBack: A Minimal GNU Autotools Project" ALIGN="MIDDLE" NAME="back"></A></TD>
</TR>
<TR VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="MIDDLE" ALIGN="LEFT"><A HREF="autobook_23.html#SEC23" onMouseover="img_act('up')" onMouseout="img_inact('up')"><IMG SRC="up.png" BORDER="0" ALT="Up: A Minimal GNU Autotools Project" ALIGN="MIDDLE" NAME="up"></A></TD>
</TR>
<TR VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="MIDDLE" ALIGN="LEFT"><A HREF="autobook_29.html#SEC29" onMouseover="img_act('forward')" onMouseout="img_inact('forward')"><IMG SRC="forward.png" BORDER="0" ALT="FastForward: Writing configure.in" ALIGN="MIDDLE" NAME="forward"></A></TD>
</TR>
<TR VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="MIDDLE" ALIGN="LEFT"><A HREF="autobook.html#SEC_Top" onMouseover="img_act('home')" onMouseout="img_inact('home')"><IMG SRC="home.png" BORDER="0" ALT="Top: Autoconf, Automake, and Libtool" ALIGN="MIDDLE" NAME="home"></A></TD>
</TR>
<TR VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="MIDDLE" ALIGN="LEFT"><A HREF="autobook_toc.html#SEC_Contents" onMouseover="img_act('toc')" onMouseout="img_inact('toc')"><IMG SRC="toc.png" BORDER="0" ALT="Contents: Table of Contents" ALIGN="MIDDLE" NAME="toc"></A></TD>
</TR>
<TR VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="MIDDLE" ALIGN="LEFT"><A HREF="autobook_285.html#SEC285" onMouseover="img_act('index')" onMouseout="img_inact('index')"><IMG SRC="index.png" BORDER="0" ALT="Index: Index" ALIGN="MIDDLE" NAME="index"></A></TD>
</TR>
<TR VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="MIDDLE" ALIGN="LEFT"><A HREF="autobook_abt.html#SEC_About" onMouseover="img_act('help')" onMouseout="img_inact('help')"><IMG SRC="help.png" BORDER="0" ALT="About: About this document" ALIGN="MIDDLE" NAME="help"></A></TD>
</TR>
</TABLE>
</TD>
<TD ALIGN="LEFT">
<H2> 5.1 User-Provided Input Files </H2>
<!--docid::SEC24::-->
<P>

The smallest project requires the user to provide only two files.  The
remainder of the files needed to build the package are generated by the
GNU Autotools (see section <A HREF="autobook_25.html#SEC25">5.2 Generated Output Files</A>).
</P><P>

<UL>
<LI><TT>`Makefile.am'</TT> is an input to <CODE>automake</CODE>.
<LI><TT>`configure.in'</TT> is an input to <CODE>autoconf</CODE>.
</UL>
<P>

I like to think of <TT>`Makefile.am'</TT> as a high-level, bare-bones
specification of a project's build requirements: what needs to be built,
and where does it go when it is installed?  This is probably Automake's
greatest strength--the description is about as simple as it could
possibly be, yet the final product is a <TT>`Makefile'</TT> with an array of
convenient <CODE>make</CODE> targets.
</P><P>

The <TT>`configure.in'</TT> is a template of macro invocations and shell
code fragments that are used by <CODE>autoconf</CODE> to produce a
<TT>`configure'</TT> script (see section <A HREF="autobook_276.html#SEC276">C. Generated File Dependencies</A>).
<CODE>autoconf</CODE> copies the contents of <TT>`configure.in'</TT> to
<TT>`configure'</TT>, expanding macros as they occur in the input.  Other
text is copied verbatim.
</P><P>

Let's take a look at the contents of the user-provided input files that
are relevant to this minimal project.  Here is the <TT>`Makefile.am'</TT>:
</P><P>

<TABLE width=100%><tr><td>&nbsp;</td><td class=example bgcolor=#6688aa><br><pre>bin_PROGRAMS = foonly
foonly_SOURCES = main.c foo.c foo.h nly.c scanner.l parser.y
foonly_LDADD = @LEXLIB@
</pre></td></tr></table></P><P>

This <TT>`Makefile.am'</TT> specifies that we want a program called
<TT>`foonly'</TT> to be built and installed in the <TT>`bin'</TT> directory when
<CODE>make install</CODE> is run.  The source files that are used to build
<TT>`foonly'</TT> are the C source files <TT>`main.c'</TT>, <TT>`foo.c'</TT>,
<TT>`nly.c'</TT> and <TT>`foo.h'</TT>, the <CODE>lex</CODE> program in
<TT>`scanner.l'</TT> and a <CODE>yacc</CODE> grammar in <TT>`parser.y'</TT>.  This
points out a particularly nice aspect about Automake: because
<CODE>lex</CODE> and <CODE>yacc</CODE> both generate intermediate C programs
from their input files, Automake knows how to build such intermediate
files and link them into the final executable.  Finally, we must
remember to link a suitable <CODE>lex</CODE> library, if <TT>`configure'</TT>
concludes that one is needed.
</P><P>

And here is the <TT>`configure.in'</TT>:
</P><P>

<TABLE width=100%><tr><td>&nbsp;</td><td class=example bgcolor=#6688aa><br><pre>dnl Process this file with autoconf to produce a configure script.
AC_INIT(main.c)
AM_INIT_AUTOMAKE(foonly, 1.0)
AC_PROG_CC
AM_PROG_LEX
AC_PROG_YACC
AC_OUTPUT(Makefile)
</pre></td></tr></table></P><P>

This <TT>`configure.in'</TT> invokes some mandatory Autoconf and Automake
initialization macros, and then calls on some Autoconf macros from the
<CODE>AC_PROG</CODE> family to find suitable C compiler, <CODE>lex</CODE>, and
<CODE>yacc</CODE> programs.  Finally, the <CODE>AC_OUTPUT</CODE> macro is used to
cause the generated <TT>`configure'</TT> script to output a
<TT>`Makefile'</TT>---but from what?  It is processed from
<TT>`Makefile.in'</TT>, which Automake produces for you based on your
<TT>`Makefile.am'</TT> (see section <A HREF="autobook_276.html#SEC276">C. Generated File Dependencies</A>).
</P><P>

<A NAME="Generated Output Files"></A>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated
by <I>Gary V. Vaughan</I> on <I>May, 24  2001</I>
using <A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

</BODY>
</HTML>
