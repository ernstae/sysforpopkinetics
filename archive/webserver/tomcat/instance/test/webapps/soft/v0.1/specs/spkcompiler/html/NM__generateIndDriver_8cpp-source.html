<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SPK Compiler API Documentation: NM_generateIndDriver.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>NM_generateIndDriver.cpp</h1><a href="NM__generateIndDriver_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00005"></a>00005 <span class="preprocessor">#include &lt;fstream&gt;</span>
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 <span class="preprocessor">#include "<a class="code" href="NonmemTranslator_8h.html">NonmemTranslator.h</a>"</span>
<a name="l00008"></a>00008 <span class="preprocessor">#include "<a class="code" href="SpkCompilerException_8h.html">SpkCompilerException.h</a>"</span>
<a name="l00009"></a>00009 
<a name="l00010"></a>00010 <span class="keyword">using namespace </span>std;
<a name="l00011"></a>00011 <span class="keyword">using namespace </span>xercesc;
<a name="l00012"></a>00012 
<a name="l00013"></a><a class="code" href="classNonmemTranslator.html#3b4b5a870b4c58e3fa5d6bd0c9bc7e2b">00013</a> <span class="keywordtype">void</span> <a class="code" href="classNonmemTranslator.html#3b4b5a870b4c58e3fa5d6bd0c9bc7e2b">NonmemTranslator::generateIndDriver</a>( )<span class="keyword"> const</span>
<a name="l00014"></a>00014 <span class="keyword"></span>{
<a name="l00015"></a>00015   <span class="comment">//---------------------------------------------------------------------------------------</span>
<a name="l00016"></a>00016   <span class="comment">// Generate the SPK driver</span>
<a name="l00017"></a>00017   <span class="comment">//---------------------------------------------------------------------------------------</span>
<a name="l00018"></a>00018   ofstream oIndDriver ( <a class="code" href="classNonmemTranslator.html#fa9b1ff6308b639f282dad80ab59cc6c">fFitDriver_cpp</a> );
<a name="l00019"></a>00019   <span class="keywordflow">if</span>( !oIndDriver.good() )
<a name="l00020"></a>00020     {
<a name="l00021"></a>00021       <span class="keywordtype">char</span> mess[ <a class="code" href="classSpkCompilerError.html#e122376e543be6c83edef715c92599e1">SpkCompilerError::maxMessageLen</a>() ];
<a name="l00022"></a>00022       snprintf( mess, 
<a name="l00023"></a>00023         SpkCompilerError::maxMessageLen(),
<a name="l00024"></a>00024         <span class="stringliteral">"Failed to create %s file."</span>, <a class="code" href="classNonmemTranslator.html#fa9b1ff6308b639f282dad80ab59cc6c">fFitDriver_cpp</a> );
<a name="l00025"></a>00025       <a class="code" href="classSpkCompilerException.html">SpkCompilerException</a> e( <a class="code" href="classSpkCompilerError.html#2743acfc3b04803a497c786509f4935dc112b437339e8d6a33908996ae2381d6">SpkCompilerError::ASPK_STD_ERR</a>, mess, __LINE__, __FILE__ );
<a name="l00026"></a>00026       <span class="keywordflow">throw</span> e;
<a name="l00027"></a>00027     }
<a name="l00028"></a>00028   <span class="keyword">const</span> <a class="code" href="classSymbol.html">Symbol</a>* pTheta = <a class="code" href="classNonmemTranslator.html#7cdb34ced820cc22c242e85e710aa076">table</a>-&gt;<a class="code" href="classSymbolTable.html#6b681d2875323db888e53065ed87ca5c">find</a>(<a class="code" href="namespacenonmem.html#f376d6a7dc93523e35f3d7e7027e5b7f">nonmem::THETA</a>);
<a name="l00029"></a>00029   <span class="keyword">const</span> <a class="code" href="classSymbol.html">Symbol</a>* pEta   = <a class="code" href="classNonmemTranslator.html#7cdb34ced820cc22c242e85e710aa076">table</a>-&gt;<a class="code" href="classSymbolTable.html#6b681d2875323db888e53065ed87ca5c">find</a>(<a class="code" href="namespacenonmem.html#80691b6b72c768b429a58e5d177a06d5">nonmem::ETA</a>);
<a name="l00030"></a>00030   <span class="keyword">const</span> <a class="code" href="classSymbol.html">Symbol</a>* pOmega = <a class="code" href="classNonmemTranslator.html#7cdb34ced820cc22c242e85e710aa076">table</a>-&gt;<a class="code" href="classSymbolTable.html#6b681d2875323db888e53065ed87ca5c">find</a>(<a class="code" href="namespacenonmem.html#dc78e81822f87c4152b4407ba272d4fa">nonmem::OMEGA</a>);
<a name="l00031"></a>00031 
<a name="l00032"></a>00032   oIndDriver &lt;&lt; <span class="stringliteral">"// "</span> &lt;&lt; <a class="code" href="classNonmemTranslator.html#521afcb1fd9e2bb0506d40897dd5c400">myDescription</a>              &lt;&lt; endl;
<a name="l00033"></a>00033   oIndDriver &lt;&lt; <span class="stringliteral">"#include &lt;iostream&gt;"</span>               &lt;&lt; endl;
<a name="l00034"></a>00034   oIndDriver &lt;&lt; <span class="stringliteral">"#include &lt;fstream&gt;"</span>                &lt;&lt; endl;
<a name="l00035"></a>00035   oIndDriver &lt;&lt; <span class="stringliteral">"#include &lt;sys/time.h&gt;"</span>             &lt;&lt; endl;
<a name="l00036"></a>00036   oIndDriver &lt;&lt; <span class="stringliteral">"#include &lt;vector&gt;"</span>                 &lt;&lt; endl;
<a name="l00037"></a>00037   oIndDriver &lt;&lt; <span class="stringliteral">"#include &lt;pvm3.h&gt;"</span>                 &lt;&lt; endl;
<a name="l00038"></a>00038   oIndDriver &lt;&lt; endl;
<a name="l00039"></a>00039 
<a name="l00040"></a>00040   oIndDriver &lt;&lt; <span class="stringliteral">"#include &lt;spk/spkpvm.h&gt;"</span>           &lt;&lt; endl;
<a name="l00041"></a>00041   oIndDriver &lt;&lt; <span class="stringliteral">"#include &lt;spk/scalarToDouble.h&gt;"</span>      &lt;&lt; endl;
<a name="l00042"></a>00042   oIndDriver &lt;&lt; <span class="stringliteral">"#include &lt;spk/SpkValarray.h&gt;"</span>      &lt;&lt; endl;
<a name="l00043"></a>00043   oIndDriver &lt;&lt; <span class="stringliteral">"#include &lt;spk/SpkException.h&gt;"</span>     &lt;&lt; endl;
<a name="l00044"></a>00044   oIndDriver &lt;&lt; <span class="stringliteral">"#include &lt;spk/WarningsManager.h&gt;"</span>  &lt;&lt; endl;
<a name="l00045"></a>00045   oIndDriver &lt;&lt; <span class="stringliteral">"#include &lt;CppAD/CppAD.h&gt;"</span>          &lt;&lt; endl;
<a name="l00046"></a>00046   oIndDriver &lt;&lt; endl;
<a name="l00047"></a>00047 
<a name="l00048"></a>00048   oIndDriver &lt;&lt; <span class="stringliteral">"// For parameter estimation"</span>       &lt;&lt; endl;
<a name="l00049"></a>00049   oIndDriver &lt;&lt; <span class="stringliteral">"#include &lt;spk/fitIndividual.h&gt;"</span>    &lt;&lt; endl;
<a name="l00050"></a>00050   oIndDriver &lt;&lt; <span class="stringliteral">"#include &lt;spk/Optimizer.h&gt;"</span>        &lt;&lt; endl;
<a name="l00051"></a>00051   oIndDriver &lt;&lt; endl;
<a name="l00052"></a>00052 
<a name="l00053"></a>00053   oIndDriver &lt;&lt; <span class="stringliteral">"// For statistics"</span>                 &lt;&lt; endl;
<a name="l00054"></a>00054   oIndDriver &lt;&lt; <span class="stringliteral">"#include &lt;spk/inverse.h&gt;"</span>          &lt;&lt; endl;
<a name="l00055"></a>00055   oIndDriver &lt;&lt; <span class="stringliteral">"#include &lt;spk/indStatistics.h&gt;"</span>    &lt;&lt; endl;
<a name="l00056"></a>00056   oIndDriver &lt;&lt; <span class="stringliteral">"#include &lt;spk/derParStatistics.h&gt;"</span> &lt;&lt; endl;
<a name="l00057"></a>00057   oIndDriver &lt;&lt; <span class="stringliteral">"#include &lt;spk/multiply.h&gt;"</span>         &lt;&lt; endl;
<a name="l00058"></a>00058   oIndDriver &lt;&lt; <span class="stringliteral">"#include &lt;spk/cholesky.h&gt;"</span>         &lt;&lt; endl;
<a name="l00059"></a>00059   oIndDriver &lt;&lt; <span class="stringliteral">"#include &lt;spk/indResiduals.h&gt;"</span>     &lt;&lt; endl;
<a name="l00060"></a>00060   oIndDriver &lt;&lt; <span class="stringliteral">"#include &lt;spk/symmetrize.h&gt;"</span>     &lt;&lt; endl;
<a name="l00061"></a>00061   oIndDriver &lt;&lt; endl;
<a name="l00062"></a>00062 
<a name="l00063"></a>00063   oIndDriver &lt;&lt; <span class="stringliteral">"// Helper"</span> &lt;&lt; endl;
<a name="l00064"></a>00064   oIndDriver &lt;&lt; <span class="stringliteral">"#include &lt;spk/printInMatrix.h&gt;"</span>    &lt;&lt; endl;
<a name="l00065"></a>00065   oIndDriver &lt;&lt; endl;
<a name="l00066"></a>00066 
<a name="l00067"></a>00067   oIndDriver &lt;&lt; <span class="stringliteral">"// For data simulation"</span>            &lt;&lt; endl;
<a name="l00068"></a>00068   oIndDriver &lt;&lt; <span class="stringliteral">"#include &lt;spk/simulate.h&gt;"</span>         &lt;&lt; endl;
<a name="l00069"></a>00069   oIndDriver &lt;&lt; endl;
<a name="l00070"></a>00070 
<a name="l00071"></a>00071   oIndDriver &lt;&lt; <span class="stringliteral">"// SPK Compiler generated headers/classes"</span> &lt;&lt; endl;
<a name="l00072"></a>00072   oIndDriver &lt;&lt; <span class="stringliteral">"#include \"IndData.h\""</span>            &lt;&lt; endl;
<a name="l00073"></a>00073   oIndDriver &lt;&lt; <span class="stringliteral">"#include \"DataSet.h\""</span>            &lt;&lt; endl;
<a name="l00074"></a>00074   oIndDriver &lt;&lt; <span class="stringliteral">"#include \"NonmemPars.h\""</span>         &lt;&lt; endl;
<a name="l00075"></a>00075   oIndDriver &lt;&lt; endl;
<a name="l00076"></a>00076 
<a name="l00077"></a>00077   oIndDriver &lt;&lt; <span class="stringliteral">"//   NONMEM PRED SPECIFIC"</span>         &lt;&lt; endl;
<a name="l00078"></a>00078   <span class="keywordflow">if</span>( <a class="code" href="classNonmemTranslator.html#cab9032bd76ec69a4aae3a4d1e82e34e">myModelSpec</a> == <a class="code" href="classNonmemTranslator.html#6f7b7f9526426cd62cee1682e008681ec68441caf432a1e6a609d1bd76ac0c47">PRED</a> )
<a name="l00079"></a>00079     oIndDriver &lt;&lt; <span class="stringliteral">"#include \"Pred.h\""</span>               &lt;&lt; endl;
<a name="l00080"></a>00080   <span class="keywordflow">else</span>
<a name="l00081"></a>00081     oIndDriver &lt;&lt; <span class="stringliteral">"#include \"OdePred.h\""</span>            &lt;&lt; endl;
<a name="l00082"></a>00082   oIndDriver &lt;&lt; <span class="stringliteral">"#include &lt;spkpred/IndPredModel.h&gt;"</span> &lt;&lt; endl;
<a name="l00083"></a>00083   oIndDriver &lt;&lt; endl;
<a name="l00084"></a>00084 
<a name="l00085"></a>00085   oIndDriver &lt;&lt; <span class="stringliteral">"using SPK_VA::valarray;"</span> &lt;&lt; endl;
<a name="l00086"></a>00086   oIndDriver &lt;&lt; <span class="stringliteral">"using namespace std;"</span>    &lt;&lt;endl;
<a name="l00087"></a>00087   oIndDriver &lt;&lt; endl;
<a name="l00088"></a>00088 
<a name="l00089"></a>00089   oIndDriver &lt;&lt; <span class="stringliteral">"enum RETURN_CODE { SUCCESS              = 0,"</span> &lt;&lt; endl;
<a name="l00090"></a>00090   oIndDriver &lt;&lt; <span class="stringliteral">"                   UNKNOWN_ERROR        = 1,"</span> &lt;&lt; endl;
<a name="l00091"></a>00091   oIndDriver &lt;&lt; <span class="stringliteral">"                   UNKNOWN_FAILURE      = 2,"</span> &lt;&lt; endl;
<a name="l00092"></a>00092   oIndDriver &lt;&lt; <span class="stringliteral">"                   PVM_FAILURE          = 3,"</span> &lt;&lt; endl;
<a name="l00093"></a>00093   oIndDriver &lt;&lt; <span class="stringliteral">"                   USER_ABORT           = 4,"</span> &lt;&lt; endl;
<a name="l00094"></a>00094   oIndDriver &lt;&lt; <span class="stringliteral">"                   FILE_ACCESS_ERROR    = 10,"</span> &lt;&lt; endl;
<a name="l00095"></a>00095   oIndDriver &lt;&lt; <span class="stringliteral">"                   OPTIMIZATION_ERROR   = 12,"</span> &lt;&lt; endl;
<a name="l00096"></a>00096   oIndDriver &lt;&lt; <span class="stringliteral">"                   OPT_OK_STAT_ERROR    = 13,"</span> &lt;&lt; endl;
<a name="l00097"></a>00097   oIndDriver &lt;&lt; <span class="stringliteral">"                   USER_INPUT_ERROR     = 14,"</span> &lt;&lt; endl;
<a name="l00098"></a>00098   oIndDriver &lt;&lt; <span class="stringliteral">"                   PROGRAMMER_ERROR     = 15,"</span> &lt;&lt; endl;
<a name="l00099"></a>00099   oIndDriver &lt;&lt; <span class="stringliteral">"                   SIMULATION_ERROR     = 16,"</span> &lt;&lt; endl;
<a name="l00100"></a>00100   oIndDriver &lt;&lt; <span class="stringliteral">"                   MODEL_IDENT_ERROR    = 17,"</span> &lt;&lt; endl;
<a name="l00101"></a>00101   oIndDriver &lt;&lt; <span class="stringliteral">"                   OPT_OK_RESID_ERROR   = 18,"</span> &lt;&lt; endl;
<a name="l00102"></a>00102   oIndDriver &lt;&lt; <span class="stringliteral">"                   FILE_ACCESS_FAILURE  = 100,"</span> &lt;&lt; endl;
<a name="l00103"></a>00103   oIndDriver &lt;&lt; <span class="stringliteral">"                   RESERVED_DO_NOT_USE  = 101,"</span> &lt;&lt; endl;
<a name="l00104"></a>00104   oIndDriver &lt;&lt; <span class="stringliteral">"                   OPTIMIZATION_FAILURE = 102,"</span> &lt;&lt; endl;
<a name="l00105"></a>00105   oIndDriver &lt;&lt; <span class="stringliteral">"                   OPT_OK_STAT_FAILURE  = 103,"</span> &lt;&lt; endl;
<a name="l00106"></a>00106   oIndDriver &lt;&lt; <span class="stringliteral">"                   PROGRAMMER_FAILURE   = 105,"</span> &lt;&lt; endl;
<a name="l00107"></a>00107   oIndDriver &lt;&lt; <span class="stringliteral">"                   SIMULATION_FAILURE   = 106,"</span> &lt;&lt; endl;
<a name="l00108"></a>00108   oIndDriver &lt;&lt; <span class="stringliteral">"                   MODEL_IDENT_FAILURE  = 107,"</span> &lt;&lt; endl;
<a name="l00109"></a>00109   oIndDriver &lt;&lt; <span class="stringliteral">"                   OPT_OK_RESID_FAILURE = 108,"</span> &lt;&lt; endl;
<a name="l00110"></a>00110   oIndDriver &lt;&lt; <span class="stringliteral">"                   OPT_MAX_ITER_ERROR   = 202"</span> &lt;&lt; endl;
<a name="l00111"></a>00111   oIndDriver &lt;&lt; <span class="stringliteral">"                 };"</span>       &lt;&lt; endl;
<a name="l00112"></a>00112   oIndDriver &lt;&lt; endl;
<a name="l00113"></a>00113 
<a name="l00114"></a>00114   oIndDriver &lt;&lt; <span class="stringliteral">"static void finish(int exit_value)"</span>  &lt;&lt; endl;
<a name="l00115"></a>00115   oIndDriver &lt;&lt; <span class="stringliteral">"{"</span>  &lt;&lt; endl;
<a name="l00116"></a>00116   oIndDriver &lt;&lt; <span class="stringliteral">"   int parent_tid = pvm_parent();"</span>  &lt;&lt; endl;
<a name="l00117"></a>00117   oIndDriver &lt;&lt; <span class="stringliteral">"   pvm_initsend(PvmDataDefault);"</span>  &lt;&lt; endl;
<a name="l00118"></a>00118   oIndDriver &lt;&lt; <span class="stringliteral">"   pvm_pkint(&amp;exit_value, 1, 1);"</span>  &lt;&lt; endl;
<a name="l00119"></a>00119   oIndDriver &lt;&lt; <span class="stringliteral">"   pvm_send(parent_tid, SpkPvmExitValue);"</span>  &lt;&lt; endl;
<a name="l00120"></a>00120   oIndDriver &lt;&lt; <span class="stringliteral">"   pvm_exit();"</span>  &lt;&lt; endl;
<a name="l00121"></a>00121   oIndDriver &lt;&lt; <span class="stringliteral">"}"</span>  &lt;&lt; endl;
<a name="l00122"></a>00122 
<a name="l00123"></a>00123   oIndDriver &lt;&lt; <span class="stringliteral">"int main( int argc, const char* argv[] )"</span> &lt;&lt; endl;
<a name="l00124"></a>00124   oIndDriver &lt;&lt; <span class="stringliteral">"{"</span> &lt;&lt; endl;
<a name="l00125"></a>00125 
<a name="l00126"></a>00126   oIndDriver &lt;&lt; <span class="stringliteral">"   /*******************************************************************/"</span> &lt;&lt; endl;
<a name="l00127"></a>00127   oIndDriver &lt;&lt; <span class="stringliteral">"   /*                                                                 */"</span> &lt;&lt; endl;
<a name="l00128"></a>00128   oIndDriver &lt;&lt; <span class="stringliteral">"   /*   Variable declarations and definitions                         */"</span> &lt;&lt; endl;
<a name="l00129"></a>00129   oIndDriver &lt;&lt; <span class="stringliteral">"   /*                                                                 */"</span> &lt;&lt; endl;
<a name="l00130"></a>00130   oIndDriver &lt;&lt; <span class="stringliteral">"   /*******************************************************************/"</span> &lt;&lt; endl;
<a name="l00131"></a>00131   oIndDriver &lt;&lt; <span class="stringliteral">"   enum RETURN_CODE ret = SUCCESS;"</span> &lt;&lt; endl;
<a name="l00132"></a>00132   oIndDriver &lt;&lt; endl;
<a name="l00133"></a>00133 
<a name="l00134"></a>00134   oIndDriver &lt;&lt; <span class="stringliteral">"   bool isUsingPvm = false;"</span> &lt;&lt; endl;
<a name="l00135"></a>00135   oIndDriver &lt;&lt; <span class="stringliteral">"   if(argc &gt; 1)"</span> &lt;&lt; endl;
<a name="l00136"></a>00136   oIndDriver &lt;&lt; <span class="stringliteral">"   {"</span> &lt;&lt; endl;
<a name="l00137"></a>00137   oIndDriver &lt;&lt; <span class="stringliteral">"      isUsingPvm = true;"</span>&lt;&lt; endl;
<a name="l00138"></a>00138   oIndDriver &lt;&lt; <span class="stringliteral">"      pvm_mytid();"</span> &lt;&lt; endl;
<a name="l00139"></a>00139   oIndDriver &lt;&lt; <span class="stringliteral">"      int parent_tid = pvm_parent();"</span> &lt;&lt; endl;
<a name="l00140"></a>00140   oIndDriver &lt;&lt; endl;
<a name="l00141"></a>00141 
<a name="l00142"></a>00142   oIndDriver &lt;&lt; <span class="stringliteral">"      // Disallow direct routing of messages between tasks; otherwise"</span> &lt;&lt; endl;
<a name="l00143"></a>00143   oIndDriver &lt;&lt; <span class="stringliteral">"      // messages will arrive out of sequence."</span> &lt;&lt; endl;
<a name="l00144"></a>00144   oIndDriver &lt;&lt; <span class="stringliteral">"      pvm_setopt(PvmRoute, PvmDontRoute);"</span> &lt;&lt; endl;
<a name="l00145"></a>00145 
<a name="l00146"></a>00146   oIndDriver &lt;&lt; <span class="stringliteral">"      pvm_notify(PvmTaskExit, PvmTaskExit, 1, &amp;parent_tid);"</span> &lt;&lt; endl;
<a name="l00147"></a>00147   oIndDriver &lt;&lt; endl;
<a name="l00148"></a>00148 
<a name="l00149"></a>00149   oIndDriver &lt;&lt; <span class="stringliteral">"      if(chdir(argv[1]) != 0)"</span> &lt;&lt; endl;
<a name="l00150"></a>00150   oIndDriver &lt;&lt; <span class="stringliteral">"      {"</span> &lt;&lt; endl;
<a name="l00151"></a>00151   oIndDriver &lt;&lt; <span class="stringliteral">"         finish(FILE_ACCESS_ERROR);"</span> &lt;&lt; endl;
<a name="l00152"></a>00152   oIndDriver &lt;&lt; <span class="stringliteral">"         return FILE_ACCESS_ERROR;"</span> &lt;&lt; endl;
<a name="l00153"></a>00153   oIndDriver &lt;&lt; <span class="stringliteral">"      }"</span> &lt;&lt; endl;
<a name="l00154"></a>00154   oIndDriver &lt;&lt; <span class="stringliteral">"   }"</span> &lt;&lt; endl;
<a name="l00155"></a>00155 
<a name="l00156"></a>00156   oIndDriver &lt;&lt; <span class="stringliteral">"   // Redirect stdout and stderr to files"</span> &lt;&lt; endl;
<a name="l00157"></a>00157   oIndDriver &lt;&lt; <span class="stringliteral">"   const char* stdoutFileName = \"optimizer_trace.txt\";"</span> &lt;&lt; endl;
<a name="l00158"></a>00158   oIndDriver &lt;&lt; <span class="stringliteral">"   const char* stderrFileName = \"software_error\";"</span> &lt;&lt; endl;
<a name="l00159"></a>00159   oIndDriver &lt;&lt; <span class="stringliteral">"   freopen( stdoutFileName, \"w\", stdout );"</span> &lt;&lt; endl;
<a name="l00160"></a>00160   oIndDriver &lt;&lt; <span class="stringliteral">"   freopen( stderrFileName, \"w\", stderr );"</span> &lt;&lt; endl;
<a name="l00161"></a>00161   oIndDriver &lt;&lt; endl;
<a name="l00162"></a>00162 
<a name="l00163"></a>00163   oIndDriver &lt;&lt; <span class="stringliteral">"   SpkException errors;"</span> &lt;&lt; endl;
<a name="l00164"></a>00164   <span class="comment">// Enclose the entire code in a big TRY block and don't let an exception leak."</span>
<a name="l00165"></a>00165   oIndDriver &lt;&lt; <span class="stringliteral">"   try{"</span> &lt;&lt; endl;
<a name="l00166"></a>00166   oIndDriver &lt;&lt; <span class="stringliteral">"      ofstream oLongError;"</span> &lt;&lt; endl;
<a name="l00167"></a>00167   oIndDriver &lt;&lt; endl;
<a name="l00168"></a>00168 
<a name="l00169"></a>00169   oIndDriver &lt;&lt; <span class="stringliteral">"      const int nPop = 1;"</span> &lt;&lt; endl;
<a name="l00170"></a>00170   oIndDriver &lt;&lt; endl;
<a name="l00171"></a>00171 
<a name="l00172"></a>00172   oIndDriver &lt;&lt; <span class="stringliteral">"      DataSet&lt; double &gt; set;"</span> &lt;&lt; endl;
<a name="l00173"></a>00173   oIndDriver &lt;&lt; <span class="stringliteral">"      DataSet&lt; CppAD::AD&lt;double&gt; &gt; setAD;"</span> &lt;&lt; endl;
<a name="l00174"></a>00174   oIndDriver &lt;&lt; <span class="stringliteral">"      DataSet&lt; CppAD::AD&lt; CppAD::AD&lt;double&gt; &gt; &gt; setADAD;"</span> &lt;&lt; endl;
<a name="l00175"></a>00175   oIndDriver &lt;&lt; <span class="stringliteral">"      const int nObservs = set.getNObservs( 0 );"</span> &lt;&lt; endl;
<a name="l00176"></a>00176   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; y( nObservs );"</span> &lt;&lt; endl;
<a name="l00177"></a>00177   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; f( nObservs );"</span> &lt;&lt; endl;
<a name="l00178"></a>00178   oIndDriver &lt;&lt; endl;
<a name="l00179"></a>00179   
<a name="l00180"></a>00180   oIndDriver &lt;&lt; <span class="stringliteral">"      const bool isSimRequested     = "</span> &lt;&lt; ( <a class="code" href="classNonmemTranslator.html#6fe301cdc5ba39210efbb8f0d411c575">myIsSimulate</a>? <span class="stringliteral">"true"</span>:<span class="stringliteral">"false"</span> ) &lt;&lt; <span class="stringliteral">";"</span> &lt;&lt; endl;
<a name="l00181"></a>00181   oIndDriver &lt;&lt; <span class="stringliteral">"      bool haveCompleteData         = !isSimRequested;"</span> &lt;&lt; endl;
<a name="l00182"></a>00182   oIndDriver &lt;&lt; endl;
<a name="l00183"></a>00183 
<a name="l00184"></a>00184   oIndDriver &lt;&lt; <span class="stringliteral">"      const bool isOptRequested     = "</span> &lt;&lt; ( <a class="code" href="classNonmemTranslator.html#bf24330fc235029ee0bb68a09b451018">myIsEstimate</a>? <span class="stringliteral">"true"</span>:<span class="stringliteral">"false"</span> ) &lt;&lt; <span class="stringliteral">";"</span> &lt;&lt; endl;
<a name="l00185"></a>00185   oIndDriver &lt;&lt; <span class="stringliteral">"      bool isOptSuccess             = !isOptRequested;"</span> &lt;&lt; endl;
<a name="l00186"></a>00186   oIndDriver &lt;&lt; endl;
<a name="l00187"></a>00187 
<a name="l00188"></a>00188   oIndDriver &lt;&lt; <span class="stringliteral">"      const bool isStatRequested    = "</span> &lt;&lt; ( <a class="code" href="classNonmemTranslator.html#2e28812e08f185a89e21d1e15b984bb5">myIsStat</a>? <span class="stringliteral">"true"</span>:<span class="stringliteral">"false"</span> ) &lt;&lt; <span class="stringliteral">";"</span>     &lt;&lt; endl;
<a name="l00189"></a>00189   oIndDriver &lt;&lt; <span class="stringliteral">"      IndCovForm covForm            = "</span> &lt;&lt; <a class="code" href="classNonmemTranslator.html#d54c106ff2f7a87e2fe8aa97d8383117">myCovForm</a> &lt;&lt; <span class="stringliteral">";"</span> &lt;&lt; endl;
<a name="l00190"></a>00190   oIndDriver &lt;&lt; <span class="stringliteral">"      bool isStatSuccess            = !isStatRequested;"</span> &lt;&lt; endl;
<a name="l00191"></a>00191   oIndDriver &lt;&lt; endl;
<a name="l00192"></a>00192   oIndDriver &lt;&lt; endl;
<a name="l00193"></a>00193 
<a name="l00194"></a>00194   oIndDriver &lt;&lt; <span class="stringliteral">"      const bool isRestartRequested = "</span> &lt;&lt; ( <a class="code" href="classNonmemTranslator.html#238983d396bc5e99b6b09447594e3ef8">myIsRestart</a>? <span class="stringliteral">"true"</span>:<span class="stringliteral">"false"</span> ) &lt;&lt; <span class="stringliteral">";"</span>     &lt;&lt; endl;
<a name="l00195"></a>00195   oIndDriver &lt;&lt; endl;
<a name="l00196"></a>00196 
<a name="l00197"></a>00197   oIndDriver &lt;&lt; <span class="stringliteral">"      const int nRepeats            = "</span> &lt;&lt; <a class="code" href="classNonmemTranslator.html#d015713d8e9c91d719e33f2979ba0d2b">mySubproblemsN</a> &lt;&lt; <span class="stringliteral">";"</span> &lt;&lt; endl;
<a name="l00198"></a>00198   oIndDriver &lt;&lt; endl;
<a name="l00199"></a>00199 
<a name="l00200"></a>00200   oIndDriver &lt;&lt; <span class="stringliteral">"      const bool withD              = false;"</span> &lt;&lt; endl;
<a name="l00201"></a>00201   oIndDriver &lt;&lt; endl;
<a name="l00202"></a>00202 
<a name="l00203"></a>00203   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; thetaStep( NonmemPars::nTheta );"</span> &lt;&lt; endl;
<a name="l00204"></a>00204   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; thetaIn  ( NonmemPars::thetaIn );"</span> &lt;&lt; endl;
<a name="l00205"></a>00205   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; omegaIn  ( NonmemPars::omegaIn );"</span> &lt;&lt; endl;
<a name="l00206"></a>00206   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; thetaOut ( NonmemPars::nTheta );"</span> &lt;&lt; endl;
<a name="l00207"></a>00207   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; omegaOut ( NonmemPars::omegaOrder );"</span> &lt;&lt; endl;
<a name="l00208"></a>00208   oIndDriver &lt;&lt; endl;
<a name="l00209"></a>00209 
<a name="l00210"></a>00210   oIndDriver &lt;&lt; <span class="stringliteral">"      //////////////////////////////////////////////////////////////////////"</span> &lt;&lt; endl;
<a name="l00211"></a>00211   oIndDriver &lt;&lt; <span class="stringliteral">"      //   Model Initialization"</span> &lt;&lt; endl;
<a name="l00212"></a>00212   <span class="keywordflow">if</span>( <a class="code" href="classNonmemTranslator.html#cab9032bd76ec69a4aae3a4d1e82e34e">myModelSpec</a> == <a class="code" href="classNonmemTranslator.html#6f7b7f9526426cd62cee1682e008681ec68441caf432a1e6a609d1bd76ac0c47">PRED</a> )
<a name="l00213"></a>00213     {
<a name="l00214"></a>00214       oIndDriver &lt;&lt; <span class="stringliteral">"      Pred&lt; double &gt; mPred(&amp;set);"</span> &lt;&lt; endl;
<a name="l00215"></a>00215       oIndDriver &lt;&lt; <span class="stringliteral">"      Pred&lt; CppAD::AD&lt;double&gt; &gt; mPredAD(&amp;setAD);"</span> &lt;&lt; endl;
<a name="l00216"></a>00216       oIndDriver &lt;&lt; <span class="stringliteral">"      Pred&lt; CppAD::AD&lt; CppAD::AD&lt;double&gt; &gt; &gt; mPredADAD(&amp;setADAD);"</span> &lt;&lt; endl;
<a name="l00217"></a>00217     }
<a name="l00218"></a>00218   <span class="keywordflow">else</span> <span class="comment">// ADVAN3</span>
<a name="l00219"></a>00219     {
<a name="l00220"></a>00220       oIndDriver &lt;&lt; <span class="stringliteral">"      OdePred&lt;double &gt; mPred( &amp;set, "</span> &lt;&lt; endl;
<a name="l00221"></a>00221       oIndDriver &lt;&lt; <span class="stringliteral">"                              NonmemPars::nIndividuals, "</span> &lt;&lt; endl;
<a name="l00222"></a>00222       oIndDriver &lt;&lt; <span class="stringliteral">"                              NonmemPars::isPkFunctionOfT,"</span> &lt;&lt; endl;
<a name="l00223"></a>00223       oIndDriver &lt;&lt; <span class="stringliteral">"                              NonmemPars::nCompartments,"</span> &lt;&lt; endl;
<a name="l00224"></a>00224       oIndDriver &lt;&lt; <span class="stringliteral">"                              NonmemPars::nParameters,"</span> &lt;&lt; endl;
<a name="l00225"></a>00225       oIndDriver &lt;&lt; <span class="stringliteral">"                              NonmemPars::defaultDoseComp,"</span> &lt;&lt; endl;
<a name="l00226"></a>00226       oIndDriver &lt;&lt; <span class="stringliteral">"                              NonmemPars::defaultObservationComp,"</span> &lt;&lt; endl;
<a name="l00227"></a>00227       oIndDriver &lt;&lt; <span class="stringliteral">"                              NonmemPars::initialOff,"</span> &lt;&lt; endl;
<a name="l00228"></a>00228       oIndDriver &lt;&lt; <span class="stringliteral">"                              NonmemPars::noOff,"</span> &lt;&lt; endl;
<a name="l00229"></a>00229       oIndDriver &lt;&lt; <span class="stringliteral">"                              NonmemPars::noDose,"</span> &lt;&lt; endl;
<a name="l00230"></a>00230       oIndDriver &lt;&lt; <span class="stringliteral">"                              NonmemPars::relTol"</span> &lt;&lt; endl;
<a name="l00231"></a>00231       oIndDriver &lt;&lt; <span class="stringliteral">"                             );"</span> &lt;&lt; endl;
<a name="l00232"></a>00232       oIndDriver &lt;&lt; <span class="stringliteral">"      OdePred&lt;CppAD::AD&lt;double&gt; &gt; mPredAD( &amp;setAD, "</span> &lt;&lt; endl;
<a name="l00233"></a>00233       oIndDriver &lt;&lt; <span class="stringliteral">"                                            NonmemPars::nIndividuals, "</span> &lt;&lt; endl;
<a name="l00234"></a>00234       oIndDriver &lt;&lt; <span class="stringliteral">"                                            NonmemPars::isPkFunctionOfT,"</span> &lt;&lt; endl;
<a name="l00235"></a>00235       oIndDriver &lt;&lt; <span class="stringliteral">"                                            NonmemPars::nCompartments,"</span> &lt;&lt; endl;
<a name="l00236"></a>00236       oIndDriver &lt;&lt; <span class="stringliteral">"                                            NonmemPars::nParameters,"</span> &lt;&lt; endl;
<a name="l00237"></a>00237       oIndDriver &lt;&lt; <span class="stringliteral">"                                            NonmemPars::defaultDoseComp,"</span> &lt;&lt; endl;
<a name="l00238"></a>00238       oIndDriver &lt;&lt; <span class="stringliteral">"                                            NonmemPars::defaultObservationComp,"</span> &lt;&lt; endl;
<a name="l00239"></a>00239       oIndDriver &lt;&lt; <span class="stringliteral">"                                            NonmemPars::initialOff,"</span> &lt;&lt; endl;
<a name="l00240"></a>00240       oIndDriver &lt;&lt; <span class="stringliteral">"                                            NonmemPars::noOff,"</span> &lt;&lt; endl;
<a name="l00241"></a>00241       oIndDriver &lt;&lt; <span class="stringliteral">"                                            NonmemPars::noDose,"</span> &lt;&lt; endl;
<a name="l00242"></a>00242       oIndDriver &lt;&lt; <span class="stringliteral">"                                            NonmemPars::relTol"</span> &lt;&lt; endl;
<a name="l00243"></a>00243       oIndDriver &lt;&lt; <span class="stringliteral">"                                         );"</span> &lt;&lt; endl;
<a name="l00244"></a>00244       oIndDriver &lt;&lt; <span class="stringliteral">"      OdePred&lt;CppAD::AD&lt; CppAD::AD&lt;double&gt; &gt; &gt; mPredADAD( &amp;setADAD, "</span> &lt;&lt; endl;
<a name="l00245"></a>00245       oIndDriver &lt;&lt; <span class="stringliteral">"                                                          NonmemPars::nIndividuals, "</span> &lt;&lt; endl;
<a name="l00246"></a>00246       oIndDriver &lt;&lt; <span class="stringliteral">"                                                          NonmemPars::isPkFunctionOfT,"</span> &lt;&lt; endl;
<a name="l00247"></a>00247       oIndDriver &lt;&lt; <span class="stringliteral">"                                                          NonmemPars::nCompartments,"</span> &lt;&lt; endl;
<a name="l00248"></a>00248       oIndDriver &lt;&lt; <span class="stringliteral">"                                                          NonmemPars::nParameters,"</span> &lt;&lt; endl;
<a name="l00249"></a>00249       oIndDriver &lt;&lt; <span class="stringliteral">"                                                          NonmemPars::defaultDoseComp,"</span> &lt;&lt; endl;
<a name="l00250"></a>00250       oIndDriver &lt;&lt; <span class="stringliteral">"                                                          NonmemPars::defaultObservationComp,"</span> &lt;&lt; endl;
<a name="l00251"></a>00251       oIndDriver &lt;&lt; <span class="stringliteral">"                                                          NonmemPars::initialOff,"</span> &lt;&lt; endl;
<a name="l00252"></a>00252       oIndDriver &lt;&lt; <span class="stringliteral">"                                                          NonmemPars::noOff,"</span> &lt;&lt; endl;
<a name="l00253"></a>00253       oIndDriver &lt;&lt; <span class="stringliteral">"                                                          NonmemPars::noDose,"</span> &lt;&lt; endl;
<a name="l00254"></a>00254       oIndDriver &lt;&lt; <span class="stringliteral">"                                                          NonmemPars::relTol"</span> &lt;&lt; endl;
<a name="l00255"></a>00255       oIndDriver &lt;&lt; <span class="stringliteral">"                                                        );"</span> &lt;&lt; endl;
<a name="l00256"></a>00256     }
<a name="l00257"></a>00257   oIndDriver &lt;&lt; <span class="stringliteral">"      IndPredModel model( mPred, "</span>                   &lt;&lt; endl;
<a name="l00258"></a>00258   oIndDriver &lt;&lt; <span class="stringliteral">"                          mPredAD,"</span>                  &lt;&lt; endl;
<a name="l00259"></a>00259   oIndDriver &lt;&lt; <span class="stringliteral">"                          mPredADAD,"</span>                &lt;&lt; endl;
<a name="l00260"></a>00260   oIndDriver &lt;&lt; <span class="stringliteral">"                          NonmemPars::nTheta, "</span>      &lt;&lt; endl;
<a name="l00261"></a>00261   oIndDriver &lt;&lt; <span class="stringliteral">"                          NonmemPars::thetaLow, "</span>    &lt;&lt; endl;
<a name="l00262"></a>00262   oIndDriver &lt;&lt; <span class="stringliteral">"                          NonmemPars::thetaUp, "</span>     &lt;&lt; endl;
<a name="l00263"></a>00263   oIndDriver &lt;&lt; <span class="stringliteral">"                          NonmemPars::thetaIn, "</span>     &lt;&lt; endl;
<a name="l00264"></a>00264   oIndDriver &lt;&lt; <span class="stringliteral">"                          NonmemPars::nEta, "</span>        &lt;&lt; endl;
<a name="l00265"></a>00265   oIndDriver &lt;&lt; <span class="stringliteral">"                          NonmemPars::omegaStruct,"</span>  &lt;&lt; endl;
<a name="l00266"></a>00266   oIndDriver &lt;&lt; <span class="stringliteral">"                          NonmemPars::omegaIn,"</span>      &lt;&lt; endl;
<a name="l00267"></a>00267   oIndDriver &lt;&lt; <span class="stringliteral">"                          NonmemPars::omegaFixed,"</span>   &lt;&lt; endl;
<a name="l00268"></a>00268   oIndDriver &lt;&lt; <span class="stringliteral">"                          NonmemPars::omegaBlockStruct,"</span>      &lt;&lt; endl;
<a name="l00269"></a>00269   oIndDriver &lt;&lt; <span class="stringliteral">"                          NonmemPars::omegaBlockDims,"</span>        &lt;&lt; endl;
<a name="l00270"></a>00270   oIndDriver &lt;&lt; <span class="stringliteral">"                          NonmemPars::omegaBlockSameAsPrev );"</span>&lt;&lt; endl;
<a name="l00271"></a>00271   oIndDriver &lt;&lt; <span class="stringliteral">"      //"</span> &lt;&lt; endl;
<a name="l00272"></a>00272   oIndDriver &lt;&lt; <span class="stringliteral">"      //////////////////////////////////////////////////////////////////////"</span> &lt;&lt; endl;
<a name="l00273"></a>00273   oIndDriver &lt;&lt; endl;
<a name="l00274"></a>00274   oIndDriver &lt;&lt; <span class="stringliteral">"      //////////////////////////////////////////////////////////////////////"</span> &lt;&lt; endl;
<a name="l00275"></a>00275   oIndDriver &lt;&lt; <span class="stringliteral">"      //   DataSet and Model for disposal in order to save the last values"</span>   &lt;&lt; endl;
<a name="l00276"></a>00276   oIndDriver &lt;&lt; <span class="stringliteral">"      //   from parameter estimation."</span>                                        &lt;&lt; endl;
<a name="l00277"></a>00277   oIndDriver &lt;&lt; <span class="stringliteral">"      DataSet&lt; double &gt; dataForDisposal;"</span> &lt;&lt; endl;
<a name="l00278"></a>00278   oIndDriver &lt;&lt; <span class="stringliteral">"      DataSet&lt; CppAD::AD&lt;double&gt; &gt; dataForDisposalAD;"</span> &lt;&lt; endl;
<a name="l00279"></a>00279   oIndDriver &lt;&lt; <span class="stringliteral">"      DataSet&lt; CppAD::AD&lt; CppAD::AD&lt;double&gt; &gt; &gt; dataForDisposalADAD;"</span> &lt;&lt; endl;
<a name="l00280"></a>00280   <span class="keywordflow">if</span>( <a class="code" href="classNonmemTranslator.html#cab9032bd76ec69a4aae3a4d1e82e34e">myModelSpec</a> == <a class="code" href="classNonmemTranslator.html#6f7b7f9526426cd62cee1682e008681ec68441caf432a1e6a609d1bd76ac0c47">PRED</a> )
<a name="l00281"></a>00281     {
<a name="l00282"></a>00282       oIndDriver &lt;&lt; <span class="stringliteral">"      Pred&lt; double &gt; predForDisposal(&amp;dataForDisposal);"</span> &lt;&lt; endl;
<a name="l00283"></a>00283       oIndDriver &lt;&lt; <span class="stringliteral">"      Pred&lt; CppAD::AD&lt;double&gt; &gt; predForDisposalAD(&amp;dataForDisposalAD);"</span> &lt;&lt; endl;
<a name="l00284"></a>00284       oIndDriver &lt;&lt; <span class="stringliteral">"      Pred&lt; CppAD::AD&lt; CppAD::AD&lt;double&gt; &gt; &gt; predForDisposalADAD(&amp;dataForDisposalADAD);"</span> &lt;&lt; endl;
<a name="l00285"></a>00285     }
<a name="l00286"></a>00286   <span class="keywordflow">else</span> <span class="comment">// ADVAN3</span>
<a name="l00287"></a>00287     {
<a name="l00288"></a>00288       oIndDriver &lt;&lt; <span class="stringliteral">"      OdePred&lt; double &gt; predForDisposal( &amp;dataForDisposal, "</span> &lt;&lt; endl;
<a name="l00289"></a>00289       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::nIndividuals, "</span> &lt;&lt; endl;
<a name="l00290"></a>00290       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::isPkFunctionOfT,"</span> &lt;&lt; endl;
<a name="l00291"></a>00291       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::nCompartments,"</span> &lt;&lt; endl;
<a name="l00292"></a>00292       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::nParameters,"</span> &lt;&lt; endl;
<a name="l00293"></a>00293       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::defaultDoseComp,"</span> &lt;&lt; endl;
<a name="l00294"></a>00294       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::defaultObservationComp,"</span> &lt;&lt; endl;
<a name="l00295"></a>00295       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::initialOff,"</span> &lt;&lt; endl;
<a name="l00296"></a>00296       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::noOff,"</span> &lt;&lt; endl;
<a name="l00297"></a>00297       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::noDose,"</span> &lt;&lt; endl;
<a name="l00298"></a>00298       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::relTol"</span> &lt;&lt; endl;
<a name="l00299"></a>00299       oIndDriver &lt;&lt; <span class="stringliteral">"                                       );"</span> &lt;&lt; endl;
<a name="l00300"></a>00300       oIndDriver &lt;&lt; <span class="stringliteral">"      OdePred&lt; CppAD::AD&lt;double&gt; &gt; predForDisposalAD( &amp;dataForDisposalAD, "</span> &lt;&lt; endl;
<a name="l00301"></a>00301       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::nIndividuals, "</span> &lt;&lt; endl;
<a name="l00302"></a>00302       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::isPkFunctionOfT,"</span> &lt;&lt; endl;
<a name="l00303"></a>00303       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::nCompartments,"</span> &lt;&lt; endl;
<a name="l00304"></a>00304       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::nParameters,"</span> &lt;&lt; endl;
<a name="l00305"></a>00305       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::defaultDoseComp,"</span> &lt;&lt; endl;
<a name="l00306"></a>00306       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::defaultObservationComp,"</span> &lt;&lt; endl;
<a name="l00307"></a>00307       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::initialOff,"</span> &lt;&lt; endl;
<a name="l00308"></a>00308       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::noOff,"</span> &lt;&lt; endl;
<a name="l00309"></a>00309       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::noDose,"</span> &lt;&lt; endl;
<a name="l00310"></a>00310       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::relTol"</span> &lt;&lt; endl;
<a name="l00311"></a>00311       oIndDriver &lt;&lt; <span class="stringliteral">"                                       );"</span> &lt;&lt; endl;
<a name="l00312"></a>00312       oIndDriver &lt;&lt; <span class="stringliteral">"      OdePred&lt; CppAD::AD&lt; CppAD::AD&lt;double&gt; &gt; &gt; predForDisposalADAD( &amp;dataForDisposalADAD, "</span> &lt;&lt; endl;
<a name="l00313"></a>00313       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::nIndividuals, "</span> &lt;&lt; endl;
<a name="l00314"></a>00314       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::isPkFunctionOfT,"</span> &lt;&lt; endl;
<a name="l00315"></a>00315       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::nCompartments,"</span> &lt;&lt; endl;
<a name="l00316"></a>00316       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::nParameters,"</span> &lt;&lt; endl;
<a name="l00317"></a>00317       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::defaultDoseComp,"</span> &lt;&lt; endl;
<a name="l00318"></a>00318       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::defaultObservationComp,"</span> &lt;&lt; endl;
<a name="l00319"></a>00319       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::initialOff,"</span> &lt;&lt; endl;
<a name="l00320"></a>00320       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::noOff,"</span> &lt;&lt; endl;
<a name="l00321"></a>00321       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::noDose,"</span> &lt;&lt; endl;
<a name="l00322"></a>00322       oIndDriver &lt;&lt; <span class="stringliteral">"                                         NonmemPars::relTol"</span> &lt;&lt; endl;
<a name="l00323"></a>00323       oIndDriver &lt;&lt; <span class="stringliteral">"                                       );"</span> &lt;&lt; endl;
<a name="l00324"></a>00324     }
<a name="l00325"></a>00325   oIndDriver &lt;&lt; <span class="stringliteral">"      IndPredModel modelForDisposal( predForDisposal, "</span> &lt;&lt; endl;
<a name="l00326"></a>00326   oIndDriver &lt;&lt; <span class="stringliteral">"                                     predForDisposalAD,"</span>       &lt;&lt; endl;
<a name="l00327"></a>00327   oIndDriver &lt;&lt; <span class="stringliteral">"                                     predForDisposalADAD,"</span>     &lt;&lt; endl;
<a name="l00328"></a>00328   oIndDriver &lt;&lt; <span class="stringliteral">"                          NonmemPars::nTheta, "</span>         &lt;&lt; endl;
<a name="l00329"></a>00329   oIndDriver &lt;&lt; <span class="stringliteral">"                          NonmemPars::thetaLow, "</span>       &lt;&lt; endl;
<a name="l00330"></a>00330   oIndDriver &lt;&lt; <span class="stringliteral">"                          NonmemPars::thetaUp, "</span>        &lt;&lt; endl;
<a name="l00331"></a>00331   oIndDriver &lt;&lt; <span class="stringliteral">"                          NonmemPars::thetaIn, "</span>        &lt;&lt; endl;
<a name="l00332"></a>00332   oIndDriver &lt;&lt; <span class="stringliteral">"                          NonmemPars::nEta, "</span>           &lt;&lt; endl;
<a name="l00333"></a>00333   oIndDriver &lt;&lt; <span class="stringliteral">"                          NonmemPars::omegaStruct,"</span>     &lt;&lt; endl;
<a name="l00334"></a>00334   oIndDriver &lt;&lt; <span class="stringliteral">"                          NonmemPars::omegaIn,"</span>         &lt;&lt; endl;
<a name="l00335"></a>00335   oIndDriver &lt;&lt; <span class="stringliteral">"                          NonmemPars::omegaFixed,"</span>      &lt;&lt; endl;
<a name="l00336"></a>00336   oIndDriver &lt;&lt; <span class="stringliteral">"                          NonmemPars::omegaBlockStruct,"</span>      &lt;&lt; endl;
<a name="l00337"></a>00337   oIndDriver &lt;&lt; <span class="stringliteral">"                          NonmemPars::omegaBlockDims,"</span>        &lt;&lt; endl;
<a name="l00338"></a>00338   oIndDriver &lt;&lt; <span class="stringliteral">"                          NonmemPars::omegaBlockSameAsPrev );"</span>&lt;&lt; endl;
<a name="l00339"></a>00339   oIndDriver &lt;&lt; <span class="stringliteral">"      //"</span> &lt;&lt; endl;
<a name="l00340"></a>00340   oIndDriver &lt;&lt; <span class="stringliteral">"      //////////////////////////////////////////////////////////////////////"</span> &lt;&lt; endl;
<a name="l00341"></a>00341   oIndDriver &lt;&lt; endl;
<a name="l00342"></a>00342 
<a name="l00343"></a>00343   oIndDriver &lt;&lt; <span class="stringliteral">"      const int nB = model.getNIndPar();"</span> &lt;&lt; endl;
<a name="l00344"></a>00344   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; bIn  ( nB );"</span>      &lt;&lt; endl;
<a name="l00345"></a>00345   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; bStep( nB );"</span>      &lt;&lt; endl;
<a name="l00346"></a>00346   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; bLow ( nB );"</span>      &lt;&lt; endl;
<a name="l00347"></a>00347   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; bUp  ( nB );"</span>      &lt;&lt; endl;
<a name="l00348"></a>00348   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; bOut ( nB );"</span>      &lt;&lt; endl;
<a name="l00349"></a>00349   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;bool&gt;   bMask( nB );"</span>      &lt;&lt; endl;
<a name="l00350"></a>00350   oIndDriver &lt;&lt; <span class="stringliteral">"      double           bObjOut;"</span>                       &lt;&lt; endl;
<a name="l00351"></a>00351   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; bObj_bOut( nB );"</span>               &lt;&lt; endl;
<a name="l00352"></a>00352   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; bObj_b_bOut( nB * nB );"</span>        &lt;&lt; endl;
<a name="l00353"></a>00353   oIndDriver &lt;&lt; endl;
<a name="l00354"></a>00354   
<a name="l00355"></a>00355   oIndDriver &lt;&lt; <span class="stringliteral">"      timeval optBegin, optEnd;"</span> &lt;&lt; endl;
<a name="l00356"></a>00356   oIndDriver &lt;&lt; <span class="stringliteral">"      double optTimeSec = 0.0;"</span> &lt;&lt; endl;
<a name="l00357"></a>00357   oIndDriver &lt;&lt; endl;
<a name="l00358"></a>00358 
<a name="l00359"></a>00359   oIndDriver &lt;&lt; <span class="stringliteral">"      const double indEps             = "</span>   &lt;&lt; <a class="code" href="classNonmemTranslator.html#4106c8d59d6f2c6da7b83817b92cb32e">myIndEpsilon</a>    &lt;&lt; <span class="stringliteral">";"</span> &lt;&lt; endl;
<a name="l00360"></a>00360   oIndDriver &lt;&lt; <span class="stringliteral">"      const int    indMitr            = "</span>   &lt;&lt; <a class="code" href="classNonmemTranslator.html#27800702dbcc26a3200e1f6e10adb268">myIndMitr</a>       &lt;&lt; <span class="stringliteral">";"</span> &lt;&lt; endl;
<a name="l00361"></a>00361   oIndDriver &lt;&lt; <span class="stringliteral">"      const int    indTrace           = "</span>   &lt;&lt; <a class="code" href="classNonmemTranslator.html#8d69c642623dcf20af025addc85a5276">myIndTraceLevel</a> &lt;&lt; <span class="stringliteral">";"</span> &lt;&lt; endl;
<a name="l00362"></a>00362   oIndDriver &lt;&lt; <span class="stringliteral">"      const string indCheckpointFile  = \""</span> &lt;&lt; <a class="code" href="classNonmemTranslator.html#fc14cf1095a1c8d35431fe8590e1993d">fCheckpoint_xml</a> &lt;&lt; <span class="stringliteral">"\";"</span>  &lt;&lt; endl;
<a name="l00363"></a>00363   oIndDriver &lt;&lt; <span class="stringliteral">"      bool         indWriteCheckpoint = "</span>   &lt;&lt; (<a class="code" href="classNonmemTranslator.html#dcab2a60935c9bd74f55d7bb475951b3">myIndWriteCheckpoint</a>? <span class="stringliteral">"true"</span> : <span class="stringliteral">"false"</span>) &lt;&lt; <span class="stringliteral">";"</span> &lt;&lt; endl;
<a name="l00364"></a>00364   oIndDriver &lt;&lt; <span class="stringliteral">"      ifstream     iCheckpoint( indCheckpointFile.c_str() );"</span>  &lt;&lt; endl;
<a name="l00365"></a>00365   oIndDriver &lt;&lt; <span class="stringliteral">"      // Error if the user asked to continue but no checkpoint.xml is found "</span> &lt;&lt; endl;
<a name="l00366"></a>00366   oIndDriver &lt;&lt; <span class="stringliteral">"      // in the current directory."</span> &lt;&lt; endl;
<a name="l00367"></a>00367   oIndDriver &lt;&lt; <span class="stringliteral">"      if( isRestartRequested &amp;&amp; !iCheckpoint.good() )"</span> &lt;&lt; endl;
<a name="l00368"></a>00368   oIndDriver &lt;&lt; <span class="stringliteral">"      {"</span> &lt;&lt; endl;
<a name="l00369"></a>00369   oIndDriver &lt;&lt; <span class="stringliteral">"         char m[ SpkError::maxMessageLen()];"</span> &lt;&lt; endl;
<a name="l00370"></a>00370   oIndDriver &lt;&lt; <span class="stringliteral">"         snprintf( m, "</span> &lt;&lt; endl;
<a name="l00371"></a>00371   oIndDriver &lt;&lt; <span class="stringliteral">"                   SpkError::maxMessageLen(),"</span> &lt;&lt; endl;
<a name="l00372"></a>00372   oIndDriver &lt;&lt; <span class="stringliteral">"                  \"Warm start is requested but no checkpoint file found.\" );"</span> &lt;&lt; endl;
<a name="l00373"></a>00373   oIndDriver &lt;&lt; <span class="stringliteral">"         SpkError e( SpkError::SPK_STD_ERR, m, __LINE__, __FILE__);"</span> &lt;&lt; endl;
<a name="l00374"></a>00374   oIndDriver &lt;&lt; <span class="stringliteral">"         errors.push( e );"</span> &lt;&lt; endl;
<a name="l00375"></a>00375   oIndDriver &lt;&lt; <span class="stringliteral">"         ret = FILE_ACCESS_ERROR;"</span> &lt;&lt; endl;
<a name="l00376"></a>00376   oIndDriver &lt;&lt; <span class="stringliteral">"      }"</span> &lt;&lt; endl;
<a name="l00377"></a>00377   oIndDriver &lt;&lt; <span class="stringliteral">"      // Flag to read the checkpoint file if that exists even "</span> &lt;&lt; endl;
<a name="l00378"></a>00378   oIndDriver &lt;&lt; <span class="stringliteral">"      // if the user didn't ask a continuation."</span> &lt;&lt; endl;
<a name="l00379"></a>00379   oIndDriver &lt;&lt; <span class="stringliteral">"      bool         indReadCheckpoint  = iCheckpoint.good();"</span>   &lt;&lt; endl;
<a name="l00380"></a>00380   oIndDriver &lt;&lt; <span class="stringliteral">"      iCheckpoint.close();"</span>                                    &lt;&lt; endl;
<a name="l00381"></a>00381   oIndDriver &lt;&lt; <span class="stringliteral">"      Optimizer    indOpt( indEps, "</span>                           &lt;&lt; endl;
<a name="l00382"></a>00382   oIndDriver &lt;&lt; <span class="stringliteral">"                           indMitr, "</span>                          &lt;&lt; endl;
<a name="l00383"></a>00383   oIndDriver &lt;&lt; <span class="stringliteral">"                           indTrace, "</span>                         &lt;&lt; endl;
<a name="l00384"></a>00384   oIndDriver &lt;&lt; <span class="stringliteral">"                           indCheckpointFile, "</span>                &lt;&lt; endl;
<a name="l00385"></a>00385   oIndDriver &lt;&lt; <span class="stringliteral">"                           indReadCheckpoint,"</span>                 &lt;&lt; endl;
<a name="l00386"></a>00386   oIndDriver &lt;&lt; <span class="stringliteral">"                           indWriteCheckpoint );"</span>              &lt;&lt; endl;
<a name="l00387"></a>00387   oIndDriver &lt;&lt; endl;
<a name="l00388"></a>00388 
<a name="l00389"></a>00389   oIndDriver &lt;&lt; <span class="stringliteral">"      model.getIndPar       ( bIn );"</span>       &lt;&lt; endl;
<a name="l00390"></a>00390   oIndDriver &lt;&lt; <span class="stringliteral">"      model.getIndParLimits ( bLow, bUp );"</span> &lt;&lt; endl;
<a name="l00391"></a>00391   oIndDriver &lt;&lt; <span class="stringliteral">"      model.getIndParStep   ( bStep );"</span>     &lt;&lt; endl;
<a name="l00392"></a>00392   oIndDriver &lt;&lt; endl;
<a name="l00393"></a>00393 
<a name="l00394"></a>00394   oIndDriver &lt;&lt; <span class="stringliteral">"      timeval statBegin, statEnd;"</span>                         &lt;&lt; endl;
<a name="l00395"></a>00395   oIndDriver &lt;&lt; <span class="stringliteral">"      double statTimeSec = 0.0;"</span>                           &lt;&lt; endl;
<a name="l00396"></a>00396   oIndDriver &lt;&lt; <span class="stringliteral">"      const int nDegOfFreedom = nObservs - nB;"</span>            &lt;&lt; endl;
<a name="l00397"></a>00397   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; bCov( nB * nB );"</span>                   &lt;&lt; endl;
<a name="l00398"></a>00398   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; stdPar( nB );"</span>                      &lt;&lt; endl;
<a name="l00399"></a>00399   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; stdPar_b( nB * nB );"</span>               &lt;&lt; endl;
<a name="l00400"></a>00400   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;bool&gt;   stdParMask( nB );"</span>                  &lt;&lt; endl;
<a name="l00401"></a>00401   oIndDriver &lt;&lt; <span class="stringliteral">"      bool isCovOut         = "</span> &lt;&lt; ( <a class="code" href="classNonmemTranslator.html#9ca7ea5dba11f42cb3edfe79d6d4b6f6">myIsCov</a>?         <span class="stringliteral">"true"</span> : <span class="stringliteral">"false"</span> ) &lt;&lt; <span class="stringliteral">";"</span> &lt;&lt; endl;    
<a name="l00402"></a>00402   oIndDriver &lt;&lt; <span class="stringliteral">"      bool isInvCovOut      = "</span> &lt;&lt; ( <a class="code" href="classNonmemTranslator.html#b3d0363ef3c5aab9df532065e761fcde">myIsInvCov</a>?      <span class="stringliteral">"true"</span> : <span class="stringliteral">"false"</span> ) &lt;&lt; <span class="stringliteral">";"</span> &lt;&lt; endl;    
<a name="l00403"></a>00403   oIndDriver &lt;&lt; <span class="stringliteral">"      bool isStdErrOut      = "</span> &lt;&lt; ( <a class="code" href="classNonmemTranslator.html#28e4ec2bb3faaa6d259ed52ea1c3d1d0">myIsStderr</a>?      <span class="stringliteral">"true"</span> : <span class="stringliteral">"false"</span> ) &lt;&lt; <span class="stringliteral">";"</span> &lt;&lt; endl;    
<a name="l00404"></a>00404   oIndDriver &lt;&lt; <span class="stringliteral">"      bool isCorrelationOut = "</span> &lt;&lt; ( <a class="code" href="classNonmemTranslator.html#e628e268d4f31e5041111706c4afaecd">myIsCorrelation</a>? <span class="stringliteral">"true"</span> : <span class="stringliteral">"false"</span> ) &lt;&lt; <span class="stringliteral">";"</span> &lt;&lt; endl;    
<a name="l00405"></a>00405   oIndDriver &lt;&lt; <span class="stringliteral">"      bool isConfidenceOut  = "</span> &lt;&lt; ( <a class="code" href="classNonmemTranslator.html#686018b1cf44cac207d41e8ffa6fa459">myIsConfidence</a>?  <span class="stringliteral">"true"</span> : <span class="stringliteral">"false"</span> ) &lt;&lt; <span class="stringliteral">";"</span> &lt;&lt; endl;    
<a name="l00406"></a>00406   oIndDriver &lt;&lt; <span class="stringliteral">"      bool isCoefficientOut = "</span> &lt;&lt; ( <a class="code" href="classNonmemTranslator.html#f825a0ed5d8a6a8125640533a953656e">myIsCoefficient</a>? <span class="stringliteral">"true"</span> : <span class="stringliteral">"false"</span> ) &lt;&lt; <span class="stringliteral">";"</span> &lt;&lt; endl;    
<a name="l00407"></a>00407   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; stdParCovOut( nB * nB );"</span>         &lt;&lt; endl;
<a name="l00408"></a>00408   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; stdParSEOut( nB );"</span>               &lt;&lt; endl;
<a name="l00409"></a>00409   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; stdParCorrelationOut( nB * nB );"</span> &lt;&lt; endl;
<a name="l00410"></a>00410   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; stdParCoefficientOut( nB );"</span>      &lt;&lt; endl;
<a name="l00411"></a>00411   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; stdParConfidenceOut( 2 * nB );"</span>   &lt;&lt; endl;
<a name="l00412"></a>00412   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; stdParInvCovOut( nB * nB );"</span>      &lt;&lt; endl;
<a name="l00413"></a>00413       
<a name="l00414"></a>00414   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; f_bOut( nObservs * nB );"</span>      &lt;&lt; endl;
<a name="l00415"></a>00415   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; R_bOut( nObservs * nObservs * nB );"</span> &lt;&lt; endl;
<a name="l00416"></a>00416   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; RInvOut( nObservs * nObservs );"</span>     &lt;&lt; endl;
<a name="l00417"></a>00417   oIndDriver &lt;&lt; endl;
<a name="l00418"></a>00418 
<a name="l00419"></a>00419   oIndDriver &lt;&lt; <span class="stringliteral">"      const int nRecords = set.getNRecords(0);"</span> &lt;&lt; endl;
<a name="l00420"></a>00420   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; iPredOut              ( nRecords );"</span>  &lt;&lt; endl;
<a name="l00421"></a>00421   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; iResOut               ( nRecords );"</span>  &lt;&lt; endl;
<a name="l00422"></a>00422   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; iResWtdOut            ( nRecords );"</span>  &lt;&lt; endl;
<a name="l00423"></a>00423   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; iResTrancatedOut      ( nObservs );"</span>  &lt;&lt; endl;
<a name="l00424"></a>00424   oIndDriver &lt;&lt; <span class="stringliteral">"      valarray&lt;double&gt; iResWtdTrancatedOut   ( nObservs );"</span>  &lt;&lt; endl;
<a name="l00425"></a>00425   oIndDriver &lt;&lt; endl;
<a name="l00426"></a>00426 
<a name="l00427"></a>00427   oIndDriver &lt;&lt; <span class="stringliteral">"      double zero = 0.0;"</span> &lt;&lt; endl;
<a name="l00428"></a>00428   oIndDriver &lt;&lt; endl;
<a name="l00429"></a>00429   oIndDriver &lt;&lt; <span class="stringliteral">"      // Initially set all of these equal to Not a Numbers (NaN) to"</span> &lt;&lt; endl;
<a name="l00430"></a>00430   oIndDriver &lt;&lt; <span class="stringliteral">"      // indicate that their values have not yet been calculated."</span> &lt;&lt; endl;
<a name="l00431"></a>00431   oIndDriver &lt;&lt; <span class="stringliteral">"      iPredOut   = zero / zero;"</span> &lt;&lt; endl;
<a name="l00432"></a>00432   oIndDriver &lt;&lt; <span class="stringliteral">"      iResOut    = zero / zero;"</span> &lt;&lt; endl;
<a name="l00433"></a>00433   oIndDriver &lt;&lt; <span class="stringliteral">"      iResWtdOut = zero / zero;"</span> &lt;&lt; endl;
<a name="l00434"></a>00434   oIndDriver &lt;&lt; endl;
<a name="l00435"></a>00435 
<a name="l00436"></a>00436   oIndDriver &lt;&lt; <span class="stringliteral">"      ofstream oResults;"</span> &lt;&lt; endl;
<a name="l00437"></a>00437   oIndDriver &lt;&lt; <span class="stringliteral">"      string warningsOut;"</span> &lt;&lt; endl;
<a name="l00438"></a>00438   oIndDriver &lt;&lt; <span class="stringliteral">"      int seed = NonmemPars::seed;"</span> &lt;&lt; endl;
<a name="l00439"></a>00439   oIndDriver &lt;&lt; <span class="stringliteral">"      srand( seed );"</span> &lt;&lt; endl;
<a name="l00440"></a>00440   oIndDriver &lt;&lt; <span class="stringliteral">"      int iSub = 0;"</span> &lt;&lt; endl;
<a name="l00441"></a>00441   oIndDriver &lt;&lt; endl;
<a name="l00442"></a>00442 
<a name="l00443"></a>00443   oIndDriver &lt;&lt; <span class="stringliteral">"      if( ret != SUCCESS )"</span> &lt;&lt; endl;
<a name="l00444"></a>00444   oIndDriver &lt;&lt; <span class="stringliteral">"        goto REPORT_GEN;"</span> &lt;&lt; endl;
<a name="l00445"></a>00445   oIndDriver &lt;&lt; endl;
<a name="l00446"></a>00446 
<a name="l00447"></a>00447   oIndDriver &lt;&lt; <span class="stringliteral">"      remove( \"result.xml\" );"</span> &lt;&lt; endl;
<a name="l00448"></a>00448   oIndDriver &lt;&lt; <span class="stringliteral">"      for( iSub=0; iSub&lt;nRepeats; iSub++ )"</span> &lt;&lt; endl;
<a name="l00449"></a>00449   oIndDriver &lt;&lt; <span class="stringliteral">"      {"</span> &lt;&lt; endl;
<a name="l00450"></a>00450   oIndDriver &lt;&lt; <span class="stringliteral">"         /*******************************************************************/"</span> &lt;&lt; endl;
<a name="l00451"></a>00451   oIndDriver &lt;&lt; <span class="stringliteral">"         /*                                                                 */"</span> &lt;&lt; endl;
<a name="l00452"></a>00452   oIndDriver &lt;&lt; <span class="stringliteral">"         /*   Data Initialization                                           */"</span> &lt;&lt; endl;
<a name="l00453"></a>00453   oIndDriver &lt;&lt; <span class="stringliteral">"         /*                                                                 */"</span> &lt;&lt; endl;
<a name="l00454"></a>00454   oIndDriver &lt;&lt; <span class="stringliteral">"         /*******************************************************************/"</span> &lt;&lt; endl;
<a name="l00455"></a>00455   oIndDriver &lt;&lt; <span class="stringliteral">"         if( isSimRequested )"</span> &lt;&lt; endl;
<a name="l00456"></a>00456   oIndDriver &lt;&lt; <span class="stringliteral">"         {"</span> &lt;&lt; endl;
<a name="l00457"></a>00457   oIndDriver &lt;&lt; <span class="stringliteral">"            valarray&lt;double&gt; yOut( nObservs );"</span> &lt;&lt; endl;
<a name="l00458"></a>00458   oIndDriver &lt;&lt; <span class="stringliteral">"            try"</span> &lt;&lt; endl;
<a name="l00459"></a>00459   oIndDriver &lt;&lt; <span class="stringliteral">"            {"</span> &lt;&lt; endl;
<a name="l00460"></a>00460   oIndDriver &lt;&lt; <span class="stringliteral">"               simulate( model, nObservs, bIn, yOut );"</span> &lt;&lt; endl;
<a name="l00461"></a>00461   oIndDriver &lt;&lt; <span class="stringliteral">"               set.replaceAllMeasurements( yOut );"</span> &lt;&lt; endl;
<a name="l00462"></a>00462   oIndDriver &lt;&lt; <span class="stringliteral">"               y = yOut;"</span> &lt;&lt; endl;
<a name="l00463"></a>00463   oIndDriver &lt;&lt; <span class="stringliteral">"               haveCompleteData = true;"</span> &lt;&lt; endl;
<a name="l00464"></a>00464   oIndDriver &lt;&lt; <span class="stringliteral">"            }"</span> &lt;&lt; endl;
<a name="l00465"></a>00465   oIndDriver &lt;&lt; <span class="stringliteral">"            catch( const SpkException&amp; e )"</span> &lt;&lt; endl;
<a name="l00466"></a>00466   oIndDriver &lt;&lt; <span class="stringliteral">"            {"</span> &lt;&lt; endl;
<a name="l00467"></a>00467   oIndDriver &lt;&lt; <span class="stringliteral">"               errors.cat( e );"</span> &lt;&lt; endl;
<a name="l00468"></a>00468   oIndDriver &lt;&lt; <span class="stringliteral">"               haveCompleteData = false;"</span> &lt;&lt; endl;
<a name="l00469"></a>00469   oIndDriver &lt;&lt; <span class="stringliteral">"               ret = SIMULATION_ERROR;"</span> &lt;&lt; endl;
<a name="l00470"></a>00470   oIndDriver &lt;&lt; <span class="stringliteral">"               goto REPORT_GEN;"</span> &lt;&lt; endl;
<a name="l00471"></a>00471   oIndDriver &lt;&lt; <span class="stringliteral">"            }"</span> &lt;&lt; endl;
<a name="l00472"></a>00472   oIndDriver &lt;&lt; <span class="stringliteral">"            catch( const std::exception&amp; stde )"</span> &lt;&lt; endl;
<a name="l00473"></a>00473   oIndDriver &lt;&lt; <span class="stringliteral">"            {"</span> &lt;&lt; endl;
<a name="l00474"></a>00474   oIndDriver &lt;&lt; <span class="stringliteral">"               char message[] =\"A standard exception occurred in data simulation.\";"</span> &lt;&lt; endl;
<a name="l00475"></a>00475   oIndDriver &lt;&lt; <span class="stringliteral">"               SpkError e( stde, message, __LINE__, __FILE__ );"</span> &lt;&lt; endl;
<a name="l00476"></a>00476   oIndDriver &lt;&lt; <span class="stringliteral">"               errors.push( e );"</span> &lt;&lt; endl;
<a name="l00477"></a>00477   oIndDriver &lt;&lt; <span class="stringliteral">"               haveCompleteData = false;"</span> &lt;&lt; endl;
<a name="l00478"></a>00478   oIndDriver &lt;&lt; <span class="stringliteral">"               ret = SIMULATION_ERROR;"</span> &lt;&lt; endl;
<a name="l00479"></a>00479   oIndDriver &lt;&lt; <span class="stringliteral">"               goto REPORT_GEN;"</span> &lt;&lt; endl;
<a name="l00480"></a>00480   oIndDriver &lt;&lt; <span class="stringliteral">"            }"</span> &lt;&lt; endl;
<a name="l00481"></a>00481   oIndDriver &lt;&lt; <span class="stringliteral">"            catch( ... )"</span> &lt;&lt; endl;
<a name="l00482"></a>00482   oIndDriver &lt;&lt; <span class="stringliteral">"            {"</span> &lt;&lt; endl;
<a name="l00483"></a>00483   oIndDriver &lt;&lt; <span class="stringliteral">"               char message[] =\"An unknown exception occurred in data simulation.\";"</span> &lt;&lt; endl;
<a name="l00484"></a>00484   oIndDriver &lt;&lt; <span class="stringliteral">"               SpkError e( SpkError::SPK_UNKNOWN_ERR, message, __LINE__, __FILE__ );"</span> &lt;&lt; endl;
<a name="l00485"></a>00485   oIndDriver &lt;&lt; <span class="stringliteral">"               errors.push( e );"</span> &lt;&lt; endl;
<a name="l00486"></a>00486   oIndDriver &lt;&lt; <span class="stringliteral">"               haveCompleteData = false;"</span> &lt;&lt; endl;
<a name="l00487"></a>00487   oIndDriver &lt;&lt; <span class="stringliteral">"               ret = SIMULATION_ERROR;"</span> &lt;&lt; endl;
<a name="l00488"></a>00488   oIndDriver &lt;&lt; <span class="stringliteral">"               goto REPORT_GEN;"</span> &lt;&lt; endl;
<a name="l00489"></a>00489   oIndDriver &lt;&lt; <span class="stringliteral">"            }"</span> &lt;&lt; endl;
<a name="l00490"></a>00490   oIndDriver &lt;&lt; <span class="stringliteral">"         }"</span> &lt;&lt; endl;
<a name="l00491"></a>00491   oIndDriver &lt;&lt; <span class="stringliteral">"         else"</span> &lt;&lt; endl;
<a name="l00492"></a>00492   oIndDriver &lt;&lt; <span class="stringliteral">"         {"</span> &lt;&lt; endl;
<a name="l00493"></a>00493   oIndDriver &lt;&lt; <span class="stringliteral">"            y = set.getAllMeasurements();"</span> &lt;&lt; endl;
<a name="l00494"></a>00494   oIndDriver &lt;&lt; <span class="stringliteral">"            haveCompleteData = true;"</span> &lt;&lt; endl;
<a name="l00495"></a>00495   oIndDriver &lt;&lt; <span class="stringliteral">"         }"</span> &lt;&lt; endl;
<a name="l00496"></a>00496   oIndDriver &lt;&lt; endl;
<a name="l00497"></a>00497   
<a name="l00498"></a>00498   oIndDriver &lt;&lt; <span class="stringliteral">"OPTIMIZATION:"</span> &lt;&lt; endl;
<a name="l00499"></a>00499   oIndDriver &lt;&lt; <span class="stringliteral">"         /*******************************************************************/"</span> &lt;&lt; endl;
<a name="l00500"></a>00500   oIndDriver &lt;&lt; <span class="stringliteral">"         /*                                                                 */"</span> &lt;&lt; endl;
<a name="l00501"></a>00501   oIndDriver &lt;&lt; <span class="stringliteral">"         /*   Parameter Estimation                                          */"</span> &lt;&lt; endl;
<a name="l00502"></a>00502   oIndDriver &lt;&lt; <span class="stringliteral">"         /*                                                                 */"</span> &lt;&lt; endl;
<a name="l00503"></a>00503   oIndDriver &lt;&lt; <span class="stringliteral">"         /*******************************************************************/"</span> &lt;&lt; endl;
<a name="l00504"></a>00504   oIndDriver &lt;&lt; <span class="stringliteral">"         if( isOptRequested &amp;&amp; haveCompleteData )"</span> &lt;&lt; endl;
<a name="l00505"></a>00505   oIndDriver &lt;&lt; <span class="stringliteral">"         {"</span> &lt;&lt; endl;
<a name="l00506"></a>00506   oIndDriver &lt;&lt; <span class="stringliteral">"            gettimeofday( &amp;optBegin, NULL );"</span> &lt;&lt; endl;
<a name="l00507"></a>00507   oIndDriver &lt;&lt; <span class="stringliteral">"            try"</span> &lt;&lt; endl;
<a name="l00508"></a>00508   oIndDriver &lt;&lt; <span class="stringliteral">"            {"</span> &lt;&lt; endl;
<a name="l00509"></a>00509   oIndDriver &lt;&lt; <span class="stringliteral">"               fitIndividual( model,"</span> &lt;&lt; endl;
<a name="l00510"></a>00510   oIndDriver &lt;&lt; <span class="stringliteral">"                              y,"</span> &lt;&lt; endl;
<a name="l00511"></a>00511   oIndDriver &lt;&lt; <span class="stringliteral">"                              indOpt,"</span> &lt;&lt; endl;
<a name="l00512"></a>00512   oIndDriver &lt;&lt; <span class="stringliteral">"                              bLow,"</span> &lt;&lt; endl;
<a name="l00513"></a>00513   oIndDriver &lt;&lt; <span class="stringliteral">"                              bUp,"</span> &lt;&lt; endl;
<a name="l00514"></a>00514   oIndDriver &lt;&lt; <span class="stringliteral">"                              bIn,"</span> &lt;&lt; endl;
<a name="l00515"></a>00515   oIndDriver &lt;&lt; <span class="stringliteral">"                              bStep,"</span> &lt;&lt; endl;
<a name="l00516"></a>00516   oIndDriver &lt;&lt; <span class="stringliteral">"                             &amp;bOut,"</span> &lt;&lt; endl;
<a name="l00517"></a>00517   oIndDriver &lt;&lt; <span class="stringliteral">"                             &amp;bObjOut,"</span> &lt;&lt; endl;
<a name="l00518"></a>00518   oIndDriver &lt;&lt; <span class="stringliteral">"                             &amp;bObj_bOut,"</span> &lt;&lt; endl;
<a name="l00519"></a>00519   oIndDriver &lt;&lt; <span class="stringliteral">"                              NULL,"</span> &lt;&lt; endl;
<a name="l00520"></a>00520   oIndDriver &lt;&lt; <span class="stringliteral">"                              withD );"</span> &lt;&lt; endl;
<a name="l00521"></a>00521   oIndDriver &lt;&lt; <span class="stringliteral">"               isOptSuccess = true;"</span> &lt;&lt; endl;
<a name="l00522"></a>00522   oIndDriver &lt;&lt; <span class="stringliteral">"            }"</span> &lt;&lt; endl;
<a name="l00523"></a>00523   oIndDriver &lt;&lt; <span class="stringliteral">"            catch( const SpkException&amp; e )"</span> &lt;&lt; endl;
<a name="l00524"></a>00524   oIndDriver &lt;&lt; <span class="stringliteral">"            {"</span> &lt;&lt; endl;
<a name="l00525"></a>00525   oIndDriver &lt;&lt; <span class="stringliteral">"               if( e.find( SpkError::SPK_TOO_MANY_ITER ) &gt;= 0 )"</span> &lt;&lt; endl;
<a name="l00526"></a>00526   oIndDriver &lt;&lt; <span class="stringliteral">"                  ret = OPT_MAX_ITER_ERROR;"</span> &lt;&lt; endl;
<a name="l00527"></a>00527   oIndDriver &lt;&lt; <span class="stringliteral">"               else"</span> &lt;&lt; endl;
<a name="l00528"></a>00528   oIndDriver &lt;&lt; <span class="stringliteral">"                  ret = OPTIMIZATION_ERROR;"</span> &lt;&lt; endl;
<a name="l00529"></a>00529   oIndDriver &lt;&lt; <span class="stringliteral">"               errors.cat( e );"</span> &lt;&lt; endl;
<a name="l00530"></a>00530   oIndDriver &lt;&lt; <span class="stringliteral">"            }"</span> &lt;&lt; endl;
<a name="l00531"></a>00531   oIndDriver &lt;&lt; <span class="stringliteral">"            catch( const std::exception&amp; stde )"</span> &lt;&lt; endl;
<a name="l00532"></a>00532   oIndDriver &lt;&lt; <span class="stringliteral">"            {"</span> &lt;&lt; endl;
<a name="l00533"></a>00533   oIndDriver &lt;&lt; <span class="stringliteral">"               char message[] = \"A standard exception occurred in parameter estimation.\";"</span> &lt;&lt; endl;
<a name="l00534"></a>00534   oIndDriver &lt;&lt; <span class="stringliteral">"               SpkError e( stde, message, __LINE__, __FILE__ );"</span> &lt;&lt; endl;
<a name="l00535"></a>00535   oIndDriver &lt;&lt; <span class="stringliteral">"               errors.push( e );"</span> &lt;&lt; endl;
<a name="l00536"></a>00536   oIndDriver &lt;&lt; <span class="stringliteral">"               isOptSuccess = false;"</span> &lt;&lt; endl;
<a name="l00537"></a>00537   oIndDriver &lt;&lt; <span class="stringliteral">"               ret = OPTIMIZATION_ERROR;"</span> &lt;&lt; endl;
<a name="l00538"></a>00538   oIndDriver &lt;&lt; <span class="stringliteral">"            }"</span> &lt;&lt; endl;
<a name="l00539"></a>00539   oIndDriver &lt;&lt; <span class="stringliteral">"            catch( ... )"</span> &lt;&lt; endl;
<a name="l00540"></a>00540   oIndDriver &lt;&lt; <span class="stringliteral">"            {"</span> &lt;&lt; endl;
<a name="l00541"></a>00541   oIndDriver &lt;&lt; <span class="stringliteral">"               char message[] = \"An unknown exception occurred in parameter estimation.\";"</span> &lt;&lt; endl;
<a name="l00542"></a>00542   oIndDriver &lt;&lt; <span class="stringliteral">"               SpkError e( SpkError::SPK_UNKNOWN_ERR, message, __LINE__, __FILE__ );"</span> &lt;&lt; endl;
<a name="l00543"></a>00543   oIndDriver &lt;&lt; <span class="stringliteral">"               errors.push( e );"</span> &lt;&lt; endl;
<a name="l00544"></a>00544   oIndDriver &lt;&lt; <span class="stringliteral">"               isOptSuccess = false;"</span> &lt;&lt; endl;
<a name="l00545"></a>00545   oIndDriver &lt;&lt; <span class="stringliteral">"               ret = OPTIMIZATION_ERROR;"</span> &lt;&lt; endl;
<a name="l00546"></a>00546   oIndDriver &lt;&lt; <span class="stringliteral">"            }"</span> &lt;&lt; endl;
<a name="l00547"></a>00547   oIndDriver &lt;&lt; endl;
<a name="l00548"></a>00548   oIndDriver &lt;&lt; <span class="stringliteral">"            // Get the latest value of theta and Omega."</span> &lt;&lt; endl;
<a name="l00549"></a>00549   oIndDriver &lt;&lt; <span class="stringliteral">"            // These values may be garbage if optimization had failed."</span> &lt;&lt; endl;
<a name="l00550"></a>00550   oIndDriver &lt;&lt; <span class="stringliteral">"            model.getTheta( thetaOut );"</span> &lt;&lt; endl;
<a name="l00551"></a>00551   oIndDriver &lt;&lt; <span class="stringliteral">"            model.getOmega( omegaOut );"</span> &lt;&lt; endl;
<a name="l00552"></a>00552   oIndDriver &lt;&lt; <span class="stringliteral">"            if( !isOptSuccess )"</span> &lt;&lt; endl;
<a name="l00553"></a>00553   oIndDriver &lt;&lt; <span class="stringliteral">"            {"</span> &lt;&lt; endl;
<a name="l00554"></a>00554   oIndDriver &lt;&lt; <span class="stringliteral">"               string optErrHeader;"</span> &lt;&lt; endl;
<a name="l00555"></a>00555   oIndDriver &lt;&lt; <span class="stringliteral">"               string optErrMessage;"</span> &lt;&lt; endl;
<a name="l00556"></a>00556   oIndDriver &lt;&lt; <span class="stringliteral">"               // If individual level estimation failed, then get any details as to why."</span> &lt;&lt; endl;
<a name="l00557"></a>00557   oIndDriver &lt;&lt; <span class="stringliteral">"               if( indOpt.isThereErrorInfo() )"</span> &lt;&lt; endl;
<a name="l00558"></a>00558   oIndDriver &lt;&lt; <span class="stringliteral">"               {"</span> &lt;&lt; endl;
<a name="l00559"></a>00559   oIndDriver &lt;&lt; <span class="stringliteral">"                  oLongError.open( \""</span> &lt;&lt; <a class="code" href="classNonmemTranslator.html#edbc01c0071a2d608828d9cea6de4ab4">fSpkRuntimeLongError_tmp</a> &lt;&lt; <span class="stringliteral">"\" );"</span> &lt;&lt; endl;
<a name="l00560"></a>00560   oIndDriver &lt;&lt; <span class="stringliteral">"                  if( !oLongError.good() )"</span> &lt;&lt; endl;
<a name="l00561"></a>00561   oIndDriver &lt;&lt; <span class="stringliteral">"                  {"</span> &lt;&lt; endl;
<a name="l00562"></a>00562   oIndDriver &lt;&lt; <span class="stringliteral">"                     char m[ SpkError::maxMessageLen() ];"</span> &lt;&lt; endl;
<a name="l00563"></a>00563   oIndDriver &lt;&lt; <span class="stringliteral">"                     snprintf( m,"</span> &lt;&lt; endl;
<a name="l00564"></a>00564   oIndDriver &lt;&lt; <span class="stringliteral">"                               SpkError::maxMessageLen(),"</span> &lt;&lt; endl;
<a name="l00565"></a>00565   oIndDriver &lt;&lt; <span class="stringliteral">"                              \"Failed to create a temporary file, %s, for writing.\", "</span> &lt;&lt; endl;
<a name="l00566"></a>00566   oIndDriver &lt;&lt; <span class="stringliteral">"                              \""</span> &lt;&lt; <a class="code" href="classNonmemTranslator.html#edbc01c0071a2d608828d9cea6de4ab4">fSpkRuntimeLongError_tmp</a> &lt;&lt; <span class="stringliteral">"\" );"</span> &lt;&lt; endl;
<a name="l00567"></a>00567   oIndDriver &lt;&lt; <span class="stringliteral">"                     SpkError e( SpkError::SPK_STD_ERR, m, __LINE__, __FILE__ );"</span> &lt;&lt; endl;
<a name="l00568"></a>00568   oIndDriver &lt;&lt; <span class="stringliteral">"                     errors.push( e );"</span> &lt;&lt; endl;
<a name="l00569"></a>00569   oIndDriver &lt;&lt; <span class="stringliteral">"                     ret = FILE_ACCESS_ERROR;"</span> &lt;&lt; endl;
<a name="l00570"></a>00570   oIndDriver &lt;&lt; <span class="stringliteral">"                     goto REPORT_GEN;"</span> &lt;&lt; endl;
<a name="l00571"></a>00571   oIndDriver &lt;&lt; <span class="stringliteral">"                  }"</span> &lt;&lt; endl;      
<a name="l00572"></a>00572   oIndDriver &lt;&lt; <span class="stringliteral">"                  optErrHeader  = \"~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ \\n\";"</span> &lt;&lt; endl;
<a name="l00573"></a>00573   oIndDriver &lt;&lt; <span class="stringliteral">"                  optErrHeader += \"Individual level optimization failure details. \\n\";"</span> &lt;&lt; endl;
<a name="l00574"></a>00574   oIndDriver &lt;&lt; <span class="stringliteral">"                  optErrHeader += \"~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ \\n\";"</span> &lt;&lt; endl;
<a name="l00575"></a>00575   oIndDriver &lt;&lt; <span class="stringliteral">"                  optErrHeader += \"\\n\";"</span> &lt;&lt; endl;
<a name="l00576"></a>00576   oIndDriver &lt;&lt; <span class="stringliteral">"                  indOpt.getErrorInfo("</span> &lt;&lt; endl;
<a name="l00577"></a>00577   oIndDriver &lt;&lt; <span class="stringliteral">"                     optErrHeader,"</span> &lt;&lt; endl;
<a name="l00578"></a>00578   oIndDriver &lt;&lt; <span class="stringliteral">"                     optErrMessage,"</span> &lt;&lt; endl;
<a name="l00579"></a>00579   oIndDriver &lt;&lt; <span class="stringliteral">"                     __LINE__,"</span> &lt;&lt; endl;
<a name="l00580"></a>00580   oIndDriver &lt;&lt; <span class="stringliteral">"                     __FILE__ );"</span> &lt;&lt; endl;
<a name="l00581"></a>00581   oIndDriver &lt;&lt; <span class="stringliteral">"                  oLongError &lt;&lt; optErrMessage &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00582"></a>00582   oIndDriver &lt;&lt; <span class="stringliteral">"                  oLongError.close();"</span> &lt;&lt; endl;
<a name="l00583"></a>00583   oIndDriver &lt;&lt; <span class="stringliteral">"               }"</span> &lt;&lt; endl;
<a name="l00584"></a>00584   oIndDriver &lt;&lt; <span class="stringliteral">"            }"</span> &lt;&lt; endl;
<a name="l00585"></a>00585   oIndDriver &lt;&lt; endl;
<a name="l00586"></a>00586   oIndDriver &lt;&lt; endl;
<a name="l00587"></a>00587   oIndDriver &lt;&lt; <span class="stringliteral">"            gettimeofday( &amp;optEnd, NULL );"</span> &lt;&lt; endl;
<a name="l00588"></a>00588   oIndDriver &lt;&lt; <span class="stringliteral">"            optTimeSec = difftime( optEnd.tv_sec, optBegin.tv_sec );"</span> &lt;&lt; endl;
<a name="l00589"></a>00589   oIndDriver &lt;&lt; <span class="stringliteral">"         }"</span> &lt;&lt; endl;
<a name="l00590"></a>00590   oIndDriver &lt;&lt; endl;
<a name="l00591"></a>00591   oIndDriver &lt;&lt; <span class="stringliteral">"         if( isOptRequested &amp;&amp; isOptSuccess )"</span> &lt;&lt; endl;
<a name="l00592"></a>00592   oIndDriver &lt;&lt; <span class="stringliteral">"         {"</span> &lt;&lt; endl;
<a name="l00593"></a>00593   oIndDriver &lt;&lt; <span class="stringliteral">"            model.setIndPar( bOut );"</span> &lt;&lt; endl;
<a name="l00594"></a>00594   oIndDriver &lt;&lt; endl;
<a name="l00595"></a>00595   oIndDriver &lt;&lt; <span class="stringliteral">"            assert( haveCompleteData );"</span> &lt;&lt; endl;
<a name="l00596"></a>00596   oIndDriver &lt;&lt; <span class="stringliteral">"            try{"</span> &lt;&lt; endl;
<a name="l00597"></a>00597   oIndDriver &lt;&lt; <span class="stringliteral">"               // Make sure this individual's data mean values have"</span> &lt;&lt; endl;
<a name="l00598"></a>00598   oIndDriver &lt;&lt; <span class="stringliteral">"               // been calculated at the optimal parameter values."</span> &lt;&lt; endl;
<a name="l00599"></a>00599   oIndDriver &lt;&lt; <span class="stringliteral">"               model.dataMean( f );"</span> &lt;&lt; endl;
<a name="l00600"></a>00600   oIndDriver &lt;&lt; endl;
<a name="l00601"></a>00601   oIndDriver &lt;&lt; <span class="stringliteral">"               // Don't calculate the individual's PRED values."</span> &lt;&lt; endl;
<a name="l00602"></a>00602   oIndDriver &lt;&lt; <span class="stringliteral">"               valarray&lt;double&gt;* pVANull = 0;"</span> &lt;&lt; endl;
<a name="l00603"></a>00603   oIndDriver &lt;&lt; <span class="stringliteral">"               indResiduals( modelForDisposal,"</span>     &lt;&lt; endl;
<a name="l00604"></a>00604   oIndDriver &lt;&lt; <span class="stringliteral">"                             y, "</span>                   &lt;&lt; endl;
<a name="l00605"></a>00605   oIndDriver &lt;&lt; <span class="stringliteral">"                             bOut, "</span>                &lt;&lt; endl;
<a name="l00606"></a>00606   oIndDriver &lt;&lt; <span class="stringliteral">"                             pVANull, "</span>             &lt;&lt; endl;
<a name="l00607"></a>00607   oIndDriver &lt;&lt; <span class="stringliteral">"                            &amp;iResTrancatedOut, "</span>    &lt;&lt; endl;
<a name="l00608"></a>00608   oIndDriver &lt;&lt; <span class="stringliteral">"                            &amp;iResWtdTrancatedOut, "</span> &lt;&lt; endl;
<a name="l00609"></a>00609   oIndDriver &lt;&lt; <span class="stringliteral">"                             NULL, "</span>                &lt;&lt; endl;
<a name="l00610"></a>00610   oIndDriver &lt;&lt; <span class="stringliteral">"                             NULL );"</span>               &lt;&lt; endl;
<a name="l00611"></a>00611   oIndDriver &lt;&lt; <span class="stringliteral">"               dataForDisposal.expand( iResTrancatedOut,    iResOut );"</span>    &lt;&lt; endl;
<a name="l00612"></a>00612   oIndDriver &lt;&lt; <span class="stringliteral">"               dataForDisposal.expand( iResWtdTrancatedOut, iResWtdOut );"</span> &lt;&lt; endl;
<a name="l00613"></a>00613   oIndDriver &lt;&lt; <span class="stringliteral">"            }"</span> &lt;&lt; endl;
<a name="l00614"></a>00614   oIndDriver &lt;&lt; <span class="stringliteral">"            catch( const SpkException&amp; e )"</span> &lt;&lt; endl;
<a name="l00615"></a>00615   oIndDriver &lt;&lt; <span class="stringliteral">"            {"</span> &lt;&lt; endl;
<a name="l00616"></a>00616   oIndDriver &lt;&lt; <span class="stringliteral">"               // This should not happen when optimization completed successfully."</span> &lt;&lt; endl;
<a name="l00617"></a>00617   oIndDriver &lt;&lt; <span class="stringliteral">"               // Thus, the error should result in generating a Bugzilla report."</span> &lt;&lt; endl;
<a name="l00618"></a>00618   oIndDriver &lt;&lt; <span class="stringliteral">"               errors.cat( e );"</span> &lt;&lt; endl;
<a name="l00619"></a>00619   oIndDriver &lt;&lt; <span class="stringliteral">"               ret = OPT_OK_RESID_ERROR;"</span> &lt;&lt; endl;
<a name="l00620"></a>00620   oIndDriver &lt;&lt; <span class="stringliteral">"            }"</span> &lt;&lt; endl;
<a name="l00621"></a>00621   oIndDriver &lt;&lt; <span class="stringliteral">"            catch( const std::exception&amp; stde )"</span> &lt;&lt; endl;
<a name="l00622"></a>00622   oIndDriver &lt;&lt; <span class="stringliteral">"            {"</span> &lt;&lt; endl;
<a name="l00623"></a>00623   oIndDriver &lt;&lt; <span class="stringliteral">"               char message[] = \"A standard exception occurred in residuals calculation.\";"</span> &lt;&lt; endl;
<a name="l00624"></a>00624   oIndDriver &lt;&lt; <span class="stringliteral">"               SpkError e( stde, message, __LINE__, __FILE__ );"</span> &lt;&lt; endl;
<a name="l00625"></a>00625   oIndDriver &lt;&lt; <span class="stringliteral">"               errors.push( e );"</span> &lt;&lt; endl;
<a name="l00626"></a>00626   oIndDriver &lt;&lt; <span class="stringliteral">"               ret = OPT_OK_RESID_ERROR;"</span> &lt;&lt; endl;
<a name="l00627"></a>00627   oIndDriver &lt;&lt; <span class="stringliteral">"            }"</span> &lt;&lt; endl;
<a name="l00628"></a>00628   oIndDriver &lt;&lt; <span class="stringliteral">"            catch( ... )"</span> &lt;&lt; endl;
<a name="l00629"></a>00629   oIndDriver &lt;&lt; <span class="stringliteral">"            {"</span> &lt;&lt; endl;
<a name="l00630"></a>00630   oIndDriver &lt;&lt; <span class="stringliteral">"               char message[] = \"An unknown exception occurred in residuals calculation.\";"</span> &lt;&lt; endl;
<a name="l00631"></a>00631   oIndDriver &lt;&lt; <span class="stringliteral">"               SpkError e( SpkError::SPK_UNKNOWN_ERR, message, __LINE__, __FILE__ );"</span> &lt;&lt; endl;
<a name="l00632"></a>00632   oIndDriver &lt;&lt; <span class="stringliteral">"               errors.push( e );"</span> &lt;&lt; endl;
<a name="l00633"></a>00633   oIndDriver &lt;&lt; <span class="stringliteral">"               ret = OPT_OK_RESID_ERROR;"</span> &lt;&lt; endl;
<a name="l00634"></a>00634   oIndDriver &lt;&lt; <span class="stringliteral">"            }"</span> &lt;&lt; endl;
<a name="l00635"></a>00635   oIndDriver &lt;&lt; <span class="stringliteral">"            // Set the IPRED values here so that they have values for"</span> &lt;&lt; endl;
<a name="l00636"></a>00636   oIndDriver &lt;&lt; <span class="stringliteral">"            // all of the data records."</span> &lt;&lt; endl;
<a name="l00637"></a>00637   oIndDriver &lt;&lt; <span class="stringliteral">"            for( int j=0; j&lt;nRecords; j++)"</span> &lt;&lt; endl;
<a name="l00638"></a>00638   oIndDriver &lt;&lt; <span class="stringliteral">"            {"</span> &lt;&lt; endl;
<a name="l00639"></a>00639   oIndDriver &lt;&lt; <span class="stringliteral">"               // This assumes there is only one individual in the DataSet."</span> &lt;&lt; endl;
<a name="l00640"></a>00640   oIndDriver &lt;&lt; <span class="stringliteral">"               scalarToDouble( dataForDisposal.data[0]-&gt;PRED[j], iPredOut[j] );"</span> &lt;&lt; endl;
<a name="l00641"></a>00641   oIndDriver &lt;&lt; <span class="stringliteral">"            }"</span> &lt;&lt; endl;
<a name="l00642"></a>00642   oIndDriver &lt;&lt; <span class="stringliteral">"            set.replaceIPred( iPredOut );"</span>   &lt;&lt; endl;
<a name="l00643"></a>00643   oIndDriver &lt;&lt; <span class="stringliteral">"            set.replaceIRes ( iResOut );"</span>    &lt;&lt; endl;
<a name="l00644"></a>00644   oIndDriver &lt;&lt; <span class="stringliteral">"            set.replaceIWRes( iResWtdOut );"</span> &lt;&lt; endl;
<a name="l00645"></a>00645   oIndDriver &lt;&lt; endl;
<a name="l00646"></a>00646   oIndDriver &lt;&lt; <span class="stringliteral">"            set.replaceRes  ( iResOut );"</span>    &lt;&lt; endl;
<a name="l00647"></a>00647   oIndDriver &lt;&lt; <span class="stringliteral">"            set.replaceWRes ( iResWtdOut );"</span> &lt;&lt; endl;
<a name="l00648"></a>00648   oIndDriver &lt;&lt; <span class="stringliteral">"         }"</span> &lt;&lt; endl;
<a name="l00649"></a>00649  
<a name="l00650"></a>00650   <span class="comment">// Statistics can be only computed when the parameter estimation has been done.</span>
<a name="l00651"></a>00651   oIndDriver &lt;&lt; <span class="stringliteral">"STATISTICS:"</span> &lt;&lt; endl;
<a name="l00652"></a>00652   oIndDriver &lt;&lt; <span class="stringliteral">"         /*******************************************************************/"</span> &lt;&lt; endl;
<a name="l00653"></a>00653   oIndDriver &lt;&lt; <span class="stringliteral">"         /*                                                                 */"</span> &lt;&lt; endl;
<a name="l00654"></a>00654   oIndDriver &lt;&lt; <span class="stringliteral">"         /*   Statistics                                                    */"</span> &lt;&lt; endl;
<a name="l00655"></a>00655   oIndDriver &lt;&lt; <span class="stringliteral">"         /*                                                                 */"</span> &lt;&lt; endl;
<a name="l00656"></a>00656   oIndDriver &lt;&lt; <span class="stringliteral">"         /*******************************************************************/"</span> &lt;&lt; endl;
<a name="l00657"></a>00657  oIndDriver &lt;&lt; <span class="stringliteral">"         if( isStatRequested &amp;&amp; isOptRequested &amp;&amp; isOptSuccess )"</span> &lt;&lt; endl;
<a name="l00658"></a>00658   oIndDriver &lt;&lt; <span class="stringliteral">"         {"</span> &lt;&lt; endl;
<a name="l00659"></a>00659   oIndDriver &lt;&lt; <span class="stringliteral">"            gettimeofday( &amp;statBegin, NULL );"</span>     &lt;&lt; endl;
<a name="l00660"></a>00660   oIndDriver &lt;&lt; <span class="stringliteral">"            try"</span> &lt;&lt; endl;
<a name="l00661"></a>00661   oIndDriver &lt;&lt; <span class="stringliteral">"            {"</span> &lt;&lt; endl;
<a name="l00662"></a>00662   oIndDriver &lt;&lt; <span class="stringliteral">"               // Set this so that no individual level optimization"</span> &lt;&lt; endl;
<a name="l00663"></a>00663   oIndDriver &lt;&lt; <span class="stringliteral">"               // is performed."</span> &lt;&lt; endl;
<a name="l00664"></a>00664   oIndDriver &lt;&lt; <span class="stringliteral">"               indOpt.setNMaxIter( 0 );"</span> &lt;&lt; endl;
<a name="l00665"></a>00665   oIndDriver &lt;&lt; endl;
<a name="l00666"></a>00666   oIndDriver &lt;&lt; <span class="stringliteral">"               // Evaluate the Hessian of the objective function"</span> &lt;&lt; endl;
<a name="l00667"></a>00667   oIndDriver &lt;&lt; <span class="stringliteral">"               // at bOut."</span> &lt;&lt; endl;
<a name="l00668"></a>00668   oIndDriver &lt;&lt; <span class="stringliteral">"               fitIndividual( model,"</span> &lt;&lt; endl;
<a name="l00669"></a>00669   oIndDriver &lt;&lt; <span class="stringliteral">"                              y,"</span> &lt;&lt; endl;
<a name="l00670"></a>00670   oIndDriver &lt;&lt; <span class="stringliteral">"                              indOpt,"</span> &lt;&lt; endl;
<a name="l00671"></a>00671   oIndDriver &lt;&lt; <span class="stringliteral">"                              bLow,"</span> &lt;&lt; endl;
<a name="l00672"></a>00672   oIndDriver &lt;&lt; <span class="stringliteral">"                              bUp,"</span> &lt;&lt; endl;
<a name="l00673"></a>00673   oIndDriver &lt;&lt; <span class="stringliteral">"                              bOut,"</span> &lt;&lt; endl;
<a name="l00674"></a>00674   oIndDriver &lt;&lt; <span class="stringliteral">"                              bStep,"</span> &lt;&lt; endl;
<a name="l00675"></a>00675   oIndDriver &lt;&lt; <span class="stringliteral">"                              NULL,"</span> &lt;&lt; endl;
<a name="l00676"></a>00676   oIndDriver &lt;&lt; <span class="stringliteral">"                              NULL,"</span> &lt;&lt; endl;
<a name="l00677"></a>00677   oIndDriver &lt;&lt; <span class="stringliteral">"                              NULL,"</span> &lt;&lt; endl;
<a name="l00678"></a>00678   oIndDriver &lt;&lt; <span class="stringliteral">"                             &amp;bObj_b_bOut,"</span> &lt;&lt; endl;
<a name="l00679"></a>00679   oIndDriver &lt;&lt; <span class="stringliteral">"                              withD );"</span> &lt;&lt; endl;
<a name="l00680"></a>00680   oIndDriver &lt;&lt; endl;
<a name="l00681"></a>00681   oIndDriver &lt;&lt; <span class="stringliteral">"               for( int i=0; i&lt;nB; i++ )"</span> &lt;&lt; endl;
<a name="l00682"></a>00682   oIndDriver &lt;&lt; <span class="stringliteral">"               {"</span> &lt;&lt; endl;
<a name="l00683"></a>00683   oIndDriver &lt;&lt; <span class="stringliteral">"                  bMask[i] =!( bLow[i]==bUp[i] || bOut[i]==bLow[i] || bOut[i]==bUp[i] );"</span> &lt;&lt; endl;
<a name="l00684"></a>00684   oIndDriver &lt;&lt; <span class="stringliteral">"               }"</span> &lt;&lt; endl;
<a name="l00685"></a>00685   oIndDriver &lt;&lt; <span class="stringliteral">"               model.getStandardParMask( bMask, stdParMask );"</span> &lt;&lt; endl;
<a name="l00686"></a>00686   oIndDriver &lt;&lt; <span class="stringliteral">"               model.getStandardPar( stdPar );"</span>          &lt;&lt; endl;
<a name="l00687"></a>00687   oIndDriver &lt;&lt; <span class="stringliteral">"               model.getStandardPar_indPar( stdPar_b );"</span> &lt;&lt; endl;
<a name="l00688"></a>00688   oIndDriver &lt;&lt; <span class="stringliteral">"               indStatistics(    modelForDisposal,"</span>      &lt;&lt; endl;
<a name="l00689"></a>00689   oIndDriver &lt;&lt; <span class="stringliteral">"                                 y,"</span>             &lt;&lt; endl;
<a name="l00690"></a>00690   oIndDriver &lt;&lt; <span class="stringliteral">"                                 bOut, "</span>         &lt;&lt; endl;
<a name="l00691"></a>00691   oIndDriver &lt;&lt; <span class="stringliteral">"                                 bMask,"</span>         &lt;&lt; endl;
<a name="l00692"></a>00692   oIndDriver &lt;&lt; <span class="stringliteral">"                                 bObj_b_bOut,"</span>   &lt;&lt; endl;
<a name="l00693"></a>00693   oIndDriver &lt;&lt; <span class="stringliteral">"                                 covForm,"</span>       &lt;&lt; endl;
<a name="l00694"></a>00694   oIndDriver &lt;&lt; <span class="stringliteral">"                                &amp;bCov,"</span>          &lt;&lt; endl;
<a name="l00695"></a>00695   oIndDriver &lt;&lt; <span class="stringliteral">"                                 NULL,"</span>          &lt;&lt; endl;
<a name="l00696"></a>00696   oIndDriver &lt;&lt; <span class="stringliteral">"                                 NULL,"</span>          &lt;&lt; endl;
<a name="l00697"></a>00697   oIndDriver &lt;&lt; <span class="stringliteral">"                                 NULL,"</span>          &lt;&lt; endl;
<a name="l00698"></a>00698   oIndDriver &lt;&lt; <span class="stringliteral">"                                 NULL,"</span>          &lt;&lt; endl;
<a name="l00699"></a>00699   oIndDriver &lt;&lt; <span class="stringliteral">"                                 withD );"</span>       &lt;&lt; endl;
<a name="l00700"></a>00700   oIndDriver &lt;&lt; <span class="stringliteral">"               derParStatistics( bMask,"</span>         &lt;&lt; endl;
<a name="l00701"></a>00701   oIndDriver &lt;&lt; <span class="stringliteral">"                                 bCov,"</span>          &lt;&lt; endl;
<a name="l00702"></a>00702   oIndDriver &lt;&lt; <span class="stringliteral">"                                 stdParMask,"</span>    &lt;&lt; endl;
<a name="l00703"></a>00703   oIndDriver &lt;&lt; <span class="stringliteral">"                                 stdPar,"</span>        &lt;&lt; endl;
<a name="l00704"></a>00704   oIndDriver &lt;&lt; <span class="stringliteral">"                                 stdPar_b,"</span>      &lt;&lt; endl;
<a name="l00705"></a>00705   oIndDriver &lt;&lt; <span class="stringliteral">"                                 nDegOfFreedom,"</span> &lt;&lt; endl;
<a name="l00706"></a>00706   oIndDriver &lt;&lt; <span class="stringliteral">"                                (isCovOut || isInvCovOut? &amp;stdParCovOut        : NULL),"</span> &lt;&lt; endl;
<a name="l00707"></a>00707   oIndDriver &lt;&lt; <span class="stringliteral">"                                (isCovOut || isInvCovOut? &amp;stdParInvCovOut     : NULL),"</span> &lt;&lt; endl;
<a name="l00708"></a>00708   oIndDriver &lt;&lt; <span class="stringliteral">"                                (isStdErrOut?             &amp;stdParSEOut         : NULL),"</span> &lt;&lt; endl;
<a name="l00709"></a>00709   oIndDriver &lt;&lt; <span class="stringliteral">"                                (isCorrelationOut?        &amp;stdParCorrelationOut: NULL),"</span> &lt;&lt; endl;
<a name="l00710"></a>00710   oIndDriver &lt;&lt; <span class="stringliteral">"                                (isCoefficientOut?        &amp;stdParCoefficientOut: NULL),"</span> &lt;&lt; endl;
<a name="l00711"></a>00711   oIndDriver &lt;&lt; <span class="stringliteral">"                                (isConfidenceOut?         &amp;stdParConfidenceOut : NULL) "</span> &lt;&lt; endl;
<a name="l00712"></a>00712   oIndDriver &lt;&lt; <span class="stringliteral">"                               );"</span> &lt;&lt; endl;
<a name="l00713"></a>00713   oIndDriver &lt;&lt; <span class="stringliteral">"               isStatSuccess &amp;= true;"</span> &lt;&lt; endl;
<a name="l00714"></a>00714   oIndDriver &lt;&lt; <span class="stringliteral">"            }"</span> &lt;&lt; endl;
<a name="l00715"></a>00715   oIndDriver &lt;&lt; <span class="stringliteral">"            catch( const SpkException&amp; e )"</span> &lt;&lt; endl;
<a name="l00716"></a>00716   oIndDriver &lt;&lt; <span class="stringliteral">"            {"</span> &lt;&lt; endl;
<a name="l00717"></a>00717   oIndDriver &lt;&lt; <span class="stringliteral">"               errors.cat( e );"</span> &lt;&lt; endl;
<a name="l00718"></a>00718   oIndDriver &lt;&lt; <span class="stringliteral">"               isStatSuccess &amp;= false;"</span> &lt;&lt; endl;
<a name="l00719"></a>00719   oIndDriver &lt;&lt; <span class="stringliteral">"               ret = OPT_OK_STAT_ERROR;"</span> &lt;&lt; endl;
<a name="l00720"></a>00720   oIndDriver &lt;&lt; <span class="stringliteral">"            }"</span> &lt;&lt; endl;
<a name="l00721"></a>00721   oIndDriver &lt;&lt; <span class="stringliteral">"            catch( const std::exception&amp; stde )"</span> &lt;&lt; endl;
<a name="l00722"></a>00722   oIndDriver &lt;&lt; <span class="stringliteral">"            {"</span> &lt;&lt; endl;
<a name="l00723"></a>00723   oIndDriver &lt;&lt; <span class="stringliteral">"               char message[] = \"A standard exception occurred in statistics calculation.\";"</span> &lt;&lt; endl;
<a name="l00724"></a>00724   oIndDriver &lt;&lt; <span class="stringliteral">"               SpkError e( stde, message, __LINE__, __FILE__ );"</span> &lt;&lt; endl;
<a name="l00725"></a>00725   oIndDriver &lt;&lt; <span class="stringliteral">"               errors.push( e );"</span> &lt;&lt; endl;
<a name="l00726"></a>00726   oIndDriver &lt;&lt; <span class="stringliteral">"               isStatSuccess &amp;= false;"</span> &lt;&lt; endl;
<a name="l00727"></a>00727   oIndDriver &lt;&lt; <span class="stringliteral">"               ret = OPT_OK_STAT_ERROR;"</span> &lt;&lt; endl;
<a name="l00728"></a>00728   oIndDriver &lt;&lt; <span class="stringliteral">"            }"</span> &lt;&lt; endl;
<a name="l00729"></a>00729   oIndDriver &lt;&lt; <span class="stringliteral">"            catch( ... )"</span> &lt;&lt; endl;
<a name="l00730"></a>00730   oIndDriver &lt;&lt; <span class="stringliteral">"            {"</span> &lt;&lt; endl;
<a name="l00731"></a>00731   oIndDriver &lt;&lt; <span class="stringliteral">"               char message[] = \"An unknown exception occurred in statistics calculation.\";"</span> &lt;&lt; endl;
<a name="l00732"></a>00732   oIndDriver &lt;&lt; <span class="stringliteral">"               SpkError e( SpkError::SPK_UNKNOWN_ERR, message, __LINE__, __FILE__ );"</span> &lt;&lt; endl;
<a name="l00733"></a>00733   oIndDriver &lt;&lt; <span class="stringliteral">"               errors.push( e );"</span> &lt;&lt; endl;
<a name="l00734"></a>00734   oIndDriver &lt;&lt; <span class="stringliteral">"               isStatSuccess &amp;= false;"</span> &lt;&lt; endl;
<a name="l00735"></a>00735   oIndDriver &lt;&lt; <span class="stringliteral">"               ret = OPT_OK_STAT_ERROR;"</span> &lt;&lt; endl;
<a name="l00736"></a>00736   oIndDriver &lt;&lt; <span class="stringliteral">"            }"</span> &lt;&lt; endl;
<a name="l00737"></a>00737   oIndDriver &lt;&lt; endl;
<a name="l00738"></a>00738 
<a name="l00739"></a>00739   oIndDriver &lt;&lt; <span class="stringliteral">"            gettimeofday( &amp;statEnd, NULL );"</span> &lt;&lt; endl;
<a name="l00740"></a>00740   oIndDriver &lt;&lt; <span class="stringliteral">"            statTimeSec = difftime( statEnd.tv_sec, statBegin.tv_sec );"</span> &lt;&lt; endl;
<a name="l00741"></a>00741   oIndDriver &lt;&lt; <span class="stringliteral">"         }"</span> &lt;&lt; endl;
<a name="l00742"></a>00742   oIndDriver &lt;&lt; endl;
<a name="l00743"></a>00743 
<a name="l00744"></a>00744   oIndDriver &lt;&lt; <span class="stringliteral">"REPORT_GEN:"</span> &lt;&lt; endl;
<a name="l00745"></a>00745   oIndDriver &lt;&lt; <span class="stringliteral">"         /*******************************************************************/"</span> &lt;&lt; endl;
<a name="l00746"></a>00746   oIndDriver &lt;&lt; <span class="stringliteral">"         /*                                                                 */"</span> &lt;&lt; endl;
<a name="l00747"></a>00747   oIndDriver &lt;&lt; <span class="stringliteral">"         /*   ReportML Document                                             */"</span> &lt;&lt; endl;
<a name="l00748"></a>00748   oIndDriver &lt;&lt; <span class="stringliteral">"         /*                                                                 */"</span> &lt;&lt; endl;
<a name="l00749"></a>00749   oIndDriver &lt;&lt; <span class="stringliteral">"         /*******************************************************************/"</span> &lt;&lt; endl;
<a name="l00750"></a>00750   oIndDriver &lt;&lt; <span class="stringliteral">"         oResults.open( \""</span> &lt;&lt; <a class="code" href="classNonmemTranslator.html#1ff31f3c06d507031686062dc31184ba">fResult_xml</a> &lt;&lt; <span class="stringliteral">"\", ios_base::app );"</span> &lt;&lt; endl;
<a name="l00751"></a>00751   oIndDriver &lt;&lt; <span class="stringliteral">"         if( !oResults.good() )"</span> &lt;&lt; endl;
<a name="l00752"></a>00752   oIndDriver &lt;&lt; <span class="stringliteral">"         {"</span> &lt;&lt; endl;
<a name="l00753"></a>00753   oIndDriver &lt;&lt; <span class="stringliteral">"            fprintf( stderr, \"Failed to open a file, %s, for writing output.\","</span> &lt;&lt; endl;
<a name="l00754"></a>00754   oIndDriver &lt;&lt; <span class="stringliteral">"\""</span> &lt;&lt; <a class="code" href="classNonmemTranslator.html#1ff31f3c06d507031686062dc31184ba">fResult_xml</a> &lt;&lt; <span class="stringliteral">"\" );"</span> &lt;&lt; endl;
<a name="l00755"></a>00755   oIndDriver &lt;&lt; <span class="stringliteral">"            ret = FILE_ACCESS_ERROR;"</span> &lt;&lt; endl;
<a name="l00756"></a>00756   oIndDriver &lt;&lt; <span class="stringliteral">"            oResults &lt;&lt; \"&lt;/spkreport&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00757"></a>00757   oIndDriver &lt;&lt; <span class="stringliteral">"            oResults.close();"</span> &lt;&lt; endl;
<a name="l00758"></a>00758   oIndDriver &lt;&lt; <span class="stringliteral">"            goto END;"</span> &lt;&lt; endl;
<a name="l00759"></a>00759   oIndDriver &lt;&lt; <span class="stringliteral">"         }"</span> &lt;&lt; endl;
<a name="l00760"></a>00760 
<a name="l00761"></a>00761   oIndDriver &lt;&lt; <span class="stringliteral">"         oResults &lt;&lt; \"&lt;?xml version=\\\"1.0\\\"?&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00762"></a>00762   oIndDriver &lt;&lt; <span class="stringliteral">"         oResults &lt;&lt; \"&lt;spkreport&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00763"></a>00763 
<a name="l00764"></a>00764   <span class="comment">// Print out &lt;error_list&gt; even when it is empty.</span>
<a name="l00765"></a>00765   oIndDriver &lt;&lt; <span class="stringliteral">"         oResults &lt;&lt; \"&lt;error_list length=\\\"\" &lt;&lt; errors.size() &lt;&lt; \"\\\"&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00766"></a>00766   oIndDriver &lt;&lt; <span class="stringliteral">"         if( !(haveCompleteData &amp;&amp; isOptSuccess &amp;&amp; isStatSuccess) )"</span> &lt;&lt; endl;
<a name="l00767"></a>00767   oIndDriver &lt;&lt; <span class="stringliteral">"         {"</span> &lt;&lt; endl;
<a name="l00768"></a>00768   oIndDriver &lt;&lt; <span class="stringliteral">"            // Print out ordinary-length error messages"</span> &lt;&lt; endl;
<a name="l00769"></a>00769   oIndDriver &lt;&lt; <span class="stringliteral">"            oResults &lt;&lt; errors &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00770"></a>00770   oIndDriver &lt;&lt; endl;
<a name="l00771"></a>00771   oIndDriver &lt;&lt; <span class="stringliteral">"            // Print out a long error message if exists."</span> &lt;&lt; endl;
<a name="l00772"></a>00772   oIndDriver &lt;&lt; <span class="stringliteral">"            char ch;"</span> &lt;&lt; endl;
<a name="l00773"></a>00773   oIndDriver &lt;&lt; <span class="stringliteral">"            ifstream iLongError( \""</span> &lt;&lt; <a class="code" href="classNonmemTranslator.html#edbc01c0071a2d608828d9cea6de4ab4">fSpkRuntimeLongError_tmp</a> &lt;&lt; <span class="stringliteral">"\" );"</span> &lt;&lt; endl;
<a name="l00774"></a>00774   oIndDriver &lt;&lt; <span class="stringliteral">"            while( iLongError.get(ch) )"</span> &lt;&lt; endl;
<a name="l00775"></a>00775   oIndDriver &lt;&lt; <span class="stringliteral">"            {"</span> &lt;&lt; endl;
<a name="l00776"></a>00776   oIndDriver &lt;&lt; <span class="stringliteral">"               oResults &lt;&lt; ch;"</span> &lt;&lt; endl;   <span class="comment">// Write a long error to the SpkReportML document.</span>
<a name="l00777"></a>00777   oIndDriver &lt;&lt; <span class="stringliteral">"            }"</span> &lt;&lt; endl;
<a name="l00778"></a>00778   oIndDriver &lt;&lt; <span class="stringliteral">"            iLongError.close();"</span> &lt;&lt; endl;
<a name="l00779"></a>00779   oIndDriver &lt;&lt; <span class="stringliteral">"         }"</span> &lt;&lt; endl;
<a name="l00780"></a>00780   oIndDriver &lt;&lt; <span class="stringliteral">"         oResults &lt;&lt; \"&lt;/error_list&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00781"></a>00781   oIndDriver &lt;&lt; <span class="stringliteral">"         remove( \""</span> &lt;&lt; <a class="code" href="classNonmemTranslator.html#edbc01c0071a2d608828d9cea6de4ab4">fSpkRuntimeLongError_tmp</a> &lt;&lt; <span class="stringliteral">"\" );"</span> &lt;&lt; endl;
<a name="l00782"></a>00782   oIndDriver &lt;&lt; endl;
<a name="l00783"></a>00783 
<a name="l00784"></a>00784   <span class="comment">// Print out &lt;warning_list&gt; even when it is empty.</span>
<a name="l00785"></a>00785   oIndDriver &lt;&lt; <span class="stringliteral">"         WarningsManager::getAllWarnings( warningsOut );"</span> &lt;&lt; endl;
<a name="l00786"></a>00786   oIndDriver &lt;&lt; <span class="stringliteral">"         oResults &lt;&lt; warningsOut;"</span> &lt;&lt; endl;
<a name="l00787"></a>00787   oIndDriver &lt;&lt; endl;
<a name="l00788"></a>00788 
<a name="l00789"></a>00789   oIndDriver &lt;&lt; <span class="stringliteral">"         if( isSimRequested )"</span> &lt;&lt; endl;
<a name="l00790"></a>00790   oIndDriver &lt;&lt; <span class="stringliteral">"         {"</span> &lt;&lt; endl;
<a name="l00791"></a>00791   oIndDriver &lt;&lt; <span class="stringliteral">"            oResults &lt;&lt; \"&lt;simulation \";"</span> &lt;&lt; endl;
<a name="l00792"></a>00792   oIndDriver &lt;&lt; <span class="stringliteral">"            if( iSub == 0 )"</span> &lt;&lt; endl;
<a name="l00793"></a>00793   oIndDriver &lt;&lt; <span class="stringliteral">"            {"</span> &lt;&lt; endl;
<a name="l00794"></a>00794   oIndDriver &lt;&lt; <span class="stringliteral">"               oResults &lt;&lt; \"seed=\\\"\" &lt;&lt; seed &lt;&lt; \"\\\" \";"</span> &lt;&lt; endl;
<a name="l00795"></a>00795   oIndDriver &lt;&lt; <span class="stringliteral">"            }"</span> &lt;&lt; endl;
<a name="l00796"></a>00796   oIndDriver &lt;&lt; <span class="stringliteral">"            oResults &lt;&lt; \"subproblem=\\\"\" &lt;&lt; iSub+1 &lt;&lt; \"\\\"/&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00797"></a>00797   oIndDriver &lt;&lt; <span class="stringliteral">"         }"</span> &lt;&lt; endl;
<a name="l00798"></a>00798   oIndDriver &lt;&lt; endl;
<a name="l00799"></a>00799 
<a name="l00800"></a>00800   oIndDriver &lt;&lt; <span class="stringliteral">"         if( isOptRequested )"</span> &lt;&lt; endl;
<a name="l00801"></a>00801   oIndDriver &lt;&lt; <span class="stringliteral">"         {"</span> &lt;&lt; endl;
<a name="l00802"></a>00802   oIndDriver &lt;&lt; <span class="stringliteral">"            oResults &lt;&lt; \"&lt;ind_analysis_result&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00803"></a>00803   oIndDriver &lt;&lt; endl;
<a name="l00804"></a>00804   oIndDriver &lt;&lt; <span class="stringliteral">"            oResults &lt;&lt; \"&lt;ind_opt_result elapsedtime=\\\"\" &lt;&lt; optTimeSec &lt;&lt; \"\\\"&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00805"></a>00805   oIndDriver &lt;&lt; <span class="stringliteral">"            oResults &lt;&lt; \"&lt;ind_obj_out&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00806"></a>00806   oIndDriver &lt;&lt; <span class="stringliteral">"            oResults &lt;&lt; \"&lt;value&gt;\" &lt;&lt; bObjOut &lt;&lt; \"&lt;/value&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00807"></a>00807   oIndDriver &lt;&lt; <span class="stringliteral">"            oResults &lt;&lt; \"&lt;/ind_obj_out&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00808"></a>00808   oIndDriver &lt;&lt; endl;
<a name="l00809"></a>00809   
<a name="l00810"></a>00810   oIndDriver &lt;&lt; <span class="stringliteral">"            //////////////////////////////////////////////////////////////////////"</span> &lt;&lt; endl;
<a name="l00811"></a>00811   oIndDriver &lt;&lt; <span class="stringliteral">"            //    NONMEM Specific"</span> &lt;&lt; endl;
<a name="l00812"></a>00812 
<a name="l00813"></a>00813   <span class="comment">// theta in</span>
<a name="l00814"></a>00814   oIndDriver &lt;&lt; <span class="stringliteral">"            oResults &lt;&lt; \"&lt;theta_in length=\\\"\" &lt;&lt; NonmemPars::nTheta &lt;&lt; \"\\\"&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00815"></a>00815   oIndDriver &lt;&lt; <span class="stringliteral">"            for( int i=0; i&lt;NonmemPars::nTheta; i++ )"</span> &lt;&lt; endl;
<a name="l00816"></a>00816   oIndDriver &lt;&lt; <span class="stringliteral">"            {"</span> &lt;&lt; endl;
<a name="l00817"></a>00817   oIndDriver &lt;&lt; <span class="stringliteral">"               oResults &lt;&lt; \"&lt;value&gt;\" &lt;&lt; thetaIn[i] &lt;&lt; \"&lt;/value&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00818"></a>00818   oIndDriver &lt;&lt; <span class="stringliteral">"            }"</span> &lt;&lt; endl;
<a name="l00819"></a>00819   oIndDriver &lt;&lt; <span class="stringliteral">"            oResults &lt;&lt; \"&lt;/theta_in&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00820"></a>00820   <span class="comment">// theta out</span>
<a name="l00821"></a>00821   oIndDriver &lt;&lt; <span class="stringliteral">"            oResults &lt;&lt; \"&lt;theta_out length=\\\"\" &lt;&lt; NonmemPars::nTheta &lt;&lt; \"\\\"&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00822"></a>00822   oIndDriver &lt;&lt; <span class="stringliteral">"            for( int i=0; i&lt;NonmemPars::nTheta; i++ )"</span> &lt;&lt; endl;
<a name="l00823"></a>00823   oIndDriver &lt;&lt; <span class="stringliteral">"            {"</span> &lt;&lt; endl;
<a name="l00824"></a>00824   oIndDriver &lt;&lt; <span class="stringliteral">"               oResults &lt;&lt; \"&lt;value&gt;\" &lt;&lt; thetaOut[i] &lt;&lt; \"&lt;/value&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00825"></a>00825   oIndDriver &lt;&lt; <span class="stringliteral">"            }"</span> &lt;&lt; endl;
<a name="l00826"></a>00826   oIndDriver &lt;&lt; <span class="stringliteral">"            oResults &lt;&lt; \"&lt;/theta_out&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00827"></a>00827   <span class="comment">// omega in</span>
<a name="l00828"></a>00828   oIndDriver &lt;&lt; <span class="stringliteral">"            for(int ii=0, idx=0; ii&lt;NonmemPars::nOmegaBlk; ii++)"</span> &lt;&lt; endl;
<a name="l00829"></a>00829   oIndDriver &lt;&lt; <span class="stringliteral">"            {"</span> &lt;&lt; endl;
<a name="l00830"></a>00830   oIndDriver &lt;&lt; <span class="stringliteral">"               oResults &lt;&lt; \"&lt;omega_in dimension=\" &lt;&lt; \"\\\"\" &lt;&lt; NonmemPars::omegaBlockDims[ii] &lt;&lt; \"\\\"\";"</span> &lt;&lt; endl;
<a name="l00831"></a>00831   oIndDriver &lt;&lt; <span class="stringliteral">"               oResults &lt;&lt; \" struct=\" &lt;&lt; \"\\\"\";"</span> &lt;&lt; endl;
<a name="l00832"></a>00832   oIndDriver &lt;&lt; <span class="stringliteral">"               if( NonmemPars::omegaBlockStruct[ii]==DIAGONAL )"</span> &lt;&lt; endl;
<a name="l00833"></a>00833   oIndDriver &lt;&lt; <span class="stringliteral">"                  oResults &lt;&lt; \"diagonal\";"</span> &lt;&lt; endl;
<a name="l00834"></a>00834   oIndDriver &lt;&lt; <span class="stringliteral">"               else"</span> &lt;&lt; endl;
<a name="l00835"></a>00835   oIndDriver &lt;&lt; <span class="stringliteral">"                  oResults &lt;&lt; \"block\";"</span> &lt;&lt; endl;
<a name="l00836"></a>00836   oIndDriver &lt;&lt; <span class="stringliteral">"               oResults &lt;&lt; \"\\\"\" &lt;&lt; \"&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00837"></a>00837   oIndDriver &lt;&lt; <span class="stringliteral">"               if( NonmemPars::omegaBlockStruct[ii]==DIAGONAL )"</span> &lt;&lt; endl;
<a name="l00838"></a>00838   oIndDriver &lt;&lt; <span class="stringliteral">"               {"</span> &lt;&lt; endl;
<a name="l00839"></a>00839   oIndDriver &lt;&lt; <span class="stringliteral">"                  for( int i=0; i&lt;NonmemPars::omegaBlockDims[ii]; i++, idx++ )"</span> &lt;&lt; endl;
<a name="l00840"></a>00840   oIndDriver &lt;&lt; <span class="stringliteral">"                  {"</span> &lt;&lt; endl;
<a name="l00841"></a>00841   oIndDriver &lt;&lt; <span class="stringliteral">"                     oResults &lt;&lt; \"&lt;value&gt;\" &lt;&lt; omegaIn[idx] &lt;&lt; \"&lt;/value&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00842"></a>00842   oIndDriver &lt;&lt; <span class="stringliteral">"                  }"</span> &lt;&lt; endl;
<a name="l00843"></a>00843   oIndDriver &lt;&lt; <span class="stringliteral">"               }"</span> &lt;&lt; endl;
<a name="l00844"></a>00844   oIndDriver &lt;&lt; <span class="stringliteral">"               else // full"</span> &lt;&lt; endl;
<a name="l00845"></a>00845   oIndDriver &lt;&lt; <span class="stringliteral">"               {"</span> &lt;&lt; endl;
<a name="l00846"></a>00846   oIndDriver &lt;&lt; <span class="stringliteral">"                  int n = NonmemPars::omegaBlockDims[ii];"</span> &lt;&lt; endl;
<a name="l00847"></a>00847   oIndDriver &lt;&lt; <span class="stringliteral">"                  int m = (n*(n+1))/2;"</span> &lt;&lt; endl;
<a name="l00848"></a>00848   oIndDriver &lt;&lt; <span class="stringliteral">"                  valarray&lt;double&gt; full( n * n );"</span> &lt;&lt; endl;
<a name="l00849"></a>00849   oIndDriver &lt;&lt; <span class="stringliteral">"                  valarray&lt;double&gt; row_minimal( m );"</span> &lt;&lt; endl;
<a name="l00850"></a>00850   oIndDriver &lt;&lt; endl;
<a name="l00851"></a>00851   oIndDriver &lt;&lt; <span class="stringliteral">"                  // First make a full matrix out of the minimal representation"</span> &lt;&lt; endl;
<a name="l00852"></a>00852   oIndDriver &lt;&lt; <span class="stringliteral">"                  for( int j=0; j&lt;n; j++ )"</span> &lt;&lt; endl;
<a name="l00853"></a>00853   oIndDriver &lt;&lt; <span class="stringliteral">"                  {"</span> &lt;&lt; endl;
<a name="l00854"></a>00854   oIndDriver &lt;&lt; <span class="stringliteral">"                     for( int i=0; i&lt;n-j; i++, idx++ ) // lower only"</span> &lt;&lt; endl;
<a name="l00855"></a>00855   oIndDriver &lt;&lt; <span class="stringliteral">"                     {"</span> &lt;&lt; endl;
<a name="l00856"></a>00856   oIndDriver &lt;&lt; <span class="stringliteral">"                        full[ (j*n)+(j+i) ] = omegaIn[idx];"</span> &lt;&lt; endl;
<a name="l00857"></a>00857   oIndDriver &lt;&lt; <span class="stringliteral">"                     }"</span> &lt;&lt; endl;
<a name="l00858"></a>00858   oIndDriver &lt;&lt; <span class="stringliteral">"                  }"</span> &lt;&lt; endl;
<a name="l00859"></a>00859   oIndDriver &lt;&lt; endl;
<a name="l00860"></a>00860   oIndDriver &lt;&lt; <span class="stringliteral">"                  // Copy the lower triangle to the upper and complete fullification"</span> &lt;&lt; endl;
<a name="l00861"></a>00861   oIndDriver &lt;&lt; <span class="stringliteral">"                  symmetrize( full, n, full );"</span> &lt;&lt; endl;
<a name="l00862"></a>00862   oIndDriver &lt;&lt; endl;
<a name="l00863"></a>00863   oIndDriver &lt;&lt; <span class="stringliteral">"                  for( int i=0, k=0; i&lt;n; i++ )"</span> &lt;&lt; endl;
<a name="l00864"></a>00864   oIndDriver &lt;&lt; <span class="stringliteral">"                  {"</span> &lt;&lt; endl;
<a name="l00865"></a>00865   oIndDriver &lt;&lt; <span class="stringliteral">"                     for( int j=0; j&lt;i+1; j++, k++ )"</span> &lt;&lt; endl;
<a name="l00866"></a>00866   oIndDriver &lt;&lt; <span class="stringliteral">"                     {"</span> &lt;&lt; endl;
<a name="l00867"></a>00867   oIndDriver &lt;&lt; <span class="stringliteral">"                        row_minimal[k] = full[i*n+j];"</span> &lt;&lt; endl;
<a name="l00868"></a>00868   oIndDriver &lt;&lt; <span class="stringliteral">"                     }"</span> &lt;&lt; endl;
<a name="l00869"></a>00869   oIndDriver &lt;&lt; <span class="stringliteral">"                  }"</span> &lt;&lt; endl;
<a name="l00870"></a>00870   oIndDriver &lt;&lt; endl;
<a name="l00871"></a>00871   oIndDriver &lt;&lt; <span class="stringliteral">"                  for( int i=0; i&lt;m; i++ )"</span> &lt;&lt; endl;
<a name="l00872"></a>00872   oIndDriver &lt;&lt; <span class="stringliteral">"                  {"</span> &lt;&lt; endl;
<a name="l00873"></a>00873   oIndDriver &lt;&lt; <span class="stringliteral">"                     oResults &lt;&lt; \"&lt;value&gt;\" &lt;&lt; row_minimal[ i ];"</span> &lt;&lt; endl;
<a name="l00874"></a>00874   oIndDriver &lt;&lt; <span class="stringliteral">"                     oResults &lt;&lt; \"&lt;/value&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00875"></a>00875   oIndDriver &lt;&lt; <span class="stringliteral">"                  }"</span> &lt;&lt; endl;
<a name="l00876"></a>00876   oIndDriver &lt;&lt; <span class="stringliteral">"               }"</span> &lt;&lt; endl;
<a name="l00877"></a>00877 
<a name="l00878"></a>00878   oIndDriver &lt;&lt; <span class="stringliteral">"               oResults &lt;&lt; \"&lt;/omega_in&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00879"></a>00879   oIndDriver &lt;&lt; <span class="stringliteral">"            }"</span> &lt;&lt; endl;
<a name="l00880"></a>00880 
<a name="l00881"></a>00881   <span class="comment">// omega out</span>
<a name="l00882"></a>00882   oIndDriver &lt;&lt; <span class="stringliteral">"            for(int ii=0, idx=0; ii&lt;NonmemPars::nOmegaBlk; ii++)"</span> &lt;&lt; endl;
<a name="l00883"></a>00883   oIndDriver &lt;&lt; <span class="stringliteral">"            {"</span> &lt;&lt; endl;
<a name="l00884"></a>00884   oIndDriver &lt;&lt; <span class="stringliteral">"               oResults &lt;&lt; \"&lt;omega_out dimension=\" &lt;&lt; \"\\\"\" &lt;&lt; NonmemPars::omegaBlockDims[ii] &lt;&lt; \"\\\"\";"</span> &lt;&lt; endl;
<a name="l00885"></a>00885   oIndDriver &lt;&lt; <span class="stringliteral">"               oResults &lt;&lt; \" struct=\" &lt;&lt; \"\\\"\";"</span> &lt;&lt; endl;
<a name="l00886"></a>00886   oIndDriver &lt;&lt; <span class="stringliteral">"               if( NonmemPars::omegaBlockStruct[ii]==DIAGONAL )"</span> &lt;&lt; endl;
<a name="l00887"></a>00887   oIndDriver &lt;&lt; <span class="stringliteral">"                  oResults &lt;&lt; \"diagonal\";"</span> &lt;&lt; endl;
<a name="l00888"></a>00888   oIndDriver &lt;&lt; <span class="stringliteral">"               else"</span> &lt;&lt; endl;
<a name="l00889"></a>00889   oIndDriver &lt;&lt; <span class="stringliteral">"                  oResults &lt;&lt; \"block\";"</span> &lt;&lt; endl;
<a name="l00890"></a>00890   oIndDriver &lt;&lt; <span class="stringliteral">"               oResults &lt;&lt; \"\\\"\" &lt;&lt; \"&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00891"></a>00891   oIndDriver &lt;&lt; <span class="stringliteral">"               if( NonmemPars::omegaBlockStruct[ii]==DIAGONAL )"</span> &lt;&lt; endl;
<a name="l00892"></a>00892   oIndDriver &lt;&lt; <span class="stringliteral">"               {"</span> &lt;&lt; endl;
<a name="l00893"></a>00893   oIndDriver &lt;&lt; <span class="stringliteral">"                  for( int i=0; i&lt;NonmemPars::omegaBlockDims[ii]; i++, idx++ )"</span> &lt;&lt; endl;
<a name="l00894"></a>00894   oIndDriver &lt;&lt; <span class="stringliteral">"                  {"</span> &lt;&lt; endl;
<a name="l00895"></a>00895   oIndDriver &lt;&lt; <span class="stringliteral">"                     oResults &lt;&lt; \"&lt;value&gt;\" &lt;&lt; omegaOut[idx] &lt;&lt; \"&lt;/value&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00896"></a>00896   oIndDriver &lt;&lt; <span class="stringliteral">"                  }"</span> &lt;&lt; endl;
<a name="l00897"></a>00897   oIndDriver &lt;&lt; <span class="stringliteral">"               }"</span> &lt;&lt; endl;
<a name="l00898"></a>00898   oIndDriver &lt;&lt; <span class="stringliteral">"               else // full"</span> &lt;&lt; endl;
<a name="l00899"></a>00899   oIndDriver &lt;&lt; <span class="stringliteral">"               {"</span> &lt;&lt; endl;
<a name="l00900"></a>00900   oIndDriver &lt;&lt; <span class="stringliteral">"                  int n = NonmemPars::omegaBlockDims[ii];"</span> &lt;&lt; endl;
<a name="l00901"></a>00901   oIndDriver &lt;&lt; <span class="stringliteral">"                  int m = (n*(n+1))/2;"</span> &lt;&lt; endl;
<a name="l00902"></a>00902   oIndDriver &lt;&lt; <span class="stringliteral">"                  valarray&lt;double&gt; full( n * n );"</span> &lt;&lt; endl;
<a name="l00903"></a>00903   oIndDriver &lt;&lt; <span class="stringliteral">"                  valarray&lt;double&gt; row_minimal( m );"</span> &lt;&lt; endl;
<a name="l00904"></a>00904   oIndDriver &lt;&lt; endl;
<a name="l00905"></a>00905   oIndDriver &lt;&lt; <span class="stringliteral">"                  for( int j=0; j&lt;n; j++ )"</span> &lt;&lt; endl;
<a name="l00906"></a>00906   oIndDriver &lt;&lt; <span class="stringliteral">"                  {"</span> &lt;&lt; endl;
<a name="l00907"></a>00907   oIndDriver &lt;&lt; <span class="stringliteral">"                     for( int i=0; i&lt;n-j; i++, idx++ )"</span> &lt;&lt; endl;
<a name="l00908"></a>00908   oIndDriver &lt;&lt; <span class="stringliteral">"                     {"</span> &lt;&lt; endl;
<a name="l00909"></a>00909   oIndDriver &lt;&lt; <span class="stringliteral">"                        full[j*n+(j+i)] = omegaOut[idx];  "</span> &lt;&lt; endl;
<a name="l00910"></a>00910   oIndDriver &lt;&lt; <span class="stringliteral">"                     }"</span> &lt;&lt; endl;
<a name="l00911"></a>00911   oIndDriver &lt;&lt; <span class="stringliteral">"                  }"</span> &lt;&lt; endl;
<a name="l00912"></a>00912   oIndDriver &lt;&lt; <span class="stringliteral">"                  symmetrize( full, n, full );"</span> &lt;&lt; endl;
<a name="l00913"></a>00913   oIndDriver &lt;&lt; endl;
<a name="l00914"></a>00914   oIndDriver &lt;&lt; <span class="stringliteral">"                  for( int i=0, k=0; i&lt;n; i++ )"</span> &lt;&lt; endl;
<a name="l00915"></a>00915   oIndDriver &lt;&lt; <span class="stringliteral">"                  {"</span> &lt;&lt; endl;
<a name="l00916"></a>00916   oIndDriver &lt;&lt; <span class="stringliteral">"                     for( int j=0; j&lt;i+1; j++, k++ )"</span> &lt;&lt; endl;
<a name="l00917"></a>00917   oIndDriver &lt;&lt; <span class="stringliteral">"                     {"</span> &lt;&lt; endl;
<a name="l00918"></a>00918   oIndDriver &lt;&lt; <span class="stringliteral">"                        row_minimal[k] = full[i*n+j];"</span> &lt;&lt; endl;
<a name="l00919"></a>00919   oIndDriver &lt;&lt; <span class="stringliteral">"                     }"</span> &lt;&lt; endl;
<a name="l00920"></a>00920   oIndDriver &lt;&lt; <span class="stringliteral">"                  }"</span> &lt;&lt; endl;
<a name="l00921"></a>00921   oIndDriver &lt;&lt; <span class="stringliteral">"                  for( int i=0; i&lt;m; i++ )"</span> &lt;&lt; endl;
<a name="l00922"></a>00922   oIndDriver &lt;&lt; <span class="stringliteral">"                  {"</span> &lt;&lt; endl;
<a name="l00923"></a>00923   oIndDriver &lt;&lt; <span class="stringliteral">"                     oResults &lt;&lt; \"&lt;value&gt;\" &lt;&lt; row_minimal[ i ];"</span> &lt;&lt; endl;
<a name="l00924"></a>00924   oIndDriver &lt;&lt; <span class="stringliteral">"                     oResults &lt;&lt; \"&lt;/value&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00925"></a>00925   oIndDriver &lt;&lt; <span class="stringliteral">"                  }"</span> &lt;&lt; endl;
<a name="l00926"></a>00926 
<a name="l00927"></a>00927   oIndDriver &lt;&lt; <span class="stringliteral">"               }"</span> &lt;&lt; endl;
<a name="l00928"></a>00928 
<a name="l00929"></a>00929   oIndDriver &lt;&lt; <span class="stringliteral">"               oResults &lt;&lt; \"&lt;/omega_out&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00930"></a>00930   oIndDriver &lt;&lt; <span class="stringliteral">"               //"</span> &lt;&lt; endl;
<a name="l00931"></a>00931   oIndDriver &lt;&lt; <span class="stringliteral">"            }"</span> &lt;&lt; endl;
<a name="l00932"></a>00932 
<a name="l00933"></a>00933   oIndDriver &lt;&lt; <span class="stringliteral">"            //"</span> &lt;&lt; endl;
<a name="l00934"></a>00934   oIndDriver &lt;&lt; <span class="stringliteral">"            //////////////////////////////////////////////////////////////////////"</span> &lt;&lt; endl;
<a name="l00935"></a>00935   oIndDriver &lt;&lt; endl;
<a name="l00936"></a>00936   oIndDriver &lt;&lt; <span class="stringliteral">"            oResults &lt;&lt; \"&lt;/ind_opt_result&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00937"></a>00937   oIndDriver &lt;&lt; endl;
<a name="l00938"></a>00938   oIndDriver &lt;&lt; <span class="stringliteral">"            if( isStatRequested )"</span> &lt;&lt; endl;
<a name="l00939"></a>00939   oIndDriver &lt;&lt; <span class="stringliteral">"            {"</span> &lt;&lt; endl;
<a name="l00940"></a>00940   oIndDriver &lt;&lt; <span class="stringliteral">"               oResults &lt;&lt; \"&lt;ind_stat_result elapsedtime=\\\"\" &lt;&lt; statTimeSec &lt;&lt; \"\\\"&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00941"></a>00941   oIndDriver &lt;&lt; <span class="stringliteral">"               if( isCovOut )"</span> &lt;&lt; endl;
<a name="l00942"></a>00942   oIndDriver &lt;&lt; <span class="stringliteral">"               {"</span> &lt;&lt; endl;
<a name="l00943"></a>00943   oIndDriver &lt;&lt; <span class="stringliteral">"                  oResults &lt;&lt; \"&lt;ind_covariance_out struct=\\\"block\\\" dimension=\\\"\" &lt;&lt; nB &lt;&lt; \"\\\"&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00944"></a>00944   oIndDriver &lt;&lt; <span class="stringliteral">"                  for( int i=0; i&lt;nB; i++ )"</span> &lt;&lt; endl;
<a name="l00945"></a>00945   oIndDriver &lt;&lt; <span class="stringliteral">"                  {"</span> &lt;&lt; endl;
<a name="l00946"></a>00946   oIndDriver &lt;&lt; <span class="stringliteral">"                     for( int j=0; j&lt;=i; j++ )"</span> &lt;&lt; endl;
<a name="l00947"></a>00947   oIndDriver &lt;&lt; <span class="stringliteral">"                     {"</span> &lt;&lt; endl;
<a name="l00948"></a>00948   oIndDriver &lt;&lt; <span class="stringliteral">"                        oResults &lt;&lt; \"   &lt;value&gt;\" &lt;&lt; stdParCovOut[i+j*nB] &lt;&lt; \"&lt;/value&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00949"></a>00949   oIndDriver &lt;&lt; <span class="stringliteral">"                     }"</span> &lt;&lt; endl;
<a name="l00950"></a>00950   oIndDriver &lt;&lt; <span class="stringliteral">"                  }"</span> &lt;&lt; endl;
<a name="l00951"></a>00951   oIndDriver &lt;&lt; <span class="stringliteral">"                  oResults &lt;&lt; \"&lt;/ind_covariance_out&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00952"></a>00952   oIndDriver &lt;&lt; <span class="stringliteral">"               }"</span> &lt;&lt; endl;
<a name="l00953"></a>00953 
<a name="l00954"></a>00954   oIndDriver &lt;&lt; <span class="stringliteral">"               if( isInvCovOut )"</span> &lt;&lt; endl;
<a name="l00955"></a>00955   oIndDriver &lt;&lt; <span class="stringliteral">"               {"</span> &lt;&lt; endl;
<a name="l00956"></a>00956   oIndDriver &lt;&lt; <span class="stringliteral">"                  oResults &lt;&lt; \"&lt;ind_inverse_covariance_out struct=\\\"block\\\" dimension=\\\"\" &lt;&lt; nB &lt;&lt; \"\\\"&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00957"></a>00957   oIndDriver &lt;&lt; <span class="stringliteral">"                  for( int i=0; i&lt;nB; i++ )"</span> &lt;&lt; endl;
<a name="l00958"></a>00958   oIndDriver &lt;&lt; <span class="stringliteral">"                  {"</span> &lt;&lt; endl;
<a name="l00959"></a>00959   oIndDriver &lt;&lt; <span class="stringliteral">"                     for( int j=0; j&lt;=i; j++ )"</span> &lt;&lt; endl;
<a name="l00960"></a>00960   oIndDriver &lt;&lt; <span class="stringliteral">"                     {"</span> &lt;&lt; endl;
<a name="l00961"></a>00961   oIndDriver &lt;&lt; <span class="stringliteral">"                        oResults &lt;&lt; \"   &lt;value&gt;\" &lt;&lt; stdParInvCovOut[i+j*nB] &lt;&lt; \"&lt;/value&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00962"></a>00962   oIndDriver &lt;&lt; <span class="stringliteral">"                     }"</span> &lt;&lt; endl;
<a name="l00963"></a>00963   oIndDriver &lt;&lt; <span class="stringliteral">"                  }"</span> &lt;&lt; endl;
<a name="l00964"></a>00964   oIndDriver &lt;&lt; <span class="stringliteral">"                  oResults &lt;&lt; \"&lt;/ind_inverse_covariance_out&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00965"></a>00965   oIndDriver &lt;&lt; <span class="stringliteral">"               }"</span> &lt;&lt; endl;
<a name="l00966"></a>00966 
<a name="l00967"></a>00967   oIndDriver &lt;&lt; <span class="stringliteral">"               if( isStdErrOut )"</span> &lt;&lt; endl;
<a name="l00968"></a>00968   oIndDriver &lt;&lt; <span class="stringliteral">"               {"</span> &lt;&lt; endl;
<a name="l00969"></a>00969   oIndDriver &lt;&lt; <span class="stringliteral">"                  oResults &lt;&lt; \"&lt;ind_stderror_out length=\\\"\" &lt;&lt; nB &lt;&lt; \"\\\"&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00970"></a>00970   oIndDriver &lt;&lt; <span class="stringliteral">"                  for( int i=0; i&lt;nB; i++ )"</span> &lt;&lt; endl;
<a name="l00971"></a>00971   oIndDriver &lt;&lt; <span class="stringliteral">"                  {"</span> &lt;&lt; endl;
<a name="l00972"></a>00972   oIndDriver &lt;&lt; <span class="stringliteral">"                     oResults &lt;&lt; \"   &lt;value&gt;\" &lt;&lt; stdParSEOut[i] &lt;&lt; \"&lt;/value&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00973"></a>00973   oIndDriver &lt;&lt; <span class="stringliteral">"                  }"</span> &lt;&lt; endl;
<a name="l00974"></a>00974   oIndDriver &lt;&lt; <span class="stringliteral">"                  oResults &lt;&lt; \"&lt;/ind_stderror_out&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00975"></a>00975   oIndDriver &lt;&lt; <span class="stringliteral">"               }"</span> &lt;&lt; endl;
<a name="l00976"></a>00976 
<a name="l00977"></a>00977   oIndDriver &lt;&lt; <span class="stringliteral">"               if( isCorrelationOut )"</span> &lt;&lt; endl;
<a name="l00978"></a>00978   oIndDriver &lt;&lt; <span class="stringliteral">"               {"</span> &lt;&lt; endl;
<a name="l00979"></a>00979   oIndDriver &lt;&lt; <span class="stringliteral">"                  oResults &lt;&lt; \"&lt;ind_correlation_out struct=\\\"block\\\" dimension=\\\"\" &lt;&lt; nB &lt;&lt; \"\\\"&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00980"></a>00980   oIndDriver &lt;&lt; <span class="stringliteral">"                  for( int i=0; i&lt;nB; i++ )"</span> &lt;&lt; endl;
<a name="l00981"></a>00981   oIndDriver &lt;&lt; <span class="stringliteral">"                  {"</span> &lt;&lt; endl;
<a name="l00982"></a>00982   oIndDriver &lt;&lt; <span class="stringliteral">"                     for( int j=0; j&lt;=i; j++ )"</span> &lt;&lt; endl;
<a name="l00983"></a>00983   oIndDriver &lt;&lt; <span class="stringliteral">"                     {"</span> &lt;&lt; endl;
<a name="l00984"></a>00984   oIndDriver &lt;&lt; <span class="stringliteral">"                        oResults &lt;&lt; \"   &lt;value&gt;\" &lt;&lt; stdParCorrelationOut[i+j*nB] &lt;&lt; \"&lt;/value&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00985"></a>00985   oIndDriver &lt;&lt; <span class="stringliteral">"                     }"</span> &lt;&lt; endl;
<a name="l00986"></a>00986   oIndDriver &lt;&lt; <span class="stringliteral">"                  }"</span> &lt;&lt; endl;
<a name="l00987"></a>00987   oIndDriver &lt;&lt; <span class="stringliteral">"                  oResults &lt;&lt; \"&lt;/ind_correlation_out&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00988"></a>00988   oIndDriver &lt;&lt; <span class="stringliteral">"               }"</span> &lt;&lt; endl;
<a name="l00989"></a>00989   
<a name="l00990"></a>00990   oIndDriver &lt;&lt; <span class="stringliteral">"               if( isCoefficientOut )"</span> &lt;&lt; endl;
<a name="l00991"></a>00991   oIndDriver &lt;&lt; <span class="stringliteral">"               {"</span> &lt;&lt; endl;
<a name="l00992"></a>00992   oIndDriver &lt;&lt; <span class="stringliteral">"                  oResults &lt;&lt; \"&lt;ind_coefficient_out length=\\\"\" &lt;&lt; nB &lt;&lt; \"\\\"&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00993"></a>00993   oIndDriver &lt;&lt; <span class="stringliteral">"                  for( int i=0; i&lt;nB; i++ )"</span> &lt;&lt; endl;
<a name="l00994"></a>00994   oIndDriver &lt;&lt; <span class="stringliteral">"                  {"</span> &lt;&lt; endl;
<a name="l00995"></a>00995   oIndDriver &lt;&lt; <span class="stringliteral">"                     oResults &lt;&lt; \"   &lt;value&gt;\" &lt;&lt; stdParCoefficientOut[i] &lt;&lt; \"&lt;/value&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00996"></a>00996   oIndDriver &lt;&lt; <span class="stringliteral">"                  }"</span> &lt;&lt; endl;
<a name="l00997"></a>00997   oIndDriver &lt;&lt; <span class="stringliteral">"                  oResults &lt;&lt; \"&lt;/ind_coefficient_out&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l00998"></a>00998   oIndDriver &lt;&lt; <span class="stringliteral">"               }"</span> &lt;&lt; endl;
<a name="l00999"></a>00999 
<a name="l01000"></a>01000   oIndDriver &lt;&lt; <span class="stringliteral">"               if( isConfidenceOut )"</span> &lt;&lt; endl;
<a name="l01001"></a>01001   oIndDriver &lt;&lt; <span class="stringliteral">"               {"</span> &lt;&lt; endl;
<a name="l01002"></a>01002   oIndDriver &lt;&lt; <span class="stringliteral">"                  oResults &lt;&lt; \"&lt;ind_confidence_out length=\\\"\" &lt;&lt; nB*2 &lt;&lt; \"\\\"&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01003"></a>01003   oIndDriver &lt;&lt; <span class="stringliteral">"                  for( int i=0; i&lt;nB*2; i++ )"</span> &lt;&lt; endl;
<a name="l01004"></a>01004   oIndDriver &lt;&lt; <span class="stringliteral">"                  {"</span> &lt;&lt; endl;
<a name="l01005"></a>01005   oIndDriver &lt;&lt; <span class="stringliteral">"                     oResults &lt;&lt; \"   &lt;value&gt;\" &lt;&lt; stdParConfidenceOut[i] &lt;&lt; \"&lt;/value&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01006"></a>01006   oIndDriver &lt;&lt; <span class="stringliteral">"                  }"</span> &lt;&lt; endl;
<a name="l01007"></a>01007   oIndDriver &lt;&lt; <span class="stringliteral">"                  oResults &lt;&lt; \"&lt;/ind_confidence_out&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01008"></a>01008   oIndDriver &lt;&lt; <span class="stringliteral">"               }"</span> &lt;&lt; endl;
<a name="l01009"></a>01009 
<a name="l01010"></a>01010   oIndDriver &lt;&lt; <span class="stringliteral">"               oResults &lt;&lt; \"&lt;/ind_stat_result&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01011"></a>01011   oIndDriver &lt;&lt; endl;
<a name="l01012"></a>01012   oIndDriver &lt;&lt; <span class="stringliteral">"            }"</span> &lt;&lt; endl;
<a name="l01013"></a>01013   oIndDriver &lt;&lt; <span class="stringliteral">"            oResults &lt;&lt; \"&lt;/ind_analysis_result&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01014"></a>01014   oIndDriver &lt;&lt; <span class="stringliteral">"         }"</span> &lt;&lt; endl;
<a name="l01015"></a>01015   oIndDriver &lt;&lt; <span class="stringliteral">"         if( iSub == nRepeats-1 )"</span> &lt;&lt; endl;
<a name="l01016"></a>01016   oIndDriver &lt;&lt; <span class="stringliteral">"            oResults &lt;&lt; set &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01017"></a>01017   oIndDriver &lt;&lt; <span class="stringliteral">"         oResults &lt;&lt; \"&lt;/spkreport&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01018"></a>01018   oIndDriver &lt;&lt; <span class="stringliteral">"         oResults.close();"</span> &lt;&lt; endl;
<a name="l01019"></a>01019   oIndDriver &lt;&lt; <span class="stringliteral">"      }"</span> &lt;&lt; endl;
<a name="l01020"></a>01020   oIndDriver &lt;&lt; <span class="stringliteral">"END:"</span> &lt;&lt; endl;
<a name="l01021"></a>01021   oIndDriver &lt;&lt; <span class="stringliteral">"      // The following statement is to trick g++ compiler, which"</span> &lt;&lt; endl;
<a name="l01022"></a>01022   oIndDriver &lt;&lt; <span class="stringliteral">"      // complains that a label must be followed by a statement."</span> &lt;&lt; endl;
<a name="l01023"></a>01023   oIndDriver &lt;&lt; <span class="stringliteral">"      int dummy = 0;"</span> &lt;&lt; endl;
<a name="l01024"></a>01024   oIndDriver &lt;&lt; <span class="stringliteral">"   }"</span> &lt;&lt; endl;
<a name="l01025"></a>01025   oIndDriver &lt;&lt; <span class="stringliteral">"   catch( const SpkException &amp; e )"</span> &lt;&lt; endl;
<a name="l01026"></a>01026   oIndDriver &lt;&lt; <span class="stringliteral">"   {"</span> &lt;&lt; endl;
<a name="l01027"></a>01027   oIndDriver &lt;&lt; <span class="stringliteral">"      ofstream oResults;"</span> &lt;&lt; endl;
<a name="l01028"></a>01028   oIndDriver &lt;&lt; <span class="stringliteral">"      oResults.open( \""</span> &lt;&lt; <a class="code" href="classNonmemTranslator.html#1ff31f3c06d507031686062dc31184ba">fResult_xml</a> &lt;&lt; <span class="stringliteral">"\", ios_base::app );"</span> &lt;&lt; endl;
<a name="l01029"></a>01029   oIndDriver &lt;&lt; <span class="stringliteral">"      if( !oResults.good() )"</span> &lt;&lt; endl;
<a name="l01030"></a>01030   oIndDriver &lt;&lt; <span class="stringliteral">"      {"</span> &lt;&lt; endl;
<a name="l01031"></a>01031   oIndDriver &lt;&lt; <span class="stringliteral">"         fprintf( stderr, \"Failed to open a file, %s, for writing output.\","</span> &lt;&lt; endl;
<a name="l01032"></a>01032   oIndDriver &lt;&lt; <span class="stringliteral">"\""</span> &lt;&lt; <a class="code" href="classNonmemTranslator.html#1ff31f3c06d507031686062dc31184ba">fResult_xml</a> &lt;&lt; <span class="stringliteral">"\" );"</span> &lt;&lt; endl;
<a name="l01033"></a>01033   oIndDriver &lt;&lt; <span class="stringliteral">"         ret = FILE_ACCESS_ERROR;"</span> &lt;&lt; endl;
<a name="l01034"></a>01034   oIndDriver &lt;&lt; <span class="stringliteral">"         if(isUsingPvm)"</span> &lt;&lt; endl;
<a name="l01035"></a>01035   oIndDriver &lt;&lt; <span class="stringliteral">"            finish(ret);"</span> &lt;&lt; endl;
<a name="l01036"></a>01036   oIndDriver &lt;&lt; <span class="stringliteral">"         else"</span> &lt;&lt; endl;
<a name="l01037"></a>01037   oIndDriver &lt;&lt; <span class="stringliteral">"            cout &lt;&lt; \"exit code = \" &lt;&lt; ret &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01038"></a>01038   oIndDriver &lt;&lt; <span class="stringliteral">"         fclose( stdout );"</span> &lt;&lt; endl;
<a name="l01039"></a>01039   oIndDriver &lt;&lt; <span class="stringliteral">"         fclose( stderr );"</span> &lt;&lt; endl;
<a name="l01040"></a>01040   oIndDriver &lt;&lt; <span class="stringliteral">"         return ret;"</span> &lt;&lt; endl;
<a name="l01041"></a>01041   oIndDriver &lt;&lt; <span class="stringliteral">"      }"</span> &lt;&lt; endl;
<a name="l01042"></a>01042   oIndDriver &lt;&lt; <span class="stringliteral">"      oResults &lt;&lt; \"&lt;?xml version=\\\"1.0\\\"?&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01043"></a>01043   oIndDriver &lt;&lt; <span class="stringliteral">"      oResults &lt;&lt; \"&lt;spkreport&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01044"></a>01044   oIndDriver &lt;&lt; <span class="stringliteral">"      oResults &lt;&lt; \"&lt;error_list length=\\\"\" &lt;&lt; e.size() &lt;&lt; \"\\\"&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01045"></a>01045   oIndDriver &lt;&lt; <span class="stringliteral">"      oResults &lt;&lt; e &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01046"></a>01046   oIndDriver &lt;&lt; <span class="stringliteral">"      oResults &lt;&lt; \"&lt;/spkreport&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01047"></a>01047   oIndDriver &lt;&lt; <span class="stringliteral">"      oResults.close();"</span> &lt;&lt; endl;
<a name="l01048"></a>01048   oIndDriver &lt;&lt; <span class="stringliteral">"      ret = UNKNOWN_ERROR;"</span> &lt;&lt; endl;
<a name="l01049"></a>01049   oIndDriver &lt;&lt; <span class="stringliteral">"   }"</span> &lt;&lt; endl;
<a name="l01050"></a>01050   oIndDriver &lt;&lt; <span class="stringliteral">"   catch( const std::exception&amp; stde )"</span> &lt;&lt; endl;
<a name="l01051"></a>01051   oIndDriver &lt;&lt; <span class="stringliteral">"   {"</span> &lt;&lt; endl;
<a name="l01052"></a>01052   oIndDriver &lt;&lt; <span class="stringliteral">"      ofstream oResults;"</span> &lt;&lt; endl;
<a name="l01053"></a>01053   oIndDriver &lt;&lt; <span class="stringliteral">"      oResults.open( \""</span> &lt;&lt; <a class="code" href="classNonmemTranslator.html#1ff31f3c06d507031686062dc31184ba">fResult_xml</a> &lt;&lt; <span class="stringliteral">"\", ios_base::app );"</span> &lt;&lt; endl;
<a name="l01054"></a>01054   oIndDriver &lt;&lt; <span class="stringliteral">"      if( !oResults.good() )"</span> &lt;&lt; endl;
<a name="l01055"></a>01055   oIndDriver &lt;&lt; <span class="stringliteral">"      {"</span> &lt;&lt; endl;
<a name="l01056"></a>01056   oIndDriver &lt;&lt; <span class="stringliteral">"         fprintf( stderr, \"Failed to open a file, %s, for writing output.\","</span> &lt;&lt; endl;
<a name="l01057"></a>01057   oIndDriver &lt;&lt; <span class="stringliteral">"\""</span> &lt;&lt; <a class="code" href="classNonmemTranslator.html#1ff31f3c06d507031686062dc31184ba">fResult_xml</a> &lt;&lt; <span class="stringliteral">"\" );"</span> &lt;&lt; endl;
<a name="l01058"></a>01058   oIndDriver &lt;&lt; <span class="stringliteral">"         ret = FILE_ACCESS_ERROR;"</span> &lt;&lt; endl;
<a name="l01059"></a>01059   oIndDriver &lt;&lt; <span class="stringliteral">"         if(isUsingPvm)"</span> &lt;&lt; endl;
<a name="l01060"></a>01060   oIndDriver &lt;&lt; <span class="stringliteral">"            finish(ret);"</span> &lt;&lt; endl;
<a name="l01061"></a>01061   oIndDriver &lt;&lt; <span class="stringliteral">"         else"</span> &lt;&lt; endl;
<a name="l01062"></a>01062   oIndDriver &lt;&lt; <span class="stringliteral">"            cout &lt;&lt; \"exit code = \" &lt;&lt; ret &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01063"></a>01063   oIndDriver &lt;&lt; <span class="stringliteral">"         fclose( stdout );"</span> &lt;&lt; endl;
<a name="l01064"></a>01064   oIndDriver &lt;&lt; <span class="stringliteral">"         fclose( stderr );"</span> &lt;&lt; endl;
<a name="l01065"></a>01065   oIndDriver &lt;&lt; <span class="stringliteral">"         return ret;"</span> &lt;&lt; endl;
<a name="l01066"></a>01066   oIndDriver &lt;&lt; <span class="stringliteral">"      }"</span> &lt;&lt; endl;
<a name="l01067"></a>01067   oIndDriver &lt;&lt; <span class="stringliteral">"      oResults &lt;&lt; \"&lt;?xml version=\\\"1.0\\\"?&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01068"></a>01068   oIndDriver &lt;&lt; <span class="stringliteral">"      oResults &lt;&lt; \"&lt;spkreport&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01069"></a>01069   oIndDriver &lt;&lt; <span class="stringliteral">"      oResults &lt;&lt; \"&lt;error_list length=\\\"\" &lt;&lt; 1 &lt;&lt; \"\\\"&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01070"></a>01070   oIndDriver &lt;&lt; <span class="stringliteral">"      SpkError e( stde, \"A standard exception occurred.\", __LINE__, __FILE__ );"</span> &lt;&lt; endl;
<a name="l01071"></a>01071   oIndDriver &lt;&lt; <span class="stringliteral">"      oResults &lt;&lt; e &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01072"></a>01072   oIndDriver &lt;&lt; <span class="stringliteral">"      oResults &lt;&lt; \"&lt;/error_list&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01073"></a>01073   oIndDriver &lt;&lt; <span class="stringliteral">"      oResults &lt;&lt; \"&lt;/spkreport&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01074"></a>01074   oIndDriver &lt;&lt; <span class="stringliteral">"      oResults.close();"</span> &lt;&lt; endl;
<a name="l01075"></a>01075   oIndDriver &lt;&lt; <span class="stringliteral">"      ret = UNKNOWN_ERROR;"</span> &lt;&lt; endl;
<a name="l01076"></a>01076   oIndDriver &lt;&lt; <span class="stringliteral">"   }"</span> &lt;&lt; endl;
<a name="l01077"></a>01077   oIndDriver &lt;&lt; <span class="stringliteral">"   catch( ... )"</span> &lt;&lt; endl;
<a name="l01078"></a>01078   oIndDriver &lt;&lt; <span class="stringliteral">"   {"</span> &lt;&lt; endl;
<a name="l01079"></a>01079   oIndDriver &lt;&lt; <span class="stringliteral">"      ofstream oResults;"</span> &lt;&lt; endl;
<a name="l01080"></a>01080   oIndDriver &lt;&lt; <span class="stringliteral">"      oResults.open( \""</span> &lt;&lt; <a class="code" href="classNonmemTranslator.html#1ff31f3c06d507031686062dc31184ba">fResult_xml</a> &lt;&lt; <span class="stringliteral">"\", ios_base::app );"</span> &lt;&lt; endl;
<a name="l01081"></a>01081   oIndDriver &lt;&lt; <span class="stringliteral">"      if( !oResults.good() )"</span> &lt;&lt; endl;
<a name="l01082"></a>01082   oIndDriver &lt;&lt; <span class="stringliteral">"      {"</span> &lt;&lt; endl;
<a name="l01083"></a>01083   oIndDriver &lt;&lt; <span class="stringliteral">"         fprintf( stderr, \"Failed to open a file, %s, for writing output.\","</span> &lt;&lt; endl;
<a name="l01084"></a>01084   oIndDriver &lt;&lt; <span class="stringliteral">"\""</span> &lt;&lt; <a class="code" href="classNonmemTranslator.html#1ff31f3c06d507031686062dc31184ba">fResult_xml</a> &lt;&lt; <span class="stringliteral">"\" );"</span> &lt;&lt; endl;
<a name="l01085"></a>01085   oIndDriver &lt;&lt; <span class="stringliteral">"         ret = FILE_ACCESS_ERROR;"</span> &lt;&lt; endl;
<a name="l01086"></a>01086   oIndDriver &lt;&lt; <span class="stringliteral">"         if(isUsingPvm)"</span> &lt;&lt; endl;
<a name="l01087"></a>01087   oIndDriver &lt;&lt; <span class="stringliteral">"            finish(ret);"</span> &lt;&lt; endl;
<a name="l01088"></a>01088   oIndDriver &lt;&lt; <span class="stringliteral">"         else"</span> &lt;&lt; endl;
<a name="l01089"></a>01089   oIndDriver &lt;&lt; <span class="stringliteral">"            cout &lt;&lt; \"exit code = \" &lt;&lt; ret &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01090"></a>01090   oIndDriver &lt;&lt; <span class="stringliteral">"         fclose( stdout );"</span> &lt;&lt; endl;
<a name="l01091"></a>01091   oIndDriver &lt;&lt; <span class="stringliteral">"         fclose( stderr );"</span> &lt;&lt; endl;
<a name="l01092"></a>01092   oIndDriver &lt;&lt; <span class="stringliteral">"         return ret;"</span> &lt;&lt; endl;
<a name="l01093"></a>01093   oIndDriver &lt;&lt; <span class="stringliteral">"      }"</span> &lt;&lt; endl;
<a name="l01094"></a>01094   oIndDriver &lt;&lt; <span class="stringliteral">"      oResults &lt;&lt; \"&lt;?xml version=\\\"1.0\\\"?&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01095"></a>01095   oIndDriver &lt;&lt; <span class="stringliteral">"      oResults &lt;&lt; \"&lt;spkreport&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01096"></a>01096   oIndDriver &lt;&lt; <span class="stringliteral">"      oResults &lt;&lt; \"&lt;error_list length=\\\"\" &lt;&lt; 1 &lt;&lt; \"\\\"&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01097"></a>01097   oIndDriver &lt;&lt; <span class="stringliteral">"      SpkError e( SpkError::SPK_UNKNOWN_ERR, \"An unknown exception occurred.\", __LINE__, __FILE__ );"</span> &lt;&lt; endl;
<a name="l01098"></a>01098   oIndDriver &lt;&lt; <span class="stringliteral">"      oResults &lt;&lt; e &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01099"></a>01099   oIndDriver &lt;&lt; <span class="stringliteral">"      oResults &lt;&lt; \"&lt;/error_list&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01100"></a>01100   oIndDriver &lt;&lt; <span class="stringliteral">"      oResults &lt;&lt; \"&lt;/spkreport&gt;\" &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01101"></a>01101   oIndDriver &lt;&lt; <span class="stringliteral">"      oResults.close();"</span> &lt;&lt; endl;
<a name="l01102"></a>01102   oIndDriver &lt;&lt; <span class="stringliteral">"      ret = UNKNOWN_ERROR;"</span> &lt;&lt; endl;
<a name="l01103"></a>01103   oIndDriver &lt;&lt; <span class="stringliteral">"   }"</span> &lt;&lt; endl;
<a name="l01104"></a>01104   oIndDriver &lt;&lt; endl;
<a name="l01105"></a>01105   oIndDriver &lt;&lt; <span class="stringliteral">"   if(isUsingPvm)"</span> &lt;&lt; endl;
<a name="l01106"></a>01106   oIndDriver &lt;&lt; <span class="stringliteral">"      finish(ret);"</span> &lt;&lt; endl;
<a name="l01107"></a>01107   oIndDriver &lt;&lt; <span class="stringliteral">"   else"</span> &lt;&lt; endl;
<a name="l01108"></a>01108   oIndDriver &lt;&lt; <span class="stringliteral">"      cout &lt;&lt; \"exit code = \" &lt;&lt; ret &lt;&lt; endl;"</span> &lt;&lt; endl;
<a name="l01109"></a>01109   oIndDriver &lt;&lt; <span class="stringliteral">"   fclose( stdout );"</span> &lt;&lt; endl;
<a name="l01110"></a>01110   oIndDriver &lt;&lt; <span class="stringliteral">"   fclose( stderr );"</span> &lt;&lt; endl;
<a name="l01111"></a>01111   oIndDriver &lt;&lt; <span class="stringliteral">"   return ret;"</span> &lt;&lt; endl;
<a name="l01112"></a>01112 
<a name="l01113"></a>01113   oIndDriver &lt;&lt; <span class="stringliteral">"}"</span> &lt;&lt; endl;
<a name="l01114"></a>01114   oIndDriver.close();
<a name="l01115"></a>01115 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue May 20 15:28:22 2008 for SPK Compiler API Documentation by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
